const tape = require('tape')
const Pipe = require('../')

tape('tests', t => {
  let p = new Pipe(Buffer.from([1, 2, 3, 4]))
  p.write(Buffer.from([99]))

  t.deepEquals(p.buffer, Buffer.from([1, 2, 3, 4, 99]))

  const buf = p.read(3)

  t.deepEquals(buf, Buffer.from([1, 2, 3]))

  p = new Pipe()
  p.write(Buffer.from([99]))

  t.deepEquals(p.buffer, Buffer.from([99]))
  t.end()
})
