var T5=Object.create;var Ol=Object.defineProperty;var M5=Object.getOwnPropertyDescriptor;var I5=Object.getOwnPropertyNames;var O5=Object.getPrototypeOf,C5=Object.prototype.hasOwnProperty;var B5=(r,e,t)=>e in r?Ol(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var P=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var R5=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of I5(e))!C5.call(r,i)&&i!==t&&Ol(r,i,{get:()=>e[i],enumerable:!(n=M5(e,i))||n.enumerable});return r};var bt=(r,e,t)=>(t=r!=null?T5(O5(r)):{},R5(e||!r||!r.__esModule?Ol(t,"default",{value:r,enumerable:!0}):t,r));var ra=(r,e,t)=>(B5(r,typeof e!="symbol"?e+"":e,t),t);var Bl=P((Pg,qf)=>{(function(r){"use strict";var e,t=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,i=Math.floor,o="[BigNumber Error] ",a=o+"Number primitive has more than 15 significant digits: ",c=1e14,y=14,m=9007199254740991,_=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],S=1e7,I=1e9;function E(k){var L,W,A,M=F.prototype={constructor:F,toString:null,valueOf:null},x=new F(1),u=20,p=4,h=-7,s=21,f=-1e7,g=1e7,v=!1,d=1,l=0,w={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},T="0123456789abcdefghijklmnopqrstuvwxyz",b=!0;function F(O,B){var R,G,z,U,H,V,$,J,Y=this;if(!(Y instanceof F))return new F(O,B);if(B==null){if(O&&O._isBigNumber===!0){Y.s=O.s,!O.c||O.e>g?Y.c=Y.e=null:O.e<f?Y.c=[Y.e=0]:(Y.e=O.e,Y.c=O.c.slice());return}if((V=typeof O=="number")&&O*0==0){if(Y.s=1/O<0?(O=-O,-1):1,O===~~O){for(U=0,H=O;H>=10;H/=10,U++);U>g?Y.c=Y.e=null:(Y.e=U,Y.c=[O]);return}J=String(O)}else{if(!t.test(J=String(O)))return A(Y,J,V);Y.s=J.charCodeAt(0)==45?(J=J.slice(1),-1):1}(U=J.indexOf("."))>-1&&(J=J.replace(".","")),(H=J.search(/e/i))>0?(U<0&&(U=H),U+=+J.slice(H+1),J=J.substring(0,H)):U<0&&(U=J.length)}else{if(q(B,2,T.length,"Base"),B==10&&b)return Y=new F(O),fe(Y,u+Y.e+1,p);if(J=String(O),V=typeof O=="number"){if(O*0!=0)return A(Y,J,V,B);if(Y.s=1/O<0?(J=J.slice(1),-1):1,F.DEBUG&&J.replace(/^0\.0*|\./,"").length>15)throw Error(a+O)}else Y.s=J.charCodeAt(0)===45?(J=J.slice(1),-1):1;for(R=T.slice(0,B),U=H=0,$=J.length;H<$;H++)if(R.indexOf(G=J.charAt(H))<0){if(G=="."){if(H>U){U=$;continue}}else if(!z&&(J==J.toUpperCase()&&(J=J.toLowerCase())||J==J.toLowerCase()&&(J=J.toUpperCase()))){z=!0,H=-1,U=0;continue}return A(Y,String(O),V,B)}V=!1,J=W(J,B,10,Y.s),(U=J.indexOf("."))>-1?J=J.replace(".",""):U=J.length}for(H=0;J.charCodeAt(H)===48;H++);for($=J.length;J.charCodeAt(--$)===48;);if(J=J.slice(H,++$)){if($-=H,V&&F.DEBUG&&$>15&&(O>m||O!==i(O)))throw Error(a+Y.s*O);if((U=U-H-1)>g)Y.c=Y.e=null;else if(U<f)Y.c=[Y.e=0];else{if(Y.e=U,Y.c=[],H=(U+1)%y,U<0&&(H+=y),H<$){for(H&&Y.c.push(+J.slice(0,H)),$-=y;H<$;)Y.c.push(+J.slice(H,H+=y));H=y-(J=J.slice(H)).length}else H-=$;for(;H--;J+="0");Y.c.push(+J)}}else Y.c=[Y.e=0]}F.clone=E,F.ROUND_UP=0,F.ROUND_DOWN=1,F.ROUND_CEIL=2,F.ROUND_FLOOR=3,F.ROUND_HALF_UP=4,F.ROUND_HALF_DOWN=5,F.ROUND_HALF_EVEN=6,F.ROUND_HALF_CEIL=7,F.ROUND_HALF_FLOOR=8,F.EUCLID=9,F.config=F.set=function(O){var B,R;if(O!=null)if(typeof O=="object"){if(O.hasOwnProperty(B="DECIMAL_PLACES")&&(R=O[B],q(R,0,I,B),u=R),O.hasOwnProperty(B="ROUNDING_MODE")&&(R=O[B],q(R,0,8,B),p=R),O.hasOwnProperty(B="EXPONENTIAL_AT")&&(R=O[B],R&&R.pop?(q(R[0],-I,0,B),q(R[1],0,I,B),h=R[0],s=R[1]):(q(R,-I,I,B),h=-(s=R<0?-R:R))),O.hasOwnProperty(B="RANGE"))if(R=O[B],R&&R.pop)q(R[0],-I,-1,B),q(R[1],1,I,B),f=R[0],g=R[1];else if(q(R,-I,I,B),R)f=-(g=R<0?-R:R);else throw Error(o+B+" cannot be zero: "+R);if(O.hasOwnProperty(B="CRYPTO"))if(R=O[B],R===!!R)if(R)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))v=R;else throw v=!R,Error(o+"crypto unavailable");else v=R;else throw Error(o+B+" not true or false: "+R);if(O.hasOwnProperty(B="MODULO_MODE")&&(R=O[B],q(R,0,9,B),d=R),O.hasOwnProperty(B="POW_PRECISION")&&(R=O[B],q(R,0,I,B),l=R),O.hasOwnProperty(B="FORMAT"))if(R=O[B],typeof R=="object")w=R;else throw Error(o+B+" not an object: "+R);if(O.hasOwnProperty(B="ALPHABET"))if(R=O[B],typeof R=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(R))b=R.slice(0,10)=="0123456789",T=R;else throw Error(o+B+" invalid: "+R)}else throw Error(o+"Object expected: "+O);return{DECIMAL_PLACES:u,ROUNDING_MODE:p,EXPONENTIAL_AT:[h,s],RANGE:[f,g],CRYPTO:v,MODULO_MODE:d,POW_PRECISION:l,FORMAT:w,ALPHABET:T}},F.isBigNumber=function(O){if(!O||O._isBigNumber!==!0)return!1;if(!F.DEBUG)return!0;var B,R,G=O.c,z=O.e,U=O.s;e:if({}.toString.call(G)=="[object Array]"){if((U===1||U===-1)&&z>=-I&&z<=I&&z===i(z)){if(G[0]===0){if(z===0&&G.length===1)return!0;break e}if(B=(z+1)%y,B<1&&(B+=y),String(G[0]).length==B){for(B=0;B<G.length;B++)if(R=G[B],R<0||R>=c||R!==i(R))break e;if(R!==0)return!0}}}else if(G===null&&z===null&&(U===null||U===1||U===-1))return!0;throw Error(o+"Invalid BigNumber: "+O)},F.maximum=F.max=function(){return Z(arguments,M.lt)},F.minimum=F.min=function(){return Z(arguments,M.gt)},F.random=function(){var O=9007199254740992,B=Math.random()*O&2097151?function(){return i(Math.random()*O)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(R){var G,z,U,H,V,$=0,J=[],Y=new F(x);if(R==null?R=u:q(R,0,I),H=n(R/y),v)if(crypto.getRandomValues){for(G=crypto.getRandomValues(new Uint32Array(H*=2));$<H;)V=G[$]*131072+(G[$+1]>>>11),V>=9e15?(z=crypto.getRandomValues(new Uint32Array(2)),G[$]=z[0],G[$+1]=z[1]):(J.push(V%1e14),$+=2);$=H/2}else if(crypto.randomBytes){for(G=crypto.randomBytes(H*=7);$<H;)V=(G[$]&31)*281474976710656+G[$+1]*1099511627776+G[$+2]*4294967296+G[$+3]*16777216+(G[$+4]<<16)+(G[$+5]<<8)+G[$+6],V>=9e15?crypto.randomBytes(7).copy(G,$):(J.push(V%1e14),$+=7);$=H/7}else throw v=!1,Error(o+"crypto unavailable");if(!v)for(;$<H;)V=B(),V<9e15&&(J[$++]=V%1e14);for(H=J[--$],R%=y,H&&R&&(V=_[y-R],J[$]=i(H/V)*V);J[$]===0;J.pop(),$--);if($<0)J=[U=0];else{for(U=-1;J[0]===0;J.splice(0,1),U-=y);for($=1,V=J[0];V>=10;V/=10,$++);$<y&&(U-=y-$)}return Y.e=U,Y.c=J,Y}}(),F.sum=function(){for(var O=1,B=arguments,R=new F(B[0]);O<B.length;)R=R.plus(B[O++]);return R},W=function(){var O="0123456789";function B(R,G,z,U){for(var H,V=[0],$,J=0,Y=R.length;J<Y;){for($=V.length;$--;V[$]*=G);for(V[0]+=U.indexOf(R.charAt(J++)),H=0;H<V.length;H++)V[H]>z-1&&(V[H+1]==null&&(V[H+1]=0),V[H+1]+=V[H]/z|0,V[H]%=z)}return V.reverse()}return function(R,G,z,U,H){var V,$,J,Y,ee,se,ae,ie,ce=R.indexOf("."),_e=u,ue=p;for(ce>=0&&(Y=l,l=0,R=R.replace(".",""),ie=new F(G),se=ie.pow(R.length-ce),l=Y,ie.c=B(oe(N(se.c),se.e,"0"),10,z,O),ie.e=ie.c.length),ae=B(R,G,z,H?(V=T,O):(V=O,T)),J=Y=ae.length;ae[--Y]==0;ae.pop());if(!ae[0])return V.charAt(0);if(ce<0?--J:(se.c=ae,se.e=J,se.s=U,se=L(se,ie,_e,ue,z),ae=se.c,ee=se.r,J=se.e),$=J+_e+1,ce=ae[$],Y=z/2,ee=ee||$<0||ae[$+1]!=null,ee=ue<4?(ce!=null||ee)&&(ue==0||ue==(se.s<0?3:2)):ce>Y||ce==Y&&(ue==4||ee||ue==6&&ae[$-1]&1||ue==(se.s<0?8:7)),$<1||!ae[0])R=ee?oe(V.charAt(1),-_e,V.charAt(0)):V.charAt(0);else{if(ae.length=$,ee)for(--z;++ae[--$]>z;)ae[$]=0,$||(++J,ae=[1].concat(ae));for(Y=ae.length;!ae[--Y];);for(ce=0,R="";ce<=Y;R+=V.charAt(ae[ce++]));R=oe(R,J,V.charAt(0))}return R}}(),L=function(){function O(G,z,U){var H,V,$,J,Y=0,ee=G.length,se=z%S,ae=z/S|0;for(G=G.slice();ee--;)$=G[ee]%S,J=G[ee]/S|0,H=ae*$+J*se,V=se*$+H%S*S+Y,Y=(V/U|0)+(H/S|0)+ae*J,G[ee]=V%U;return Y&&(G=[Y].concat(G)),G}function B(G,z,U,H){var V,$;if(U!=H)$=U>H?1:-1;else for(V=$=0;V<U;V++)if(G[V]!=z[V]){$=G[V]>z[V]?1:-1;break}return $}function R(G,z,U,H){for(var V=0;U--;)G[U]-=V,V=G[U]<z[U]?1:0,G[U]=V*H+G[U]-z[U];for(;!G[0]&&G.length>1;G.splice(0,1));}return function(G,z,U,H,V){var $,J,Y,ee,se,ae,ie,ce,_e,ue,le,je,ye,me,tt,pe,ge,ze=G.s==z.s?1:-1,de=G.c,he=z.c;if(!de||!de[0]||!he||!he[0])return new F(!G.s||!z.s||(de?he&&de[0]==he[0]:!he)?NaN:de&&de[0]==0||!he?ze*0:ze/0);for(ce=new F(ze),_e=ce.c=[],J=G.e-z.e,ze=U+J+1,V||(V=c,J=C(G.e/y)-C(z.e/y),ze=ze/y|0),Y=0;he[Y]==(de[Y]||0);Y++);if(he[Y]>(de[Y]||0)&&J--,ze<0)_e.push(1),ee=!0;else{for(me=de.length,pe=he.length,Y=0,ze+=2,se=i(V/(he[0]+1)),se>1&&(he=O(he,se,V),de=O(de,se,V),pe=he.length,me=de.length),ye=pe,ue=de.slice(0,pe),le=ue.length;le<pe;ue[le++]=0);ge=he.slice(),ge=[0].concat(ge),tt=he[0],he[1]>=V/2&&tt++;do{if(se=0,$=B(he,ue,pe,le),$<0){if(je=ue[0],pe!=le&&(je=je*V+(ue[1]||0)),se=i(je/tt),se>1)for(se>=V&&(se=V-1),ae=O(he,se,V),ie=ae.length,le=ue.length;B(ae,ue,ie,le)==1;)se--,R(ae,pe<ie?ge:he,ie,V),ie=ae.length,$=1;else se==0&&($=se=1),ae=he.slice(),ie=ae.length;if(ie<le&&(ae=[0].concat(ae)),R(ue,ae,le,V),le=ue.length,$==-1)for(;B(he,ue,pe,le)<1;)se++,R(ue,pe<le?ge:he,le,V),le=ue.length}else $===0&&(se++,ue=[0]);_e[Y++]=se,ue[0]?ue[le++]=de[ye]||0:(ue=[de[ye]],le=1)}while((ye++<me||ue[0]!=null)&&ze--);ee=ue[0]!=null,_e[0]||_e.splice(0,1)}if(V==c){for(Y=1,ze=_e[0];ze>=10;ze/=10,Y++);fe(ce,U+(ce.e=Y+J*y-1)+1,H,ee)}else ce.e=J,ce.r=+ee;return ce}}();function X(O,B,R,G){var z,U,H,V,$;if(R==null?R=p:q(R,0,8),!O.c)return O.toString();if(z=O.c[0],H=O.e,B==null)$=N(O.c),$=G==1||G==2&&(H<=h||H>=s)?Q($,H):oe($,H,"0");else if(O=fe(new F(O),B,R),U=O.e,$=N(O.c),V=$.length,G==1||G==2&&(B<=U||U<=h)){for(;V<B;$+="0",V++);$=Q($,U)}else if(B-=H,$=oe($,U,"0"),U+1>V){if(--B>0)for($+=".";B--;$+="0");}else if(B+=U-V,B>0)for(U+1==V&&($+=".");B--;$+="0");return O.s<0&&z?"-"+$:$}function Z(O,B){for(var R,G=1,z=new F(O[0]);G<O.length;G++)if(R=new F(O[G]),R.s)B.call(z,R)&&(z=R);else{z=R;break}return z}function re(O,B,R){for(var G=1,z=B.length;!B[--z];B.pop());for(z=B[0];z>=10;z/=10,G++);return(R=G+R*y-1)>g?O.c=O.e=null:R<f?O.c=[O.e=0]:(O.e=R,O.c=B),O}A=function(){var O=/^(-?)0([xbo])(?=\w[\w.]*$)/i,B=/^([^.]+)\.$/,R=/^\.([^.]+)$/,G=/^-?(Infinity|NaN)$/,z=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(U,H,V,$){var J,Y=V?H:H.replace(z,"");if(G.test(Y))U.s=isNaN(Y)?null:Y<0?-1:1;else{if(!V&&(Y=Y.replace(O,function(ee,se,ae){return J=(ae=ae.toLowerCase())=="x"?16:ae=="b"?2:8,!$||$==J?se:ee}),$&&(J=$,Y=Y.replace(B,"$1").replace(R,"0.$1")),H!=Y))return new F(Y,J);if(F.DEBUG)throw Error(o+"Not a"+($?" base "+$:"")+" number: "+H);U.s=null}U.c=U.e=null}}();function fe(O,B,R,G){var z,U,H,V,$,J,Y,ee=O.c,se=_;if(ee){e:{for(z=1,V=ee[0];V>=10;V/=10,z++);if(U=B-z,U<0)U+=y,H=B,$=ee[J=0],Y=$/se[z-H-1]%10|0;else if(J=n((U+1)/y),J>=ee.length)if(G){for(;ee.length<=J;ee.push(0));$=Y=0,z=1,U%=y,H=U-y+1}else break e;else{for($=V=ee[J],z=1;V>=10;V/=10,z++);U%=y,H=U-y+z,Y=H<0?0:$/se[z-H-1]%10|0}if(G=G||B<0||ee[J+1]!=null||(H<0?$:$%se[z-H-1]),G=R<4?(Y||G)&&(R==0||R==(O.s<0?3:2)):Y>5||Y==5&&(R==4||G||R==6&&(U>0?H>0?$/se[z-H]:0:ee[J-1])%10&1||R==(O.s<0?8:7)),B<1||!ee[0])return ee.length=0,G?(B-=O.e+1,ee[0]=se[(y-B%y)%y],O.e=-B||0):ee[0]=O.e=0,O;if(U==0?(ee.length=J,V=1,J--):(ee.length=J+1,V=se[y-U],ee[J]=H>0?i($/se[z-H]%se[H])*V:0),G)for(;;)if(J==0){for(U=1,H=ee[0];H>=10;H/=10,U++);for(H=ee[0]+=V,V=1;H>=10;H/=10,V++);U!=V&&(O.e++,ee[0]==c&&(ee[0]=1));break}else{if(ee[J]+=V,ee[J]!=c)break;ee[J--]=0,V=1}for(U=ee.length;ee[--U]===0;ee.pop());}O.e>g?O.c=O.e=null:O.e<f&&(O.c=[O.e=0])}return O}function te(O){var B,R=O.e;return R===null?O.toString():(B=N(O.c),B=R<=h||R>=s?Q(B,R):oe(B,R,"0"),O.s<0?"-"+B:B)}return M.absoluteValue=M.abs=function(){var O=new F(this);return O.s<0&&(O.s=1),O},M.comparedTo=function(O,B){return j(this,new F(O,B))},M.decimalPlaces=M.dp=function(O,B){var R,G,z,U=this;if(O!=null)return q(O,0,I),B==null?B=p:q(B,0,8),fe(new F(U),O+U.e+1,B);if(!(R=U.c))return null;if(G=((z=R.length-1)-C(this.e/y))*y,z=R[z])for(;z%10==0;z/=10,G--);return G<0&&(G=0),G},M.dividedBy=M.div=function(O,B){return L(this,new F(O,B),u,p)},M.dividedToIntegerBy=M.idiv=function(O,B){return L(this,new F(O,B),0,1)},M.exponentiatedBy=M.pow=function(O,B){var R,G,z,U,H,V,$,J,Y,ee=this;if(O=new F(O),O.c&&!O.isInteger())throw Error(o+"Exponent not an integer: "+te(O));if(B!=null&&(B=new F(B)),V=O.e>14,!ee.c||!ee.c[0]||ee.c[0]==1&&!ee.e&&ee.c.length==1||!O.c||!O.c[0])return Y=new F(Math.pow(+te(ee),V?2-D(O):+te(O))),B?Y.mod(B):Y;if($=O.s<0,B){if(B.c?!B.c[0]:!B.s)return new F(NaN);G=!$&&ee.isInteger()&&B.isInteger(),G&&(ee=ee.mod(B))}else{if(O.e>9&&(ee.e>0||ee.e<-1||(ee.e==0?ee.c[0]>1||V&&ee.c[1]>=24e7:ee.c[0]<8e13||V&&ee.c[0]<=9999975e7)))return U=ee.s<0&&D(O)?-0:0,ee.e>-1&&(U=1/U),new F($?1/U:U);l&&(U=n(l/y+2))}for(V?(R=new F(.5),$&&(O.s=1),J=D(O)):(z=Math.abs(+te(O)),J=z%2),Y=new F(x);;){if(J){if(Y=Y.times(ee),!Y.c)break;U?Y.c.length>U&&(Y.c.length=U):G&&(Y=Y.mod(B))}if(z){if(z=i(z/2),z===0)break;J=z%2}else if(O=O.times(R),fe(O,O.e+1,1),O.e>14)J=D(O);else{if(z=+te(O),z===0)break;J=z%2}ee=ee.times(ee),U?ee.c&&ee.c.length>U&&(ee.c.length=U):G&&(ee=ee.mod(B))}return G?Y:($&&(Y=x.div(Y)),B?Y.mod(B):U?fe(Y,l,p,H):Y)},M.integerValue=function(O){var B=new F(this);return O==null?O=p:q(O,0,8),fe(B,B.e+1,O)},M.isEqualTo=M.eq=function(O,B){return j(this,new F(O,B))===0},M.isFinite=function(){return!!this.c},M.isGreaterThan=M.gt=function(O,B){return j(this,new F(O,B))>0},M.isGreaterThanOrEqualTo=M.gte=function(O,B){return(B=j(this,new F(O,B)))===1||B===0},M.isInteger=function(){return!!this.c&&C(this.e/y)>this.c.length-2},M.isLessThan=M.lt=function(O,B){return j(this,new F(O,B))<0},M.isLessThanOrEqualTo=M.lte=function(O,B){return(B=j(this,new F(O,B)))===-1||B===0},M.isNaN=function(){return!this.s},M.isNegative=function(){return this.s<0},M.isPositive=function(){return this.s>0},M.isZero=function(){return!!this.c&&this.c[0]==0},M.minus=function(O,B){var R,G,z,U,H=this,V=H.s;if(O=new F(O,B),B=O.s,!V||!B)return new F(NaN);if(V!=B)return O.s=-B,H.plus(O);var $=H.e/y,J=O.e/y,Y=H.c,ee=O.c;if(!$||!J){if(!Y||!ee)return Y?(O.s=-B,O):new F(ee?H:NaN);if(!Y[0]||!ee[0])return ee[0]?(O.s=-B,O):new F(Y[0]?H:p==3?-0:0)}if($=C($),J=C(J),Y=Y.slice(),V=$-J){for((U=V<0)?(V=-V,z=Y):(J=$,z=ee),z.reverse(),B=V;B--;z.push(0));z.reverse()}else for(G=(U=(V=Y.length)<(B=ee.length))?V:B,V=B=0;B<G;B++)if(Y[B]!=ee[B]){U=Y[B]<ee[B];break}if(U&&(z=Y,Y=ee,ee=z,O.s=-O.s),B=(G=ee.length)-(R=Y.length),B>0)for(;B--;Y[R++]=0);for(B=c-1;G>V;){if(Y[--G]<ee[G]){for(R=G;R&&!Y[--R];Y[R]=B);--Y[R],Y[G]+=c}Y[G]-=ee[G]}for(;Y[0]==0;Y.splice(0,1),--J);return Y[0]?re(O,Y,J):(O.s=p==3?-1:1,O.c=[O.e=0],O)},M.modulo=M.mod=function(O,B){var R,G,z=this;return O=new F(O,B),!z.c||!O.s||O.c&&!O.c[0]?new F(NaN):!O.c||z.c&&!z.c[0]?new F(z):(d==9?(G=O.s,O.s=1,R=L(z,O,0,3),O.s=G,R.s*=G):R=L(z,O,0,d),O=z.minus(R.times(O)),!O.c[0]&&d==1&&(O.s=z.s),O)},M.multipliedBy=M.times=function(O,B){var R,G,z,U,H,V,$,J,Y,ee,se,ae,ie,ce,_e,ue=this,le=ue.c,je=(O=new F(O,B)).c;if(!le||!je||!le[0]||!je[0])return!ue.s||!O.s||le&&!le[0]&&!je||je&&!je[0]&&!le?O.c=O.e=O.s=null:(O.s*=ue.s,!le||!je?O.c=O.e=null:(O.c=[0],O.e=0)),O;for(G=C(ue.e/y)+C(O.e/y),O.s*=ue.s,$=le.length,ee=je.length,$<ee&&(ie=le,le=je,je=ie,z=$,$=ee,ee=z),z=$+ee,ie=[];z--;ie.push(0));for(ce=c,_e=S,z=ee;--z>=0;){for(R=0,se=je[z]%_e,ae=je[z]/_e|0,H=$,U=z+H;U>z;)J=le[--H]%_e,Y=le[H]/_e|0,V=ae*J+Y*se,J=se*J+V%_e*_e+ie[U]+R,R=(J/ce|0)+(V/_e|0)+ae*Y,ie[U--]=J%ce;ie[U]=R}return R?++G:ie.splice(0,1),re(O,ie,G)},M.negated=function(){var O=new F(this);return O.s=-O.s||null,O},M.plus=function(O,B){var R,G=this,z=G.s;if(O=new F(O,B),B=O.s,!z||!B)return new F(NaN);if(z!=B)return O.s=-B,G.minus(O);var U=G.e/y,H=O.e/y,V=G.c,$=O.c;if(!U||!H){if(!V||!$)return new F(z/0);if(!V[0]||!$[0])return $[0]?O:new F(V[0]?G:z*0)}if(U=C(U),H=C(H),V=V.slice(),z=U-H){for(z>0?(H=U,R=$):(z=-z,R=V),R.reverse();z--;R.push(0));R.reverse()}for(z=V.length,B=$.length,z-B<0&&(R=$,$=V,V=R,B=z),z=0;B;)z=(V[--B]=V[B]+$[B]+z)/c|0,V[B]=c===V[B]?0:V[B]%c;return z&&(V=[z].concat(V),++H),re(O,V,H)},M.precision=M.sd=function(O,B){var R,G,z,U=this;if(O!=null&&O!==!!O)return q(O,1,I),B==null?B=p:q(B,0,8),fe(new F(U),O,B);if(!(R=U.c))return null;if(z=R.length-1,G=z*y+1,z=R[z]){for(;z%10==0;z/=10,G--);for(z=R[0];z>=10;z/=10,G++);}return O&&U.e+1>G&&(G=U.e+1),G},M.shiftedBy=function(O){return q(O,-m,m),this.times("1e"+O)},M.squareRoot=M.sqrt=function(){var O,B,R,G,z,U=this,H=U.c,V=U.s,$=U.e,J=u+4,Y=new F("0.5");if(V!==1||!H||!H[0])return new F(!V||V<0&&(!H||H[0])?NaN:H?U:1/0);if(V=Math.sqrt(+te(U)),V==0||V==1/0?(B=N(H),(B.length+$)%2==0&&(B+="0"),V=Math.sqrt(+B),$=C(($+1)/2)-($<0||$%2),V==1/0?B="5e"+$:(B=V.toExponential(),B=B.slice(0,B.indexOf("e")+1)+$),R=new F(B)):R=new F(V+""),R.c[0]){for($=R.e,V=$+J,V<3&&(V=0);;)if(z=R,R=Y.times(z.plus(L(U,z,J,1))),N(z.c).slice(0,V)===(B=N(R.c)).slice(0,V))if(R.e<$&&--V,B=B.slice(V-3,V+1),B=="9999"||!G&&B=="4999"){if(!G&&(fe(z,z.e+u+2,0),z.times(z).eq(U))){R=z;break}J+=4,V+=4,G=1}else{(!+B||!+B.slice(1)&&B.charAt(0)=="5")&&(fe(R,R.e+u+2,1),O=!R.times(R).eq(U));break}}return fe(R,R.e+u+1,p,O)},M.toExponential=function(O,B){return O!=null&&(q(O,0,I),O++),X(this,O,B,1)},M.toFixed=function(O,B){return O!=null&&(q(O,0,I),O=O+this.e+1),X(this,O,B)},M.toFormat=function(O,B,R){var G,z=this;if(R==null)O!=null&&B&&typeof B=="object"?(R=B,B=null):O&&typeof O=="object"?(R=O,O=B=null):R=w;else if(typeof R!="object")throw Error(o+"Argument not an object: "+R);if(G=z.toFixed(O,B),z.c){var U,H=G.split("."),V=+R.groupSize,$=+R.secondaryGroupSize,J=R.groupSeparator||"",Y=H[0],ee=H[1],se=z.s<0,ae=se?Y.slice(1):Y,ie=ae.length;if($&&(U=V,V=$,$=U,ie-=U),V>0&&ie>0){for(U=ie%V||V,Y=ae.substr(0,U);U<ie;U+=V)Y+=J+ae.substr(U,V);$>0&&(Y+=J+ae.slice(U)),se&&(Y="-"+Y)}G=ee?Y+(R.decimalSeparator||"")+(($=+R.fractionGroupSize)?ee.replace(new RegExp("\\d{"+$+"}\\B","g"),"$&"+(R.fractionGroupSeparator||"")):ee):Y}return(R.prefix||"")+G+(R.suffix||"")},M.toFraction=function(O){var B,R,G,z,U,H,V,$,J,Y,ee,se,ae=this,ie=ae.c;if(O!=null&&(V=new F(O),!V.isInteger()&&(V.c||V.s!==1)||V.lt(x)))throw Error(o+"Argument "+(V.isInteger()?"out of range: ":"not an integer: ")+te(V));if(!ie)return new F(ae);for(B=new F(x),J=R=new F(x),G=$=new F(x),se=N(ie),U=B.e=se.length-ae.e-1,B.c[0]=_[(H=U%y)<0?y+H:H],O=!O||V.comparedTo(B)>0?U>0?B:J:V,H=g,g=1/0,V=new F(se),$.c[0]=0;Y=L(V,B,0,1),z=R.plus(Y.times(G)),z.comparedTo(O)!=1;)R=G,G=z,J=$.plus(Y.times(z=J)),$=z,B=V.minus(Y.times(z=B)),V=z;return z=L(O.minus(R),G,0,1),$=$.plus(z.times(J)),R=R.plus(z.times(G)),$.s=J.s=ae.s,U=U*2,ee=L(J,G,U,p).minus(ae).abs().comparedTo(L($,R,U,p).minus(ae).abs())<1?[J,G]:[$,R],g=H,ee},M.toNumber=function(){return+te(this)},M.toPrecision=function(O,B){return O!=null&&q(O,1,I),X(this,O,B,2)},M.toString=function(O){var B,R=this,G=R.s,z=R.e;return z===null?G?(B="Infinity",G<0&&(B="-"+B)):B="NaN":(O==null?B=z<=h||z>=s?Q(N(R.c),z):oe(N(R.c),z,"0"):O===10&&b?(R=fe(new F(R),u+z+1,p),B=oe(N(R.c),R.e,"0")):(q(O,2,T.length,"Base"),B=W(oe(N(R.c),z,"0"),10,O,G,!0)),G<0&&R.c[0]&&(B="-"+B)),B},M.valueOf=M.toJSON=function(){return te(this)},M._isBigNumber=!0,k!=null&&F.set(k),F}function C(k){var L=k|0;return k>0||k===L?L:L-1}function N(k){for(var L,W,A=1,M=k.length,x=k[0]+"";A<M;){for(L=k[A++]+"",W=y-L.length;W--;L="0"+L);x+=L}for(M=x.length;x.charCodeAt(--M)===48;);return x.slice(0,M+1||1)}function j(k,L){var W,A,M=k.c,x=L.c,u=k.s,p=L.s,h=k.e,s=L.e;if(!u||!p)return null;if(W=M&&!M[0],A=x&&!x[0],W||A)return W?A?0:-p:u;if(u!=p)return u;if(W=u<0,A=h==s,!M||!x)return A?0:!M^W?1:-1;if(!A)return h>s^W?1:-1;for(p=(h=M.length)<(s=x.length)?h:s,u=0;u<p;u++)if(M[u]!=x[u])return M[u]>x[u]^W?1:-1;return h==s?0:h>s^W?1:-1}function q(k,L,W,A){if(k<L||k>W||k!==i(k))throw Error(o+(A||"Argument")+(typeof k=="number"?k<L||k>W?" out of range: ":" not an integer: ":" not a primitive number: ")+String(k))}function D(k){var L=k.c.length-1;return C(k.e/y)==L&&k.c[L]%2!=0}function Q(k,L){return(k.length>1?k.charAt(0)+"."+k.slice(1):k)+(L<0?"e":"e+")+L}function oe(k,L,W){var A,M;if(L<0){for(M=W+".";++L;M+=W);k=M+k}else if(A=k.length,++L>A){for(M=W,L-=A;--L;M+=W);k+=M}else L<A&&(k=k.slice(0,L)+"."+k.slice(L));return k}e=E(),e.default=e.BigNumber=e,typeof define=="function"&&define.amd?define(function(){return e}):typeof qf<"u"&&qf.exports?qf.exports=e:(r||(r=typeof self<"u"&&self?self:window),r.BigNumber=e)})(Pg)});var Ng=P(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});var L5=Bl(),Rl=class{constructor(){this.BigNum=(e,t)=>{let n=L5.BigNumber.clone({DECIMAL_PLACES:t});return new n(e)}}winstonToAr(e,{formatted:t=!1,decimals:n=12,trim:i=!0}={}){let o=this.stringToBigNum(e,n).shiftedBy(-12);return t?o.toFormat(n):o.toFixed(n)}arToWinston(e,{formatted:t=!1}={}){let n=this.stringToBigNum(e).shiftedBy(12);return t?n.toFormat():n.toFixed(0)}compare(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.comparedTo(i)}isEqual(e,t){return this.compare(e,t)===0}isLessThan(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.isLessThan(i)}isGreaterThan(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.isGreaterThan(i)}add(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.plus(t).toFixed(0)}sub(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.minus(t).toFixed(0)}stringToBigNum(e,t=12){return this.BigNum(e,t)}};Pl.default=Rl});var Nl=P((Wq,Lg)=>{"use strict";Lg.exports=function(e,t){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return e.apply(t,i)}}});var xt=P((Hq,Dg)=>{"use strict";var k5=Nl(),kl=Object.prototype.toString,ql=function(r){return function(e){var t=kl.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())}}(Object.create(null));function Ri(r){return r=r.toLowerCase(),function(t){return ql(t)===r}}function Dl(r){return Array.isArray(r)}function Uf(r){return typeof r>"u"}function q5(r){return r!==null&&!Uf(r)&&r.constructor!==null&&!Uf(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}var kg=Ri("ArrayBuffer");function D5(r){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&kg(r.buffer),e}function U5(r){return typeof r=="string"}function j5(r){return typeof r=="number"}function qg(r){return r!==null&&typeof r=="object"}function Df(r){if(ql(r)!=="object")return!1;var e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}var $5=Ri("Date"),W5=Ri("File"),H5=Ri("Blob"),G5=Ri("FileList");function Ul(r){return kl.call(r)==="[object Function]"}function z5(r){return qg(r)&&Ul(r.pipe)}function K5(r){var e="[object FormData]";return r&&(typeof FormData=="function"&&r instanceof FormData||kl.call(r)===e||Ul(r.toString)&&r.toString()===e)}var V5=Ri("URLSearchParams");function J5(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function X5(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function jl(r,e){if(!(r===null||typeof r>"u"))if(typeof r!="object"&&(r=[r]),Dl(r))for(var t=0,n=r.length;t<n;t++)e.call(null,r[t],t,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.call(null,r[i],i,r)}function Ll(){var r={};function e(i,o){Df(r[o])&&Df(i)?r[o]=Ll(r[o],i):Df(i)?r[o]=Ll({},i):Dl(i)?r[o]=i.slice():r[o]=i}for(var t=0,n=arguments.length;t<n;t++)jl(arguments[t],e);return r}function Y5(r,e,t){return jl(e,function(i,o){t&&typeof i=="function"?r[o]=k5(i,t):r[o]=i}),r}function Q5(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}function Z5(r,e,t,n){r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,t&&Object.assign(r.prototype,t)}function eS(r,e,t){var n,i,o,a={};e=e||{};do{for(n=Object.getOwnPropertyNames(r),i=n.length;i-- >0;)o=n[i],a[o]||(e[o]=r[o],a[o]=!0);r=Object.getPrototypeOf(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e}function tS(r,e,t){r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;var n=r.indexOf(e,t);return n!==-1&&n===t}function rS(r){if(!r)return null;var e=r.length;if(Uf(e))return null;for(var t=new Array(e);e-- >0;)t[e]=r[e];return t}var nS=function(r){return function(e){return r&&e instanceof r}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array));Dg.exports={isArray:Dl,isArrayBuffer:kg,isBuffer:q5,isFormData:K5,isArrayBufferView:D5,isString:U5,isNumber:j5,isObject:qg,isPlainObject:Df,isUndefined:Uf,isDate:$5,isFile:W5,isBlob:H5,isFunction:Ul,isStream:z5,isURLSearchParams:V5,isStandardBrowserEnv:X5,forEach:jl,merge:Ll,extend:Y5,trim:J5,stripBOM:Q5,inherits:Z5,toFlatObject:eS,kindOf:ql,kindOfTest:Ri,endsWith:tS,toArray:rS,isTypedArray:nS,isFileList:G5}});var $l=P((Gq,jg)=>{"use strict";var Eo=xt();function Ug(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}jg.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(Eo.isURLSearchParams(t))i=t.toString();else{var o=[];Eo.forEach(t,function(y,m){y===null||typeof y>"u"||(Eo.isArray(y)?m=m+"[]":y=[y],Eo.forEach(y,function(S){Eo.isDate(S)?S=S.toISOString():Eo.isObject(S)&&(S=JSON.stringify(S)),o.push(Ug(m)+"="+Ug(S))}))}),i=o.join("&")}if(i){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var Wg=P((zq,$g)=>{"use strict";var iS=xt();function jf(){this.handlers=[]}jf.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};jf.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};jf.prototype.forEach=function(e){iS.forEach(this.handlers,function(n){n!==null&&e(n)})};$g.exports=jf});var Gg=P((Kq,Hg)=>{"use strict";var oS=xt();Hg.exports=function(e,t){oS.forEach(e,function(i,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[o])})}});var Pi=P((Vq,Jg)=>{"use strict";var zg=xt();function Ao(r,e,t,n,i){Error.call(this),this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),i&&(this.response=i)}zg.inherits(Ao,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Kg=Ao.prototype,Vg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(r){Vg[r]={value:r}});Object.defineProperties(Ao,Vg);Object.defineProperty(Kg,"isAxiosError",{value:!0});Ao.from=function(r,e,t,n,i,o){var a=Object.create(Kg);return zg.toFlatObject(r,a,function(y){return y!==Error.prototype}),Ao.call(a,r.message,e,t,n,i),a.name=r.name,o&&Object.assign(a,o),a};Jg.exports=Ao});var Wl=P((Jq,Xg)=>{"use strict";Xg.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}});var Hl=P((Xq,Yg)=>{"use strict";var Or=xt();function sS(r,e){e=e||new FormData;var t=[];function n(o){return o===null?"":Or.isDate(o)?o.toISOString():Or.isArrayBuffer(o)||Or.isTypedArray(o)?typeof Blob=="function"?new Blob([o]):Buffer.from(o):o}function i(o,a){if(Or.isPlainObject(o)||Or.isArray(o)){if(t.indexOf(o)!==-1)throw Error("Circular reference detected in "+a);t.push(o),Or.forEach(o,function(y,m){if(!Or.isUndefined(y)){var _=a?a+"."+m:m,S;if(y&&!a&&typeof y=="object"){if(Or.endsWith(m,"{}"))y=JSON.stringify(y);else if(Or.endsWith(m,"[]")&&(S=Or.toArray(y))){S.forEach(function(I){!Or.isUndefined(I)&&e.append(_,n(I))});return}}i(y,_)}}),t.pop()}else e.append(a,n(o))}return i(r),e}Yg.exports=sS});var Zg=P((Yq,Qg)=>{"use strict";var Gl=Pi();Qg.exports=function(e,t,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new Gl("Request failed with status code "+n.status,[Gl.ERR_BAD_REQUEST,Gl.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}});var t1=P((Qq,e1)=>{"use strict";var $f=xt();e1.exports=$f.isStandardBrowserEnv()?function(){return{write:function(t,n,i,o,a,c){var y=[];y.push(t+"="+encodeURIComponent(n)),$f.isNumber(i)&&y.push("expires="+new Date(i).toGMTString()),$f.isString(o)&&y.push("path="+o),$f.isString(a)&&y.push("domain="+a),c===!0&&y.push("secure"),document.cookie=y.join("; ")},read:function(t){var n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var n1=P((Zq,r1)=>{"use strict";r1.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}});var o1=P((eD,i1)=>{"use strict";i1.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}});var zl=P((tD,s1)=>{"use strict";var aS=n1(),fS=o1();s1.exports=function(e,t){return e&&!aS(t)?fS(e,t):t}});var f1=P((rD,a1)=>{"use strict";var Kl=xt(),cS=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];a1.exports=function(e){var t={},n,i,o;return e&&Kl.forEach(e.split(`
`),function(c){if(o=c.indexOf(":"),n=Kl.trim(c.substr(0,o)).toLowerCase(),i=Kl.trim(c.substr(o+1)),n){if(t[n]&&cS.indexOf(n)>=0)return;n==="set-cookie"?t[n]=(t[n]?t[n]:[]).concat([i]):t[n]=t[n]?t[n]+", "+i:i}}),t}});var l1=P((nD,u1)=>{"use strict";var c1=xt();u1.exports=c1.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),n;function i(o){var a=o;return e&&(t.setAttribute("href",a),a=t.href),t.setAttribute("href",a),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(a){var c=c1.isString(a)?i(a):a;return c.protocol===n.protocol&&c.host===n.host}}():function(){return function(){return!0}}()});var na=P((iD,d1)=>{"use strict";var Vl=Pi(),uS=xt();function h1(r){Vl.call(this,r??"canceled",Vl.ERR_CANCELED),this.name="CanceledError"}uS.inherits(h1,Vl,{__CANCEL__:!0});d1.exports=h1});var g1=P((oD,p1)=>{"use strict";p1.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}});var Jl=P((sD,y1)=>{"use strict";var ia=xt(),lS=Zg(),hS=t1(),dS=$l(),pS=zl(),gS=f1(),yS=l1(),mS=Wl(),dn=Pi(),bS=na(),vS=g1();y1.exports=function(e){return new Promise(function(n,i){var o=e.data,a=e.headers,c=e.responseType,y;function m(){e.cancelToken&&e.cancelToken.unsubscribe(y),e.signal&&e.signal.removeEventListener("abort",y)}ia.isFormData(o)&&ia.isStandardBrowserEnv()&&delete a["Content-Type"];var _=new XMLHttpRequest;if(e.auth){var S=e.auth.username||"",I=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.Authorization="Basic "+btoa(S+":"+I)}var E=pS(e.baseURL,e.url);_.open(e.method.toUpperCase(),dS(E,e.params,e.paramsSerializer),!0),_.timeout=e.timeout;function C(){if(!!_){var q="getAllResponseHeaders"in _?gS(_.getAllResponseHeaders()):null,D=!c||c==="text"||c==="json"?_.responseText:_.response,Q={data:D,status:_.status,statusText:_.statusText,headers:q,config:e,request:_};lS(function(k){n(k),m()},function(k){i(k),m()},Q),_=null}}if("onloadend"in _?_.onloadend=C:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(C)},_.onabort=function(){!_||(i(new dn("Request aborted",dn.ECONNABORTED,e,_)),_=null)},_.onerror=function(){i(new dn("Network Error",dn.ERR_NETWORK,e,_,_)),_=null},_.ontimeout=function(){var D=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",Q=e.transitional||mS;e.timeoutErrorMessage&&(D=e.timeoutErrorMessage),i(new dn(D,Q.clarifyTimeoutError?dn.ETIMEDOUT:dn.ECONNABORTED,e,_)),_=null},ia.isStandardBrowserEnv()){var N=(e.withCredentials||yS(E))&&e.xsrfCookieName?hS.read(e.xsrfCookieName):void 0;N&&(a[e.xsrfHeaderName]=N)}"setRequestHeader"in _&&ia.forEach(a,function(D,Q){typeof o>"u"&&Q.toLowerCase()==="content-type"?delete a[Q]:_.setRequestHeader(Q,D)}),ia.isUndefined(e.withCredentials)||(_.withCredentials=!!e.withCredentials),c&&c!=="json"&&(_.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&_.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&_.upload&&_.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(y=function(q){!_||(i(!q||q&&q.type?new bS:q),_.abort(),_=null)},e.cancelToken&&e.cancelToken.subscribe(y),e.signal&&(e.signal.aborted?y():e.signal.addEventListener("abort",y))),o||(o=null);var j=vS(E);if(j&&["http","https","file"].indexOf(j)===-1){i(new dn("Unsupported protocol "+j+":",dn.ERR_BAD_REQUEST,e));return}_.send(o)})}});var b1=P((aD,m1)=>{m1.exports=null});var Hf=P((fD,_1)=>{"use strict";var _t=xt(),v1=Gg(),w1=Pi(),wS=Wl(),xS=Hl(),_S={"Content-Type":"application/x-www-form-urlencoded"};function x1(r,e){!_t.isUndefined(r)&&_t.isUndefined(r["Content-Type"])&&(r["Content-Type"]=e)}function SS(){var r;return typeof XMLHttpRequest<"u"?r=Jl():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(r=Jl()),r}function ES(r,e,t){if(_t.isString(r))try{return(e||JSON.parse)(r),_t.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}var Wf={transitional:wS,adapter:SS(),transformRequest:[function(e,t){if(v1(t,"Accept"),v1(t,"Content-Type"),_t.isFormData(e)||_t.isArrayBuffer(e)||_t.isBuffer(e)||_t.isStream(e)||_t.isFile(e)||_t.isBlob(e))return e;if(_t.isArrayBufferView(e))return e.buffer;if(_t.isURLSearchParams(e))return x1(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n=_t.isObject(e),i=t&&t["Content-Type"],o;if((o=_t.isFileList(e))||n&&i==="multipart/form-data"){var a=this.env&&this.env.FormData;return xS(o?{"files[]":e}:e,a&&new a)}else if(n||i==="application/json")return x1(t,"application/json"),ES(e);return e}],transformResponse:[function(e){var t=this.transitional||Wf.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,o=!n&&this.responseType==="json";if(o||i&&_t.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?w1.from(a,w1.ERR_BAD_RESPONSE,this,null,this.response):a}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:b1()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};_t.forEach(["delete","get","head"],function(e){Wf.headers[e]={}});_t.forEach(["post","put","patch"],function(e){Wf.headers[e]=_t.merge(_S)});_1.exports=Wf});var E1=P((cD,S1)=>{"use strict";var AS=xt(),FS=Hf();S1.exports=function(e,t,n){var i=this||FS;return AS.forEach(n,function(a){e=a.call(i,e,t)}),e}});var Xl=P((uD,A1)=>{"use strict";A1.exports=function(e){return!!(e&&e.__CANCEL__)}});var M1=P((lD,T1)=>{"use strict";var F1=xt(),Yl=E1(),TS=Xl(),MS=Hf(),IS=na();function Ql(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new IS}T1.exports=function(e){Ql(e),e.headers=e.headers||{},e.data=Yl.call(e,e.data,e.headers,e.transformRequest),e.headers=F1.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),F1.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var t=e.adapter||MS.adapter;return t(e).then(function(i){return Ql(e),i.data=Yl.call(e,i.data,i.headers,e.transformResponse),i},function(i){return TS(i)||(Ql(e),i&&i.response&&(i.response.data=Yl.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var Zl=P((hD,I1)=>{"use strict";var Yt=xt();I1.exports=function(e,t){t=t||{};var n={};function i(_,S){return Yt.isPlainObject(_)&&Yt.isPlainObject(S)?Yt.merge(_,S):Yt.isPlainObject(S)?Yt.merge({},S):Yt.isArray(S)?S.slice():S}function o(_){if(Yt.isUndefined(t[_])){if(!Yt.isUndefined(e[_]))return i(void 0,e[_])}else return i(e[_],t[_])}function a(_){if(!Yt.isUndefined(t[_]))return i(void 0,t[_])}function c(_){if(Yt.isUndefined(t[_])){if(!Yt.isUndefined(e[_]))return i(void 0,e[_])}else return i(void 0,t[_])}function y(_){if(_ in t)return i(e[_],t[_]);if(_ in e)return i(void 0,e[_])}var m={url:a,method:a,data:a,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:y};return Yt.forEach(Object.keys(e).concat(Object.keys(t)),function(S){var I=m[S]||o,E=I(S);Yt.isUndefined(E)&&I!==y||(n[S]=E)}),n}});var eh=P((dD,O1)=>{O1.exports={version:"0.27.2"}});var R1=P((pD,B1)=>{"use strict";var OS=eh().version,qn=Pi(),th={};["object","boolean","number","function","string","symbol"].forEach(function(r,e){th[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});var C1={};th.transitional=function(e,t,n){function i(o,a){return"[Axios v"+OS+"] Transitional option '"+o+"'"+a+(n?". "+n:"")}return function(o,a,c){if(e===!1)throw new qn(i(a," has been removed"+(t?" in "+t:"")),qn.ERR_DEPRECATED);return t&&!C1[a]&&(C1[a]=!0,console.warn(i(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,a,c):!0}};function CS(r,e,t){if(typeof r!="object")throw new qn("options must be an object",qn.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(r),i=n.length;i-- >0;){var o=n[i],a=e[o];if(a){var c=r[o],y=c===void 0||a(c,o,r);if(y!==!0)throw new qn("option "+o+" must be "+y,qn.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new qn("Unknown option "+o,qn.ERR_BAD_OPTION)}}B1.exports={assertOptions:CS,validators:th}});var D1=P((gD,q1)=>{"use strict";var L1=xt(),BS=$l(),P1=Wg(),N1=M1(),Gf=Zl(),RS=zl(),k1=R1(),Fo=k1.validators;function To(r){this.defaults=r,this.interceptors={request:new P1,response:new P1}}To.prototype.request=function(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Gf(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;n!==void 0&&k1.assertOptions(n,{silentJSONParsing:Fo.transitional(Fo.boolean),forcedJSONParsing:Fo.transitional(Fo.boolean),clarifyTimeoutError:Fo.transitional(Fo.boolean)},!1);var i=[],o=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(t)===!1||(o=o&&E.synchronous,i.unshift(E.fulfilled,E.rejected))});var a=[];this.interceptors.response.forEach(function(E){a.push(E.fulfilled,E.rejected)});var c;if(!o){var y=[N1,void 0];for(Array.prototype.unshift.apply(y,i),y=y.concat(a),c=Promise.resolve(t);y.length;)c=c.then(y.shift(),y.shift());return c}for(var m=t;i.length;){var _=i.shift(),S=i.shift();try{m=_(m)}catch(I){S(I);break}}try{c=N1(m)}catch(I){return Promise.reject(I)}for(;a.length;)c=c.then(a.shift(),a.shift());return c};To.prototype.getUri=function(e){e=Gf(this.defaults,e);var t=RS(e.baseURL,e.url);return BS(t,e.params,e.paramsSerializer)};L1.forEach(["delete","get","head","options"],function(e){To.prototype[e]=function(t,n){return this.request(Gf(n||{},{method:e,url:t,data:(n||{}).data}))}});L1.forEach(["post","put","patch"],function(e){function t(n){return function(o,a,c){return this.request(Gf(c||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}To.prototype[e]=t(),To.prototype[e+"Form"]=t(!0)});q1.exports=To});var j1=P((yD,U1)=>{"use strict";var PS=na();function Mo(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var t=this;this.promise.then(function(n){if(!!t._listeners){var i,o=t._listeners.length;for(i=0;i<o;i++)t._listeners[i](n);t._listeners=null}}),this.promise.then=function(n){var i,o=new Promise(function(a){t.subscribe(a),i=a}).then(n);return o.cancel=function(){t.unsubscribe(i)},o},r(function(i){t.reason||(t.reason=new PS(i),e(t.reason))})}Mo.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Mo.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};Mo.prototype.unsubscribe=function(e){if(!!this._listeners){var t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}};Mo.source=function(){var e,t=new Mo(function(i){e=i});return{token:t,cancel:e}};U1.exports=Mo});var W1=P((mD,$1)=>{"use strict";$1.exports=function(e){return function(n){return e.apply(null,n)}}});var G1=P((bD,H1)=>{"use strict";var NS=xt();H1.exports=function(e){return NS.isObject(e)&&e.isAxiosError===!0}});var V1=P((vD,rh)=>{"use strict";var z1=xt(),LS=Nl(),zf=D1(),kS=Zl(),qS=Hf();function K1(r){var e=new zf(r),t=LS(zf.prototype.request,e);return z1.extend(t,zf.prototype,e),z1.extend(t,e),t.create=function(i){return K1(kS(r,i))},t}var $t=K1(qS);$t.Axios=zf;$t.CanceledError=na();$t.CancelToken=j1();$t.isCancel=Xl();$t.VERSION=eh().version;$t.toFormData=Hl();$t.AxiosError=Pi();$t.Cancel=$t.CanceledError;$t.all=function(e){return Promise.all(e)};$t.spread=W1();$t.isAxiosError=G1();rh.exports=$t;rh.exports.default=$t});var nh=P((wD,J1)=>{J1.exports=V1()});var X1=P(oh=>{"use strict";Object.defineProperty(oh,"__esModule",{value:!0});var DS=nh(),ih=class{constructor(e){this.METHOD_GET="GET",this.METHOD_POST="POST",this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){let t=e.protocol||"http",n=e.port||(t==="https"?443:80);return{host:e.host||"127.0.0.1",protocol:t,port:n,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log,network:e.network}}async get(e,t){try{return await this.request().get(e,t)}catch(n){if(n.response&&n.response.status)return n.response;throw n}}async post(e,t,n){try{return await this.request().post(e,t,n)}catch(i){if(i.response&&i.response.status)return i.response;throw i}}request(){let e={};this.config.network&&(e["x-network"]=this.config.network);let t=DS.default.create({baseURL:`${this.config.protocol}://${this.config.host}:${this.config.port}`,timeout:this.config.timeout,maxContentLength:1024*1024*512,headers:e});return this.config.logging&&(t.interceptors.request.use(n=>(this.config.logger(`Requesting: ${n.baseURL}/${n.url}`),n)),t.interceptors.response.use(n=>(this.config.logger(`Response:   ${n.config.url} - ${n.status}`),n))),t}};oh.default=ih});var Vf=P(Kf=>{"use strict";Kf.byteLength=jS;Kf.toByteArray=WS;Kf.fromByteArray=zS;var Hr=[],lr=[],US=typeof Uint8Array<"u"?Uint8Array:Array,sh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ni=0,Y1=sh.length;Ni<Y1;++Ni)Hr[Ni]=sh[Ni],lr[sh.charCodeAt(Ni)]=Ni;var Ni,Y1;lr["-".charCodeAt(0)]=62;lr["_".charCodeAt(0)]=63;function Q1(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function jS(r){var e=Q1(r),t=e[0],n=e[1];return(t+n)*3/4-n}function $S(r,e,t){return(e+t)*3/4-t}function WS(r){var e,t=Q1(r),n=t[0],i=t[1],o=new US($S(r,n,i)),a=0,c=i>0?n-4:n,y;for(y=0;y<c;y+=4)e=lr[r.charCodeAt(y)]<<18|lr[r.charCodeAt(y+1)]<<12|lr[r.charCodeAt(y+2)]<<6|lr[r.charCodeAt(y+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=e&255;return i===2&&(e=lr[r.charCodeAt(y)]<<2|lr[r.charCodeAt(y+1)]>>4,o[a++]=e&255),i===1&&(e=lr[r.charCodeAt(y)]<<10|lr[r.charCodeAt(y+1)]<<4|lr[r.charCodeAt(y+2)]>>2,o[a++]=e>>8&255,o[a++]=e&255),o}function HS(r){return Hr[r>>18&63]+Hr[r>>12&63]+Hr[r>>6&63]+Hr[r&63]}function GS(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(HS(n));return i.join("")}function zS(r){for(var e,t=r.length,n=t%3,i=[],o=16383,a=0,c=t-n;a<c;a+=o)i.push(GS(r,a,a+o>c?c:a+o));return n===1?(e=r[t-1],i.push(Hr[e>>2]+Hr[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(Hr[e>>10]+Hr[e>>4&63]+Hr[e<<2&63]+"=")),i.join("")}});var ah=P((SD,Z1)=>{"use strict";Z1.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==i||a.enumerable!==!0)return!1}return!0}});var oa=P((ED,ey)=>{"use strict";var KS=ah();ey.exports=function(){return KS()&&!!Symbol.toStringTag}});var ny=P((AD,ry)=>{"use strict";var ty=typeof Symbol<"u"&&Symbol,VS=ah();ry.exports=function(){return typeof ty!="function"||typeof Symbol!="function"||typeof ty("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:VS()}});var oy=P((FD,iy)=>{"use strict";var JS="Function.prototype.bind called on incompatible ",fh=Array.prototype.slice,XS=Object.prototype.toString,YS="[object Function]";iy.exports=function(e){var t=this;if(typeof t!="function"||XS.call(t)!==YS)throw new TypeError(JS+t);for(var n=fh.call(arguments,1),i,o=function(){if(this instanceof i){var _=t.apply(this,n.concat(fh.call(arguments)));return Object(_)===_?_:this}else return t.apply(e,n.concat(fh.call(arguments)))},a=Math.max(0,t.length-n.length),c=[],y=0;y<a;y++)c.push("$"+y);if(i=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(o),t.prototype){var m=function(){};m.prototype=t.prototype,i.prototype=new m,m.prototype=null}return i}});var Jf=P((TD,sy)=>{"use strict";var QS=oy();sy.exports=Function.prototype.bind||QS});var fy=P((MD,ay)=>{"use strict";var ZS=Jf();ay.exports=ZS.call(Function.call,Object.prototype.hasOwnProperty)});var Qf=P((ID,hy)=>{"use strict";var Ke,Ro=SyntaxError,ly=Function,Co=TypeError,ch=function(r){try{return ly('"use strict"; return ('+r+").constructor;")()}catch{}},Li=Object.getOwnPropertyDescriptor;if(Li)try{Li({},"")}catch{Li=null}var uh=function(){throw new Co},eE=Li?function(){try{return arguments.callee,uh}catch{try{return Li(arguments,"callee").get}catch{return uh}}}():uh,Io=ny()(),Dn=Object.getPrototypeOf||function(r){return r.__proto__},Oo={},tE=typeof Uint8Array>"u"?Ke:Dn(Uint8Array),Bo={"%AggregateError%":typeof AggregateError>"u"?Ke:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ke:ArrayBuffer,"%ArrayIteratorPrototype%":Io?Dn([][Symbol.iterator]()):Ke,"%AsyncFromSyncIteratorPrototype%":Ke,"%AsyncFunction%":Oo,"%AsyncGenerator%":Oo,"%AsyncGeneratorFunction%":Oo,"%AsyncIteratorPrototype%":Oo,"%Atomics%":typeof Atomics>"u"?Ke:Atomics,"%BigInt%":typeof BigInt>"u"?Ke:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ke:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ke:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ke:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ke:FinalizationRegistry,"%Function%":ly,"%GeneratorFunction%":Oo,"%Int8Array%":typeof Int8Array>"u"?Ke:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ke:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ke:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Io?Dn(Dn([][Symbol.iterator]())):Ke,"%JSON%":typeof JSON=="object"?JSON:Ke,"%Map%":typeof Map>"u"?Ke:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Io?Ke:Dn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ke:Promise,"%Proxy%":typeof Proxy>"u"?Ke:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ke:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ke:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Io?Ke:Dn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ke:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Io?Dn(""[Symbol.iterator]()):Ke,"%Symbol%":Io?Symbol:Ke,"%SyntaxError%":Ro,"%ThrowTypeError%":eE,"%TypedArray%":tE,"%TypeError%":Co,"%Uint8Array%":typeof Uint8Array>"u"?Ke:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ke:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ke:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ke:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ke:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ke:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ke:WeakSet},rE=function r(e){var t;if(e==="%AsyncFunction%")t=ch("async function () {}");else if(e==="%GeneratorFunction%")t=ch("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=ch("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=r("%AsyncGenerator%");i&&(t=Dn(i.prototype))}return Bo[e]=t,t},cy={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},sa=Jf(),Xf=fy(),nE=sa.call(Function.call,Array.prototype.concat),iE=sa.call(Function.apply,Array.prototype.splice),uy=sa.call(Function.call,String.prototype.replace),Yf=sa.call(Function.call,String.prototype.slice),oE=sa.call(Function.call,RegExp.prototype.exec),sE=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,aE=/\\(\\)?/g,fE=function(e){var t=Yf(e,0,1),n=Yf(e,-1);if(t==="%"&&n!=="%")throw new Ro("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new Ro("invalid intrinsic syntax, expected opening `%`");var i=[];return uy(e,sE,function(o,a,c,y){i[i.length]=c?uy(y,aE,"$1"):a||o}),i},cE=function(e,t){var n=e,i;if(Xf(cy,n)&&(i=cy[n],n="%"+i[0]+"%"),Xf(Bo,n)){var o=Bo[n];if(o===Oo&&(o=rE(n)),typeof o>"u"&&!t)throw new Co("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Ro("intrinsic "+e+" does not exist!")};hy.exports=function(e,t){if(typeof e!="string"||e.length===0)throw new Co("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Co('"allowMissing" argument must be a boolean');if(oE(/^%?[^%]*%?$/g,e)===null)throw new Ro("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=fE(e),i=n.length>0?n[0]:"",o=cE("%"+i+"%",t),a=o.name,c=o.value,y=!1,m=o.alias;m&&(i=m[0],iE(n,nE([0,1],m)));for(var _=1,S=!0;_<n.length;_+=1){var I=n[_],E=Yf(I,0,1),C=Yf(I,-1);if((E==='"'||E==="'"||E==="`"||C==='"'||C==="'"||C==="`")&&E!==C)throw new Ro("property names with quotes must have matching quotes");if((I==="constructor"||!S)&&(y=!0),i+="."+I,a="%"+i+"%",Xf(Bo,a))c=Bo[a];else if(c!=null){if(!(I in c)){if(!t)throw new Co("base intrinsic for "+e+" exists, but the property is not available.");return}if(Li&&_+1>=n.length){var N=Li(c,I);S=!!N,S&&"get"in N&&!("originalValue"in N.get)?c=N.get:c=c[I]}else S=Xf(c,I),c=c[I];S&&!y&&(Bo[a]=c)}}return c}});var by=P((OD,Zf)=>{"use strict";var lh=Jf(),Po=Qf(),gy=Po("%Function.prototype.apply%"),yy=Po("%Function.prototype.call%"),my=Po("%Reflect.apply%",!0)||lh.call(yy,gy),dy=Po("%Object.getOwnPropertyDescriptor%",!0),ki=Po("%Object.defineProperty%",!0),uE=Po("%Math.max%");if(ki)try{ki({},"a",{value:1})}catch{ki=null}Zf.exports=function(e){var t=my(lh,yy,arguments);if(dy&&ki){var n=dy(t,"length");n.configurable&&ki(t,"length",{value:1+uE(0,e.length-(arguments.length-1))})}return t};var py=function(){return my(lh,gy,arguments)};ki?ki(Zf.exports,"apply",{value:py}):Zf.exports.apply=py});var ec=P((CD,xy)=>{"use strict";var vy=Qf(),wy=by(),lE=wy(vy("String.prototype.indexOf"));xy.exports=function(e,t){var n=vy(e,!!t);return typeof n=="function"&&lE(e,".prototype.")>-1?wy(n):n}});var Ey=P((BD,Sy)=>{"use strict";var hE=oa()(),dE=ec(),hh=dE("Object.prototype.toString"),tc=function(e){return hE&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:hh(e)==="[object Arguments]"},_y=function(e){return tc(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&hh(e)!=="[object Array]"&&hh(e.callee)==="[object Function]"},pE=function(){return tc(arguments)}();tc.isLegacyArguments=_y;Sy.exports=pE?tc:_y});var Ty=P((RD,Fy)=>{"use strict";var gE=Object.prototype.toString,yE=Function.prototype.toString,mE=/^\s*(?:function)?\*/,Ay=oa()(),dh=Object.getPrototypeOf,bE=function(){if(!Ay)return!1;try{return Function("return function*() {}")()}catch{}},ph;Fy.exports=function(e){if(typeof e!="function")return!1;if(mE.test(yE.call(e)))return!0;if(!Ay){var t=gE.call(e);return t==="[object GeneratorFunction]"}if(!dh)return!1;if(typeof ph>"u"){var n=bE();ph=n?dh(n):!1}return dh(e)===ph}});var Cy=P((PD,Oy)=>{"use strict";var Iy=Function.prototype.toString,No=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,gh,rc;if(typeof No=="function"&&typeof Object.defineProperty=="function")try{gh=Object.defineProperty({},"length",{get:function(){throw rc}}),rc={},No(function(){throw 42},null,gh)}catch(r){r!==rc&&(No=null)}else No=null;var vE=/^\s*class\b/,yh=function(e){try{var t=Iy.call(e);return vE.test(t)}catch{return!1}},wE=function(e){try{return yh(e)?!1:(Iy.call(e),!0)}catch{return!1}},xE=Object.prototype.toString,_E="[object Function]",SE="[object GeneratorFunction]",EE=typeof Symbol=="function"&&!!Symbol.toStringTag,My=typeof document=="object"&&typeof document.all>"u"&&document.all!==void 0?document.all:{};Oy.exports=No?function(e){if(e===My)return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(typeof e=="function"&&!e.prototype)return!0;try{No(e,null,gh)}catch(t){if(t!==rc)return!1}return!yh(e)}:function(e){if(e===My)return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(typeof e=="function"&&!e.prototype)return!0;if(EE)return wE(e);if(yh(e))return!1;var t=xE.call(e);return t===_E||t===SE}});var mh=P((ND,Ry)=>{"use strict";var AE=Cy(),FE=Object.prototype.toString,By=Object.prototype.hasOwnProperty,TE=function(e,t,n){for(var i=0,o=e.length;i<o;i++)By.call(e,i)&&(n==null?t(e[i],i,e):t.call(n,e[i],i,e))},ME=function(e,t,n){for(var i=0,o=e.length;i<o;i++)n==null?t(e.charAt(i),i,e):t.call(n,e.charAt(i),i,e)},IE=function(e,t,n){for(var i in e)By.call(e,i)&&(n==null?t(e[i],i,e):t.call(n,e[i],i,e))},OE=function(e,t,n){if(!AE(t))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),FE.call(e)==="[object Array]"?TE(e,t,i):typeof e=="string"?ME(e,t,i):IE(e,t,i)};Ry.exports=OE});var vh=P((LD,Py)=>{"use strict";var bh=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],CE=typeof globalThis>"u"?global:globalThis;Py.exports=function(){for(var e=[],t=0;t<bh.length;t++)typeof CE[bh[t]]=="function"&&(e[e.length]=bh[t]);return e}});var wh=P((kD,Ny)=>{"use strict";var BE=Qf(),nc=BE("%Object.getOwnPropertyDescriptor%",!0);if(nc)try{nc([],"length")}catch{nc=null}Ny.exports=nc});var Sh=P((qD,Uy)=>{"use strict";var Ly=mh(),RE=vh(),_h=ec(),PE=_h("Object.prototype.toString"),ky=oa()(),NE=typeof globalThis>"u"?global:globalThis,qy=RE(),LE=_h("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},kE=_h("String.prototype.slice"),Dy={},ic=wh(),xh=Object.getPrototypeOf;ky&&ic&&xh&&Ly(qy,function(r){var e=new NE[r];if(Symbol.toStringTag in e){var t=xh(e),n=ic(t,Symbol.toStringTag);if(!n){var i=xh(t);n=ic(i,Symbol.toStringTag)}Dy[r]=n.get}});var qE=function(e){var t=!1;return Ly(Dy,function(n,i){if(!t)try{t=n.call(e)===i}catch{}}),t};Uy.exports=function(e){if(!e||typeof e!="object")return!1;if(!ky||!(Symbol.toStringTag in e)){var t=kE(PE(e),8,-1);return LE(qy,t)>-1}return ic?qE(e):!1}});var Ky=P((DD,zy)=>{"use strict";var $y=mh(),DE=vh(),Wy=ec(),UE=Wy("Object.prototype.toString"),Hy=oa()(),jy=typeof globalThis>"u"?global:globalThis,jE=DE(),$E=Wy("String.prototype.slice"),Gy={},Eh=wh(),Ah=Object.getPrototypeOf;Hy&&Eh&&Ah&&$y(jE,function(r){if(typeof jy[r]=="function"){var e=new jy[r];if(Symbol.toStringTag in e){var t=Ah(e),n=Eh(t,Symbol.toStringTag);if(!n){var i=Ah(t);n=Eh(i,Symbol.toStringTag)}Gy[r]=n.get}}});var WE=function(e){var t=!1;return $y(Gy,function(n,i){if(!t)try{var o=n.call(e);o===i&&(t=o)}catch{}}),t},HE=Sh();zy.exports=function(e){return HE(e)?!Hy||!(Symbol.toStringTag in e)?$E(UE(e),8,-1):WE(e):!1}});var am=P(We=>{"use strict";var GE=Ey(),zE=Ty(),Cr=Ky(),Vy=Sh();function Lo(r){return r.call.bind(r)}var Jy=typeof BigInt<"u",Xy=typeof Symbol<"u",hr=Lo(Object.prototype.toString),KE=Lo(Number.prototype.valueOf),VE=Lo(String.prototype.valueOf),JE=Lo(Boolean.prototype.valueOf);Jy&&(Yy=Lo(BigInt.prototype.valueOf));var Yy;Xy&&(Qy=Lo(Symbol.prototype.valueOf));var Qy;function fa(r,e){if(typeof r!="object")return!1;try{return e(r),!0}catch{return!1}}We.isArgumentsObject=GE;We.isGeneratorFunction=zE;We.isTypedArray=Vy;function XE(r){return typeof Promise<"u"&&r instanceof Promise||r!==null&&typeof r=="object"&&typeof r.then=="function"&&typeof r.catch=="function"}We.isPromise=XE;function YE(r){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(r):Vy(r)||em(r)}We.isArrayBufferView=YE;function QE(r){return Cr(r)==="Uint8Array"}We.isUint8Array=QE;function ZE(r){return Cr(r)==="Uint8ClampedArray"}We.isUint8ClampedArray=ZE;function e7(r){return Cr(r)==="Uint16Array"}We.isUint16Array=e7;function t7(r){return Cr(r)==="Uint32Array"}We.isUint32Array=t7;function r7(r){return Cr(r)==="Int8Array"}We.isInt8Array=r7;function n7(r){return Cr(r)==="Int16Array"}We.isInt16Array=n7;function i7(r){return Cr(r)==="Int32Array"}We.isInt32Array=i7;function o7(r){return Cr(r)==="Float32Array"}We.isFloat32Array=o7;function s7(r){return Cr(r)==="Float64Array"}We.isFloat64Array=s7;function a7(r){return Cr(r)==="BigInt64Array"}We.isBigInt64Array=a7;function f7(r){return Cr(r)==="BigUint64Array"}We.isBigUint64Array=f7;function oc(r){return hr(r)==="[object Map]"}oc.working=typeof Map<"u"&&oc(new Map);function c7(r){return typeof Map>"u"?!1:oc.working?oc(r):r instanceof Map}We.isMap=c7;function sc(r){return hr(r)==="[object Set]"}sc.working=typeof Set<"u"&&sc(new Set);function u7(r){return typeof Set>"u"?!1:sc.working?sc(r):r instanceof Set}We.isSet=u7;function ac(r){return hr(r)==="[object WeakMap]"}ac.working=typeof WeakMap<"u"&&ac(new WeakMap);function l7(r){return typeof WeakMap>"u"?!1:ac.working?ac(r):r instanceof WeakMap}We.isWeakMap=l7;function Th(r){return hr(r)==="[object WeakSet]"}Th.working=typeof WeakSet<"u"&&Th(new WeakSet);function h7(r){return Th(r)}We.isWeakSet=h7;function fc(r){return hr(r)==="[object ArrayBuffer]"}fc.working=typeof ArrayBuffer<"u"&&fc(new ArrayBuffer);function Zy(r){return typeof ArrayBuffer>"u"?!1:fc.working?fc(r):r instanceof ArrayBuffer}We.isArrayBuffer=Zy;function cc(r){return hr(r)==="[object DataView]"}cc.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&cc(new DataView(new ArrayBuffer(1),0,1));function em(r){return typeof DataView>"u"?!1:cc.working?cc(r):r instanceof DataView}We.isDataView=em;var Fh=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function aa(r){return hr(r)==="[object SharedArrayBuffer]"}function tm(r){return typeof Fh>"u"?!1:(typeof aa.working>"u"&&(aa.working=aa(new Fh)),aa.working?aa(r):r instanceof Fh)}We.isSharedArrayBuffer=tm;function d7(r){return hr(r)==="[object AsyncFunction]"}We.isAsyncFunction=d7;function p7(r){return hr(r)==="[object Map Iterator]"}We.isMapIterator=p7;function g7(r){return hr(r)==="[object Set Iterator]"}We.isSetIterator=g7;function y7(r){return hr(r)==="[object Generator]"}We.isGeneratorObject=y7;function m7(r){return hr(r)==="[object WebAssembly.Module]"}We.isWebAssemblyCompiledModule=m7;function rm(r){return fa(r,KE)}We.isNumberObject=rm;function nm(r){return fa(r,VE)}We.isStringObject=nm;function im(r){return fa(r,JE)}We.isBooleanObject=im;function om(r){return Jy&&fa(r,Yy)}We.isBigIntObject=om;function sm(r){return Xy&&fa(r,Qy)}We.isSymbolObject=sm;function b7(r){return rm(r)||nm(r)||im(r)||om(r)||sm(r)}We.isBoxedPrimitive=b7;function v7(r){return typeof Uint8Array<"u"&&(Zy(r)||tm(r))}We.isAnyArrayBuffer=v7;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(r){Object.defineProperty(We,r,{enumerable:!1,value:function(){throw new Error(r+" is not supported in userland")}})})});var cm=P((jD,fm)=>{fm.exports=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}});var Qt=P(($D,Mh)=>{typeof Object.create=="function"?Mh.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Mh.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}});var la=P(He=>{var um=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++)n[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return n},w7=/%[sdj%]/g;He.format=function(r){if(!yc(r)){for(var e=[],t=0;t<arguments.length;t++)e.push(Un(arguments[t]));return e.join(" ")}for(var t=1,n=arguments,i=n.length,o=String(r).replace(w7,function(c){if(c==="%%")return"%";if(t>=i)return c;switch(c){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch{return"[Circular]"}default:return c}}),a=n[t];t<i;a=n[++t])gc(a)||!ko(a)?o+=" "+a:o+=" "+Un(a);return o};He.deprecate=function(r,e){if(typeof process<"u"&&process.noDeprecation===!0)return r;if(typeof process>"u")return function(){return He.deprecate(r,e).apply(this,arguments)};var t=!1;function n(){if(!t){if(process.throwDeprecation)throw new Error(e);process.traceDeprecation?console.trace(e):console.error(e),t=!0}return r.apply(this,arguments)}return n};var uc={},lm=/^$/;process.env.NODE_DEBUG&&(lc=process.env.NODE_DEBUG,lc=lc.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),lm=new RegExp("^"+lc+"$","i"));var lc;He.debuglog=function(r){if(r=r.toUpperCase(),!uc[r])if(lm.test(r)){var e=process.pid;uc[r]=function(){var t=He.format.apply(He,arguments);console.error("%s %d: %s",r,e,t)}}else uc[r]=function(){};return uc[r]};function Un(r,e){var t={seen:[],stylize:_7};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),Bh(e)?t.showHidden=e:e&&He._extend(t,e),Di(t.showHidden)&&(t.showHidden=!1),Di(t.depth)&&(t.depth=2),Di(t.colors)&&(t.colors=!1),Di(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=x7),dc(t,r,t.depth)}He.inspect=Un;Un.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Un.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function x7(r,e){var t=Un.styles[e];return t?"\x1B["+Un.colors[t][0]+"m"+r+"\x1B["+Un.colors[t][1]+"m":r}function _7(r,e){return r}function S7(r){var e={};return r.forEach(function(t,n){e[t]=!0}),e}function dc(r,e,t){if(r.customInspect&&e&&hc(e.inspect)&&e.inspect!==He.inspect&&!(e.constructor&&e.constructor.prototype===e)){var n=e.inspect(t,r);return yc(n)||(n=dc(r,n,t)),n}var i=E7(r,e);if(i)return i;var o=Object.keys(e),a=S7(o);if(r.showHidden&&(o=Object.getOwnPropertyNames(e)),ua(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return Ih(e);if(o.length===0){if(hc(e)){var c=e.name?": "+e.name:"";return r.stylize("[Function"+c+"]","special")}if(ca(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(pc(e))return r.stylize(Date.prototype.toString.call(e),"date");if(ua(e))return Ih(e)}var y="",m=!1,_=["{","}"];if(hm(e)&&(m=!0,_=["[","]"]),hc(e)){var S=e.name?": "+e.name:"";y=" [Function"+S+"]"}if(ca(e)&&(y=" "+RegExp.prototype.toString.call(e)),pc(e)&&(y=" "+Date.prototype.toUTCString.call(e)),ua(e)&&(y=" "+Ih(e)),o.length===0&&(!m||e.length==0))return _[0]+y+_[1];if(t<0)return ca(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special");r.seen.push(e);var I;return m?I=A7(r,e,t,a,o):I=o.map(function(E){return Ch(r,e,t,a,E,m)}),r.seen.pop(),F7(I,y,_)}function E7(r,e){if(Di(e))return r.stylize("undefined","undefined");if(yc(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(t,"string")}if(dm(e))return r.stylize(""+e,"number");if(Bh(e))return r.stylize(""+e,"boolean");if(gc(e))return r.stylize("null","null")}function Ih(r){return"["+Error.prototype.toString.call(r)+"]"}function A7(r,e,t,n,i){for(var o=[],a=0,c=e.length;a<c;++a)pm(e,String(a))?o.push(Ch(r,e,t,n,String(a),!0)):o.push("");return i.forEach(function(y){y.match(/^\d+$/)||o.push(Ch(r,e,t,n,y,!0))}),o}function Ch(r,e,t,n,i,o){var a,c,y;if(y=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},y.get?y.set?c=r.stylize("[Getter/Setter]","special"):c=r.stylize("[Getter]","special"):y.set&&(c=r.stylize("[Setter]","special")),pm(n,i)||(a="["+i+"]"),c||(r.seen.indexOf(y.value)<0?(gc(t)?c=dc(r,y.value,null):c=dc(r,y.value,t-1),c.indexOf(`
`)>-1&&(o?c=c.split(`
`).map(function(m){return"  "+m}).join(`
`).substr(2):c=`
`+c.split(`
`).map(function(m){return"   "+m}).join(`
`))):c=r.stylize("[Circular]","special")),Di(a)){if(o&&i.match(/^\d+$/))return c;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=r.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=r.stylize(a,"string"))}return a+": "+c}function F7(r,e,t){var n=0,i=r.reduce(function(o,a){return n++,a.indexOf(`
`)>=0&&n++,o+a.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?t[0]+(e===""?"":e+`
 `)+" "+r.join(`,
  `)+" "+t[1]:t[0]+e+" "+r.join(", ")+" "+t[1]}He.types=am();function hm(r){return Array.isArray(r)}He.isArray=hm;function Bh(r){return typeof r=="boolean"}He.isBoolean=Bh;function gc(r){return r===null}He.isNull=gc;function T7(r){return r==null}He.isNullOrUndefined=T7;function dm(r){return typeof r=="number"}He.isNumber=dm;function yc(r){return typeof r=="string"}He.isString=yc;function M7(r){return typeof r=="symbol"}He.isSymbol=M7;function Di(r){return r===void 0}He.isUndefined=Di;function ca(r){return ko(r)&&Rh(r)==="[object RegExp]"}He.isRegExp=ca;He.types.isRegExp=ca;function ko(r){return typeof r=="object"&&r!==null}He.isObject=ko;function pc(r){return ko(r)&&Rh(r)==="[object Date]"}He.isDate=pc;He.types.isDate=pc;function ua(r){return ko(r)&&(Rh(r)==="[object Error]"||r instanceof Error)}He.isError=ua;He.types.isNativeError=ua;function hc(r){return typeof r=="function"}He.isFunction=hc;function I7(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||typeof r>"u"}He.isPrimitive=I7;He.isBuffer=cm();function Rh(r){return Object.prototype.toString.call(r)}function Oh(r){return r<10?"0"+r.toString(10):r.toString(10)}var O7=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C7(){var r=new Date,e=[Oh(r.getHours()),Oh(r.getMinutes()),Oh(r.getSeconds())].join(":");return[r.getDate(),O7[r.getMonth()],e].join(" ")}He.log=function(){console.log("%s - %s",C7(),He.format.apply(He,arguments))};He.inherits=Qt();He._extend=function(r,e){if(!e||!ko(e))return r;for(var t=Object.keys(e),n=t.length;n--;)r[t[n]]=e[t[n]];return r};function pm(r,e){return Object.prototype.hasOwnProperty.call(r,e)}var qi=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;He.promisify=function(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');if(qi&&e[qi]){var t=e[qi];if(typeof t!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,qi,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var n,i,o=new Promise(function(y,m){n=y,i=m}),a=[],c=0;c<arguments.length;c++)a.push(arguments[c]);a.push(function(y,m){y?i(y):n(m)});try{e.apply(this,a)}catch(y){i(y)}return o}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),qi&&Object.defineProperty(t,qi,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,um(e))};He.promisify.custom=qi;function B7(r,e){if(!r){var t=new Error("Promise was rejected with a falsy value");t.reason=r,r=t}return e(r)}function R7(r){if(typeof r!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var i=t.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};r.apply(this,t).then(function(c){process.nextTick(a.bind(null,null,c))},function(c){process.nextTick(B7.bind(null,c,a))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(r)),Object.defineProperties(e,um(r)),e}He.callbackify=R7});var Gr=P(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.b64UrlDecode=dt.b64UrlEncode=dt.bufferTob64Url=dt.bufferTob64=dt.b64UrlToBuffer=dt.stringToB64Url=dt.stringToBuffer=dt.bufferToString=dt.b64UrlToString=dt.concatBuffers=void 0;var gm=Vf();function P7(r){let e=0;for(let i=0;i<r.length;i++)e+=r[i].byteLength;let t=new Uint8Array(e),n=0;t.set(new Uint8Array(r[0]),n),n+=r[0].byteLength;for(let i=1;i<r.length;i++)t.set(new Uint8Array(r[i]),n),n+=r[i].byteLength;return t}dt.concatBuffers=P7;function N7(r){let e=bm(r);return ym(e)}dt.b64UrlToString=N7;function ym(r){if(typeof TextDecoder>"u"){let e=la().TextDecoder;return new e("utf-8",{fatal:!0}).decode(r)}return new TextDecoder("utf-8",{fatal:!0}).decode(r)}dt.bufferToString=ym;function mm(r){if(typeof TextEncoder>"u"){let e=la().TextEncoder;return new e().encode(r)}return new TextEncoder().encode(r)}dt.stringToBuffer=mm;function L7(r){return wm(mm(r))}dt.stringToB64Url=L7;function bm(r){return new Uint8Array(gm.toByteArray(_m(r)))}dt.b64UrlToBuffer=bm;function vm(r){return gm.fromByteArray(new Uint8Array(r))}dt.bufferTob64=vm;function wm(r){return xm(vm(r))}dt.bufferTob64Url=wm;function xm(r){return r.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}dt.b64UrlEncode=xm;function _m(r){r=r.replace(/\-/g,"+").replace(/\_/g,"/");let e;return r.length%4==0?e=0:e=4-r.length%4,r.concat("=".repeat(e))}dt.b64UrlDecode=_m});var Sm=P(Nh=>{"use strict";Object.defineProperty(Nh,"__esModule",{value:!0});var jn=Gr(),Ph=class{constructor(){if(this.keyLength=4096,this.publicExponent=65537,this.hashAlgorithm="sha256",!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let e=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),t=await this.driver.exportKey("jwk",e.privateKey);return{kty:t.kty,e:t.e,n:t.n,d:t.d,p:t.p,q:t.q,dp:t.dp,dq:t.dq,qi:t.qi}}async sign(e,t,{saltLength:n}={}){let i=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(e),t);return new Uint8Array(i)}async hash(e,t="SHA-256"){let n=await this.driver.digest(t,e);return new Uint8Array(n)}async verify(e,t,n){let i={kty:"RSA",e:"AQAB",n:e},o=await this.jwkToPublicCryptoKey(i),a=this.driver.verify({name:"RSA-PSS",saltLength:32},o,n,t),c=this.driver.verify({name:"RSA-PSS",saltLength:0},o,n,t);return a||c}async jwkToCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(typeof crypto>"u")return!1;let e=crypto==null?void 0:crypto.subtle;return e===void 0?!1:["generateKey","importKey","exportKey","digest","sign"].every(n=>typeof e[n]=="function")}async encrypt(e,t,n){let i=await this.driver.importKey("raw",typeof t=="string"?jn.stringToBuffer(t):t,{name:"PBKDF2",length:32},!1,["deriveKey"]),o=await this.driver.deriveKey({name:"PBKDF2",salt:n?jn.stringToBuffer(n):jn.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),a=new Uint8Array(16);crypto.getRandomValues(a);let c=await this.driver.encrypt({name:"AES-CBC",iv:a},o,e);return jn.concatBuffers([a,c])}async decrypt(e,t,n){let i=await this.driver.importKey("raw",typeof t=="string"?jn.stringToBuffer(t):t,{name:"PBKDF2",length:32},!1,["deriveKey"]),o=await this.driver.deriveKey({name:"PBKDF2",salt:n?jn.stringToBuffer(n):jn.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),a=e.slice(0,16),c=await this.driver.decrypt({name:"AES-CBC",iv:a},o,e.slice(16));return jn.concatBuffers([c])}};Nh.default=Ph});var Em=P(kh=>{"use strict";Object.defineProperty(kh,"__esModule",{value:!0});var Lh=class{constructor(e){this.api=e}getInfo(){return this.api.get("info").then(e=>e.data)}getPeers(){return this.api.get("peers").then(e=>e.data)}};kh.default=Lh});var da=P(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.getError=void 0;var qh=class extends Error{constructor(e,t={}){t.message?super(t.message):super(),this.type=e,this.response=t.response}getType(){return this.type}};ha.default=qh;function k7(r){let e=r.data;if(typeof r.data=="string")try{e=JSON.parse(r.data)}catch{}if(r.data instanceof ArrayBuffer||r.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch{}return e?e.error||e:r.statusText||"unknown"}ha.getError=k7});var Tm=P(Dh=>{"use strict";Object.defineProperty(Dh,"__esModule",{value:!0});var Zt=pa();async function Am(r){if(Array.isArray(r)){let n=Zt.default.utils.concatBuffers([Zt.default.utils.stringToBuffer("list"),Zt.default.utils.stringToBuffer(r.length.toString())]);return await Fm(r,await Zt.default.crypto.hash(n,"SHA-384"))}let e=Zt.default.utils.concatBuffers([Zt.default.utils.stringToBuffer("blob"),Zt.default.utils.stringToBuffer(r.byteLength.toString())]),t=Zt.default.utils.concatBuffers([await Zt.default.crypto.hash(e,"SHA-384"),await Zt.default.crypto.hash(r,"SHA-384")]);return await Zt.default.crypto.hash(t,"SHA-384")}Dh.default=Am;async function Fm(r,e){if(r.length<1)return e;let t=Zt.default.utils.concatBuffers([e,await Am(r[0])]),n=await Zt.default.crypto.hash(t,"SHA-384");return await Fm(r.slice(1),n)}});var Gh=P($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.debug=$e.validatePath=$e.arrayCompare=$e.bufferToInt=$e.intToBuffer=$e.arrayFlatten=$e.generateProofs=$e.buildLayers=$e.generateTransactionChunks=$e.generateTree=$e.computeRootHash=$e.generateLeaves=$e.chunkData=$e.MIN_CHUNK_SIZE=$e.MAX_CHUNK_SIZE=void 0;var mc=pa(),Mm=Gr();$e.MAX_CHUNK_SIZE=256*1024;$e.MIN_CHUNK_SIZE=32*1024;var ya=32,qo=32;async function jh(r){let e=[],t=r,n=0;for(;t.byteLength>=$e.MAX_CHUNK_SIZE;){let i=$e.MAX_CHUNK_SIZE,o=t.byteLength-$e.MAX_CHUNK_SIZE;o>0&&o<$e.MIN_CHUNK_SIZE&&(i=Math.ceil(t.byteLength/2));let a=t.slice(0,i),c=await mc.default.crypto.hash(a);n+=a.byteLength,e.push({dataHash:c,minByteRange:n-a.byteLength,maxByteRange:n}),t=t.slice(i)}return e.push({dataHash:await mc.default.crypto.hash(t),minByteRange:n,maxByteRange:n+t.byteLength}),e}$e.chunkData=jh;async function $h(r){return Promise.all(r.map(async({dataHash:e,minByteRange:t,maxByteRange:n})=>({type:"leaf",id:await St(await Promise.all([St(e),St(ma(n))])),dataHash:e,minByteRange:t,maxByteRange:n})))}$e.generateLeaves=$h;async function q7(r){return(await Im(r)).id}$e.computeRootHash=q7;async function Im(r){return await bc(await $h(await jh(r)))}$e.generateTree=Im;async function D7(r){let e=await jh(r),t=await $h(e),n=await bc(t),i=await Om(n),o=e.slice(-1)[0];return o.maxByteRange-o.minByteRange===0&&(e.splice(e.length-1,1),i.splice(i.length-1,1)),{data_root:n.id,chunks:e,proofs:i}}$e.generateTransactionChunks=D7;async function bc(r,e=0){if(r.length<2)return r[0];let t=[];for(let n=0;n<r.length;n+=2)t.push(await U7(r[n],r[n+1]));return bc(t,e+1)}$e.buildLayers=bc;function Om(r){let e=Uh(r);return Array.isArray(e)?Wh(e):[e]}$e.generateProofs=Om;function Uh(r,e=new Uint8Array,t=0){if(r.type=="leaf")return{offset:r.maxByteRange-1,proof:(0,Mm.concatBuffers)([e,r.dataHash,ma(r.maxByteRange)])};if(r.type=="branch"){let n=(0,Mm.concatBuffers)([e,r.leftChild.id,r.rightChild.id,ma(r.byteRange)]);return[Uh(r.leftChild,n,t+1),Uh(r.rightChild,n,t+1)]}throw new Error("Unexpected node type")}function Wh(r){let e=[];return r.forEach(t=>{Array.isArray(t)?e.push(...Wh(t)):e.push(t)}),e}$e.arrayFlatten=Wh;async function U7(r,e){return e?{type:"branch",id:await St([await St(r.id),await St(e.id),await St(ma(r.maxByteRange))]),byteRange:r.maxByteRange,maxByteRange:e.maxByteRange,leftChild:r,rightChild:e}:r}async function St(r){return Array.isArray(r)&&(r=mc.default.utils.concatBuffers(r)),new Uint8Array(await mc.default.crypto.hash(r))}function ma(r){let e=new Uint8Array(ya);for(var t=e.length-1;t>=0;t--){var n=r%256;e[t]=n,r=(r-n)/256}return e}$e.intToBuffer=ma;function Hh(r){let e=0;for(var t=0;t<r.length;t++)e*=256,e+=r[t];return e}$e.bufferToInt=Hh;var j7=(r,e)=>r.every((t,n)=>e[n]===t);$e.arrayCompare=j7;async function ga(r,e,t,n,i){if(n<=0)return!1;if(e>=n)return ga(r,0,n-1,n,i);if(e<0)return ga(r,0,0,n,i);if(i.length==qo+ya){let S=i.slice(0,qo),I=i.slice(S.length,S.length+ya),E=await St([await St(S),await St(I)]);return(0,$e.arrayCompare)(r,E)?{offset:n-1,leftBound:t,rightBound:n,chunkSize:n-t}:!1}let o=i.slice(0,qo),a=i.slice(o.length,o.length+qo),c=i.slice(o.length+a.length,o.length+a.length+ya),y=Hh(c),m=i.slice(o.length+a.length+c.length),_=await St([await St(o),await St(a),await St(c)]);return(0,$e.arrayCompare)(r,_)?e<y?await ga(o,e,t,Math.min(n,y),m):await ga(a,e,Math.max(t,y),n,m):!1}$e.validatePath=ga;async function Cm(r,e=""){if(r.byteLength<1)return e;let t=r.slice(0,qo),n=r.slice(t.length,t.length+qo),i=r.slice(t.length+n.length,t.length+n.length+ya),o=Hh(i),a=r.slice(t.length+n.length+i.length),c=await St([await St(t),await St(n),await St(i)]),y=`${e}
${JSON.stringify(Buffer.from(t))},${JSON.stringify(Buffer.from(n))},${o} => ${JSON.stringify(c)}`;return Cm(a,y)}$e.debug=Cm});var wc=P(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});va.Tag=void 0;var vt=Gr(),$7=Tm(),W7=Gh(),vc=class{get(e,t){if(!Object.getOwnPropertyNames(this).includes(e))throw new Error(`Field "${e}" is not a property of the Arweave Transaction class.`);return this[e]instanceof Uint8Array?t&&t.decode&&t.string?vt.bufferToString(this[e]):t&&t.decode&&!t.string?this[e]:vt.bufferTob64Url(this[e]):t&&t.decode==!0?t&&t.string?vt.b64UrlToString(this[e]):vt.b64UrlToBuffer(this[e]):this[e]}},ba=class extends vc{constructor(e,t,n=!1){super(),this.name=e,this.value=t}};va.Tag=ba;var zh=class extends vc{constructor(e={}){super(),this.format=2,this.id="",this.last_tx="",this.owner="",this.tags=[],this.target="",this.quantity="0",this.data_size="0",this.data=new Uint8Array,this.data_root="",this.reward="0",this.signature="",Object.assign(this,e),typeof this.data=="string"&&(this.data=vt.b64UrlToBuffer(this.data)),e.tags&&(this.tags=e.tags.map(t=>new ba(t.name,t.value)))}addTag(e,t){this.tags.push(new ba(vt.stringToB64Url(e),vt.stringToB64Url(t)))}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:vt.bufferTob64Url(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(e){this.owner=e}setSignature({id:e,owner:t,reward:n,tags:i,signature:o}){this.id=e,this.owner=t,n&&(this.reward=n),i&&(this.tags=i),this.signature=o}async prepareChunks(e){!this.chunks&&e.byteLength>0&&(this.chunks=await(0,W7.generateTransactionChunks)(e),this.data_root=vt.bufferTob64Url(this.chunks.data_root)),!this.chunks&&e.byteLength===0&&(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(e,t){if(!this.chunks)throw new Error("Chunks have not been prepared");let n=this.chunks.proofs[e],i=this.chunks.chunks[e];return{data_root:this.data_root,data_size:this.data_size,data_path:vt.bufferTob64Url(n.proof),offset:n.offset.toString(),chunk:vt.bufferTob64Url(t.slice(i.minByteRange,i.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:let e=this.tags.reduce((n,i)=>vt.concatBuffers([n,i.get("name",{decode:!0,string:!1}),i.get("value",{decode:!0,string:!1})]),new Uint8Array);return vt.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),vt.stringToBuffer(this.quantity),vt.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),e]);case 2:this.data_root||await this.prepareChunks(this.data);let t=this.tags.map(n=>[n.get("name",{decode:!0,string:!1}),n.get("value",{decode:!0,string:!1})]);return await(0,$7.default)([vt.stringToBuffer(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),vt.stringToBuffer(this.quantity),vt.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),t,vt.stringToBuffer(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}};va.default=zh});var Nm=P(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.TransactionUploader=void 0;var Bm=wc(),H7=Gr(),Kh=da(),G7=Gh(),Rm=1,z7=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"],Pm=1e3*40,wa=class{constructor(e,t){if(this.api=e,this.chunkIndex=0,this.txPosted=!1,this.lastRequestTimeEnd=0,this.totalErrors=0,this.lastResponseStatus=0,this.lastResponseError="",!t.id)throw new Error("Transaction is not signed");if(!t.chunks)throw new Error("Transaction chunks not prepared");this.data=t.data,this.transaction=new Bm.default(Object.assign({},t,{data:new Uint8Array(0)}))}get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}async uploadChunk(e){if(this.isComplete)throw new Error("Upload is already complete");if(this.lastResponseError!==""?this.totalErrors++:this.totalErrors=0,this.totalErrors===100)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let t=this.lastResponseError===""?0:Math.max(this.lastRequestTimeEnd+Pm-Date.now(),Pm);if(t>0&&(t=t-t*Math.random()*.3,await new Promise(a=>setTimeout(a,t))),this.lastResponseError="",!this.txPosted){await this.postTransaction();return}e&&(this.chunkIndex=e);let n=this.transaction.getChunk(e||this.chunkIndex,this.data);if(!await(0,G7.validatePath)(this.transaction.chunks.data_root,parseInt(n.offset),0,parseInt(n.data_size),H7.b64UrlToBuffer(n.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);let o=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch(a=>(console.error(a.message),{status:-1,data:{error:a.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=o.status,this.lastResponseStatus==200)this.chunkIndex++;else if(this.lastResponseError=(0,Kh.getError)(o),z7.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized(e,t,n){if(!t||typeof t.chunkIndex!="number"||typeof t.transaction!="object")throw new Error("Serialized object does not match expected format.");var i=new Bm.default(t.transaction);i.chunks||await i.prepareChunks(n);let o=new wa(e,i);if(o.chunkIndex=t.chunkIndex,o.lastRequestTimeEnd=t.lastRequestTimeEnd,o.lastResponseError=t.lastResponseError,o.lastResponseStatus=t.lastResponseStatus,o.txPosted=t.txPosted,o.data=n,o.transaction.data_root!==t.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return o}static async fromTransactionId(e,t){let n=await e.get(`tx/${t}`);if(n.status!==200)throw new Error(`Tx ${t} not found: ${n.status}`);let i=n.data;return i.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:i}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=Rm){this.transaction.data=this.data;let n=await this.api.post("tx",this.transaction).catch(i=>(console.error(i),{status:-1,data:{error:i.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=n.status,this.transaction.data=new Uint8Array(0),n.status>=200&&n.status<300){this.txPosted=!0,this.chunkIndex=Rm;return}throw this.lastResponseError=(0,Kh.getError)(n),new Error(`Unable to upload transaction: ${n.status}, ${this.lastResponseError}`)}let t=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=t.status,!(t.status>=200&&t.status<300))throw this.lastResponseError=(0,Kh.getError)(t),new Error(`Unable to upload transaction: ${t.status}, ${this.lastResponseError}`);this.txPosted=!0}};xc.TransactionUploader=wa});var Ui=P((QD,Lm)=>{Lm.exports={}});var km=P($i=>{"use strict";var ji=$i&&$i.__await||function(r){return this instanceof ji?(this.v=r,this):new ji(r)},K7=$i&&$i.__asyncGenerator||function(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(I){n[I]&&(i[I]=function(E){return new Promise(function(C,N){o.push([I,E,C,N])>1||c(I,E)})})}function c(I,E){try{y(n[I](E))}catch(C){S(o[0][3],C)}}function y(I){I.value instanceof ji?Promise.resolve(I.value.v).then(m,_):S(o[0][2],I)}function m(I){c("next",I)}function _(I){c("throw",I)}function S(I,E){I(E),o.shift(),o.length&&c(o[0][0],o[0][1])}};Object.defineProperty($i,"__esModule",{value:!0});var Vh=da(),pn=wc(),xa=Gr(),Jh=Nm();Ui();var Xh=class{constructor(e,t,n){this.api=e,this.crypto=t,this.chunks=n}getTransactionAnchor(){return this.api.get("tx_anchor",{transformResponse:[]}).then(e=>e.data)}getPrice(e,t){let n=t?`price/${e}/${t}`:`price/${e}`;return this.api.get(n,{transformResponse:[function(i){return i}]}).then(i=>i.data)}async get(e){let t=await this.api.get(`tx/${e}`);if(t.status==200){let n=parseInt(t.data.data_size);if(t.data.format>=2&&n>0&&n<=1024*1024*12){let i=await this.getData(e);return new pn.default(Object.assign(Object.assign({},t.data),{data:i}))}return new pn.default(Object.assign(Object.assign({},t.data),{format:t.data.format||1}))}throw t.status==404?new Vh.default("TX_NOT_FOUND"):t.status==410?new Vh.default("TX_FAILED"):new Vh.default("TX_INVALID")}fromRaw(e){return new pn.default(e)}async search(e,t){return this.api.post("arql",{op:"equals",expr1:e,expr2:t}).then(n=>n.data?n.data:[])}getStatus(e){return this.api.get(`tx/${e}/status`).then(t=>t.status==200?{status:200,confirmed:t.data}:{status:t.status,confirmed:null})}async getData(e,t){let n;try{n=await this.chunks.downloadChunkedData(e)}catch(i){console.error(`Error while trying to download chunked data for ${e}`),console.error(i)}if(!n){console.warn(`Falling back to gateway cache for ${e}`);try{n=(await this.api.get(`/${e}`)).data}catch(i){console.error(`Error while trying to download contiguous data from gateway cache for ${e}`),console.error(i)}}if(!n)throw new Error(`${e} was not found!`);return t&&t.decode&&!t.string?n:t&&t.decode&&t.string?xa.bufferToString(n):xa.bufferTob64Url(n)}async sign(e,t,n){if(!t&&(typeof window>"u"||!window.arweaveWallet))throw new Error("A new Arweave transaction must provide the jwk parameter.");if(!t||t==="use_wallet"){try{(await window.arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await window.arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}let i=await window.arweaveWallet.sign(e,n);e.setSignature({id:i.id,owner:i.owner,reward:i.reward,tags:i.tags,signature:i.signature})}else{e.setOwner(t.n);let i=await e.getSignatureData(),o=await this.crypto.sign(t,i,n),a=await this.crypto.hash(o);e.setSignature({id:xa.bufferTob64Url(a),owner:t.n,signature:xa.bufferTob64Url(o)})}}async verify(e){let t=await e.getSignatureData(),n=e.get("signature",{decode:!0,string:!1}),i=xa.bufferTob64Url(await this.crypto.hash(n));if(e.id!==i)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(e.owner,t,n)}async post(e){if(typeof e=="string"?e=new pn.default(JSON.parse(e)):typeof e.readInt32BE=="function"?e=new pn.default(JSON.parse(e.toString())):typeof e=="object"&&!(e instanceof pn.default)&&(e=new pn.default(e)),!(e instanceof pn.default))throw new Error("Must be Transaction object");e.chunks||await e.prepareChunks(e.data);let t=await this.getUploader(e,e.data);try{for(;!t.isComplete;)await t.uploadChunk()}catch(n){if(t.lastResponseStatus>0)return{status:t.lastResponseStatus,statusText:t.lastResponseError,data:{error:t.lastResponseError}};throw n}return{status:200,statusText:"OK",data:{}}}async getUploader(e,t){let n;if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),e instanceof pn.default){if(t||(t=e.data),!(t instanceof Uint8Array))throw new Error("Data format is invalid");e.chunks||await e.prepareChunks(t),n=new Jh.TransactionUploader(this.api,e),(!n.data||n.data.length===0)&&(n.data=t)}else{if(typeof e=="string"&&(e=await Jh.TransactionUploader.fromTransactionId(this.api,e)),!t||!(t instanceof Uint8Array))throw new Error("Must provide data when resuming upload");n=await Jh.TransactionUploader.fromSerialized(this.api,e,t)}return n}upload(e,t){return K7(this,arguments,function*(){let i=yield ji(this.getUploader(e,t));for(;!i.isComplete;)yield ji(i.uploadChunk()),yield yield ji(i);return yield ji(i)})}};$i.default=Xh});var Dm=P(Qh=>{"use strict";Object.defineProperty(Qh,"__esModule",{value:!0});var qm=Gr();Ui();var Yh=class{constructor(e,t){this.api=e,this.crypto=t}getBalance(e){return this.api.get(`wallet/${e}/balance`,{transformResponse:[function(t){return t}]}).then(t=>t.data)}getLastTransactionID(e){return this.api.get(`wallet/${e}/last_tx`).then(t=>t.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(e){return!e||e==="use_wallet"?this.getAddress():this.getAddress(e)}async getAddress(e){if(!e||e==="use_wallet"){try{await window.arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return window.arweaveWallet.getActiveAddress()}else return this.ownerToAddress(e.n)}async ownerToAddress(e){return qm.bufferTob64Url(await this.crypto.hash(qm.b64UrlToBuffer(e)))}};Qh.default=Yh});var jm=P(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});_a.SiloResource=void 0;var Um=Gr(),Zh=class{constructor(e,t,n){this.api=e,this.crypto=t,this.transactions=n}async get(e){if(!e)throw new Error("No Silo URI specified");let t=await this.parseUri(e),n=await this.transactions.search("Silo-Name",t.getAccessKey());if(n.length==0)throw new Error(`No data could be found for the Silo URI: ${e}`);let i=await this.transactions.get(n[0]);if(!i)throw new Error(`No data could be found for the Silo URI: ${e}`);let o=i.get("data",{decode:!0,string:!1});return this.crypto.decrypt(o,t.getEncryptionKey())}async readTransactionData(e,t){if(!t)throw new Error("No Silo URI specified");let n=await this.parseUri(t),i=e.get("data",{decode:!0,string:!1});return this.crypto.decrypt(i,n.getEncryptionKey())}async parseUri(e){let t=e.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!t)throw new Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");let n=t[1],i=Math.pow(2,parseInt(t[2])),o=await this.hash(Um.stringToBuffer(n),i),a=Um.bufferTob64(o.slice(0,15)),c=await this.hash(o.slice(16,31),1);return new _c(e,a,c)}async hash(e,t){let n=await this.crypto.hash(e);for(let i=0;i<t-1;i++)n=await this.crypto.hash(n);return n}};_a.default=Zh;var _c=class{constructor(e,t,n){this.uri=e,this.accessKey=t,this.encryptionKey=n}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}};_a.SiloResource=_c});var Wm=P(t0=>{"use strict";Object.defineProperty(t0,"__esModule",{value:!0});var $m=da(),V7=Gr(),e0=class{constructor(e){this.api=e}async getTransactionOffset(e){let t=await this.api.get(`tx/${e}/offset`);if(t.status===200)return t.data;throw new Error(`Unable to get transaction offset: ${(0,$m.getError)(t)}`)}async getChunk(e){let t=await this.api.get(`chunk/${e}`);if(t.status===200)return t.data;throw new Error(`Unable to get chunk: ${(0,$m.getError)(t)}`)}async getChunkData(e){let t=await this.getChunk(e);return V7.b64UrlToBuffer(t.chunk)}firstChunkOffset(e){return parseInt(e.offset)-parseInt(e.size)+1}async downloadChunkedData(e){let t=await this.getTransactionOffset(e),n=parseInt(t.size),o=parseInt(t.offset)-n+1,a=new Uint8Array(n),c=0;for(;c<n;){this.api.config.logging&&console.log(`[chunk] ${c}/${n}`);let y;try{y=await this.getChunkData(o+c)}catch{console.error(`[chunk] Failed to fetch chunk at offset ${o+c}`),console.error("[chunk] This could indicate that the chunk wasn't uploaded or hasn't yet seeded properly to a particular gateway/node")}if(y)a.set(y,c),c+=y.length;else throw new Error(`Couldn't complete data download at ${c}/${n}`)}return a}};t0.default=e0});var Hm=P(r0=>{"use strict";Object.defineProperty(r0,"__esModule",{value:!0});var J7=da();Ui();var Do=class{constructor(e,t){this.api=e,this.network=t}async get(e){let t=await this.api.get(`${Do.ENDPOINT}${e}`);if(t.status===200)return t.data;throw t.status===404?new J7.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${t}`)}async getCurrent(){let{current:e}=await this.network.getInfo();return await this.get(e)}};r0.default=Do;Do.ENDPOINT="block/hash/"});var pa=P(n0=>{"use strict";Object.defineProperty(n0,"__esModule",{value:!0});var X7=Ng(),Y7=X1(),Q7=Sm(),Z7=Em(),e9=km(),t9=Dm(),Gm=wc(),Sa=Gr(),r9=jm(),n9=Wm(),i9=Hm(),zr=class{constructor(e){this.api=new Y7.default(e),this.wallets=new t9.default(this.api,zr.crypto),this.chunks=new n9.default(this.api),this.transactions=new e9.default(this.api,zr.crypto,this.chunks),this.silo=new r9.default(this.api,this.crypto,this.transactions),this.network=new Z7.default(this.api),this.blocks=new i9.default(this.api,this.network),this.ar=new X7.default}get crypto(){return zr.crypto}get utils(){return zr.utils}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(e,t){let n={};if(Object.assign(n,e),!e.data&&!(e.target&&e.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(e.owner==null&&t&&t!=="use_wallet"&&(n.owner=t.n),e.last_tx==null&&(n.last_tx=await this.transactions.getTransactionAnchor()),typeof e.data=="string"&&(e.data=Sa.stringToBuffer(e.data)),e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),e.data&&!(e.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(e.reward==null){let o=e.data?e.data.byteLength:0;n.reward=await this.transactions.getPrice(o,n.target)}n.data_root="",n.data_size=e.data?e.data.byteLength.toString():"0",n.data=e.data||new Uint8Array(0);let i=new Gm.default(n);return await i.getSignatureData(),i}async createSiloTransaction(e,t,n){let i={};if(Object.assign(i,e),!e.data)throw new Error("Silo transactions must have a 'data' value");if(!n)throw new Error("No Silo URI specified.");if(e.target||e.quantity)throw new Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");if(e.owner==null){if(!t||!t.n)throw new Error("A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.");i.owner=t.n}e.last_tx==null&&(i.last_tx=await this.transactions.getTransactionAnchor());let o=await this.silo.parseUri(n);if(typeof e.data=="string"){let c=await this.crypto.encrypt(Sa.stringToBuffer(e.data),o.getEncryptionKey());i.reward=await this.transactions.getPrice(c.byteLength),i.data=Sa.bufferTob64Url(c)}if(e.data instanceof Uint8Array){let c=await this.crypto.encrypt(e.data,o.getEncryptionKey());i.reward=await this.transactions.getPrice(c.byteLength),i.data=Sa.bufferTob64Url(c)}let a=new Gm.default(i);return a.addTag("Silo-Name",o.getAccessKey()),a.addTag("Silo-Version","0.1.0"),a}arql(e){return this.api.post("/arql",e).then(t=>t.data||[])}};n0.default=zr;zr.crypto=new Q7.default;zr.utils=Sa});var i0=P($n=>{"use strict";var o9=$n&&$n.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),s9=$n&&$n.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&o9(e,r,t)};Object.defineProperty($n,"__esModule",{value:!0});var Sc=pa();Sc.default.init=function(r={}){function e(){let a={host:"arweave.net",port:443,protocol:"https"};if(!window||!window.location||!window.location.protocol||!window.location.hostname)return a;let c=window.location.protocol.replace(":",""),y=window.location.hostname,m=window.location.port?parseInt(window.location.port):c=="https"?443:80;return["localhost","127.0.0.1"].includes(y)||c=="file"?a:{host:y,port:m,protocol:c}}let t=e(),n=r.protocol||t.protocol,i=r.host||t.host,o=r.port||t.port;return new Sc.default(Object.assign(Object.assign({},r),{host:i,protocol:n,port:o}))};window.Arweave=Sc.default;s9(pa(),$n);$n.default=Sc.default});var gn=P(Ye=>{"use strict";var a9=Ye&&Ye.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),f9=Ye&&Ye.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),c9=Ye&&Ye.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&a9(e,r,t);return f9(e,r),e};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.b64UrlDecode=Ye.b64UrlEncode=Ye.bufferTob64Url=Ye.bufferTob64=Ye.b64UrlToBuffer=Ye.stringToB64Url=Ye.stringToBuffer=Ye.bufferToString=Ye.b64UrlToString=Ye.concatBuffers=void 0;var zm=c9(Vf());function u9(r){let e=0;for(let i=0;i<r.length;i++)e+=r[i].byteLength;let t=new Uint8Array(e),n=0;t.set(new Uint8Array(r[0]),n),n+=r[0].byteLength;for(let i=1;i<r.length;i++)t.set(new Uint8Array(r[i]),n),n+=r[i].byteLength;return t}Ye.concatBuffers=u9;function l9(r){let e=Jm(r);return Km(e)}Ye.b64UrlToString=l9;function Km(r){if(typeof TextDecoder>"u"){let e=la().TextDecoder;return new e("utf-8",{fatal:!0}).decode(r)}return new TextDecoder("utf-8",{fatal:!0}).decode(r)}Ye.bufferToString=Km;function Vm(r){if(typeof TextEncoder>"u"){let e=la().TextEncoder;return new e().encode(r)}return new TextEncoder().encode(r)}Ye.stringToBuffer=Vm;function h9(r){return Ym(Vm(r))}Ye.stringToB64Url=h9;function Jm(r){return new Uint8Array(zm.toByteArray(Zm(r)))}Ye.b64UrlToBuffer=Jm;function Xm(r){return zm.fromByteArray(new Uint8Array(r))}Ye.bufferTob64=Xm;function Ym(r){return Qm(Xm(r))}Ye.bufferTob64Url=Ym;function Qm(r){return r.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}Ye.b64UrlEncode=Qm;function Zm(r){r=r.replace(/\-/g,"+").replace(/\_/g,"/");let e;return r.length%4==0?e=0:e=4-r.length%4,r.concat("=".repeat(e))}Ye.b64UrlDecode=Zm});var eb=P(s0=>{"use strict";Object.defineProperty(s0,"__esModule",{value:!0});var d9=Bl(),o0=class{constructor(){this.BigNum=(e,t)=>{let n=d9.BigNumber.clone({DECIMAL_PLACES:t});return new n(e)}}winstonToAr(e,{formatted:t=!1,decimals:n=12,trim:i=!0}={}){let o=this.stringToBigNum(e,n).shiftedBy(-12);return t?o.toFormat(n):o.toFixed(n)}arToWinston(e,{formatted:t=!1}={}){let n=this.stringToBigNum(e).shiftedBy(12);return t?n.toFormat():n.toFixed(0)}compare(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.comparedTo(i)}isEqual(e,t){return this.compare(e,t)===0}isLessThan(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.isLessThan(i)}isGreaterThan(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.isGreaterThan(i)}add(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.plus(t).toFixed(0)}sub(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.minus(t).toFixed(0)}stringToBigNum(e,t=12){return this.BigNum(e,t)}};s0.default=o0});var tb=P(Ea=>{"use strict";var p9=Ea&&Ea.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ea,"__esModule",{value:!0});var g9=p9(nh()),a0=class{constructor(e){this.METHOD_GET="GET",this.METHOD_POST="POST",this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){let t=e.protocol||"http",n=e.port||(t==="https"?443:80);return{host:e.host||"127.0.0.1",protocol:t,port:n,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log,network:e.network}}async get(e,t){try{return await this.request().get(e,t)}catch(n){if(n.response&&n.response.status)return n.response;throw n}}async post(e,t,n){try{return await this.request().post(e,t,n)}catch(i){if(i.response&&i.response.status)return i.response;throw i}}request(){let e={};this.config.network&&(e["x-network"]=this.config.network);let t=g9.default.create({baseURL:`${this.config.protocol}://${this.config.host}:${this.config.port}`,timeout:this.config.timeout,maxContentLength:1024*1024*512,headers:e});return this.config.logging&&(t.interceptors.request.use(n=>(this.config.logger(`Requesting: ${n.baseURL}/${n.url}`),n)),t.interceptors.response.use(n=>(this.config.logger(`Response:   ${n.config.url} - ${n.status}`),n))),t}};Ea.default=a0});var f0=P(()=>{});var Wt=P((rb,c0)=>{(function(r,e){"use strict";function t(x,u){if(!x)throw new Error(u||"Assertion failed")}function n(x,u){x.super_=u;var p=function(){};p.prototype=u.prototype,x.prototype=new p,x.prototype.constructor=x}function i(x,u,p){if(i.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,x!==null&&((u==="le"||u==="be")&&(p=u,u=10),this._init(x||0,u||10,p||"be"))}typeof r=="object"?r.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=f0().Buffer}catch{}i.isBN=function(u){return u instanceof i?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===i.wordSize&&Array.isArray(u.words)},i.max=function(u,p){return u.cmp(p)>0?u:p},i.min=function(u,p){return u.cmp(p)<0?u:p},i.prototype._init=function(u,p,h){if(typeof u=="number")return this._initNumber(u,p,h);if(typeof u=="object")return this._initArray(u,p,h);p==="hex"&&(p=16),t(p===(p|0)&&p>=2&&p<=36),u=u.toString().replace(/\s+/g,"");var s=0;u[0]==="-"&&(s++,this.negative=1),s<u.length&&(p===16?this._parseHex(u,s,h):(this._parseBase(u,p,s),h==="le"&&this._initArray(this.toArray(),p,h)))},i.prototype._initNumber=function(u,p,h){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(t(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),p,h)},i.prototype._initArray=function(u,p,h){if(t(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var f,g,v=0;if(h==="be")for(s=u.length-1,f=0;s>=0;s-=3)g=u[s]|u[s-1]<<8|u[s-2]<<16,this.words[f]|=g<<v&67108863,this.words[f+1]=g>>>26-v&67108863,v+=24,v>=26&&(v-=26,f++);else if(h==="le")for(s=0,f=0;s<u.length;s+=3)g=u[s]|u[s+1]<<8|u[s+2]<<16,this.words[f]|=g<<v&67108863,this.words[f+1]=g>>>26-v&67108863,v+=24,v>=26&&(v-=26,f++);return this.strip()};function a(x,u){var p=x.charCodeAt(u);return p>=65&&p<=70?p-55:p>=97&&p<=102?p-87:p-48&15}function c(x,u,p){var h=a(x,p);return p-1>=u&&(h|=a(x,p-1)<<4),h}i.prototype._parseHex=function(u,p,h){this.length=Math.ceil((u.length-p)/6),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var f=0,g=0,v;if(h==="be")for(s=u.length-1;s>=p;s-=2)v=c(u,p,s)<<f,this.words[g]|=v&67108863,f>=18?(f-=18,g+=1,this.words[g]|=v>>>26):f+=8;else{var d=u.length-p;for(s=d%2===0?p+1:p;s<u.length;s+=2)v=c(u,p,s)<<f,this.words[g]|=v&67108863,f>=18?(f-=18,g+=1,this.words[g]|=v>>>26):f+=8}this.strip()};function y(x,u,p,h){for(var s=0,f=Math.min(x.length,p),g=u;g<f;g++){var v=x.charCodeAt(g)-48;s*=h,v>=49?s+=v-49+10:v>=17?s+=v-17+10:s+=v}return s}i.prototype._parseBase=function(u,p,h){this.words=[0],this.length=1;for(var s=0,f=1;f<=67108863;f*=p)s++;s--,f=f/p|0;for(var g=u.length-h,v=g%s,d=Math.min(g,g-v)+h,l=0,w=h;w<d;w+=s)l=y(u,w,w+s,p),this.imuln(f),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(v!==0){var T=1;for(l=y(u,w,u.length,p),w=0;w<v;w++)T*=p;this.imuln(T),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},i.prototype.copy=function(u){u.words=new Array(this.length);for(var p=0;p<this.length;p++)u.words[p]=this.words[p];u.length=this.length,u.negative=this.negative,u.red=this.red},i.prototype.clone=function(){var u=new i(null);return this.copy(u),u},i.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(u,p){u=u||10,p=p|0||1;var h;if(u===16||u==="hex"){h="";for(var s=0,f=0,g=0;g<this.length;g++){var v=this.words[g],d=((v<<s|f)&16777215).toString(16);f=v>>>24-s&16777215,f!==0||g!==this.length-1?h=m[6-d.length]+d+h:h=d+h,s+=2,s>=26&&(s-=26,g--)}for(f!==0&&(h=f.toString(16)+h);h.length%p!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(u===(u|0)&&u>=2&&u<=36){var l=_[u],w=S[u];h="";var T=this.clone();for(T.negative=0;!T.isZero();){var b=T.modn(w).toString(u);T=T.idivn(w),T.isZero()?h=b+h:h=m[l-b.length]+b+h}for(this.isZero()&&(h="0"+h);h.length%p!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}t(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(u,p){return t(typeof o<"u"),this.toArrayLike(o,u,p)},i.prototype.toArray=function(u,p){return this.toArrayLike(Array,u,p)},i.prototype.toArrayLike=function(u,p,h){var s=this.byteLength(),f=h||Math.max(1,s);t(s<=f,"byte array longer than desired length"),t(f>0,"Requested array length <= 0"),this.strip();var g=p==="le",v=new u(f),d,l,w=this.clone();if(g){for(l=0;!w.isZero();l++)d=w.andln(255),w.iushrn(8),v[l]=d;for(;l<f;l++)v[l]=0}else{for(l=0;l<f-s;l++)v[l]=0;for(l=0;!w.isZero();l++)d=w.andln(255),w.iushrn(8),v[f-l-1]=d}return v},Math.clz32?i.prototype._countBits=function(u){return 32-Math.clz32(u)}:i.prototype._countBits=function(u){var p=u,h=0;return p>=4096&&(h+=13,p>>>=13),p>=64&&(h+=7,p>>>=7),p>=8&&(h+=4,p>>>=4),p>=2&&(h+=2,p>>>=2),h+p},i.prototype._zeroBits=function(u){if(u===0)return 26;var p=u,h=0;return(p&8191)===0&&(h+=13,p>>>=13),(p&127)===0&&(h+=7,p>>>=7),(p&15)===0&&(h+=4,p>>>=4),(p&3)===0&&(h+=2,p>>>=2),(p&1)===0&&h++,h},i.prototype.bitLength=function(){var u=this.words[this.length-1],p=this._countBits(u);return(this.length-1)*26+p};function I(x){for(var u=new Array(x.bitLength()),p=0;p<u.length;p++){var h=p/26|0,s=p%26;u[p]=(x.words[h]&1<<s)>>>s}return u}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,p=0;p<this.length;p++){var h=this._zeroBits(this.words[p]);if(u+=h,h!==26)break}return u},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},i.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var p=0;p<u.length;p++)this.words[p]=this.words[p]|u.words[p];return this.strip()},i.prototype.ior=function(u){return t((this.negative|u.negative)===0),this.iuor(u)},i.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},i.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},i.prototype.iuand=function(u){var p;this.length>u.length?p=u:p=this;for(var h=0;h<p.length;h++)this.words[h]=this.words[h]&u.words[h];return this.length=p.length,this.strip()},i.prototype.iand=function(u){return t((this.negative|u.negative)===0),this.iuand(u)},i.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},i.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},i.prototype.iuxor=function(u){var p,h;this.length>u.length?(p=this,h=u):(p=u,h=this);for(var s=0;s<h.length;s++)this.words[s]=p.words[s]^h.words[s];if(this!==p)for(;s<p.length;s++)this.words[s]=p.words[s];return this.length=p.length,this.strip()},i.prototype.ixor=function(u){return t((this.negative|u.negative)===0),this.iuxor(u)},i.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},i.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},i.prototype.inotn=function(u){t(typeof u=="number"&&u>=0);var p=Math.ceil(u/26)|0,h=u%26;this._expand(p),h>0&&p--;for(var s=0;s<p;s++)this.words[s]=~this.words[s]&67108863;return h>0&&(this.words[s]=~this.words[s]&67108863>>26-h),this.strip()},i.prototype.notn=function(u){return this.clone().inotn(u)},i.prototype.setn=function(u,p){t(typeof u=="number"&&u>=0);var h=u/26|0,s=u%26;return this._expand(h+1),p?this.words[h]=this.words[h]|1<<s:this.words[h]=this.words[h]&~(1<<s),this.strip()},i.prototype.iadd=function(u){var p;if(this.negative!==0&&u.negative===0)return this.negative=0,p=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,p=this.isub(u),u.negative=1,p._normSign();var h,s;this.length>u.length?(h=this,s=u):(h=u,s=this);for(var f=0,g=0;g<s.length;g++)p=(h.words[g]|0)+(s.words[g]|0)+f,this.words[g]=p&67108863,f=p>>>26;for(;f!==0&&g<h.length;g++)p=(h.words[g]|0)+f,this.words[g]=p&67108863,f=p>>>26;if(this.length=h.length,f!==0)this.words[this.length]=f,this.length++;else if(h!==this)for(;g<h.length;g++)this.words[g]=h.words[g];return this},i.prototype.add=function(u){var p;return u.negative!==0&&this.negative===0?(u.negative=0,p=this.sub(u),u.negative^=1,p):u.negative===0&&this.negative!==0?(this.negative=0,p=u.sub(this),this.negative=1,p):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},i.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var p=this.iadd(u);return u.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var h=this.cmp(u);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var s,f;h>0?(s=this,f=u):(s=u,f=this);for(var g=0,v=0;v<f.length;v++)p=(s.words[v]|0)-(f.words[v]|0)+g,g=p>>26,this.words[v]=p&67108863;for(;g!==0&&v<s.length;v++)p=(s.words[v]|0)+g,g=p>>26,this.words[v]=p&67108863;if(g===0&&v<s.length&&s!==this)for(;v<s.length;v++)this.words[v]=s.words[v];return this.length=Math.max(this.length,v),s!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(u){return this.clone().isub(u)};function E(x,u,p){p.negative=u.negative^x.negative;var h=x.length+u.length|0;p.length=h,h=h-1|0;var s=x.words[0]|0,f=u.words[0]|0,g=s*f,v=g&67108863,d=g/67108864|0;p.words[0]=v;for(var l=1;l<h;l++){for(var w=d>>>26,T=d&67108863,b=Math.min(l,u.length-1),F=Math.max(0,l-x.length+1);F<=b;F++){var X=l-F|0;s=x.words[X]|0,f=u.words[F]|0,g=s*f+T,w+=g/67108864|0,T=g&67108863}p.words[l]=T|0,d=w|0}return d!==0?p.words[l]=d|0:p.length--,p.strip()}var C=function(u,p,h){var s=u.words,f=p.words,g=h.words,v=0,d,l,w,T=s[0]|0,b=T&8191,F=T>>>13,X=s[1]|0,Z=X&8191,re=X>>>13,fe=s[2]|0,te=fe&8191,O=fe>>>13,B=s[3]|0,R=B&8191,G=B>>>13,z=s[4]|0,U=z&8191,H=z>>>13,V=s[5]|0,$=V&8191,J=V>>>13,Y=s[6]|0,ee=Y&8191,se=Y>>>13,ae=s[7]|0,ie=ae&8191,ce=ae>>>13,_e=s[8]|0,ue=_e&8191,le=_e>>>13,je=s[9]|0,ye=je&8191,me=je>>>13,tt=f[0]|0,pe=tt&8191,ge=tt>>>13,ze=f[1]|0,de=ze&8191,he=ze>>>13,gt=f[2]|0,be=gt&8191,ve=gt>>>13,yt=f[3]|0,we=yt&8191,xe=yt>>>13,mt=f[4]|0,Fe=mt&8191,Te=mt>>>13,Ys=f[5]|0,Me=Ys&8191,Ie=Ys>>>13,Qs=f[6]|0,Oe=Qs&8191,Ce=Qs>>>13,Zs=f[7]|0,Be=Zs&8191,Re=Zs>>>13,ea=f[8]|0,Pe=ea&8191,Ne=ea>>>13,ta=f[9]|0,Le=ta&8191,ke=ta>>>13;h.negative=u.negative^p.negative,h.length=19,d=Math.imul(b,pe),l=Math.imul(b,ge),l=l+Math.imul(F,pe)|0,w=Math.imul(F,ge);var So=(v+d|0)+((l&8191)<<13)|0;v=(w+(l>>>13)|0)+(So>>>26)|0,So&=67108863,d=Math.imul(Z,pe),l=Math.imul(Z,ge),l=l+Math.imul(re,pe)|0,w=Math.imul(re,ge),d=d+Math.imul(b,de)|0,l=l+Math.imul(b,he)|0,l=l+Math.imul(F,de)|0,w=w+Math.imul(F,he)|0;var ct=(v+d|0)+((l&8191)<<13)|0;v=(w+(l>>>13)|0)+(ct>>>26)|0,ct&=67108863,d=Math.imul(te,pe),l=Math.imul(te,ge),l=l+Math.imul(O,pe)|0,w=Math.imul(O,ge),d=d+Math.imul(Z,de)|0,l=l+Math.imul(Z,he)|0,l=l+Math.imul(re,de)|0,w=w+Math.imul(re,he)|0,d=d+Math.imul(b,be)|0,l=l+Math.imul(b,ve)|0,l=l+Math.imul(F,be)|0,w=w+Math.imul(F,ve)|0;var ut=(v+d|0)+((l&8191)<<13)|0;v=(w+(l>>>13)|0)+(ut>>>26)|0,ut&=67108863,d=Math.imul(R,pe),l=Math.imul(R,ge),l=l+Math.imul(G,pe)|0,w=Math.imul(G,ge),d=d+Math.imul(te,de)|0,l=l+Math.imul(te,he)|0,l=l+Math.imul(O,de)|0,w=w+Math.imul(O,he)|0,d=d+Math.imul(Z,be)|0,l=l+Math.imul(Z,ve)|0,l=l+Math.imul(re,be)|0,w=w+Math.imul(re,ve)|0,d=d+Math.imul(b,we)|0,l=l+Math.imul(b,xe)|0,l=l+Math.imul(F,we)|0,w=w+Math.imul(F,xe)|0;var yi=(v+d|0)+((l&8191)<<13)|0;v=(w+(l>>>13)|0)+(yi>>>26)|0,yi&=67108863,d=Math.imul(U,pe),l=Math.imul(U,ge),l=l+Math.imul(H,pe)|0,w=Math.imul(H,ge),d=d+Math.imul(R,de)|0,l=l+Math.imul(R,he)|0,l=l+Math.imul(G,de)|0,w=w+Math.imul(G,he)|0,d=d+Math.imul(te,be)|0,l=l+Math.imul(te,ve)|0,l=l+Math.imul(O,be)|0,w=w+Math.imul(O,ve)|0,d=d+Math.imul(Z,we)|0,l=l+Math.imul(Z,xe)|0,l=l+Math.imul(re,we)|0,w=w+Math.imul(re,xe)|0,d=d+Math.imul(b,Fe)|0,l=l+Math.imul(b,Te)|0,l=l+Math.imul(F,Fe)|0,w=w+Math.imul(F,Te)|0;var mi=(v+d|0)+((l&8191)<<13)|0;v=(w+(l>>>13)|0)+(mi>>>26)|0,mi&=67108863,d=Math.imul($,pe),l=Math.imul($,ge),l=l+Math.imul(J,pe)|0,w=Math.imul(J,ge),d=d+Math.imul(U,de)|0,l=l+Math.imul(U,he)|0,l=l+Math.imul(H,de)|0,w=w+Math.imul(H,he)|0,d=d+Math.imul(R,be)|0,l=l+Math.imul(R,ve)|0,l=l+Math.imul(G,be)|0,w=w+Math.imul(G,ve)|0,d=d+Math.imul(te,we)|0,l=l+Math.imul(te,xe)|0,l=l+Math.imul(O,we)|0,w=w+Math.imul(O,xe)|0,d=d+Math.imul(Z,Fe)|0,l=l+Math.imul(Z,Te)|0,l=l+Math.imul(re,Fe)|0,w=w+Math.imul(re,Te)|0,d=d+Math.imul(b,Me)|0,l=l+Math.imul(b,Ie)|0,l=l+Math.imul(F,Me)|0,w=w+Math.imul(F,Ie)|0;var bi=(v+d|0)+((l&8191)<<13)|0;v=(w+(l>>>13)|0)+(bi>>>26)|0,bi&=67108863,d=Math.imul(ee,pe),l=Math.imul(ee,ge),l=l+Math.imul(se,pe)|0,w=Math.imul(se,ge),d=d+Math.imul($,de)|0,l=l+Math.imul($,he)|0,l=l+Math.imul(J,de)|0,w=w+Math.imul(J,he)|0,d=d+Math.imul(U,be)|0,l=l+Math.imul(U,ve)|0,l=l+Math.imul(H,be)|0,w=w+Math.imul(H,ve)|0,d=d+Math.imul(R,we)|0,l=l+Math.imul(R,xe)|0,l=l+Math.imul(G,we)|0,w=w+Math.imul(G,xe)|0,d=d+Math.imul(te,Fe)|0,l=l+Math.imul(te,Te)|0,l=l+Math.imul(O,Fe)|0,w=w+Math.imul(O,Te)|0,d=d+Math.imul(Z,Me)|0,l=l+Math.imul(Z,Ie)|0,l=l+Math.imul(re,Me)|0,w=w+Math.imul(re,Ie)|0,d=d+Math.imul(b,Oe)|0,l=l+Math.imul(b,Ce)|0,l=l+Math.imul(F,Oe)|0,w=w+Math.imul(F,Ce)|0;var vi=(v+d|0)+((l&8191)<<13)|0;v=(w+(l>>>13)|0)+(vi>>>26)|0,vi&=67108863,d=Math.imul(ie,pe),l=Math.imul(ie,ge),l=l+Math.imul(ce,pe)|0,w=Math.imul(ce,ge),d=d+Math.imul(ee,de)|0,l=l+Math.imul(ee,he)|0,l=l+Math.imul(se,de)|0,w=w+Math.imul(se,he)|0,d=d+Math.imul($,be)|0,l=l+Math.imul($,ve)|0,l=l+Math.imul(J,be)|0,w=w+Math.imul(J,ve)|0,d=d+Math.imul(U,we)|0,l=l+Math.imul(U,xe)|0,l=l+Math.imul(H,we)|0,w=w+Math.imul(H,xe)|0,d=d+Math.imul(R,Fe)|0,l=l+Math.imul(R,Te)|0,l=l+Math.imul(G,Fe)|0,w=w+Math.imul(G,Te)|0,d=d+Math.imul(te,Me)|0,l=l+Math.imul(te,Ie)|0,l=l+Math.imul(O,Me)|0,w=w+Math.imul(O,Ie)|0,d=d+Math.imul(Z,Oe)|0,l=l+Math.imul(Z,Ce)|0,l=l+Math.imul(re,Oe)|0,w=w+Math.imul(re,Ce)|0,d=d+Math.imul(b,Be)|0,l=l+Math.imul(b,Re)|0,l=l+Math.imul(F,Be)|0,w=w+Math.imul(F,Re)|0;var wi=(v+d|0)+((l&8191)<<13)|0;v=(w+(l>>>13)|0)+(wi>>>26)|0,wi&=67108863,d=Math.imul(ue,pe),l=Math.imul(ue,ge),l=l+Math.imul(le,pe)|0,w=Math.imul(le,ge),d=d+Math.imul(ie,de)|0,l=l+Math.imul(ie,he)|0,l=l+Math.imul(ce,de)|0,w=w+Math.imul(ce,he)|0,d=d+Math.imul(ee,be)|0,l=l+Math.imul(ee,ve)|0,l=l+Math.imul(se,be)|0,w=w+Math.imul(se,ve)|0,d=d+Math.imul($,we)|0,l=l+Math.imul($,xe)|0,l=l+Math.imul(J,we)|0,w=w+Math.imul(J,xe)|0,d=d+Math.imul(U,Fe)|0,l=l+Math.imul(U,Te)|0,l=l+Math.imul(H,Fe)|0,w=w+Math.imul(H,Te)|0,d=d+Math.imul(R,Me)|0,l=l+Math.imul(R,Ie)|0,l=l+Math.imul(G,Me)|0,w=w+Math.imul(G,Ie)|0,d=d+Math.imul(te,Oe)|0,l=l+Math.imul(te,Ce)|0,l=l+Math.imul(O,Oe)|0,w=w+Math.imul(O,Ce)|0,d=d+Math.imul(Z,Be)|0,l=l+Math.imul(Z,Re)|0,l=l+Math.imul(re,Be)|0,w=w+Math.imul(re,Re)|0,d=d+Math.imul(b,Pe)|0,l=l+Math.imul(b,Ne)|0,l=l+Math.imul(F,Pe)|0,w=w+Math.imul(F,Ne)|0;var xi=(v+d|0)+((l&8191)<<13)|0;v=(w+(l>>>13)|0)+(xi>>>26)|0,xi&=67108863,d=Math.imul(ye,pe),l=Math.imul(ye,ge),l=l+Math.imul(me,pe)|0,w=Math.imul(me,ge),d=d+Math.imul(ue,de)|0,l=l+Math.imul(ue,he)|0,l=l+Math.imul(le,de)|0,w=w+Math.imul(le,he)|0,d=d+Math.imul(ie,be)|0,l=l+Math.imul(ie,ve)|0,l=l+Math.imul(ce,be)|0,w=w+Math.imul(ce,ve)|0,d=d+Math.imul(ee,we)|0,l=l+Math.imul(ee,xe)|0,l=l+Math.imul(se,we)|0,w=w+Math.imul(se,xe)|0,d=d+Math.imul($,Fe)|0,l=l+Math.imul($,Te)|0,l=l+Math.imul(J,Fe)|0,w=w+Math.imul(J,Te)|0,d=d+Math.imul(U,Me)|0,l=l+Math.imul(U,Ie)|0,l=l+Math.imul(H,Me)|0,w=w+Math.imul(H,Ie)|0,d=d+Math.imul(R,Oe)|0,l=l+Math.imul(R,Ce)|0,l=l+Math.imul(G,Oe)|0,w=w+Math.imul(G,Ce)|0,d=d+Math.imul(te,Be)|0,l=l+Math.imul(te,Re)|0,l=l+Math.imul(O,Be)|0,w=w+Math.imul(O,Re)|0,d=d+Math.imul(Z,Pe)|0,l=l+Math.imul(Z,Ne)|0,l=l+Math.imul(re,Pe)|0,w=w+Math.imul(re,Ne)|0,d=d+Math.imul(b,Le)|0,l=l+Math.imul(b,ke)|0,l=l+Math.imul(F,Le)|0,w=w+Math.imul(F,ke)|0;var _i=(v+d|0)+((l&8191)<<13)|0;v=(w+(l>>>13)|0)+(_i>>>26)|0,_i&=67108863,d=Math.imul(ye,de),l=Math.imul(ye,he),l=l+Math.imul(me,de)|0,w=Math.imul(me,he),d=d+Math.imul(ue,be)|0,l=l+Math.imul(ue,ve)|0,l=l+Math.imul(le,be)|0,w=w+Math.imul(le,ve)|0,d=d+Math.imul(ie,we)|0,l=l+Math.imul(ie,xe)|0,l=l+Math.imul(ce,we)|0,w=w+Math.imul(ce,xe)|0,d=d+Math.imul(ee,Fe)|0,l=l+Math.imul(ee,Te)|0,l=l+Math.imul(se,Fe)|0,w=w+Math.imul(se,Te)|0,d=d+Math.imul($,Me)|0,l=l+Math.imul($,Ie)|0,l=l+Math.imul(J,Me)|0,w=w+Math.imul(J,Ie)|0,d=d+Math.imul(U,Oe)|0,l=l+Math.imul(U,Ce)|0,l=l+Math.imul(H,Oe)|0,w=w+Math.imul(H,Ce)|0,d=d+Math.imul(R,Be)|0,l=l+Math.imul(R,Re)|0,l=l+Math.imul(G,Be)|0,w=w+Math.imul(G,Re)|0,d=d+Math.imul(te,Pe)|0,l=l+Math.imul(te,Ne)|0,l=l+Math.imul(O,Pe)|0,w=w+Math.imul(O,Ne)|0,d=d+Math.imul(Z,Le)|0,l=l+Math.imul(Z,ke)|0,l=l+Math.imul(re,Le)|0,w=w+Math.imul(re,ke)|0;var Si=(v+d|0)+((l&8191)<<13)|0;v=(w+(l>>>13)|0)+(Si>>>26)|0,Si&=67108863,d=Math.imul(ye,be),l=Math.imul(ye,ve),l=l+Math.imul(me,be)|0,w=Math.imul(me,ve),d=d+Math.imul(ue,we)|0,l=l+Math.imul(ue,xe)|0,l=l+Math.imul(le,we)|0,w=w+Math.imul(le,xe)|0,d=d+Math.imul(ie,Fe)|0,l=l+Math.imul(ie,Te)|0,l=l+Math.imul(ce,Fe)|0,w=w+Math.imul(ce,Te)|0,d=d+Math.imul(ee,Me)|0,l=l+Math.imul(ee,Ie)|0,l=l+Math.imul(se,Me)|0,w=w+Math.imul(se,Ie)|0,d=d+Math.imul($,Oe)|0,l=l+Math.imul($,Ce)|0,l=l+Math.imul(J,Oe)|0,w=w+Math.imul(J,Ce)|0,d=d+Math.imul(U,Be)|0,l=l+Math.imul(U,Re)|0,l=l+Math.imul(H,Be)|0,w=w+Math.imul(H,Re)|0,d=d+Math.imul(R,Pe)|0,l=l+Math.imul(R,Ne)|0,l=l+Math.imul(G,Pe)|0,w=w+Math.imul(G,Ne)|0,d=d+Math.imul(te,Le)|0,l=l+Math.imul(te,ke)|0,l=l+Math.imul(O,Le)|0,w=w+Math.imul(O,ke)|0;var Ei=(v+d|0)+((l&8191)<<13)|0;v=(w+(l>>>13)|0)+(Ei>>>26)|0,Ei&=67108863,d=Math.imul(ye,we),l=Math.imul(ye,xe),l=l+Math.imul(me,we)|0,w=Math.imul(me,xe),d=d+Math.imul(ue,Fe)|0,l=l+Math.imul(ue,Te)|0,l=l+Math.imul(le,Fe)|0,w=w+Math.imul(le,Te)|0,d=d+Math.imul(ie,Me)|0,l=l+Math.imul(ie,Ie)|0,l=l+Math.imul(ce,Me)|0,w=w+Math.imul(ce,Ie)|0,d=d+Math.imul(ee,Oe)|0,l=l+Math.imul(ee,Ce)|0,l=l+Math.imul(se,Oe)|0,w=w+Math.imul(se,Ce)|0,d=d+Math.imul($,Be)|0,l=l+Math.imul($,Re)|0,l=l+Math.imul(J,Be)|0,w=w+Math.imul(J,Re)|0,d=d+Math.imul(U,Pe)|0,l=l+Math.imul(U,Ne)|0,l=l+Math.imul(H,Pe)|0,w=w+Math.imul(H,Ne)|0,d=d+Math.imul(R,Le)|0,l=l+Math.imul(R,ke)|0,l=l+Math.imul(G,Le)|0,w=w+Math.imul(G,ke)|0;var Ai=(v+d|0)+((l&8191)<<13)|0;v=(w+(l>>>13)|0)+(Ai>>>26)|0,Ai&=67108863,d=Math.imul(ye,Fe),l=Math.imul(ye,Te),l=l+Math.imul(me,Fe)|0,w=Math.imul(me,Te),d=d+Math.imul(ue,Me)|0,l=l+Math.imul(ue,Ie)|0,l=l+Math.imul(le,Me)|0,w=w+Math.imul(le,Ie)|0,d=d+Math.imul(ie,Oe)|0,l=l+Math.imul(ie,Ce)|0,l=l+Math.imul(ce,Oe)|0,w=w+Math.imul(ce,Ce)|0,d=d+Math.imul(ee,Be)|0,l=l+Math.imul(ee,Re)|0,l=l+Math.imul(se,Be)|0,w=w+Math.imul(se,Re)|0,d=d+Math.imul($,Pe)|0,l=l+Math.imul($,Ne)|0,l=l+Math.imul(J,Pe)|0,w=w+Math.imul(J,Ne)|0,d=d+Math.imul(U,Le)|0,l=l+Math.imul(U,ke)|0,l=l+Math.imul(H,Le)|0,w=w+Math.imul(H,ke)|0;var Fi=(v+d|0)+((l&8191)<<13)|0;v=(w+(l>>>13)|0)+(Fi>>>26)|0,Fi&=67108863,d=Math.imul(ye,Me),l=Math.imul(ye,Ie),l=l+Math.imul(me,Me)|0,w=Math.imul(me,Ie),d=d+Math.imul(ue,Oe)|0,l=l+Math.imul(ue,Ce)|0,l=l+Math.imul(le,Oe)|0,w=w+Math.imul(le,Ce)|0,d=d+Math.imul(ie,Be)|0,l=l+Math.imul(ie,Re)|0,l=l+Math.imul(ce,Be)|0,w=w+Math.imul(ce,Re)|0,d=d+Math.imul(ee,Pe)|0,l=l+Math.imul(ee,Ne)|0,l=l+Math.imul(se,Pe)|0,w=w+Math.imul(se,Ne)|0,d=d+Math.imul($,Le)|0,l=l+Math.imul($,ke)|0,l=l+Math.imul(J,Le)|0,w=w+Math.imul(J,ke)|0;var Ti=(v+d|0)+((l&8191)<<13)|0;v=(w+(l>>>13)|0)+(Ti>>>26)|0,Ti&=67108863,d=Math.imul(ye,Oe),l=Math.imul(ye,Ce),l=l+Math.imul(me,Oe)|0,w=Math.imul(me,Ce),d=d+Math.imul(ue,Be)|0,l=l+Math.imul(ue,Re)|0,l=l+Math.imul(le,Be)|0,w=w+Math.imul(le,Re)|0,d=d+Math.imul(ie,Pe)|0,l=l+Math.imul(ie,Ne)|0,l=l+Math.imul(ce,Pe)|0,w=w+Math.imul(ce,Ne)|0,d=d+Math.imul(ee,Le)|0,l=l+Math.imul(ee,ke)|0,l=l+Math.imul(se,Le)|0,w=w+Math.imul(se,ke)|0;var Mi=(v+d|0)+((l&8191)<<13)|0;v=(w+(l>>>13)|0)+(Mi>>>26)|0,Mi&=67108863,d=Math.imul(ye,Be),l=Math.imul(ye,Re),l=l+Math.imul(me,Be)|0,w=Math.imul(me,Re),d=d+Math.imul(ue,Pe)|0,l=l+Math.imul(ue,Ne)|0,l=l+Math.imul(le,Pe)|0,w=w+Math.imul(le,Ne)|0,d=d+Math.imul(ie,Le)|0,l=l+Math.imul(ie,ke)|0,l=l+Math.imul(ce,Le)|0,w=w+Math.imul(ce,ke)|0;var Ii=(v+d|0)+((l&8191)<<13)|0;v=(w+(l>>>13)|0)+(Ii>>>26)|0,Ii&=67108863,d=Math.imul(ye,Pe),l=Math.imul(ye,Ne),l=l+Math.imul(me,Pe)|0,w=Math.imul(me,Ne),d=d+Math.imul(ue,Le)|0,l=l+Math.imul(ue,ke)|0,l=l+Math.imul(le,Le)|0,w=w+Math.imul(le,ke)|0;var Oi=(v+d|0)+((l&8191)<<13)|0;v=(w+(l>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,d=Math.imul(ye,Le),l=Math.imul(ye,ke),l=l+Math.imul(me,Le)|0,w=Math.imul(me,ke);var Ci=(v+d|0)+((l&8191)<<13)|0;return v=(w+(l>>>13)|0)+(Ci>>>26)|0,Ci&=67108863,g[0]=So,g[1]=ct,g[2]=ut,g[3]=yi,g[4]=mi,g[5]=bi,g[6]=vi,g[7]=wi,g[8]=xi,g[9]=_i,g[10]=Si,g[11]=Ei,g[12]=Ai,g[13]=Fi,g[14]=Ti,g[15]=Mi,g[16]=Ii,g[17]=Oi,g[18]=Ci,v!==0&&(g[19]=v,h.length++),h};Math.imul||(C=E);function N(x,u,p){p.negative=u.negative^x.negative,p.length=x.length+u.length;for(var h=0,s=0,f=0;f<p.length-1;f++){var g=s;s=0;for(var v=h&67108863,d=Math.min(f,u.length-1),l=Math.max(0,f-x.length+1);l<=d;l++){var w=f-l,T=x.words[w]|0,b=u.words[l]|0,F=T*b,X=F&67108863;g=g+(F/67108864|0)|0,X=X+v|0,v=X&67108863,g=g+(X>>>26)|0,s+=g>>>26,g&=67108863}p.words[f]=v,h=g,g=s}return h!==0?p.words[f]=h:p.length--,p.strip()}function j(x,u,p){var h=new q;return h.mulp(x,u,p)}i.prototype.mulTo=function(u,p){var h,s=this.length+u.length;return this.length===10&&u.length===10?h=C(this,u,p):s<63?h=E(this,u,p):s<1024?h=N(this,u,p):h=j(this,u,p),h};function q(x,u){this.x=x,this.y=u}q.prototype.makeRBT=function(u){for(var p=new Array(u),h=i.prototype._countBits(u)-1,s=0;s<u;s++)p[s]=this.revBin(s,h,u);return p},q.prototype.revBin=function(u,p,h){if(u===0||u===h-1)return u;for(var s=0,f=0;f<p;f++)s|=(u&1)<<p-f-1,u>>=1;return s},q.prototype.permute=function(u,p,h,s,f,g){for(var v=0;v<g;v++)s[v]=p[u[v]],f[v]=h[u[v]]},q.prototype.transform=function(u,p,h,s,f,g){this.permute(g,u,p,h,s,f);for(var v=1;v<f;v<<=1)for(var d=v<<1,l=Math.cos(2*Math.PI/d),w=Math.sin(2*Math.PI/d),T=0;T<f;T+=d)for(var b=l,F=w,X=0;X<v;X++){var Z=h[T+X],re=s[T+X],fe=h[T+X+v],te=s[T+X+v],O=b*fe-F*te;te=b*te+F*fe,fe=O,h[T+X]=Z+fe,s[T+X]=re+te,h[T+X+v]=Z-fe,s[T+X+v]=re-te,X!==d&&(O=l*b-w*F,F=l*F+w*b,b=O)}},q.prototype.guessLen13b=function(u,p){var h=Math.max(p,u)|1,s=h&1,f=0;for(h=h/2|0;h;h=h>>>1)f++;return 1<<f+1+s},q.prototype.conjugate=function(u,p,h){if(!(h<=1))for(var s=0;s<h/2;s++){var f=u[s];u[s]=u[h-s-1],u[h-s-1]=f,f=p[s],p[s]=-p[h-s-1],p[h-s-1]=-f}},q.prototype.normalize13b=function(u,p){for(var h=0,s=0;s<p/2;s++){var f=Math.round(u[2*s+1]/p)*8192+Math.round(u[2*s]/p)+h;u[s]=f&67108863,f<67108864?h=0:h=f/67108864|0}return u},q.prototype.convert13b=function(u,p,h,s){for(var f=0,g=0;g<p;g++)f=f+(u[g]|0),h[2*g]=f&8191,f=f>>>13,h[2*g+1]=f&8191,f=f>>>13;for(g=2*p;g<s;++g)h[g]=0;t(f===0),t((f&-8192)===0)},q.prototype.stub=function(u){for(var p=new Array(u),h=0;h<u;h++)p[h]=0;return p},q.prototype.mulp=function(u,p,h){var s=2*this.guessLen13b(u.length,p.length),f=this.makeRBT(s),g=this.stub(s),v=new Array(s),d=new Array(s),l=new Array(s),w=new Array(s),T=new Array(s),b=new Array(s),F=h.words;F.length=s,this.convert13b(u.words,u.length,v,s),this.convert13b(p.words,p.length,w,s),this.transform(v,g,d,l,s,f),this.transform(w,g,T,b,s,f);for(var X=0;X<s;X++){var Z=d[X]*T[X]-l[X]*b[X];l[X]=d[X]*b[X]+l[X]*T[X],d[X]=Z}return this.conjugate(d,l,s),this.transform(d,l,F,g,s,f),this.conjugate(F,g,s),this.normalize13b(F,s),h.negative=u.negative^p.negative,h.length=u.length+p.length,h.strip()},i.prototype.mul=function(u){var p=new i(null);return p.words=new Array(this.length+u.length),this.mulTo(u,p)},i.prototype.mulf=function(u){var p=new i(null);return p.words=new Array(this.length+u.length),j(this,u,p)},i.prototype.imul=function(u){return this.clone().mulTo(u,this)},i.prototype.imuln=function(u){t(typeof u=="number"),t(u<67108864);for(var p=0,h=0;h<this.length;h++){var s=(this.words[h]|0)*u,f=(s&67108863)+(p&67108863);p>>=26,p+=s/67108864|0,p+=f>>>26,this.words[h]=f&67108863}return p!==0&&(this.words[h]=p,this.length++),this},i.prototype.muln=function(u){return this.clone().imuln(u)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(u){var p=I(u);if(p.length===0)return new i(1);for(var h=this,s=0;s<p.length&&p[s]===0;s++,h=h.sqr());if(++s<p.length)for(var f=h.sqr();s<p.length;s++,f=f.sqr())p[s]!==0&&(h=h.mul(f));return h},i.prototype.iushln=function(u){t(typeof u=="number"&&u>=0);var p=u%26,h=(u-p)/26,s=67108863>>>26-p<<26-p,f;if(p!==0){var g=0;for(f=0;f<this.length;f++){var v=this.words[f]&s,d=(this.words[f]|0)-v<<p;this.words[f]=d|g,g=v>>>26-p}g&&(this.words[f]=g,this.length++)}if(h!==0){for(f=this.length-1;f>=0;f--)this.words[f+h]=this.words[f];for(f=0;f<h;f++)this.words[f]=0;this.length+=h}return this.strip()},i.prototype.ishln=function(u){return t(this.negative===0),this.iushln(u)},i.prototype.iushrn=function(u,p,h){t(typeof u=="number"&&u>=0);var s;p?s=(p-p%26)/26:s=0;var f=u%26,g=Math.min((u-f)/26,this.length),v=67108863^67108863>>>f<<f,d=h;if(s-=g,s=Math.max(0,s),d){for(var l=0;l<g;l++)d.words[l]=this.words[l];d.length=g}if(g!==0)if(this.length>g)for(this.length-=g,l=0;l<this.length;l++)this.words[l]=this.words[l+g];else this.words[0]=0,this.length=1;var w=0;for(l=this.length-1;l>=0&&(w!==0||l>=s);l--){var T=this.words[l]|0;this.words[l]=w<<26-f|T>>>f,w=T&v}return d&&w!==0&&(d.words[d.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(u,p,h){return t(this.negative===0),this.iushrn(u,p,h)},i.prototype.shln=function(u){return this.clone().ishln(u)},i.prototype.ushln=function(u){return this.clone().iushln(u)},i.prototype.shrn=function(u){return this.clone().ishrn(u)},i.prototype.ushrn=function(u){return this.clone().iushrn(u)},i.prototype.testn=function(u){t(typeof u=="number"&&u>=0);var p=u%26,h=(u-p)/26,s=1<<p;if(this.length<=h)return!1;var f=this.words[h];return!!(f&s)},i.prototype.imaskn=function(u){t(typeof u=="number"&&u>=0);var p=u%26,h=(u-p)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(p!==0&&h++,this.length=Math.min(h,this.length),p!==0){var s=67108863^67108863>>>p<<p;this.words[this.length-1]&=s}return this.strip()},i.prototype.maskn=function(u){return this.clone().imaskn(u)},i.prototype.iaddn=function(u){return t(typeof u=="number"),t(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},i.prototype._iaddn=function(u){this.words[0]+=u;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},i.prototype.isubn=function(u){if(t(typeof u=="number"),t(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this.strip()},i.prototype.addn=function(u){return this.clone().iaddn(u)},i.prototype.subn=function(u){return this.clone().isubn(u)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(u,p,h){var s=u.length+h,f;this._expand(s);var g,v=0;for(f=0;f<u.length;f++){g=(this.words[f+h]|0)+v;var d=(u.words[f]|0)*p;g-=d&67108863,v=(g>>26)-(d/67108864|0),this.words[f+h]=g&67108863}for(;f<this.length-h;f++)g=(this.words[f+h]|0)+v,v=g>>26,this.words[f+h]=g&67108863;if(v===0)return this.strip();for(t(v===-1),v=0,f=0;f<this.length;f++)g=-(this.words[f]|0)+v,v=g>>26,this.words[f]=g&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(u,p){var h=this.length-u.length,s=this.clone(),f=u,g=f.words[f.length-1]|0,v=this._countBits(g);h=26-v,h!==0&&(f=f.ushln(h),s.iushln(h),g=f.words[f.length-1]|0);var d=s.length-f.length,l;if(p!=="mod"){l=new i(null),l.length=d+1,l.words=new Array(l.length);for(var w=0;w<l.length;w++)l.words[w]=0}var T=s.clone()._ishlnsubmul(f,1,d);T.negative===0&&(s=T,l&&(l.words[d]=1));for(var b=d-1;b>=0;b--){var F=(s.words[f.length+b]|0)*67108864+(s.words[f.length+b-1]|0);for(F=Math.min(F/g|0,67108863),s._ishlnsubmul(f,F,b);s.negative!==0;)F--,s.negative=0,s._ishlnsubmul(f,1,b),s.isZero()||(s.negative^=1);l&&(l.words[b]=F)}return l&&l.strip(),s.strip(),p!=="div"&&h!==0&&s.iushrn(h),{div:l||null,mod:s}},i.prototype.divmod=function(u,p,h){if(t(!u.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var s,f,g;return this.negative!==0&&u.negative===0?(g=this.neg().divmod(u,p),p!=="mod"&&(s=g.div.neg()),p!=="div"&&(f=g.mod.neg(),h&&f.negative!==0&&f.iadd(u)),{div:s,mod:f}):this.negative===0&&u.negative!==0?(g=this.divmod(u.neg(),p),p!=="mod"&&(s=g.div.neg()),{div:s,mod:g.mod}):(this.negative&u.negative)!==0?(g=this.neg().divmod(u.neg(),p),p!=="div"&&(f=g.mod.neg(),h&&f.negative!==0&&f.isub(u)),{div:g.div,mod:f}):u.length>this.length||this.cmp(u)<0?{div:new i(0),mod:this}:u.length===1?p==="div"?{div:this.divn(u.words[0]),mod:null}:p==="mod"?{div:null,mod:new i(this.modn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new i(this.modn(u.words[0]))}:this._wordDiv(u,p)},i.prototype.div=function(u){return this.divmod(u,"div",!1).div},i.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},i.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},i.prototype.divRound=function(u){var p=this.divmod(u);if(p.mod.isZero())return p.div;var h=p.div.negative!==0?p.mod.isub(u):p.mod,s=u.ushrn(1),f=u.andln(1),g=h.cmp(s);return g<0||f===1&&g===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},i.prototype.modn=function(u){t(u<=67108863);for(var p=(1<<26)%u,h=0,s=this.length-1;s>=0;s--)h=(p*h+(this.words[s]|0))%u;return h},i.prototype.idivn=function(u){t(u<=67108863);for(var p=0,h=this.length-1;h>=0;h--){var s=(this.words[h]|0)+p*67108864;this.words[h]=s/u|0,p=s%u}return this.strip()},i.prototype.divn=function(u){return this.clone().idivn(u)},i.prototype.egcd=function(u){t(u.negative===0),t(!u.isZero());var p=this,h=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var s=new i(1),f=new i(0),g=new i(0),v=new i(1),d=0;p.isEven()&&h.isEven();)p.iushrn(1),h.iushrn(1),++d;for(var l=h.clone(),w=p.clone();!p.isZero();){for(var T=0,b=1;(p.words[0]&b)===0&&T<26;++T,b<<=1);if(T>0)for(p.iushrn(T);T-- >0;)(s.isOdd()||f.isOdd())&&(s.iadd(l),f.isub(w)),s.iushrn(1),f.iushrn(1);for(var F=0,X=1;(h.words[0]&X)===0&&F<26;++F,X<<=1);if(F>0)for(h.iushrn(F);F-- >0;)(g.isOdd()||v.isOdd())&&(g.iadd(l),v.isub(w)),g.iushrn(1),v.iushrn(1);p.cmp(h)>=0?(p.isub(h),s.isub(g),f.isub(v)):(h.isub(p),g.isub(s),v.isub(f))}return{a:g,b:v,gcd:h.iushln(d)}},i.prototype._invmp=function(u){t(u.negative===0),t(!u.isZero());var p=this,h=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var s=new i(1),f=new i(0),g=h.clone();p.cmpn(1)>0&&h.cmpn(1)>0;){for(var v=0,d=1;(p.words[0]&d)===0&&v<26;++v,d<<=1);if(v>0)for(p.iushrn(v);v-- >0;)s.isOdd()&&s.iadd(g),s.iushrn(1);for(var l=0,w=1;(h.words[0]&w)===0&&l<26;++l,w<<=1);if(l>0)for(h.iushrn(l);l-- >0;)f.isOdd()&&f.iadd(g),f.iushrn(1);p.cmp(h)>=0?(p.isub(h),s.isub(f)):(h.isub(p),f.isub(s))}var T;return p.cmpn(1)===0?T=s:T=f,T.cmpn(0)<0&&T.iadd(u),T},i.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var p=this.clone(),h=u.clone();p.negative=0,h.negative=0;for(var s=0;p.isEven()&&h.isEven();s++)p.iushrn(1),h.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;h.isEven();)h.iushrn(1);var f=p.cmp(h);if(f<0){var g=p;p=h,h=g}else if(f===0||h.cmpn(1)===0)break;p.isub(h)}while(!0);return h.iushln(s)},i.prototype.invm=function(u){return this.egcd(u).a.umod(u)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(u){return this.words[0]&u},i.prototype.bincn=function(u){t(typeof u=="number");var p=u%26,h=(u-p)/26,s=1<<p;if(this.length<=h)return this._expand(h+1),this.words[h]|=s,this;for(var f=s,g=h;f!==0&&g<this.length;g++){var v=this.words[g]|0;v+=f,f=v>>>26,v&=67108863,this.words[g]=v}return f!==0&&(this.words[g]=f,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(u){var p=u<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this.strip();var h;if(this.length>1)h=1;else{p&&(u=-u),t(u<=67108863,"Number is too big");var s=this.words[0]|0;h=s===u?0:s<u?-1:1}return this.negative!==0?-h|0:h},i.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var p=this.ucmp(u);return this.negative!==0?-p|0:p},i.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var p=0,h=this.length-1;h>=0;h--){var s=this.words[h]|0,f=u.words[h]|0;if(s!==f){s<f?p=-1:s>f&&(p=1);break}}return p},i.prototype.gtn=function(u){return this.cmpn(u)===1},i.prototype.gt=function(u){return this.cmp(u)===1},i.prototype.gten=function(u){return this.cmpn(u)>=0},i.prototype.gte=function(u){return this.cmp(u)>=0},i.prototype.ltn=function(u){return this.cmpn(u)===-1},i.prototype.lt=function(u){return this.cmp(u)===-1},i.prototype.lten=function(u){return this.cmpn(u)<=0},i.prototype.lte=function(u){return this.cmp(u)<=0},i.prototype.eqn=function(u){return this.cmpn(u)===0},i.prototype.eq=function(u){return this.cmp(u)===0},i.red=function(u){return new A(u)},i.prototype.toRed=function(u){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},i.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(u){return this.red=u,this},i.prototype.forceRed=function(u){return t(!this.red,"Already a number in reduction context"),this._forceRed(u)},i.prototype.redAdd=function(u){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},i.prototype.redIAdd=function(u){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},i.prototype.redSub=function(u){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},i.prototype.redISub=function(u){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},i.prototype.redShl=function(u){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},i.prototype.redMul=function(u){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},i.prototype.redIMul=function(u){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},i.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(u){return t(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var D={k256:null,p224:null,p192:null,p25519:null};function Q(x,u){this.name=x,this.p=new i(u,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Q.prototype._tmp=function(){var u=new i(null);return u.words=new Array(Math.ceil(this.n/13)),u},Q.prototype.ireduce=function(u){var p=u,h;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),h=p.bitLength();while(h>this.n);var s=h<this.n?-1:p.ucmp(this.p);return s===0?(p.words[0]=0,p.length=1):s>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},Q.prototype.split=function(u,p){u.iushrn(this.n,0,p)},Q.prototype.imulK=function(u){return u.imul(this.k)};function oe(){Q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(oe,Q),oe.prototype.split=function(u,p){for(var h=4194303,s=Math.min(u.length,9),f=0;f<s;f++)p.words[f]=u.words[f];if(p.length=s,u.length<=9){u.words[0]=0,u.length=1;return}var g=u.words[9];for(p.words[p.length++]=g&h,f=10;f<u.length;f++){var v=u.words[f]|0;u.words[f-10]=(v&h)<<4|g>>>22,g=v}g>>>=22,u.words[f-10]=g,g===0&&u.length>10?u.length-=10:u.length-=9},oe.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var p=0,h=0;h<u.length;h++){var s=u.words[h]|0;p+=s*977,u.words[h]=p&67108863,p=s*64+(p/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function k(){Q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(k,Q);function L(){Q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(L,Q);function W(){Q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(W,Q),W.prototype.imulK=function(u){for(var p=0,h=0;h<u.length;h++){var s=(u.words[h]|0)*19+p,f=s&67108863;s>>>=26,u.words[h]=f,p=s}return p!==0&&(u.words[u.length++]=p),u},i._prime=function(u){if(D[u])return D[u];var p;if(u==="k256")p=new oe;else if(u==="p224")p=new k;else if(u==="p192")p=new L;else if(u==="p25519")p=new W;else throw new Error("Unknown prime "+u);return D[u]=p,p};function A(x){if(typeof x=="string"){var u=i._prime(x);this.m=u.p,this.prime=u}else t(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}A.prototype._verify1=function(u){t(u.negative===0,"red works only with positives"),t(u.red,"red works only with red numbers")},A.prototype._verify2=function(u,p){t((u.negative|p.negative)===0,"red works only with positives"),t(u.red&&u.red===p.red,"red works only with red numbers")},A.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):u.umod(this.m)._forceRed(this)},A.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},A.prototype.add=function(u,p){this._verify2(u,p);var h=u.add(p);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},A.prototype.iadd=function(u,p){this._verify2(u,p);var h=u.iadd(p);return h.cmp(this.m)>=0&&h.isub(this.m),h},A.prototype.sub=function(u,p){this._verify2(u,p);var h=u.sub(p);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},A.prototype.isub=function(u,p){this._verify2(u,p);var h=u.isub(p);return h.cmpn(0)<0&&h.iadd(this.m),h},A.prototype.shl=function(u,p){return this._verify1(u),this.imod(u.ushln(p))},A.prototype.imul=function(u,p){return this._verify2(u,p),this.imod(u.imul(p))},A.prototype.mul=function(u,p){return this._verify2(u,p),this.imod(u.mul(p))},A.prototype.isqr=function(u){return this.imul(u,u.clone())},A.prototype.sqr=function(u){return this.mul(u,u)},A.prototype.sqrt=function(u){if(u.isZero())return u.clone();var p=this.m.andln(3);if(t(p%2===1),p===3){var h=this.m.add(new i(1)).iushrn(2);return this.pow(u,h)}for(var s=this.m.subn(1),f=0;!s.isZero()&&s.andln(1)===0;)f++,s.iushrn(1);t(!s.isZero());var g=new i(1).toRed(this),v=g.redNeg(),d=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);this.pow(l,d).cmp(v)!==0;)l.redIAdd(v);for(var w=this.pow(l,s),T=this.pow(u,s.addn(1).iushrn(1)),b=this.pow(u,s),F=f;b.cmp(g)!==0;){for(var X=b,Z=0;X.cmp(g)!==0;Z++)X=X.redSqr();t(Z<F);var re=this.pow(w,new i(1).iushln(F-Z-1));T=T.redMul(re),w=re.redSqr(),b=b.redMul(w),F=Z}return T},A.prototype.invm=function(u){var p=u._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},A.prototype.pow=function(u,p){if(p.isZero())return new i(1).toRed(this);if(p.cmpn(1)===0)return u.clone();var h=4,s=new Array(1<<h);s[0]=new i(1).toRed(this),s[1]=u;for(var f=2;f<s.length;f++)s[f]=this.mul(s[f-1],u);var g=s[0],v=0,d=0,l=p.bitLength()%26;for(l===0&&(l=26),f=p.length-1;f>=0;f--){for(var w=p.words[f],T=l-1;T>=0;T--){var b=w>>T&1;if(g!==s[0]&&(g=this.sqr(g)),b===0&&v===0){d=0;continue}v<<=1,v|=b,d++,!(d!==h&&(f!==0||T!==0))&&(g=this.mul(g,s[v]),d=0,v=0)}l=26}return g},A.prototype.convertTo=function(u){var p=u.umod(this.m);return p===u?p.clone():p},A.prototype.convertFrom=function(u){var p=u.clone();return p.red=null,p},i.mont=function(u){return new M(u)};function M(x){A.call(this,x),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(M,A),M.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},M.prototype.convertFrom=function(u){var p=this.imod(u.mul(this.rinv));return p.red=null,p},M.prototype.imul=function(u,p){if(u.isZero()||p.isZero())return u.words[0]=0,u.length=1,u;var h=u.imul(p),s=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=h.isub(s).iushrn(this.shift),g=f;return f.cmp(this.m)>=0?g=f.isub(this.m):f.cmpn(0)<0&&(g=f.iadd(this.m)),g._forceRed(this)},M.prototype.mul=function(u,p){if(u.isZero()||p.isZero())return new i(0)._forceRed(this);var h=u.mul(p),s=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=h.isub(s).iushrn(this.shift),g=f;return f.cmp(this.m)>=0?g=f.isub(this.m):f.cmpn(0)<0&&(g=f.iadd(this.m)),g._forceRed(this)},M.prototype.invm=function(u){var p=this.imod(u._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(typeof c0>"u"||c0,rb)});var nb=P(u0=>{u0.read=function(r,e,t,n,i){var o,a,c=i*8-n-1,y=(1<<c)-1,m=y>>1,_=-7,S=t?i-1:0,I=t?-1:1,E=r[e+S];for(S+=I,o=E&(1<<-_)-1,E>>=-_,_+=c;_>0;o=o*256+r[e+S],S+=I,_-=8);for(a=o&(1<<-_)-1,o>>=-_,_+=n;_>0;a=a*256+r[e+S],S+=I,_-=8);if(o===0)o=1-m;else{if(o===y)return a?NaN:(E?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-m}return(E?-1:1)*a*Math.pow(2,o-n)};u0.write=function(r,e,t,n,i,o){var a,c,y,m=o*8-i-1,_=(1<<m)-1,S=_>>1,I=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=n?0:o-1,C=n?1:-1,N=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,a=_):(a=Math.floor(Math.log(e)/Math.LN2),e*(y=Math.pow(2,-a))<1&&(a--,y*=2),a+S>=1?e+=I/y:e+=I*Math.pow(2,1-S),e*y>=2&&(a++,y/=2),a+S>=_?(c=0,a=_):a+S>=1?(c=(e*y-1)*Math.pow(2,i),a=a+S):(c=e*Math.pow(2,S-1)*Math.pow(2,i),a=0));i>=8;r[t+E]=c&255,E+=C,c/=256,i-=8);for(a=a<<i|c,m+=i;m>0;r[t+E]=a&255,E+=C,a/=256,m-=8);r[t+E-C]|=N*128}});var Hn=P(Wo=>{"use strict";var l0=Vf(),jo=nb(),ib=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Wo.Buffer=ne;Wo.SlowBuffer=x9;Wo.INSPECT_MAX_BYTES=50;var Ec=2147483647;Wo.kMaxLength=Ec;ne.TYPED_ARRAY_SUPPORT=y9();!ne.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function y9(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(ne.prototype,"parent",{enumerable:!0,get:function(){if(!!ne.isBuffer(this))return this.buffer}});Object.defineProperty(ne.prototype,"offset",{enumerable:!0,get:function(){if(!!ne.isBuffer(this))return this.byteOffset}});function yn(r){if(r>Ec)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,ne.prototype),e}function ne(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g0(r)}return fb(r,e,t)}ne.poolSize=8192;function fb(r,e,t){if(typeof r=="string")return b9(r,e);if(ArrayBuffer.isView(r))return v9(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(Kr(r,ArrayBuffer)||r&&Kr(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Kr(r,SharedArrayBuffer)||r&&Kr(r.buffer,SharedArrayBuffer)))return d0(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return ne.from(n,e,t);let i=w9(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return ne.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}ne.from=function(r,e,t){return fb(r,e,t)};Object.setPrototypeOf(ne.prototype,Uint8Array.prototype);Object.setPrototypeOf(ne,Uint8Array);function cb(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function m9(r,e,t){return cb(r),r<=0?yn(r):e!==void 0?typeof t=="string"?yn(r).fill(e,t):yn(r).fill(e):yn(r)}ne.alloc=function(r,e,t){return m9(r,e,t)};function g0(r){return cb(r),yn(r<0?0:y0(r)|0)}ne.allocUnsafe=function(r){return g0(r)};ne.allocUnsafeSlow=function(r){return g0(r)};function b9(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!ne.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=ub(r,e)|0,n=yn(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function h0(r){let e=r.length<0?0:y0(r.length)|0,t=yn(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function v9(r){if(Kr(r,Uint8Array)){let e=new Uint8Array(r);return d0(e.buffer,e.byteOffset,e.byteLength)}return h0(r)}function d0(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,ne.prototype),n}function w9(r){if(ne.isBuffer(r)){let e=y0(r.length)|0,t=yn(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||b0(r.length)?yn(0):h0(r);if(r.type==="Buffer"&&Array.isArray(r.data))return h0(r.data)}function y0(r){if(r>=Ec)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ec.toString(16)+" bytes");return r|0}function x9(r){return+r!=r&&(r=0),ne.alloc(+r)}ne.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==ne.prototype};ne.compare=function(e,t){if(Kr(e,Uint8Array)&&(e=ne.from(e,e.offset,e.byteLength)),Kr(t,Uint8Array)&&(t=ne.from(t,t.offset,t.byteLength)),!ne.isBuffer(e)||!ne.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,a=Math.min(n,i);o<a;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};ne.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};ne.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return ne.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=ne.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let a=e[n];if(Kr(a,Uint8Array))o+a.length>i.length?(ne.isBuffer(a)||(a=ne.from(a)),a.copy(i,o)):Uint8Array.prototype.set.call(i,a,o);else if(ne.isBuffer(a))a.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=a.length}return i};function ub(r,e){if(ne.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||Kr(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return p0(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return vb(r).length;default:if(i)return n?-1:p0(r).length;e=(""+e).toLowerCase(),i=!0}}ne.byteLength=ub;function _9(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return B9(this,e,t);case"utf8":case"utf-8":return hb(this,e,t);case"ascii":return O9(this,e,t);case"latin1":case"binary":return C9(this,e,t);case"base64":return M9(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R9(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}ne.prototype._isBuffer=!0;function Wi(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}ne.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)Wi(this,t,t+1);return this};ne.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)Wi(this,t,t+3),Wi(this,t+1,t+2);return this};ne.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)Wi(this,t,t+7),Wi(this,t+1,t+6),Wi(this,t+2,t+5),Wi(this,t+3,t+4);return this};ne.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?hb(this,0,e):_9.apply(this,arguments)};ne.prototype.toLocaleString=ne.prototype.toString;ne.prototype.equals=function(e){if(!ne.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:ne.compare(this,e)===0};ne.prototype.inspect=function(){let e="",t=Wo.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};ib&&(ne.prototype[ib]=ne.prototype.inspect);ne.prototype.compare=function(e,t,n,i,o){if(Kr(e,Uint8Array)&&(e=ne.from(e,e.offset,e.byteLength)),!ne.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let a=o-i,c=n-t,y=Math.min(a,c),m=this.slice(i,o),_=e.slice(t,n);for(let S=0;S<y;++S)if(m[S]!==_[S]){a=m[S],c=_[S];break}return a<c?-1:c<a?1:0};function lb(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,b0(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=ne.from(e,n)),ne.isBuffer(e))return e.length===0?-1:ob(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):ob(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function ob(r,e,t,n,i){let o=1,a=r.length,c=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,a/=2,c/=2,t/=2}function y(_,S){return o===1?_[S]:_.readUInt16BE(S*o)}let m;if(i){let _=-1;for(m=t;m<a;m++)if(y(r,m)===y(e,_===-1?0:m-_)){if(_===-1&&(_=m),m-_+1===c)return _*o}else _!==-1&&(m-=m-_),_=-1}else for(t+c>a&&(t=a-c),m=t;m>=0;m--){let _=!0;for(let S=0;S<c;S++)if(y(r,m+S)!==y(e,S)){_=!1;break}if(_)return m}return-1}ne.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};ne.prototype.indexOf=function(e,t,n){return lb(this,e,t,n,!0)};ne.prototype.lastIndexOf=function(e,t,n){return lb(this,e,t,n,!1)};function S9(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let a;for(a=0;a<n;++a){let c=parseInt(e.substr(a*2,2),16);if(b0(c))return a;r[t+a]=c}return a}function E9(r,e,t,n){return Ac(p0(e,r.length-t),r,t,n)}function A9(r,e,t,n){return Ac(k9(e),r,t,n)}function F9(r,e,t,n){return Ac(vb(e),r,t,n)}function T9(r,e,t,n){return Ac(q9(e,r.length-t),r,t,n)}ne.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let a=!1;for(;;)switch(i){case"hex":return S9(this,e,t,n);case"utf8":case"utf-8":return E9(this,e,t,n);case"ascii":case"latin1":case"binary":return A9(this,e,t,n);case"base64":return F9(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T9(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};ne.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M9(r,e,t){return e===0&&t===r.length?l0.fromByteArray(r):l0.fromByteArray(r.slice(e,t))}function hb(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let o=r[i],a=null,c=o>239?4:o>223?3:o>191?2:1;if(i+c<=t){let y,m,_,S;switch(c){case 1:o<128&&(a=o);break;case 2:y=r[i+1],(y&192)===128&&(S=(o&31)<<6|y&63,S>127&&(a=S));break;case 3:y=r[i+1],m=r[i+2],(y&192)===128&&(m&192)===128&&(S=(o&15)<<12|(y&63)<<6|m&63,S>2047&&(S<55296||S>57343)&&(a=S));break;case 4:y=r[i+1],m=r[i+2],_=r[i+3],(y&192)===128&&(m&192)===128&&(_&192)===128&&(S=(o&15)<<18|(y&63)<<12|(m&63)<<6|_&63,S>65535&&S<1114112&&(a=S))}}a===null?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=c}return I9(n)}var sb=4096;function I9(r){let e=r.length;if(e<=sb)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=sb));return t}function O9(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function C9(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function B9(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let o=e;o<t;++o)i+=D9[r[o]];return i}function R9(r,e,t){let n=r.slice(e,t),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}ne.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,ne.prototype),i};function Et(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}ne.prototype.readUintLE=ne.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||Et(e,t,this.length);let i=this[e],o=1,a=0;for(;++a<t&&(o*=256);)i+=this[e+a]*o;return i};ne.prototype.readUintBE=ne.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||Et(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};ne.prototype.readUint8=ne.prototype.readUInt8=function(e,t){return e=e>>>0,t||Et(e,1,this.length),this[e]};ne.prototype.readUint16LE=ne.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||Et(e,2,this.length),this[e]|this[e+1]<<8};ne.prototype.readUint16BE=ne.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||Et(e,2,this.length),this[e]<<8|this[e+1]};ne.prototype.readUint32LE=ne.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||Et(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};ne.prototype.readUint32BE=ne.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||Et(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};ne.prototype.readBigUInt64LE=Wn(function(e){e=e>>>0,$o(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Aa(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});ne.prototype.readBigUInt64BE=Wn(function(e){e=e>>>0,$o(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Aa(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});ne.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||Et(e,t,this.length);let i=this[e],o=1,a=0;for(;++a<t&&(o*=256);)i+=this[e+a]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};ne.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||Et(e,t,this.length);let i=t,o=1,a=this[e+--i];for(;i>0&&(o*=256);)a+=this[e+--i]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*t)),a};ne.prototype.readInt8=function(e,t){return e=e>>>0,t||Et(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};ne.prototype.readInt16LE=function(e,t){e=e>>>0,t||Et(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};ne.prototype.readInt16BE=function(e,t){e=e>>>0,t||Et(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};ne.prototype.readInt32LE=function(e,t){return e=e>>>0,t||Et(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};ne.prototype.readInt32BE=function(e,t){return e=e>>>0,t||Et(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};ne.prototype.readBigInt64LE=Wn(function(e){e=e>>>0,$o(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Aa(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});ne.prototype.readBigInt64BE=Wn(function(e){e=e>>>0,$o(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Aa(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});ne.prototype.readFloatLE=function(e,t){return e=e>>>0,t||Et(e,4,this.length),jo.read(this,e,!0,23,4)};ne.prototype.readFloatBE=function(e,t){return e=e>>>0,t||Et(e,4,this.length),jo.read(this,e,!1,23,4)};ne.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||Et(e,8,this.length),jo.read(this,e,!0,52,8)};ne.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||Et(e,8,this.length),jo.read(this,e,!1,52,8)};function Ht(r,e,t,n,i,o){if(!ne.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}ne.prototype.writeUintLE=ne.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let c=Math.pow(2,8*n)-1;Ht(this,e,t,n,c,0)}let o=1,a=0;for(this[t]=e&255;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n};ne.prototype.writeUintBE=ne.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let c=Math.pow(2,8*n)-1;Ht(this,e,t,n,c,0)}let o=n-1,a=1;for(this[t+o]=e&255;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n};ne.prototype.writeUint8=ne.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||Ht(this,e,t,1,255,0),this[t]=e&255,t+1};ne.prototype.writeUint16LE=ne.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Ht(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};ne.prototype.writeUint16BE=ne.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Ht(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};ne.prototype.writeUint32LE=ne.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Ht(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};ne.prototype.writeUint32BE=ne.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Ht(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function db(r,e,t,n,i){bb(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let a=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=a,a=a>>8,r[t++]=a,a=a>>8,r[t++]=a,a=a>>8,r[t++]=a,t}function pb(r,e,t,n,i){bb(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let a=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=a,a=a>>8,r[t+2]=a,a=a>>8,r[t+1]=a,a=a>>8,r[t]=a,t+8}ne.prototype.writeBigUInt64LE=Wn(function(e,t=0){return db(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});ne.prototype.writeBigUInt64BE=Wn(function(e,t=0){return pb(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});ne.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let y=Math.pow(2,8*n-1);Ht(this,e,t,n,y-1,-y)}let o=0,a=1,c=0;for(this[t]=e&255;++o<n&&(a*=256);)e<0&&c===0&&this[t+o-1]!==0&&(c=1),this[t+o]=(e/a>>0)-c&255;return t+n};ne.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let y=Math.pow(2,8*n-1);Ht(this,e,t,n,y-1,-y)}let o=n-1,a=1,c=0;for(this[t+o]=e&255;--o>=0&&(a*=256);)e<0&&c===0&&this[t+o+1]!==0&&(c=1),this[t+o]=(e/a>>0)-c&255;return t+n};ne.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||Ht(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};ne.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Ht(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};ne.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Ht(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};ne.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Ht(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};ne.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Ht(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};ne.prototype.writeBigInt64LE=Wn(function(e,t=0){return db(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});ne.prototype.writeBigInt64BE=Wn(function(e,t=0){return pb(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function gb(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function yb(r,e,t,n,i){return e=+e,t=t>>>0,i||gb(r,e,t,4,34028234663852886e22,-34028234663852886e22),jo.write(r,e,t,n,23,4),t+4}ne.prototype.writeFloatLE=function(e,t,n){return yb(this,e,t,!0,n)};ne.prototype.writeFloatBE=function(e,t,n){return yb(this,e,t,!1,n)};function mb(r,e,t,n,i){return e=+e,t=t>>>0,i||gb(r,e,t,8,17976931348623157e292,-17976931348623157e292),jo.write(r,e,t,n,52,8),t+8}ne.prototype.writeDoubleLE=function(e,t,n){return mb(this,e,t,!0,n)};ne.prototype.writeDoubleBE=function(e,t,n){return mb(this,e,t,!1,n)};ne.prototype.copy=function(e,t,n,i){if(!ne.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o};ne.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!ne.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let a=e.charCodeAt(0);(i==="utf8"&&a<128||i==="latin1")&&(e=a)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{let a=ne.isBuffer(e)?e:ne.from(e,i),c=a.length;if(c===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%c]}return this};var Uo={};function m0(r,e,t){Uo[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}m0("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);m0("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);m0("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=ab(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=ab(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function ab(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function P9(r,e,t){$o(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&Aa(e,r.length-(t+1))}function bb(r,e,t,n,i,o){if(r>t||r<e){let a=typeof e=="bigint"?"n":"",c;throw o>3?e===0||e===BigInt(0)?c=`>= 0${a} and < 2${a} ** ${(o+1)*8}${a}`:c=`>= -(2${a} ** ${(o+1)*8-1}${a}) and < 2 ** ${(o+1)*8-1}${a}`:c=`>= ${e}${a} and <= ${t}${a}`,new Uo.ERR_OUT_OF_RANGE("value",c,r)}P9(n,i,o)}function $o(r,e){if(typeof r!="number")throw new Uo.ERR_INVALID_ARG_TYPE(e,"number",r)}function Aa(r,e,t){throw Math.floor(r)!==r?($o(r,t),new Uo.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new Uo.ERR_BUFFER_OUT_OF_BOUNDS:new Uo.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var N9=/[^+/0-9A-Za-z-_]/g;function L9(r){if(r=r.split("=")[0],r=r.trim().replace(N9,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function p0(r,e){e=e||1/0;let t,n=r.length,i=null,o=[];for(let a=0;a<n;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function k9(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function q9(r,e){let t,n,i,o=[];for(let a=0;a<r.length&&!((e-=2)<0);++a)t=r.charCodeAt(a),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function vb(r){return l0.toByteArray(L9(r))}function Ac(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function Kr(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function b0(r){return r!==r}var D9=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e}();function Wn(r){return typeof BigInt>"u"?U9:r}function U9(){throw new Error("BigInt not supported")}});var Tc=P((pU,wb)=>{"use strict";var Fc=Hn(),Ho=Fc.Buffer,dr={},pr;for(pr in Fc)!Fc.hasOwnProperty(pr)||pr==="SlowBuffer"||pr==="Buffer"||(dr[pr]=Fc[pr]);var Go=dr.Buffer={};for(pr in Ho)!Ho.hasOwnProperty(pr)||pr==="allocUnsafe"||pr==="allocUnsafeSlow"||(Go[pr]=Ho[pr]);dr.Buffer.prototype=Ho.prototype;(!Go.from||Go.from===Uint8Array.from)&&(Go.from=function(r,e,t){if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof r);if(r&&typeof r.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);return Ho(r,e,t)});Go.alloc||(Go.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof r);if(r<0||r>=2*(1<<30))throw new RangeError('The value "'+r+'" is invalid for option "size"');var n=Ho(r);return!e||e.length===0?n.fill(0):typeof t=="string"?n.fill(e,t):n.fill(e),n});if(!dr.kStringMaxLength)try{dr.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch{}dr.constants||(dr.constants={MAX_LENGTH:dr.kMaxLength},dr.kStringMaxLength&&(dr.constants.MAX_STRING_LENGTH=dr.kStringMaxLength));wb.exports=dr});var Mc=P(xb=>{"use strict";var j9=Qt();function gr(r){this._reporterState={obj:null,path:[],options:r||{},errors:[]}}xb.Reporter=gr;gr.prototype.isError=function(e){return e instanceof zo};gr.prototype.save=function(){let e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}};gr.prototype.restore=function(e){let t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)};gr.prototype.enterKey=function(e){return this._reporterState.path.push(e)};gr.prototype.exitKey=function(e){let t=this._reporterState;t.path=t.path.slice(0,e-1)};gr.prototype.leaveKey=function(e,t,n){let i=this._reporterState;this.exitKey(e),i.obj!==null&&(i.obj[t]=n)};gr.prototype.path=function(){return this._reporterState.path.join("/")};gr.prototype.enterObject=function(){let e=this._reporterState,t=e.obj;return e.obj={},t};gr.prototype.leaveObject=function(e){let t=this._reporterState,n=t.obj;return t.obj=e,n};gr.prototype.error=function(e){let t,n=this._reporterState,i=e instanceof zo;if(i?t=e:t=new zo(n.path.map(function(o){return"["+JSON.stringify(o)+"]"}).join(""),e.message||e,e.stack),!n.options.partial)throw t;return i||n.errors.push(t),t};gr.prototype.wrapResult=function(e){let t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e};function zo(r,e){this.path=r,this.rethrow(e)}j9(zo,Error);zo.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,zo),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}});var Jo=P(v0=>{"use strict";var $9=Qt(),Ic=Mc().Reporter,Ko=Tc().Buffer;function yr(r,e){if(Ic.call(this,e),!Ko.isBuffer(r)){this.error("Input not Buffer");return}this.base=r,this.offset=0,this.length=r.length}$9(yr,Ic);v0.DecoderBuffer=yr;yr.isDecoderBuffer=function(e){return e instanceof yr?!0:typeof e=="object"&&Ko.isBuffer(e.base)&&e.constructor.name==="DecoderBuffer"&&typeof e.offset=="number"&&typeof e.length=="number"&&typeof e.save=="function"&&typeof e.restore=="function"&&typeof e.isEmpty=="function"&&typeof e.readUInt8=="function"&&typeof e.skip=="function"&&typeof e.raw=="function"};yr.prototype.save=function(){return{offset:this.offset,reporter:Ic.prototype.save.call(this)}};yr.prototype.restore=function(e){let t=new yr(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,Ic.prototype.restore.call(this,e.reporter),t};yr.prototype.isEmpty=function(){return this.offset===this.length};yr.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")};yr.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");let n=new yr(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n};yr.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)};function Vo(r,e){if(Array.isArray(r))this.length=0,this.value=r.map(function(t){return Vo.isEncoderBuffer(t)||(t=new Vo(t,e)),this.length+=t.length,t},this);else if(typeof r=="number"){if(!(0<=r&&r<=255))return e.error("non-byte EncoderBuffer value");this.value=r,this.length=1}else if(typeof r=="string")this.value=r,this.length=Ko.byteLength(r);else if(Ko.isBuffer(r))this.value=r,this.length=r.length;else return e.error("Unsupported type: "+typeof r)}v0.EncoderBuffer=Vo;Vo.isEncoderBuffer=function(e){return e instanceof Vo?!0:typeof e=="object"&&e.constructor.name==="EncoderBuffer"&&typeof e.length=="number"&&typeof e.join=="function"};Vo.prototype.join=function(e,t){return e||(e=Ko.alloc(this.length)),t||(t=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(n){n.join(e,t),t+=n.length}):(typeof this.value=="number"?e[t]=this.value:typeof this.value=="string"?e.write(this.value,t):Ko.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e}});var mn=P((mU,Sb)=>{Sb.exports=_b;function _b(r,e){if(!r)throw new Error(e||"Assertion failed")}_b.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}});var Oc=P((bU,Ab)=>{"use strict";var W9=Mc().Reporter,H9=Jo().EncoderBuffer,G9=Jo().DecoderBuffer,qt=mn(),Eb=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],z9=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(Eb),K9=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function Qe(r,e,t){let n={};this._baseState=n,n.name=t,n.enc=r,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}Ab.exports=Qe;var V9=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];Qe.prototype.clone=function(){let e=this._baseState,t={};V9.forEach(function(i){t[i]=e[i]});let n=new this.constructor(t.parent);return n._baseState=t,n};Qe.prototype._wrap=function(){let e=this._baseState;z9.forEach(function(t){this[t]=function(){let i=new this.constructor(this);return e.children.push(i),i[t].apply(i,arguments)}},this)};Qe.prototype._init=function(e){let t=this._baseState;qt(t.parent===null),e.call(this),t.children=t.children.filter(function(n){return n._baseState.parent===this},this),qt.equal(t.children.length,1,"Root node can have only one child")};Qe.prototype._useArgs=function(e){let t=this._baseState,n=e.filter(function(i){return i instanceof this.constructor},this);e=e.filter(function(i){return!(i instanceof this.constructor)},this),n.length!==0&&(qt(t.children===null),t.children=n,n.forEach(function(i){i._baseState.parent=this},this)),e.length!==0&&(qt(t.args===null),t.args=e,t.reverseArgs=e.map(function(i){if(typeof i!="object"||i.constructor!==Object)return i;let o={};return Object.keys(i).forEach(function(a){a==(a|0)&&(a|=0);let c=i[a];o[c]=a}),o}))};K9.forEach(function(r){Qe.prototype[r]=function(){let t=this._baseState;throw new Error(r+" not implemented for encoding: "+t.enc)}});Eb.forEach(function(r){Qe.prototype[r]=function(){let t=this._baseState,n=Array.prototype.slice.call(arguments);return qt(t.tag===null),t.tag=r,this._useArgs(n),this}});Qe.prototype.use=function(e){qt(e);let t=this._baseState;return qt(t.use===null),t.use=e,this};Qe.prototype.optional=function(){let e=this._baseState;return e.optional=!0,this};Qe.prototype.def=function(e){let t=this._baseState;return qt(t.default===null),t.default=e,t.optional=!0,this};Qe.prototype.explicit=function(e){let t=this._baseState;return qt(t.explicit===null&&t.implicit===null),t.explicit=e,this};Qe.prototype.implicit=function(e){let t=this._baseState;return qt(t.explicit===null&&t.implicit===null),t.implicit=e,this};Qe.prototype.obj=function(){let e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,t.length!==0&&this._useArgs(t),this};Qe.prototype.key=function(e){let t=this._baseState;return qt(t.key===null),t.key=e,this};Qe.prototype.any=function(){let e=this._baseState;return e.any=!0,this};Qe.prototype.choice=function(e){let t=this._baseState;return qt(t.choice===null),t.choice=e,this._useArgs(Object.keys(e).map(function(n){return e[n]})),this};Qe.prototype.contains=function(e){let t=this._baseState;return qt(t.use===null),t.contains=e,this};Qe.prototype._decode=function(e,t){let n=this._baseState;if(n.parent===null)return e.wrapResult(n.children[0]._decode(e,t));let i=n.default,o=!0,a=null;if(n.key!==null&&(a=e.enterKey(n.key)),n.optional){let y=null;if(n.explicit!==null?y=n.explicit:n.implicit!==null?y=n.implicit:n.tag!==null&&(y=n.tag),y===null&&!n.any){let m=e.save();try{n.choice===null?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),o=!0}catch{o=!1}e.restore(m)}else if(o=this._peekTag(e,y,n.any),e.isError(o))return o}let c;if(n.obj&&o&&(c=e.enterObject()),o){if(n.explicit!==null){let m=this._decodeTag(e,n.explicit);if(e.isError(m))return m;e=m}let y=e.offset;if(n.use===null&&n.choice===null){let m;n.any&&(m=e.save());let _=this._decodeTag(e,n.implicit!==null?n.implicit:n.tag,n.any);if(e.isError(_))return _;n.any?i=e.raw(m):e=_}if(t&&t.track&&n.tag!==null&&t.track(e.path(),y,e.length,"tagged"),t&&t.track&&n.tag!==null&&t.track(e.path(),e.offset,e.length,"content"),n.any||(n.choice===null?i=this._decodeGeneric(n.tag,e,t):i=this._decodeChoice(e,t)),e.isError(i))return i;if(!n.any&&n.choice===null&&n.children!==null&&n.children.forEach(function(_){_._decode(e,t)}),n.contains&&(n.tag==="octstr"||n.tag==="bitstr")){let m=new G9(i);i=this._getUse(n.contains,e._reporterState.obj)._decode(m,t)}}return n.obj&&o&&(i=e.leaveObject(c)),n.key!==null&&(i!==null||o===!0)?e.leaveKey(a,n.key,i):a!==null&&e.exitKey(a),i};Qe.prototype._decodeGeneric=function(e,t,n){let i=this._baseState;return e==="seq"||e==="set"?null:e==="seqof"||e==="setof"?this._decodeList(t,e,i.args[0],n):/str$/.test(e)?this._decodeStr(t,e,n):e==="objid"&&i.args?this._decodeObjid(t,i.args[0],i.args[1],n):e==="objid"?this._decodeObjid(t,null,null,n):e==="gentime"||e==="utctime"?this._decodeTime(t,e,n):e==="null_"?this._decodeNull(t,n):e==="bool"?this._decodeBool(t,n):e==="objDesc"?this._decodeStr(t,e,n):e==="int"||e==="enum"?this._decodeInt(t,i.args&&i.args[0],n):i.use!==null?this._getUse(i.use,t._reporterState.obj)._decode(t,n):t.error("unknown tag: "+e)};Qe.prototype._getUse=function(e,t){let n=this._baseState;return n.useDecoder=this._use(e,t),qt(n.useDecoder._baseState.parent===null),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder};Qe.prototype._decodeChoice=function(e,t){let n=this._baseState,i=null,o=!1;return Object.keys(n.choice).some(function(a){let c=e.save(),y=n.choice[a];try{let m=y._decode(e,t);if(e.isError(m))return!1;i={type:a,value:m},o=!0}catch{return e.restore(c),!1}return!0},this),o?i:e.error("Choice not matched")};Qe.prototype._createEncoderBuffer=function(e){return new H9(e,this.reporter)};Qe.prototype._encode=function(e,t,n){let i=this._baseState;if(i.default!==null&&i.default===e)return;let o=this._encodeValue(e,t,n);if(o!==void 0&&!this._skipDefault(o,t,n))return o};Qe.prototype._encodeValue=function(e,t,n){let i=this._baseState;if(i.parent===null)return i.children[0]._encode(e,t||new W9);let o=null;if(this.reporter=t,i.optional&&e===void 0)if(i.default!==null)e=i.default;else return;let a=null,c=!1;if(i.any)o=this._createEncoderBuffer(e);else if(i.choice)o=this._encodeChoice(e,t);else if(i.contains)a=this._getUse(i.contains,n)._encode(e,t),c=!0;else if(i.children)a=i.children.map(function(y){if(y._baseState.tag==="null_")return y._encode(null,t,e);if(y._baseState.key===null)return t.error("Child should have a key");let m=t.enterKey(y._baseState.key);if(typeof e!="object")return t.error("Child expected, but input is not object");let _=y._encode(e[y._baseState.key],t,e);return t.leaveKey(m),_},this).filter(function(y){return y}),a=this._createEncoderBuffer(a);else if(i.tag==="seqof"||i.tag==="setof"){if(!(i.args&&i.args.length===1))return t.error("Too many args for : "+i.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");let y=this.clone();y._baseState.implicit=null,a=this._createEncoderBuffer(e.map(function(m){let _=this._baseState;return this._getUse(_.args[0],e)._encode(m,t)},y))}else i.use!==null?o=this._getUse(i.use,n)._encode(e,t):(a=this._encodePrimitive(i.tag,e),c=!0);if(!i.any&&i.choice===null){let y=i.implicit!==null?i.implicit:i.tag,m=i.implicit===null?"universal":"context";y===null?i.use===null&&t.error("Tag could be omitted only for .use()"):i.use===null&&(o=this._encodeComposite(y,c,m,a))}return i.explicit!==null&&(o=this._encodeComposite(i.explicit,!1,"context",o)),o};Qe.prototype._encodeChoice=function(e,t){let n=this._baseState,i=n.choice[e.type];return i||qt(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),i._encode(e.value,t)};Qe.prototype._encodePrimitive=function(e,t){let n=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if(e==="objid"&&n.args)return this._encodeObjid(t,n.reverseArgs[0],n.args[1]);if(e==="objid")return this._encodeObjid(t,null,null);if(e==="gentime"||e==="utctime")return this._encodeTime(t,e);if(e==="null_")return this._encodeNull();if(e==="int"||e==="enum")return this._encodeInt(t,n.args&&n.reverseArgs[0]);if(e==="bool")return this._encodeBool(t);if(e==="objDesc")return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)};Qe.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)};Qe.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}});var Cc=P(Hi=>{"use strict";function Fb(r){let e={};return Object.keys(r).forEach(function(t){(t|0)==t&&(t=t|0);let n=r[t];e[n]=t}),e}Hi.tagClass={0:"universal",1:"application",2:"context",3:"private"};Hi.tagClassByName=Fb(Hi.tagClass);Hi.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"};Hi.tagByName=Fb(Hi.tag)});var x0=P((wU,Ib)=>{"use strict";var J9=Qt(),bn=Tc().Buffer,Tb=Oc(),w0=Cc();function Mb(r){this.enc="der",this.name=r.name,this.entity=r,this.tree=new Br,this.tree._init(r.body)}Ib.exports=Mb;Mb.prototype.encode=function(e,t){return this.tree._encode(e,t).join()};function Br(r){Tb.call(this,"der",r)}J9(Br,Tb);Br.prototype._encodeComposite=function(e,t,n,i){let o=X9(e,t,n,this.reporter);if(i.length<128){let y=bn.alloc(2);return y[0]=o,y[1]=i.length,this._createEncoderBuffer([y,i])}let a=1;for(let y=i.length;y>=256;y>>=8)a++;let c=bn.alloc(1+1+a);c[0]=o,c[1]=128|a;for(let y=1+a,m=i.length;m>0;y--,m>>=8)c[y]=m&255;return this._createEncoderBuffer([c,i])};Br.prototype._encodeStr=function(e,t){if(t==="bitstr")return this._createEncoderBuffer([e.unused|0,e.data]);if(t==="bmpstr"){let n=bn.alloc(e.length*2);for(let i=0;i<e.length;i++)n.writeUInt16BE(e.charCodeAt(i),i*2);return this._createEncoderBuffer(n)}else return t==="numstr"?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):t==="printstr"?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)?this._createEncoderBuffer(e):t==="objDesc"?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")};Br.prototype._encodeObjid=function(e,t,n){if(typeof e=="string"){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let c=0;c<e.length;c++)e[c]|=0}else if(Array.isArray(e)){e=e.slice();for(let c=0;c<e.length;c++)e[c]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,e[0]*40+e[1])}let i=0;for(let c=0;c<e.length;c++){let y=e[c];for(i++;y>=128;y>>=7)i++}let o=bn.alloc(i),a=o.length-1;for(let c=e.length-1;c>=0;c--){let y=e[c];for(o[a--]=y&127;(y>>=7)>0;)o[a--]=128|y&127}return this._createEncoderBuffer(o)};function mr(r){return r<10?"0"+r:r}Br.prototype._encodeTime=function(e,t){let n,i=new Date(e);return t==="gentime"?n=[mr(i.getUTCFullYear()),mr(i.getUTCMonth()+1),mr(i.getUTCDate()),mr(i.getUTCHours()),mr(i.getUTCMinutes()),mr(i.getUTCSeconds()),"Z"].join(""):t==="utctime"?n=[mr(i.getUTCFullYear()%100),mr(i.getUTCMonth()+1),mr(i.getUTCDate()),mr(i.getUTCHours()),mr(i.getUTCMinutes()),mr(i.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(n,"octstr")};Br.prototype._encodeNull=function(){return this._createEncoderBuffer("")};Br.prototype._encodeInt=function(e,t){if(typeof e=="string"){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if(typeof e!="number"&&!bn.isBuffer(e)){let o=e.toArray();!e.sign&&o[0]&128&&o.unshift(0),e=bn.from(o)}if(bn.isBuffer(e)){let o=e.length;e.length===0&&o++;let a=bn.alloc(o);return e.copy(a),e.length===0&&(a[0]=0),this._createEncoderBuffer(a)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let n=1;for(let o=e;o>=256;o>>=8)n++;let i=new Array(n);for(let o=i.length-1;o>=0;o--)i[o]=e&255,e>>=8;return i[0]&128&&i.unshift(0),this._createEncoderBuffer(bn.from(i))};Br.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)};Br.prototype._use=function(e,t){return typeof e=="function"&&(e=e(t)),e._getEncoder("der").tree};Br.prototype._skipDefault=function(e,t,n){let i=this._baseState,o;if(i.default===null)return!1;let a=e.join();if(i.defaultBuffer===void 0&&(i.defaultBuffer=this._encodeValue(i.default,t,n).join()),a.length!==i.defaultBuffer.length)return!1;for(o=0;o<a.length;o++)if(a[o]!==i.defaultBuffer[o])return!1;return!0};function X9(r,e,t,n){let i;if(r==="seqof"?r="seq":r==="setof"&&(r="set"),w0.tagByName.hasOwnProperty(r))i=w0.tagByName[r];else if(typeof r=="number"&&(r|0)===r)i=r;else return n.error("Unknown tag: "+r);return i>=31?n.error("Multi-octet tag encoding unsupported"):(e||(i|=32),i|=w0.tagClassByName[t||"universal"]<<6,i)}});var Cb=P((xU,Ob)=>{"use strict";var Y9=Qt(),_0=x0();function S0(r){_0.call(this,r),this.enc="pem"}Y9(S0,_0);Ob.exports=S0;S0.prototype.encode=function(e,t){let i=_0.prototype.encode.call(this,e).toString("base64"),o=["-----BEGIN "+t.label+"-----"];for(let a=0;a<i.length;a+=64)o.push(i.slice(a,a+64));return o.push("-----END "+t.label+"-----"),o.join(`
`)}});var E0=P(Rb=>{"use strict";var Bb=Rb;Bb.der=x0();Bb.pem=Cb()});var F0=P((SU,Db)=>{"use strict";var Q9=Qt(),Z9=Wt(),Pb=Jo().DecoderBuffer,Lb=Oc(),Nb=Cc();function kb(r){this.enc="der",this.name=r.name,this.entity=r,this.tree=new er,this.tree._init(r.body)}Db.exports=kb;kb.prototype.decode=function(e,t){return Pb.isDecoderBuffer(e)||(e=new Pb(e,t)),this.tree._decode(e,t)};function er(r){Lb.call(this,"der",r)}Q9(er,Lb);er.prototype._peekTag=function(e,t,n){if(e.isEmpty())return!1;let i=e.save(),o=A0(e,'Failed to peek tag: "'+t+'"');return e.isError(o)?o:(e.restore(i),o.tag===t||o.tagStr===t||o.tagStr+"of"===t||n)};er.prototype._decodeTag=function(e,t,n){let i=A0(e,'Failed to decode tag of "'+t+'"');if(e.isError(i))return i;let o=qb(e,i.primitive,'Failed to get length of "'+t+'"');if(e.isError(o))return o;if(!n&&i.tag!==t&&i.tagStr!==t&&i.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(i.primitive||o!==null)return e.skip(o,'Failed to match body of: "'+t+'"');let a=e.save(),c=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(c)?c:(o=e.offset-a.offset,e.restore(a),e.skip(o,'Failed to match body of: "'+t+'"'))};er.prototype._skipUntilEnd=function(e,t){for(;;){let n=A0(e,t);if(e.isError(n))return n;let i=qb(e,n.primitive,t);if(e.isError(i))return i;let o;if(n.primitive||i!==null?o=e.skip(i):o=this._skipUntilEnd(e,t),e.isError(o))return o;if(n.tagStr==="end")break}};er.prototype._decodeList=function(e,t,n,i){let o=[];for(;!e.isEmpty();){let a=this._peekTag(e,"end");if(e.isError(a))return a;let c=n.decode(e,"der",i);if(e.isError(c)&&a)break;o.push(c)}return o};er.prototype._decodeStr=function(e,t){if(t==="bitstr"){let n=e.readUInt8();return e.isError(n)?n:{unused:n,data:e.raw()}}else if(t==="bmpstr"){let n=e.raw();if(n.length%2===1)return e.error("Decoding of string type: bmpstr length mismatch");let i="";for(let o=0;o<n.length/2;o++)i+=String.fromCharCode(n.readUInt16BE(o*2));return i}else if(t==="numstr"){let n=e.raw().toString("ascii");return this._isNumstr(n)?n:e.error("Decoding of string type: numstr unsupported characters")}else{if(t==="octstr")return e.raw();if(t==="objDesc")return e.raw();if(t==="printstr"){let n=e.raw().toString("ascii");return this._isPrintstr(n)?n:e.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")}};er.prototype._decodeObjid=function(e,t,n){let i,o=[],a=0,c=0;for(;!e.isEmpty();)c=e.readUInt8(),a<<=7,a|=c&127,(c&128)===0&&(o.push(a),a=0);c&128&&o.push(a);let y=o[0]/40|0,m=o[0]%40;if(n?i=o:i=[y,m].concat(o.slice(1)),t){let _=t[i.join(" ")];_===void 0&&(_=t[i.join(".")]),_!==void 0&&(i=_)}return i};er.prototype._decodeTime=function(e,t){let n=e.raw().toString(),i,o,a,c,y,m;if(t==="gentime")i=n.slice(0,4)|0,o=n.slice(4,6)|0,a=n.slice(6,8)|0,c=n.slice(8,10)|0,y=n.slice(10,12)|0,m=n.slice(12,14)|0;else if(t==="utctime")i=n.slice(0,2)|0,o=n.slice(2,4)|0,a=n.slice(4,6)|0,c=n.slice(6,8)|0,y=n.slice(8,10)|0,m=n.slice(10,12)|0,i<70?i=2e3+i:i=1900+i;else return e.error("Decoding "+t+" time is not supported yet");return Date.UTC(i,o-1,a,c,y,m,0)};er.prototype._decodeNull=function(){return null};er.prototype._decodeBool=function(e){let t=e.readUInt8();return e.isError(t)?t:t!==0};er.prototype._decodeInt=function(e,t){let n=e.raw(),i=new Z9(n);return t&&(i=t[i.toString(10)]||i),i};er.prototype._use=function(e,t){return typeof e=="function"&&(e=e(t)),e._getDecoder("der").tree};function A0(r,e){let t=r.readUInt8(e);if(r.isError(t))return t;let n=Nb.tagClass[t>>6],i=(t&32)===0;if((t&31)===31){let a=t;for(t=0;(a&128)===128;){if(a=r.readUInt8(e),r.isError(a))return a;t<<=7,t|=a&127}}else t&=31;let o=Nb.tag[t];return{cls:n,primitive:i,tag:t,tagStr:o}}function qb(r,e,t){let n=r.readUInt8(t);if(r.isError(n))return n;if(!e&&n===128)return null;if((n&128)===0)return n;let i=n&127;if(i>4)return r.error("length octect is too long");n=0;for(let o=0;o<i;o++){n<<=8;let a=r.readUInt8(t);if(r.isError(a))return a;n|=a}return n}});var jb=P((EU,Ub)=>{"use strict";var eA=Qt(),tA=Tc().Buffer,T0=F0();function M0(r){T0.call(this,r),this.enc="pem"}eA(M0,T0);Ub.exports=M0;M0.prototype.decode=function(e,t){let n=e.toString().split(/[\r\n]+/g),i=t.label.toUpperCase(),o=/^-----(BEGIN|END) ([^-]+)-----$/,a=-1,c=-1;for(let _=0;_<n.length;_++){let S=n[_].match(o);if(S!==null&&S[2]===i)if(a===-1){if(S[1]!=="BEGIN")break;a=_}else{if(S[1]!=="END")break;c=_;break}}if(a===-1||c===-1)throw new Error("PEM section not found for: "+i);let y=n.slice(a+1,c).join("");y.replace(/[^a-z0-9+/=]+/gi,"");let m=tA.from(y,"base64");return T0.prototype.decode.call(this,m,t)}});var I0=P(Wb=>{"use strict";var $b=Wb;$b.der=F0();$b.pem=jb()});var Gb=P(Hb=>{"use strict";var rA=E0(),nA=I0(),iA=Qt(),oA=Hb;oA.define=function(e,t){return new Xo(e,t)};function Xo(r,e){this.name=r,this.body=e,this.decoders={},this.encoders={}}Xo.prototype._createNamed=function(e){let t=this.name;function n(i){this._initNamed(i,t)}return iA(n,e),n.prototype._initNamed=function(o,a){e.call(this,o,a)},new n(this)};Xo.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(nA[e])),this.decoders[e]};Xo.prototype.decode=function(e,t,n){return this._getDecoder(t).decode(e,n)};Xo.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(rA[e])),this.encoders[e]};Xo.prototype.encode=function(e,t,n){return this._getEncoder(t).encode(e,n)}});var Kb=P(zb=>{"use strict";var Bc=zb;Bc.Reporter=Mc().Reporter;Bc.DecoderBuffer=Jo().DecoderBuffer;Bc.EncoderBuffer=Jo().EncoderBuffer;Bc.Node=Oc()});var Xb=P(Jb=>{"use strict";var Vb=Jb;Vb._reverse=function(e){let t={};return Object.keys(e).forEach(function(n){(n|0)==n&&(n=n|0);let i=e[n];t[i]=n}),t};Vb.der=Cc()});var Qb=P(Yb=>{"use strict";var Yo=Yb;Yo.bignum=Wt();Yo.define=Gb().define;Yo.base=Kb();Yo.constants=Xb();Yo.decoders=I0();Yo.encoders=E0()});var sv=P(br=>{"use strict";var sA=br&&br.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),aA=br&&br.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),fA=br&&br.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&sA(e,r,t);return aA(e,r),e};Object.defineProperty(br,"__esModule",{value:!0});br.jwkTopem=br.pemTojwk=void 0;var vn=fA(Qb());function cA(r){return r.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function O0(r){return cA(Buffer.from(r,"hex").toString("base64"))}var Zb=vn.define("RSAPublicKey",function(){this.seq().obj(this.key("n").int(),this.key("e").int())}),ev=vn.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())}),uA=vn.define("PublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(ev),this.key("publicKey").bitstr())}),tv=vn.define("Version",function(){this.int({0:"two-prime",1:"multi"})}),lA=vn.define("OtherPrimeInfos",function(){this.seq().obj(this.key("ri").int(),this.key("di").int(),this.key("ti").int())}),rv=vn.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").use(tv),this.key("n").int(),this.key("e").int(),this.key("d").int(),this.key("p").int(),this.key("q").int(),this.key("dp").int(),this.key("dq").int(),this.key("qi").int(),this.key("other").optional().use(lA))}),hA=vn.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").use(tv),this.key("algorithm").use(ev),this.key("privateKey").bitstr())});function nv(r,e){return e=e||{},Object.keys(e).forEach(function(t){r[t]=e[t]}),r}function C0(r){return r.length%2===1?"0"+r:r}function iv(r,e){var t=Zb.decode(r,"der"),n=C0(t.e.toString(16)),i={kty:"RSA",n:zn(t.n),e:O0(n)};return nv(i,e)}function ov(r,e){var t=rv.decode(r,"der"),n=C0(t.e.toString(16)),i={kty:"RSA",n:zn(t.n),e:O0(n),d:zn(t.d),p:zn(t.p),q:zn(t.q),dp:zn(t.dp),dq:zn(t.dq),qi:zn(t.qi)};return nv(i,e)}function dA(r,e){var t=uA.decode(r,"der");return iv(t.publicKey.data,e)}function pA(r,e){var t=hA.decode(r,"der");return ov(t.privateKey.data,e)}function gA(r){var e=/^-----BEGIN (RSA )?(PUBLIC|PRIVATE) KEY-----$/.exec(r);if(!e)return null;var t=!!e[1],n=e[2]==="PRIVATE";return n?t?ov:pA:t?iv:dA}function yA(r){return{n:Gn(r.n),e:Gn(r.e),d:r.d&&Gn(r.d),p:r.p&&Gn(r.p),q:r.q&&Gn(r.q),dp:r.dp&&Gn(r.dp),dq:r.dq&&Gn(r.dq),qi:r.qi&&Gn(r.qi)}}function zn(r){return O0(C0(r.toString(16)))}function mA(r){return new vn.bignum(Buffer.from(r,"base64"))}function Gn(r){return/^[0-9]+$/.test(r)?new vn.bignum(r,10):mA(r)}function bA(r,e){var t=r.toString().split(/(\r\n|\r|\n)+/g);t=t.filter(function(i){return i.trim().length!==0});var n=gA(t[0]);return t=t.slice(1,-1).join(""),n(Buffer.from(t.replace(/[^\w\d\+\/=]+/g,""),"base64"),e)}br.pemTojwk=bA;function vA(r){var e=yA(r),t=!!e.d,n=t?"PRIVATE":"PUBLIC",i="-----BEGIN RSA "+n+` KEY-----
`,o=`
-----END RSA `+n+` KEY-----
`,a=Buffer.alloc(0);t?(e.version="two-prime",a=rv.encode(e,"der")):a=Zb.encode(e,"der");var c=a.toString("base64").match(/.{1,64}/g).join(`
`);return i+c+o}br.jwkTopem=vA});var Rc=P(()=>{});var av=P(()=>{});var lv=P(wn=>{"use strict";var wA=wn&&wn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),xA=wn&&wn.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),uv=wn&&wn.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&wA(e,r,t);return xA(e,r),e};Object.defineProperty(wn,"__esModule",{value:!0});var fv=sv(),Vr=uv(Rc()),cv=uv(av()),B0=class{constructor(){this.keyLength=4096,this.publicExponent=65537,this.hashAlgorithm="sha256",this.encryptionAlgorithm="aes-256-cbc"}generateJWK(){if(typeof Vr.generateKeyPair!="function")throw new Error("Keypair generation not supported in this version of Node, only supported in versions 10+");return new Promise((e,t)=>{Vr.generateKeyPair("rsa",{modulusLength:this.keyLength,publicExponent:this.publicExponent,privateKeyEncoding:{type:"pkcs1",format:"pem"},publicKeyEncoding:{type:"pkcs1",format:"pem"}},(n,i,o)=>{n&&t(n),e(this.pemToJWK(o))})})}sign(e,t,{saltLength:n}={}){return new Promise((i,o)=>{i(Vr.createSign(this.hashAlgorithm).update(t).sign({key:this.jwkToPem(e),padding:cv.RSA_PKCS1_PSS_PADDING,saltLength:n}))})}verify(e,t,n){return new Promise((i,o)=>{let a={kty:"RSA",e:"AQAB",n:e},c=this.jwkToPem(a);i(Vr.createVerify(this.hashAlgorithm).update(t).verify({key:c,padding:cv.RSA_PKCS1_PSS_PADDING},n))})}hash(e,t="SHA-256"){return new Promise((n,i)=>{n(Vr.createHash(this.parseHashAlgorithm(t)).update(e).digest())})}async encrypt(e,t,n){let i=Vr.pbkdf2Sync(t,n=n||"salt",1e5,32,this.hashAlgorithm),o=Vr.randomBytes(16),a=Vr.createCipheriv(this.encryptionAlgorithm,i,o);return Buffer.concat([o,a.update(e),a.final()])}async decrypt(e,t,n){try{let i=Vr.pbkdf2Sync(t,n=n||"salt",1e5,32,this.hashAlgorithm),o=e.slice(0,16),a=e.slice(16),c=Vr.createDecipheriv(this.encryptionAlgorithm,i,o);return Buffer.concat([c.update(a),c.final()])}catch{throw new Error("Failed to decrypt")}}jwkToPem(e){return(0,fv.jwkTopem)(e)}pemToJWK(e){return(0,fv.pemTojwk)(e)}parseHashAlgorithm(e){switch(e){case"SHA-256":return"sha256";case"SHA-384":return"sha384";default:throw new Error(`Algorithm not supported: ${e}`)}}};wn.default=B0});var hv=P(P0=>{"use strict";Object.defineProperty(P0,"__esModule",{value:!0});var R0=class{constructor(e){this.api=e}getInfo(){return this.api.get("info").then(e=>e.data)}getPeers(){return this.api.get("peers").then(e=>e.data)}};P0.default=R0});var Ta=P(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});Fa.getError=void 0;var N0=class extends Error{constructor(e,t={}){t.message?super(t.message):super(),this.type=e,this.response=t.response}getType(){return this.type}};Fa.default=N0;function _A(r){let e=r.data;if(typeof r.data=="string")try{e=JSON.parse(r.data)}catch{}if(r.data instanceof ArrayBuffer||r.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch{}return e?e.error||e:r.statusText||"unknown"}Fa.getError=_A});var j0=P(De=>{"use strict";var SA=De&&De.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(De,"__esModule",{value:!0});De.debug=De.validatePath=De.arrayCompare=De.bufferToInt=De.intToBuffer=De.arrayFlatten=De.generateProofs=De.buildLayers=De.generateTransactionChunks=De.generateTree=De.computeRootHash=De.generateLeaves=De.chunkData=De.MIN_CHUNK_SIZE=De.MAX_CHUNK_SIZE=void 0;var Pc=SA($0()),dv=gn();De.MAX_CHUNK_SIZE=256*1024;De.MIN_CHUNK_SIZE=32*1024;var Ia=32,Qo=32;async function k0(r){let e=[],t=r,n=0;for(;t.byteLength>=De.MAX_CHUNK_SIZE;){let i=De.MAX_CHUNK_SIZE,o=t.byteLength-De.MAX_CHUNK_SIZE;o>0&&o<De.MIN_CHUNK_SIZE&&(i=Math.ceil(t.byteLength/2));let a=t.slice(0,i),c=await Pc.default.crypto.hash(a);n+=a.byteLength,e.push({dataHash:c,minByteRange:n-a.byteLength,maxByteRange:n}),t=t.slice(i)}return e.push({dataHash:await Pc.default.crypto.hash(t),minByteRange:n,maxByteRange:n+t.byteLength}),e}De.chunkData=k0;async function q0(r){return Promise.all(r.map(async({dataHash:e,minByteRange:t,maxByteRange:n})=>({type:"leaf",id:await At(await Promise.all([At(e),At(Oa(n))])),dataHash:e,minByteRange:t,maxByteRange:n})))}De.generateLeaves=q0;async function EA(r){return(await pv(r)).id}De.computeRootHash=EA;async function pv(r){return await Nc(await q0(await k0(r)))}De.generateTree=pv;async function AA(r){let e=await k0(r),t=await q0(e),n=await Nc(t),i=await gv(n),o=e.slice(-1)[0];return o.maxByteRange-o.minByteRange===0&&(e.splice(e.length-1,1),i.splice(i.length-1,1)),{data_root:n.id,chunks:e,proofs:i}}De.generateTransactionChunks=AA;async function Nc(r,e=0){if(r.length<2)return r[0];let t=[];for(let n=0;n<r.length;n+=2)t.push(await FA(r[n],r[n+1]));return Nc(t,e+1)}De.buildLayers=Nc;function gv(r){let e=L0(r);return Array.isArray(e)?D0(e):[e]}De.generateProofs=gv;function L0(r,e=new Uint8Array,t=0){if(r.type=="leaf")return{offset:r.maxByteRange-1,proof:(0,dv.concatBuffers)([e,r.dataHash,Oa(r.maxByteRange)])};if(r.type=="branch"){let n=(0,dv.concatBuffers)([e,r.leftChild.id,r.rightChild.id,Oa(r.byteRange)]);return[L0(r.leftChild,n,t+1),L0(r.rightChild,n,t+1)]}throw new Error("Unexpected node type")}function D0(r){let e=[];return r.forEach(t=>{Array.isArray(t)?e.push(...D0(t)):e.push(t)}),e}De.arrayFlatten=D0;async function FA(r,e){return e?{type:"branch",id:await At([await At(r.id),await At(e.id),await At(Oa(r.maxByteRange))]),byteRange:r.maxByteRange,maxByteRange:e.maxByteRange,leftChild:r,rightChild:e}:r}async function At(r){return Array.isArray(r)&&(r=Pc.default.utils.concatBuffers(r)),new Uint8Array(await Pc.default.crypto.hash(r))}function Oa(r){let e=new Uint8Array(Ia);for(var t=e.length-1;t>=0;t--){var n=r%256;e[t]=n,r=(r-n)/256}return e}De.intToBuffer=Oa;function U0(r){let e=0;for(var t=0;t<r.length;t++)e*=256,e+=r[t];return e}De.bufferToInt=U0;var TA=(r,e)=>r.every((t,n)=>e[n]===t);De.arrayCompare=TA;async function Ma(r,e,t,n,i){if(n<=0)return!1;if(e>=n)return Ma(r,0,n-1,n,i);if(e<0)return Ma(r,0,0,n,i);if(i.length==Qo+Ia){let S=i.slice(0,Qo),I=i.slice(S.length,S.length+Ia),E=await At([await At(S),await At(I)]);return(0,De.arrayCompare)(r,E)?{offset:n-1,leftBound:t,rightBound:n,chunkSize:n-t}:!1}let o=i.slice(0,Qo),a=i.slice(o.length,o.length+Qo),c=i.slice(o.length+a.length,o.length+a.length+Ia),y=U0(c),m=i.slice(o.length+a.length+c.length),_=await At([await At(o),await At(a),await At(c)]);return(0,De.arrayCompare)(r,_)?e<y?await Ma(o,e,t,Math.min(n,y),m):await Ma(a,e,Math.max(t,y),n,m):!1}De.validatePath=Ma;async function yv(r,e=""){if(r.byteLength<1)return e;let t=r.slice(0,Qo),n=r.slice(t.length,t.length+Qo),i=r.slice(t.length+n.length,t.length+n.length+Ia),o=U0(i),a=r.slice(t.length+n.length+i.length),c=await At([await At(t),await At(n),await At(i)]),y=`${e}
${JSON.stringify(Buffer.from(t))},${JSON.stringify(Buffer.from(n))},${o} => ${JSON.stringify(c)}`;return yv(a,y)}De.debug=yv});var wv=P(vr=>{"use strict";var MA=vr&&vr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),IA=vr&&vr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),OA=vr&&vr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&MA(e,r,t);return IA(e,r),e},CA=vr&&vr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vr,"__esModule",{value:!0});vr.TransactionUploader=void 0;var mv=CA(Zo()),BA=OA(gn()),W0=Ta(),RA=j0(),bv=1,PA=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"],vv=1e3*40,Ca=class{constructor(e,t){if(this.api=e,this.chunkIndex=0,this.txPosted=!1,this.lastRequestTimeEnd=0,this.totalErrors=0,this.lastResponseStatus=0,this.lastResponseError="",!t.id)throw new Error("Transaction is not signed");if(!t.chunks)throw new Error("Transaction chunks not prepared");this.data=t.data,this.transaction=new mv.default(Object.assign({},t,{data:new Uint8Array(0)}))}get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}async uploadChunk(e){if(this.isComplete)throw new Error("Upload is already complete");if(this.lastResponseError!==""?this.totalErrors++:this.totalErrors=0,this.totalErrors===100)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let t=this.lastResponseError===""?0:Math.max(this.lastRequestTimeEnd+vv-Date.now(),vv);if(t>0&&(t=t-t*Math.random()*.3,await new Promise(a=>setTimeout(a,t))),this.lastResponseError="",!this.txPosted){await this.postTransaction();return}e&&(this.chunkIndex=e);let n=this.transaction.getChunk(e||this.chunkIndex,this.data);if(!await(0,RA.validatePath)(this.transaction.chunks.data_root,parseInt(n.offset),0,parseInt(n.data_size),BA.b64UrlToBuffer(n.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);let o=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch(a=>(console.error(a.message),{status:-1,data:{error:a.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=o.status,this.lastResponseStatus==200)this.chunkIndex++;else if(this.lastResponseError=(0,W0.getError)(o),PA.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized(e,t,n){if(!t||typeof t.chunkIndex!="number"||typeof t.transaction!="object")throw new Error("Serialized object does not match expected format.");var i=new mv.default(t.transaction);i.chunks||await i.prepareChunks(n);let o=new Ca(e,i);if(o.chunkIndex=t.chunkIndex,o.lastRequestTimeEnd=t.lastRequestTimeEnd,o.lastResponseError=t.lastResponseError,o.lastResponseStatus=t.lastResponseStatus,o.txPosted=t.txPosted,o.data=n,o.transaction.data_root!==t.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return o}static async fromTransactionId(e,t){let n=await e.get(`tx/${t}`);if(n.status!==200)throw new Error(`Tx ${t} not found: ${n.status}`);let i=n.data;return i.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:i}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=bv){this.transaction.data=this.data;let n=await this.api.post("tx",this.transaction).catch(i=>(console.error(i),{status:-1,data:{error:i.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=n.status,this.transaction.data=new Uint8Array(0),n.status>=200&&n.status<300){this.txPosted=!0,this.chunkIndex=bv;return}throw this.lastResponseError=(0,W0.getError)(n),new Error(`Unable to upload transaction: ${n.status}, ${this.lastResponseError}`)}let t=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=t.status,!(t.status>=200&&t.status<300))throw this.lastResponseError=(0,W0.getError)(t),new Error(`Unable to upload transaction: ${t.status}, ${this.lastResponseError}`);this.txPosted=!0}};vr.TransactionUploader=Ca});var _v=P(Dt=>{"use strict";var NA=Dt&&Dt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),LA=Dt&&Dt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),kA=Dt&&Dt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&NA(e,r,t);return LA(e,r),e},Gi=Dt&&Dt.__await||function(r){return this instanceof Gi?(this.v=r,this):new Gi(r)},qA=Dt&&Dt.__asyncGenerator||function(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(I){n[I]&&(i[I]=function(E){return new Promise(function(C,N){o.push([I,E,C,N])>1||c(I,E)})})}function c(I,E){try{y(n[I](E))}catch(C){S(o[0][3],C)}}function y(I){I.value instanceof Gi?Promise.resolve(I.value.v).then(m,_):S(o[0][2],I)}function m(I){c("next",I)}function _(I){c("throw",I)}function S(I,E){I(E),o.shift(),o.length&&c(o[0][0],o[0][1])}},xv=Dt&&Dt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Dt,"__esModule",{value:!0});var H0=xv(Ta()),xn=xv(Zo()),Ba=kA(gn()),G0=wv();Ui();var z0=class{constructor(e,t,n){this.api=e,this.crypto=t,this.chunks=n}getTransactionAnchor(){return this.api.get("tx_anchor",{transformResponse:[]}).then(e=>e.data)}getPrice(e,t){let n=t?`price/${e}/${t}`:`price/${e}`;return this.api.get(n,{transformResponse:[function(i){return i}]}).then(i=>i.data)}async get(e){let t=await this.api.get(`tx/${e}`);if(t.status==200){let n=parseInt(t.data.data_size);if(t.data.format>=2&&n>0&&n<=1024*1024*12){let i=await this.getData(e);return new xn.default(Object.assign(Object.assign({},t.data),{data:i}))}return new xn.default(Object.assign(Object.assign({},t.data),{format:t.data.format||1}))}throw t.status==404?new H0.default("TX_NOT_FOUND"):t.status==410?new H0.default("TX_FAILED"):new H0.default("TX_INVALID")}fromRaw(e){return new xn.default(e)}async search(e,t){return this.api.post("arql",{op:"equals",expr1:e,expr2:t}).then(n=>n.data?n.data:[])}getStatus(e){return this.api.get(`tx/${e}/status`).then(t=>t.status==200?{status:200,confirmed:t.data}:{status:t.status,confirmed:null})}async getData(e,t){let n;try{n=await this.chunks.downloadChunkedData(e)}catch(i){console.error(`Error while trying to download chunked data for ${e}`),console.error(i)}if(!n){console.warn(`Falling back to gateway cache for ${e}`);try{n=(await this.api.get(`/${e}`)).data}catch(i){console.error(`Error while trying to download contiguous data from gateway cache for ${e}`),console.error(i)}}if(!n)throw new Error(`${e} was not found!`);return t&&t.decode&&!t.string?n:t&&t.decode&&t.string?Ba.bufferToString(n):Ba.bufferTob64Url(n)}async sign(e,t,n){if(!t&&(typeof window>"u"||!window.arweaveWallet))throw new Error("A new Arweave transaction must provide the jwk parameter.");if(!t||t==="use_wallet"){try{(await window.arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await window.arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}let i=await window.arweaveWallet.sign(e,n);e.setSignature({id:i.id,owner:i.owner,reward:i.reward,tags:i.tags,signature:i.signature})}else{e.setOwner(t.n);let i=await e.getSignatureData(),o=await this.crypto.sign(t,i,n),a=await this.crypto.hash(o);e.setSignature({id:Ba.bufferTob64Url(a),owner:t.n,signature:Ba.bufferTob64Url(o)})}}async verify(e){let t=await e.getSignatureData(),n=e.get("signature",{decode:!0,string:!1}),i=Ba.bufferTob64Url(await this.crypto.hash(n));if(e.id!==i)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(e.owner,t,n)}async post(e){if(typeof e=="string"?e=new xn.default(JSON.parse(e)):typeof e.readInt32BE=="function"?e=new xn.default(JSON.parse(e.toString())):typeof e=="object"&&!(e instanceof xn.default)&&(e=new xn.default(e)),!(e instanceof xn.default))throw new Error("Must be Transaction object");e.chunks||await e.prepareChunks(e.data);let t=await this.getUploader(e,e.data);try{for(;!t.isComplete;)await t.uploadChunk()}catch(n){if(t.lastResponseStatus>0)return{status:t.lastResponseStatus,statusText:t.lastResponseError,data:{error:t.lastResponseError}};throw n}return{status:200,statusText:"OK",data:{}}}async getUploader(e,t){let n;if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),e instanceof xn.default){if(t||(t=e.data),!(t instanceof Uint8Array))throw new Error("Data format is invalid");e.chunks||await e.prepareChunks(t),n=new G0.TransactionUploader(this.api,e),(!n.data||n.data.length===0)&&(n.data=t)}else{if(typeof e=="string"&&(e=await G0.TransactionUploader.fromTransactionId(this.api,e)),!t||!(t instanceof Uint8Array))throw new Error("Must provide data when resuming upload");n=await G0.TransactionUploader.fromSerialized(this.api,e,t)}return n}upload(e,t){return qA(this,arguments,function*(){let i=yield Gi(this.getUploader(e,t));for(;!i.isComplete;)yield Gi(i.uploadChunk()),yield yield Gi(i);return yield Gi(i)})}};Dt.default=z0});var Ev=P(_n=>{"use strict";var DA=_n&&_n.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),UA=_n&&_n.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),jA=_n&&_n.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&DA(e,r,t);return UA(e,r),e};Object.defineProperty(_n,"__esModule",{value:!0});var Sv=jA(gn());Ui();var K0=class{constructor(e,t){this.api=e,this.crypto=t}getBalance(e){return this.api.get(`wallet/${e}/balance`,{transformResponse:[function(t){return t}]}).then(t=>t.data)}getLastTransactionID(e){return this.api.get(`wallet/${e}/last_tx`).then(t=>t.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(e){return!e||e==="use_wallet"?this.getAddress():this.getAddress(e)}async getAddress(e){if(!e||e==="use_wallet"){try{await window.arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return window.arweaveWallet.getActiveAddress()}else return this.ownerToAddress(e.n)}async ownerToAddress(e){return Sv.bufferTob64Url(await this.crypto.hash(Sv.b64UrlToBuffer(e)))}};_n.default=K0});var Fv=P(Rr=>{"use strict";var $A=Rr&&Rr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),WA=Rr&&Rr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),HA=Rr&&Rr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&$A(e,r,t);return WA(e,r),e};Object.defineProperty(Rr,"__esModule",{value:!0});Rr.SiloResource=void 0;var Av=HA(gn()),V0=class{constructor(e,t,n){this.api=e,this.crypto=t,this.transactions=n}async get(e){if(!e)throw new Error("No Silo URI specified");let t=await this.parseUri(e),n=await this.transactions.search("Silo-Name",t.getAccessKey());if(n.length==0)throw new Error(`No data could be found for the Silo URI: ${e}`);let i=await this.transactions.get(n[0]);if(!i)throw new Error(`No data could be found for the Silo URI: ${e}`);let o=i.get("data",{decode:!0,string:!1});return this.crypto.decrypt(o,t.getEncryptionKey())}async readTransactionData(e,t){if(!t)throw new Error("No Silo URI specified");let n=await this.parseUri(t),i=e.get("data",{decode:!0,string:!1});return this.crypto.decrypt(i,n.getEncryptionKey())}async parseUri(e){let t=e.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!t)throw new Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");let n=t[1],i=Math.pow(2,parseInt(t[2])),o=await this.hash(Av.stringToBuffer(n),i),a=Av.bufferTob64(o.slice(0,15)),c=await this.hash(o.slice(16,31),1);return new Lc(e,a,c)}async hash(e,t){let n=await this.crypto.hash(e);for(let i=0;i<t-1;i++)n=await this.crypto.hash(n);return n}};Rr.default=V0;var Lc=class{constructor(e,t,n){this.uri=e,this.accessKey=t,this.encryptionKey=n}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}};Rr.SiloResource=Lc});var Mv=P(Sn=>{"use strict";var GA=Sn&&Sn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),zA=Sn&&Sn.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),KA=Sn&&Sn.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&GA(e,r,t);return zA(e,r),e};Object.defineProperty(Sn,"__esModule",{value:!0});var Tv=Ta(),VA=KA(gn()),J0=class{constructor(e){this.api=e}async getTransactionOffset(e){let t=await this.api.get(`tx/${e}/offset`);if(t.status===200)return t.data;throw new Error(`Unable to get transaction offset: ${(0,Tv.getError)(t)}`)}async getChunk(e){let t=await this.api.get(`chunk/${e}`);if(t.status===200)return t.data;throw new Error(`Unable to get chunk: ${(0,Tv.getError)(t)}`)}async getChunkData(e){let t=await this.getChunk(e);return VA.b64UrlToBuffer(t.chunk)}firstChunkOffset(e){return parseInt(e.offset)-parseInt(e.size)+1}async downloadChunkedData(e){let t=await this.getTransactionOffset(e),n=parseInt(t.size),o=parseInt(t.offset)-n+1,a=new Uint8Array(n),c=0;for(;c<n;){this.api.config.logging&&console.log(`[chunk] ${c}/${n}`);let y;try{y=await this.getChunkData(o+c)}catch{console.error(`[chunk] Failed to fetch chunk at offset ${o+c}`),console.error("[chunk] This could indicate that the chunk wasn't uploaded or hasn't yet seeded properly to a particular gateway/node")}if(y)a.set(y,c),c+=y.length;else throw new Error(`Couldn't complete data download at ${c}/${n}`)}return a}};Sn.default=J0});var Iv=P(Ra=>{"use strict";var JA=Ra&&Ra.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ra,"__esModule",{value:!0});var XA=JA(Ta());Ui();var es=class{constructor(e,t){this.api=e,this.network=t}async get(e){let t=await this.api.get(`${es.ENDPOINT}${e}`);if(t.status===200)return t.data;throw t.status===404?new XA.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${t}`)}async getCurrent(){let{current:e}=await this.network.getInfo();return await this.get(e)}};Ra.default=es;es.ENDPOINT="block/hash/"});var $0=P(Pr=>{"use strict";var YA=Pr&&Pr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),QA=Pr&&Pr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),ZA=Pr&&Pr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&YA(e,r,t);return QA(e,r),e},Xr=Pr&&Pr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pr,"__esModule",{value:!0});var eF=Xr(eb()),tF=Xr(tb()),rF=Xr(lv()),nF=Xr(hv()),iF=Xr(_v()),oF=Xr(Ev()),Ov=Xr(Zo()),Pa=ZA(gn()),sF=Xr(Fv()),aF=Xr(Mv()),fF=Xr(Iv()),Jr=class{constructor(e){this.api=new tF.default(e),this.wallets=new oF.default(this.api,Jr.crypto),this.chunks=new aF.default(this.api),this.transactions=new iF.default(this.api,Jr.crypto,this.chunks),this.silo=new sF.default(this.api,this.crypto,this.transactions),this.network=new nF.default(this.api),this.blocks=new fF.default(this.api,this.network),this.ar=new eF.default}get crypto(){return Jr.crypto}get utils(){return Jr.utils}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(e,t){let n={};if(Object.assign(n,e),!e.data&&!(e.target&&e.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(e.owner==null&&t&&t!=="use_wallet"&&(n.owner=t.n),e.last_tx==null&&(n.last_tx=await this.transactions.getTransactionAnchor()),typeof e.data=="string"&&(e.data=Pa.stringToBuffer(e.data)),e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),e.data&&!(e.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(e.reward==null){let o=e.data?e.data.byteLength:0;n.reward=await this.transactions.getPrice(o,n.target)}n.data_root="",n.data_size=e.data?e.data.byteLength.toString():"0",n.data=e.data||new Uint8Array(0);let i=new Ov.default(n);return await i.getSignatureData(),i}async createSiloTransaction(e,t,n){let i={};if(Object.assign(i,e),!e.data)throw new Error("Silo transactions must have a 'data' value");if(!n)throw new Error("No Silo URI specified.");if(e.target||e.quantity)throw new Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");if(e.owner==null){if(!t||!t.n)throw new Error("A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.");i.owner=t.n}e.last_tx==null&&(i.last_tx=await this.transactions.getTransactionAnchor());let o=await this.silo.parseUri(n);if(typeof e.data=="string"){let c=await this.crypto.encrypt(Pa.stringToBuffer(e.data),o.getEncryptionKey());i.reward=await this.transactions.getPrice(c.byteLength),i.data=Pa.bufferTob64Url(c)}if(e.data instanceof Uint8Array){let c=await this.crypto.encrypt(e.data,o.getEncryptionKey());i.reward=await this.transactions.getPrice(c.byteLength),i.data=Pa.bufferTob64Url(c)}let a=new Ov.default(i);return a.addTag("Silo-Name",o.getAccessKey()),a.addTag("Silo-Version","0.1.0"),a}arql(e){return this.api.post("/arql",e).then(t=>t.data||[])}};Pr.default=Jr;Jr.crypto=new rF.default;Jr.utils=Pa});var Rv=P(Na=>{"use strict";var cF=Na&&Na.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Na,"__esModule",{value:!0});var tr=cF($0());async function Cv(r){if(Array.isArray(r)){let n=tr.default.utils.concatBuffers([tr.default.utils.stringToBuffer("list"),tr.default.utils.stringToBuffer(r.length.toString())]);return await Bv(r,await tr.default.crypto.hash(n,"SHA-384"))}let e=tr.default.utils.concatBuffers([tr.default.utils.stringToBuffer("blob"),tr.default.utils.stringToBuffer(r.byteLength.toString())]),t=tr.default.utils.concatBuffers([await tr.default.crypto.hash(e,"SHA-384"),await tr.default.crypto.hash(r,"SHA-384")]);return await tr.default.crypto.hash(t,"SHA-384")}Na.default=Cv;async function Bv(r,e){if(r.length<1)return e;let t=tr.default.utils.concatBuffers([e,await Cv(r[0])]),n=await tr.default.crypto.hash(t,"SHA-384");return await Bv(r.slice(1),n)}});var Zo=P(rr=>{"use strict";var uF=rr&&rr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),lF=rr&&rr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),hF=rr&&rr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&uF(e,r,t);return lF(e,r),e},dF=rr&&rr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(rr,"__esModule",{value:!0});rr.Tag=void 0;var wt=hF(gn()),pF=dF(Rv()),gF=j0(),kc=class{get(e,t){if(!Object.getOwnPropertyNames(this).includes(e))throw new Error(`Field "${e}" is not a property of the Arweave Transaction class.`);return this[e]instanceof Uint8Array?t&&t.decode&&t.string?wt.bufferToString(this[e]):t&&t.decode&&!t.string?this[e]:wt.bufferTob64Url(this[e]):t&&t.decode==!0?t&&t.string?wt.b64UrlToString(this[e]):wt.b64UrlToBuffer(this[e]):this[e]}},La=class extends kc{constructor(e,t,n=!1){super(),this.name=e,this.value=t}};rr.Tag=La;var X0=class extends kc{constructor(e={}){super(),this.format=2,this.id="",this.last_tx="",this.owner="",this.tags=[],this.target="",this.quantity="0",this.data_size="0",this.data=new Uint8Array,this.data_root="",this.reward="0",this.signature="",Object.assign(this,e),typeof this.data=="string"&&(this.data=wt.b64UrlToBuffer(this.data)),e.tags&&(this.tags=e.tags.map(t=>new La(t.name,t.value)))}addTag(e,t){this.tags.push(new La(wt.stringToB64Url(e),wt.stringToB64Url(t)))}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:wt.bufferTob64Url(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(e){this.owner=e}setSignature({id:e,owner:t,reward:n,tags:i,signature:o}){this.id=e,this.owner=t,n&&(this.reward=n),i&&(this.tags=i),this.signature=o}async prepareChunks(e){!this.chunks&&e.byteLength>0&&(this.chunks=await(0,gF.generateTransactionChunks)(e),this.data_root=wt.bufferTob64Url(this.chunks.data_root)),!this.chunks&&e.byteLength===0&&(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(e,t){if(!this.chunks)throw new Error("Chunks have not been prepared");let n=this.chunks.proofs[e],i=this.chunks.chunks[e];return{data_root:this.data_root,data_size:this.data_size,data_path:wt.bufferTob64Url(n.proof),offset:n.offset.toString(),chunk:wt.bufferTob64Url(t.slice(i.minByteRange,i.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:let e=this.tags.reduce((n,i)=>wt.concatBuffers([n,i.get("name",{decode:!0,string:!1}),i.get("value",{decode:!0,string:!1})]),new Uint8Array);return wt.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),wt.stringToBuffer(this.quantity),wt.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),e]);case 2:this.data_root||await this.prepareChunks(this.data);let t=this.tags.map(n=>[n.get("name",{decode:!0,string:!1}),n.get("value",{decode:!0,string:!1})]);return await(0,pF.default)([wt.stringToBuffer(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),wt.stringToBuffer(this.quantity),wt.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),t,wt.stringToBuffer(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}};rr.default=X0});var ka=P((VU,Pv)=>{window.global=window;global.fetch=window.fetch;Pv.exports.Buffer=Hn().Buffer});var Lv=P(Nv=>{"use strict";Nv.supports=function(...e){let t=e.reduce((n,i)=>Object.assign(n,i),{});return Object.assign(t,{snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:Object.assign({},t.encodings),events:Object.assign({},t.events),additionalMethods:Object.assign({},t.additionalMethods)})}});var wr=P((YU,kv)=>{"use strict";kv.exports=class extends Error{constructor(e,t){super(e||""),typeof t=="object"&&t!==null&&(t.code&&(this.code=String(t.code)),t.expected&&(this.expected=!0),t.transient&&(this.transient=!0),t.cause&&(this.cause=t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var Q0=P((QU,qv)=>{"use strict";var Y0=null;qv.exports=function(){return Y0===null&&(Y0={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),Y0}});var td=P(Dv=>{"use strict";var Z0=wr(),yF=new Set(["buffer","view","utf8"]),ed=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!yF.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new Z0(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new Z0(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new Z0(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};Dv.Encoding=ed});var od=P(qc=>{"use strict";var{Buffer:nd}=Hn()||{},{Encoding:id}=td(),mF=Q0(),qa=class extends id{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new Da({encode:this.encode,decode:e=>this.decode(nd.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},Da=class extends id{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new qa({encode:e=>{let t=this.encode(e);return nd.from(t.buffer,t.byteOffset,t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},rd=class extends id{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new qa({encode:e=>nd.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:t}=mF();return new Da({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(t.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};qc.BufferFormat=qa;qc.ViewFormat=Da;qc.UTF8Format=rd});var Wv=P(zi=>{"use strict";var{Buffer:Nt}=Hn()||{Buffer:{isBuffer:()=>!1}},{textEncoder:jv,textDecoder:Uv}=Q0()(),{BufferFormat:Ua,ViewFormat:sd,UTF8Format:$v}=od(),Dc=r=>r;zi.utf8=new $v({encode:function(r){return Nt.isBuffer(r)?r.toString("utf8"):ArrayBuffer.isView(r)?Uv.decode(r):String(r)},decode:Dc,name:"utf8",createViewTranscoder(){return new sd({encode:function(r){return ArrayBuffer.isView(r)?r:jv.encode(r)},decode:function(r){return Uv.decode(r)},name:`${this.name}+view`})},createBufferTranscoder(){return new Ua({encode:function(r){return Nt.isBuffer(r)?r:ArrayBuffer.isView(r)?Nt.from(r.buffer,r.byteOffset,r.byteLength):Nt.from(String(r),"utf8")},decode:function(r){return r.toString("utf8")},name:`${this.name}+buffer`})}});zi.json=new $v({encode:JSON.stringify,decode:JSON.parse,name:"json"});zi.buffer=new Ua({encode:function(r){return Nt.isBuffer(r)?r:ArrayBuffer.isView(r)?Nt.from(r.buffer,r.byteOffset,r.byteLength):Nt.from(String(r),"utf8")},decode:Dc,name:"buffer",createViewTranscoder(){return new sd({encode:function(r){return ArrayBuffer.isView(r)?r:Nt.from(String(r),"utf8")},decode:function(r){return Nt.from(r.buffer,r.byteOffset,r.byteLength)},name:`${this.name}+view`})}});zi.view=new sd({encode:function(r){return ArrayBuffer.isView(r)?r:jv.encode(r)},decode:Dc,name:"view",createBufferTranscoder(){return new Ua({encode:function(r){return Nt.isBuffer(r)?r:ArrayBuffer.isView(r)?Nt.from(r.buffer,r.byteOffset,r.byteLength):Nt.from(String(r),"utf8")},decode:Dc,name:`${this.name}+buffer`})}});zi.hex=new Ua({encode:function(r){return Nt.isBuffer(r)?r:Nt.from(String(r),"hex")},decode:function(r){return r.toString("hex")},name:"hex"});zi.base64=new Ua({encode:function(r){return Nt.isBuffer(r)?r:Nt.from(String(r),"base64")},decode:function(r){return r.toString("base64")},name:"base64"})});var zv=P(Gv=>{"use strict";var Hv=wr(),jc=Wv(),{Encoding:bF}=td(),{BufferFormat:vF,ViewFormat:wF,UTF8Format:xF}=od(),ja=Symbol("formats"),Uc=Symbol("encodings"),_F=new Set(["buffer","view","utf8"]),ad=class{constructor(e){if(Array.isArray(e)){if(!e.every(t=>_F.has(t)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[Uc]=new Map,this[ja]=new Set(e);for(let t in jc)try{this.encoding(t)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[Uc].values()))}encoding(e){let t=this[Uc].get(e);if(t===void 0){if(typeof e=="string"&&e!==""){if(t=FF[e],!t)throw new Hv(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");t=SF(e)}let{name:n,format:i}=t;if(!this[ja].has(i))if(this[ja].has("view"))t=t.createViewTranscoder();else if(this[ja].has("buffer"))t=t.createBufferTranscoder();else if(this[ja].has("utf8"))t=t.createUTF8Transcoder();else throw new Hv(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let o of[e,n,t.name,t.commonName])this[Uc].set(o,t)}return t}};Gv.Transcoder=ad;function SF(r){if(r instanceof bF)return r;let e="type"in r&&typeof r.type=="string"?r.type:void 0,t=r.name||e||`anonymous-${TF++}`;switch(EF(r)){case"view":return new wF({...r,name:t});case"utf8":return new xF({...r,name:t});case"buffer":return new vF({...r,name:t});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function EF(r){return"format"in r&&r.format!==void 0?r.format:"buffer"in r&&typeof r.buffer=="boolean"?r.buffer?"buffer":"utf8":"code"in r&&Number.isInteger(r.code)?"view":"buffer"}var AF={binary:jc.buffer,"utf-8":jc.utf8},FF={...jc,...AF},TF=0});var nw=P((nj,fd)=>{"use strict";var ts=typeof Reflect=="object"?Reflect:null,Kv=ts&&typeof ts.apply=="function"?ts.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},$c;ts&&typeof ts.ownKeys=="function"?$c=ts.ownKeys:Object.getOwnPropertySymbols?$c=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:$c=function(e){return Object.getOwnPropertyNames(e)};function MF(r){console&&console.warn&&console.warn(r)}var Jv=Number.isNaN||function(e){return e!==e};function Ze(){Ze.init.call(this)}fd.exports=Ze;fd.exports.once=BF;Ze.EventEmitter=Ze;Ze.prototype._events=void 0;Ze.prototype._eventsCount=0;Ze.prototype._maxListeners=void 0;var Vv=10;function Wc(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(Ze,"defaultMaxListeners",{enumerable:!0,get:function(){return Vv},set:function(r){if(typeof r!="number"||r<0||Jv(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");Vv=r}});Ze.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ze.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Jv(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Xv(r){return r._maxListeners===void 0?Ze.defaultMaxListeners:r._maxListeners}Ze.prototype.getMaxListeners=function(){return Xv(this)};Ze.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var c=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw c.context=a,c}var y=o[e];if(y===void 0)return!1;if(typeof y=="function")Kv(y,this,t);else for(var m=y.length,_=tw(y,m),n=0;n<m;++n)Kv(_[n],this,t);return!0};function Yv(r,e,t,n){var i,o,a;if(Wc(t),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),a=o[e]),a===void 0)a=o[e]=t,++r._eventsCount;else if(typeof a=="function"?a=o[e]=n?[t,a]:[a,t]:n?a.unshift(t):a.push(t),i=Xv(r),i>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=r,c.type=e,c.count=a.length,MF(c)}return r}Ze.prototype.addListener=function(e,t){return Yv(this,e,t,!1)};Ze.prototype.on=Ze.prototype.addListener;Ze.prototype.prependListener=function(e,t){return Yv(this,e,t,!0)};function IF(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Qv(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=IF.bind(n);return i.listener=t,n.wrapFn=i,i}Ze.prototype.once=function(e,t){return Wc(t),this.on(e,Qv(this,e,t)),this};Ze.prototype.prependOnceListener=function(e,t){return Wc(t),this.prependListener(e,Qv(this,e,t)),this};Ze.prototype.removeListener=function(e,t){var n,i,o,a,c;if(Wc(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){c=n[a].listener,o=a;break}if(o<0)return this;o===0?n.shift():OF(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,c||t)}return this};Ze.prototype.off=Ze.prototype.removeListener;Ze.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function Zv(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?CF(i):tw(i,i.length)}Ze.prototype.listeners=function(e){return Zv(this,e,!0)};Ze.prototype.rawListeners=function(e){return Zv(this,e,!1)};Ze.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):ew.call(r,e)};Ze.prototype.listenerCount=ew;function ew(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Ze.prototype.eventNames=function(){return this._eventsCount>0?$c(this._events):[]};function tw(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function OF(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function CF(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function BF(r,e){return new Promise(function(t,n){function i(a){r.removeListener(e,o),n(a)}function o(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}rw(r,e,o,{once:!0}),e!=="error"&&RF(r,i,{once:!0})})}function RF(r,e,t){typeof r.on=="function"&&rw(r,"error",e,t)}function rw(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(o){n.once&&r.removeEventListener(e,i),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}});var ow=P((ij,iw)=>{iw.exports=typeof queueMicrotask=="function"?queueMicrotask:r=>Promise.resolve().then(r)});var $a=P(cd=>{"use strict";var sw=ow();cd.fromCallback=function(r,e){if(r===void 0){var t=new Promise(function(n,i){r=function(o,a){o?i(o):n(a)}});r[e!==void 0?e:"promise"]=t}else if(typeof r!="function")throw new TypeError("Callback must be a function");return r};cd.fromPromise=function(r,e){if(e===void 0)return r;r.then(function(t){sw(()=>e(null,t))}).catch(function(t){sw(()=>e(t))})}});var Hc=P(ud=>{"use strict";ud.getCallback=function(r,e){return typeof r=="function"?r:e};ud.getOptions=function(r,e){return typeof r=="object"&&r!==null?r:e!==void 0?e:{}}});var Qn=P(Vc=>{"use strict";var{fromCallback:ld}=$a(),nr=wr(),{getOptions:hd,getCallback:aw}=Hc(),Ki=Symbol("promise"),rs=Symbol("callback"),Yr=Symbol("working"),Vi=Symbol("handleOne"),En=Symbol("handleMany"),dd=Symbol("autoClose"),Xn=Symbol("finishWork"),Qr=Symbol("returnMany"),Kn=Symbol("closing"),Wa=Symbol("handleClose"),Gc=Symbol("closed"),Ha=Symbol("closeCallbacks"),Jn=Symbol("keyEncoding"),Ji=Symbol("valueEncoding"),pd=Symbol("abortOnClose"),zc=Symbol("legacy"),gd=Symbol("keys"),yd=Symbol("values"),Vn=Symbol("limit"),xr=Symbol("count"),Kc=Object.freeze({}),PF=()=>{},fw=!1,Ga=class{constructor(e,t,n){if(typeof e!="object"||e===null){let i=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${i}`)}if(typeof t!="object"||t===null)throw new TypeError("The second argument must be an options object");this[Gc]=!1,this[Ha]=[],this[Yr]=!1,this[Kn]=!1,this[dd]=!1,this[rs]=null,this[Vi]=this[Vi].bind(this),this[En]=this[En].bind(this),this[Wa]=this[Wa].bind(this),this[Jn]=t[Jn],this[Ji]=t[Ji],this[zc]=n,this[Vn]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[xr]=0,this[pd]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[xr]}get limit(){return this[Vn]}next(e){let t;if(e===void 0)t=new Promise((n,i)=>{e=(o,a,c)=>{o?i(o):this[zc]?a===void 0&&c===void 0?n():n([a,c]):n(a)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[Kn]?this.nextTick(e,new nr("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Yr]?this.nextTick(e,new nr("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Yr]=!0,this[rs]=e,this[xr]>=this[Vn]?this.nextTick(this[Vi],null):this._next(this[Vi])),t}_next(e){this.nextTick(e)}nextv(e,t,n){return n=aw(t,n),n=ld(n,Ki),t=hd(t,Kc),Number.isInteger(e)?(this[Kn]?this.nextTick(n,new nr("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Yr]?this.nextTick(n,new nr("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[Vn]<1/0&&(e=Math.min(e,this[Vn]-this[xr])),this[Yr]=!0,this[rs]=n,e<=0?this.nextTick(this[En],null,[]):this._nextv(e,t,this[En])),n[Ki]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[Ki])}_nextv(e,t,n){let i=[],o=(a,c,y)=>{if(a)return n(a);if(this[zc]?c===void 0&&y===void 0:c===void 0)return n(null,i);i.push(this[zc]?[c,y]:c),i.length===e?n(null,i):this._next(o)};this._next(o)}all(e,t){return t=aw(e,t),t=ld(t,Ki),e=hd(e,Kc),this[Kn]?this.nextTick(t,new nr("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Yr]?this.nextTick(t,new nr("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Yr]=!0,this[rs]=t,this[dd]=!0,this[xr]>=this[Vn]?this.nextTick(this[En],null,[]):this._all(e,this[En])),t[Ki]}_all(e,t){let n=this[xr],i=[],o=()=>{let c=this[Vn]<1/0?Math.min(1e3,this[Vn]-n):1e3;c<=0?this.nextTick(t,null,i):this._nextv(c,Kc,a)},a=(c,y)=>{c?t(c):y.length===0?t(null,i):(i.push.apply(i,y),n+=y.length,o())};o()}[Xn](){let e=this[rs];return this[pd]&&e===null?PF:(this[Yr]=!1,this[rs]=null,this[Kn]&&this._close(this[Wa]),e)}[Qr](e,t,n){this[dd]?this.close(e.bind(null,t,n)):e(t,n)}seek(e,t){if(t=hd(t,Kc),!this[Kn]){if(this[Yr])throw new nr("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let n=this.db.keyEncoding(t.keyEncoding||this[Jn]),i=n.format;t.keyEncoding!==i&&(t={...t,keyEncoding:i});let o=this.db.prefixKey(n.encode(e),i);this._seek(o,t)}}}_seek(e,t){throw new nr("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=ld(e,Ki),this[Gc]?this.nextTick(e):this[Kn]?this[Ha].push(e):(this[Kn]=!0,this[Ha].push(e),this[Yr]?this[pd]&&this[Xn]()(new nr("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[Wa])),e[Ki]}_close(e){this.nextTick(e)}[Wa](){this[Gc]=!0,this.db.detachResource(this);let e=this[Ha];this[Ha]=[];for(let t of e)t()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[Gc]||await this.close()}}},ns=class extends Ga{constructor(e,t){super(e,t,!0),this[gd]=t.keys!==!1,this[yd]=t.values!==!1}[Vi](e,t,n){let i=this[Xn]();if(e)return i(e);try{t=this[gd]&&t!==void 0?this[Jn].decode(t):void 0,n=this[yd]&&n!==void 0?this[Ji].decode(n):void 0}catch(o){return i(new Yn("entry",o))}t===void 0&&n===void 0||this[xr]++,i(null,t,n)}[En](e,t){let n=this[Xn]();if(e)return this[Qr](n,e);try{for(let i of t){let o=i[0],a=i[1];i[0]=this[gd]&&o!==void 0?this[Jn].decode(o):void 0,i[1]=this[yd]&&a!==void 0?this[Ji].decode(a):void 0}}catch(i){return this[Qr](n,new Yn("entries",i))}this[xr]+=t.length,this[Qr](n,null,t)}end(e){return!fw&&typeof console<"u"&&(fw=!0,console.warn(new nr("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},md=class extends Ga{constructor(e,t){super(e,t,!1)}[Vi](e,t){let n=this[Xn]();if(e)return n(e);try{t=t!==void 0?this[Jn].decode(t):void 0}catch(i){return n(new Yn("key",i))}t!==void 0&&this[xr]++,n(null,t)}[En](e,t){let n=this[Xn]();if(e)return this[Qr](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[Jn].decode(o):void 0}}catch(i){return this[Qr](n,new Yn("keys",i))}this[xr]+=t.length,this[Qr](n,null,t)}},bd=class extends Ga{constructor(e,t){super(e,t,!1)}[Vi](e,t){let n=this[Xn]();if(e)return n(e);try{t=t!==void 0?this[Ji].decode(t):void 0}catch(i){return n(new Yn("value",i))}t!==void 0&&this[xr]++,n(null,t)}[En](e,t){let n=this[Xn]();if(e)return this[Qr](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[Ji].decode(o):void 0}}catch(i){return this[Qr](n,new Yn("values",i))}this[xr]+=t.length,this[Qr](n,null,t)}},Yn=class extends nr{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}};for(let r of["_ended property","_nexting property","_end method"])Object.defineProperty(ns.prototype,r.split(" ")[0],{get(){throw new nr(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new nr(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})}});ns.keyEncoding=Jn;ns.valueEncoding=Ji;Vc.AbstractIterator=ns;Vc.AbstractKeyIterator=md;Vc.AbstractValueIterator=bd});var cw=P(vd=>{"use strict";var{AbstractKeyIterator:NF,AbstractValueIterator:LF}=Qn(),Xi=Symbol("iterator"),za=Symbol("callback"),is=Symbol("handleOne"),Yi=Symbol("handleMany"),Ka=class extends NF{constructor(e,t){super(e,t),this[Xi]=e.iterator({...t,keys:!0,values:!1}),this[is]=this[is].bind(this),this[Yi]=this[Yi].bind(this)}},Jc=class extends LF{constructor(e,t){super(e,t),this[Xi]=e.iterator({...t,keys:!1,values:!0}),this[is]=this[is].bind(this),this[Yi]=this[Yi].bind(this)}};for(let r of[Ka,Jc]){let e=r===Ka,t=e?n=>n[0]:n=>n[1];r.prototype._next=function(n){this[za]=n,this[Xi].next(this[is])},r.prototype[is]=function(n,i,o){let a=this[za];n?a(n):a(null,e?i:o)},r.prototype._nextv=function(n,i,o){this[za]=o,this[Xi].nextv(n,i,this[Yi])},r.prototype._all=function(n,i){this[za]=i,this[Xi].all(n,this[Yi])},r.prototype[Yi]=function(n,i){let o=this[za];n?o(n):o(null,i.map(t))},r.prototype._seek=function(n,i){this[Xi].seek(n,i)},r.prototype._close=function(n){this[Xi].close(n)}}vd.DefaultKeyIterator=Ka;vd.DefaultValueIterator=Jc});var uw=P(tu=>{"use strict";var{AbstractIterator:kF,AbstractKeyIterator:qF,AbstractValueIterator:DF}=Qn(),wd=wr(),Gt=Symbol("nut"),Zc=Symbol("undefer"),eu=Symbol("factory"),Xc=class extends kF{constructor(e,t){super(e,t),this[Gt]=null,this[eu]=()=>e.iterator(t),this.db.defer(()=>this[Zc]())}},Yc=class extends qF{constructor(e,t){super(e,t),this[Gt]=null,this[eu]=()=>e.keys(t),this.db.defer(()=>this[Zc]())}},Qc=class extends DF{constructor(e,t){super(e,t),this[Gt]=null,this[eu]=()=>e.values(t),this.db.defer(()=>this[Zc]())}};for(let r of[Xc,Yc,Qc])r.prototype[Zc]=function(){this.db.status==="open"&&(this[Gt]=this[eu]())},r.prototype._next=function(e){this[Gt]!==null?this[Gt].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new wd("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._nextv=function(e,t,n){this[Gt]!==null?this[Gt].nextv(e,t,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,t,n)):this.nextTick(n,new wd("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._all=function(e,t){this[Gt]!==null?this[Gt].all(t):this.db.status==="opening"?this.db.defer(()=>this._all(e,t)):this.nextTick(t,new wd("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._seek=function(e,t){this[Gt]!==null?this[Gt]._seek(e,t):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,t))},r.prototype._close=function(e){this[Gt]!==null?this[Gt].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};tu.DeferredIterator=Xc;tu.DeferredKeyIterator=Yc;tu.DeferredValueIterator=Qc});var _d=P(hw=>{"use strict";var{fromCallback:lw}=$a(),ru=wr(),{getCallback:UF,getOptions:jF}=Hc(),nu=Symbol("promise"),_r=Symbol("status"),os=Symbol("operations"),Va=Symbol("finishClose"),ss=Symbol("closeCallbacks"),xd=class{constructor(e){if(typeof e!="object"||e===null){let t=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}this[os]=[],this[ss]=[],this[_r]="open",this[Va]=this[Va].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[os].length}put(e,t,n){if(this[_r]!=="open")throw new ru("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let i=this.db._checkKey(e)||this.db._checkValue(t);if(i)throw i;let o=n&&n.sublevel!=null?n.sublevel:this.db,a=n,c=o.keyEncoding(n&&n.keyEncoding),y=o.valueEncoding(n&&n.valueEncoding),m=c.format;n={...n,keyEncoding:m,valueEncoding:y.format},o!==this.db&&(n.sublevel=null);let _=o.prefixKey(c.encode(e),m),S=y.encode(t);return this._put(_,S,n),this[os].push({...a,type:"put",key:e,value:t}),this}_put(e,t,n){}del(e,t){if(this[_r]!=="open")throw new ru("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let n=this.db._checkKey(e);if(n)throw n;let i=t&&t.sublevel!=null?t.sublevel:this.db,o=t,a=i.keyEncoding(t&&t.keyEncoding),c=a.format;return t={...t,keyEncoding:c},i!==this.db&&(t.sublevel=null),this._del(i.prefixKey(a.encode(e),c),t),this[os].push({...o,type:"del",key:e}),this}_del(e,t){}clear(){if(this[_r]!=="open")throw new ru("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[os]=[],this}_clear(){}write(e,t){return t=UF(e,t),t=lw(t,nu),e=jF(e),this[_r]!=="open"?this.nextTick(t,new ru("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(t):(this[_r]="writing",this._write(e,n=>{this[_r]="closing",this[ss].push(()=>t(n)),n||this.db.emit("batch",this[os]),this._close(this[Va])})),t[nu]}_write(e,t){}close(e){return e=lw(e,nu),this[_r]==="closing"?this[ss].push(e):this[_r]==="closed"?this.nextTick(e):(this[ss].push(e),this[_r]!=="writing"&&(this[_r]="closing",this._close(this[Va]))),e[nu]}_close(e){this.nextTick(e)}[Va](){this[_r]="closed",this.db.detachResource(this);let e=this[ss];this[ss]=[];for(let t of e)t()}};hw.AbstractChainedBatch=xd});var pw=P(dw=>{"use strict";var{AbstractChainedBatch:$F}=_d(),WF=wr(),as=Symbol("encoded"),Sd=class extends $F{constructor(e){super(e),this[as]=[]}_put(e,t,n){this[as].push({...n,type:"put",key:e,value:t})}_del(e,t){this[as].push({...t,type:"del",key:e})}_clear(){this[as]=[]}_write(e,t){this.db.status==="opening"?this.db.defer(()=>this._write(e,t)):this.db.status==="open"?this[as].length===0?this.nextTick(t):this.db._batch(this[as],e,t):this.nextTick(t,new WF("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};dw.DefaultChainedBatch=Sd});var mw=P((hj,yw)=>{"use strict";var gw=wr(),HF=Object.prototype.hasOwnProperty,GF=new Set(["lt","lte","gt","gte"]);yw.exports=function(r,e){let t={};for(let n in r)if(!!HF.call(r,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new gw(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new gw("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});GF.has(n)?t[n]=e.encode(r[n]):t[n]=r[n]}return t.reverse=!!t.reverse,t.limit=Number.isInteger(t.limit)&&t.limit>=0?t.limit:-1,t}});var Ed=P((dj,vw)=>{var bw;vw.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):r=>(bw||(bw=Promise.resolve())).then(r).catch(e=>setTimeout(()=>{throw e},0))});var _w=P((pj,xw)=>{"use strict";var ww=Ed();xw.exports=function(r,...e){e.length===0?ww(r):ww(()=>r(...e))}});var Sw=P(iu=>{"use strict";var{AbstractIterator:zF,AbstractKeyIterator:KF,AbstractValueIterator:VF}=Qn(),fs=Symbol("unfix"),Nr=Symbol("iterator"),Qi=Symbol("handleOne"),Zn=Symbol("handleMany"),An=Symbol("callback"),Ja=class extends zF{constructor(e,t,n,i){super(e,t),this[Nr]=n,this[fs]=i,this[Qi]=this[Qi].bind(this),this[Zn]=this[Zn].bind(this),this[An]=null}[Qi](e,t,n){let i=this[An];if(e)return i(e);t!==void 0&&(t=this[fs](t)),i(e,t,n)}[Zn](e,t){let n=this[An];if(e)return n(e);for(let i of t){let o=i[0];o!==void 0&&(i[0]=this[fs](o))}n(e,t)}},Xa=class extends KF{constructor(e,t,n,i){super(e,t),this[Nr]=n,this[fs]=i,this[Qi]=this[Qi].bind(this),this[Zn]=this[Zn].bind(this),this[An]=null}[Qi](e,t){let n=this[An];if(e)return n(e);t!==void 0&&(t=this[fs](t)),n(e,t)}[Zn](e,t){let n=this[An];if(e)return n(e);for(let i=0;i<t.length;i++){let o=t[i];o!==void 0&&(t[i]=this[fs](o))}n(e,t)}},Ya=class extends VF{constructor(e,t,n){super(e,t),this[Nr]=n}};for(let r of[Ja,Xa])r.prototype._next=function(e){this[An]=e,this[Nr].next(this[Qi])},r.prototype._nextv=function(e,t,n){this[An]=n,this[Nr].nextv(e,t,this[Zn])},r.prototype._all=function(e,t){this[An]=t,this[Nr].all(e,this[Zn])};for(let r of[Ya])r.prototype._next=function(e){this[Nr].next(e)},r.prototype._nextv=function(e,t,n){this[Nr].nextv(e,t,n)},r.prototype._all=function(e,t){this[Nr].all(e,t)};for(let r of[Ja,Xa,Ya])r.prototype._seek=function(e,t){this[Nr].seek(e,t)},r.prototype._close=function(e){this[Nr].close(e)};iu.AbstractSublevelIterator=Ja;iu.AbstractSublevelKeyIterator=Xa;iu.AbstractSublevelValueIterator=Ya});var Tw=P((yj,Fw)=>{"use strict";var Ad=wr(),{Buffer:Md}=Hn()||{},{AbstractSublevelIterator:JF,AbstractSublevelKeyIterator:XF,AbstractSublevelValueIterator:YF}=Sw(),Fn=Symbol("prefix"),Ew=Symbol("upperBound"),Qa=Symbol("prefixRange"),ir=Symbol("parent"),Fd=Symbol("unfix"),Aw=new TextEncoder,QF={separator:"!"};Fw.exports=function({AbstractLevel:r}){class e extends r{static defaults(n){if(typeof n=="string")throw new Ad("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(n&&n.open)throw new Ad("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return n==null?QF:n.separator?n:{...n,separator:"!"}}constructor(n,i,o){let{separator:a,manifest:c,...y}=e.defaults(o);i=eT(i,a);let m=a.charCodeAt(0)+1,_=n[ir]||n;if(!Aw.encode(i).every(E=>E>m&&E<127))throw new Ad(`Prefix must use bytes > ${m} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(ZF(_,c),y);let S=(n.prefix||"")+a+i+a,I=S.slice(0,-1)+String.fromCharCode(m);this[ir]=_,this[Fn]=new ou(S),this[Ew]=new ou(I),this[Fd]=new Id,this.nextTick=_.nextTick}prefixKey(n,i){if(i==="utf8")return this[Fn].utf8+n;if(n.byteLength===0)return this[Fn][i];if(i==="view"){let o=this[Fn].view,a=new Uint8Array(o.byteLength+n.byteLength);return a.set(o,0),a.set(n,o.byteLength),a}else{let o=this[Fn].buffer;return Md.concat([o,n],o.byteLength+n.byteLength)}}[Qa](n,i){n.gte!==void 0?n.gte=this.prefixKey(n.gte,i):n.gt!==void 0?n.gt=this.prefixKey(n.gt,i):n.gte=this[Fn][i],n.lte!==void 0?n.lte=this.prefixKey(n.lte,i):n.lt!==void 0?n.lt=this.prefixKey(n.lt,i):n.lte=this[Ew][i]}get prefix(){return this[Fn].utf8}get db(){return this[ir]}_open(n,i){this[ir].open({passive:!0},i)}_put(n,i,o,a){this[ir].put(n,i,o,a)}_get(n,i,o){this[ir].get(n,i,o)}_getMany(n,i,o){this[ir].getMany(n,i,o)}_del(n,i,o){this[ir].del(n,i,o)}_batch(n,i,o){this[ir].batch(n,i,o)}_clear(n,i){this[Qa](n,n.keyEncoding),this[ir].clear(n,i)}_iterator(n){this[Qa](n,n.keyEncoding);let i=this[ir].iterator(n),o=this[Fd].get(this[Fn].utf8.length,n.keyEncoding);return new JF(this,n,i,o)}_keys(n){this[Qa](n,n.keyEncoding);let i=this[ir].keys(n),o=this[Fd].get(this[Fn].utf8.length,n.keyEncoding);return new XF(this,n,i,o)}_values(n){this[Qa](n,n.keyEncoding);let i=this[ir].values(n);return new YF(this,n,i)}}return{AbstractSublevel:e}};var ZF=function(r,e){return{...r.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:Td(r,"utf8"),buffer:Td(r,"buffer"),view:Td(r,"view")}}},Td=function(r,e){return r.supports.encodings[e]?r.keyEncoding(e).name===e:!1},ou=class{constructor(e){this.utf8=e,this.view=Aw.encode(e),this.buffer=Md?Md.from(this.view.buffer,0,this.view.byteLength):{}}},Id=class{constructor(){this.cache=new Map}get(e,t){let n=this.cache.get(t);return n===void 0&&(t==="view"?n=function(i,o){return o.subarray(i)}.bind(null,e):n=function(i,o){return o.slice(i)}.bind(null,e),this.cache.set(t,n)),n}},eT=function(r,e){let t=0,n=r.length;for(;t<n&&r[t]===e;)t++;for(;n>t&&r[n-1]===e;)n--;return r.slice(t,n)}});var Pd=P(Rd=>{"use strict";var{supports:tT}=Lv(),{Transcoder:rT}=zv(),{EventEmitter:nT}=nw(),{fromCallback:ei}=$a(),Lr=wr(),{AbstractIterator:Zi}=Qn(),{DefaultKeyIterator:iT,DefaultValueIterator:oT}=cw(),{DeferredIterator:sT,DeferredKeyIterator:aT,DeferredValueIterator:fT}=uw(),{DefaultChainedBatch:Mw}=pw(),{getCallback:eo,getOptions:ti}=Hc(),su=mw(),Ue=Symbol("promise"),Tn=Symbol("landed"),to=Symbol("resources"),Od=Symbol("closeResources"),Za=Symbol("operations"),ef=Symbol("undefer"),au=Symbol("deferOpen"),Iw=Symbol("options"),Ge=Symbol("status"),ro=Symbol("defaultOptions"),cs=Symbol("transcoder"),fu=Symbol("keyEncoding"),Cd=Symbol("valueEncoding"),cT=()=>{},tf=class extends nT{constructor(e,t){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");t=ti(t);let{keyEncoding:n,valueEncoding:i,passive:o,...a}=t;this[to]=new Set,this[Za]=[],this[au]=!0,this[Iw]=a,this[Ge]="opening",this.supports=tT(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[cs]=new rT(uT(this)),this[fu]=this[cs].encoding(n||"utf8"),this[Cd]=this[cs].encoding(i||"utf8");for(let c of this[cs].encodings())this.supports.encodings[c.commonName]||(this.supports.encodings[c.commonName]=!0);this[ro]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[fu].commonName,valueEncoding:this[Cd].commonName}),key:Object.freeze({keyEncoding:this[fu].commonName})},this.nextTick(()=>{this[au]&&this.open({passive:!1},cT)})}get status(){return this[Ge]}keyEncoding(e){return this[cs].encoding(e??this[fu])}valueEncoding(e){return this[cs].encoding(e??this[Cd])}open(e,t){t=eo(e,t),t=ei(t,Ue),e={...this[Iw],...ti(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let n=i=>{this[Ge]==="closing"||this[Ge]==="opening"?this.once(Tn,i?()=>n(i):n):this[Ge]!=="open"?t(new Lr("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:i})):t()};return e.passive?this[Ge]==="opening"?this.once(Tn,n):this.nextTick(n):this[Ge]==="closed"||this[au]?(this[au]=!1,this[Ge]="opening",this.emit("opening"),this._open(e,i=>{if(i){this[Ge]="closed",this[Od](()=>{this.emit(Tn),n(i)}),this[ef]();return}this[Ge]="open",this[ef](),this.emit(Tn),this[Ge]==="open"&&this.emit("open"),this[Ge]==="open"&&this.emit("ready"),n()})):this[Ge]==="open"?this.nextTick(n):this.once(Tn,()=>this.open(e,t)),t[Ue]}_open(e,t){this.nextTick(t)}close(e){e=ei(e,Ue);let t=n=>{this[Ge]==="opening"||this[Ge]==="closing"?this.once(Tn,n?t(n):t):this[Ge]!=="closed"?e(new Lr("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[Ge]==="open"){this[Ge]="closing",this.emit("closing");let n=i=>{this[Ge]="open",this[ef](),this.emit(Tn),t(i)};this[Od](()=>{this._close(i=>{if(i)return n(i);this[Ge]="closed",this[ef](),this.emit(Tn),this[Ge]==="closed"&&this.emit("closed"),t()})})}else this[Ge]==="closed"?this.nextTick(t):this.once(Tn,()=>this.close(e));return e[Ue]}[Od](e){if(this[to].size===0)return this.nextTick(e);let t=this[to].size,n=!0,i=()=>{--t===0&&(n?this.nextTick(e):e())};for(let o of this[to])o.close(i);n=!1,this[to].clear()}_close(e){this.nextTick(e)}get(e,t,n){if(n=eo(t,n),n=ei(n,Ue),t=ti(t,this[ro].entry),this[Ge]==="opening")return this.defer(()=>this.get(e,t,n)),n[Ue];if(us(this,n))return n[Ue];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[Ue];let o=this.keyEncoding(t.keyEncoding),a=this.valueEncoding(t.valueEncoding),c=o.format,y=a.format;return(t.keyEncoding!==c||t.valueEncoding!==y)&&(t=Object.assign({},t,{keyEncoding:c,valueEncoding:y})),this._get(this.prefixKey(o.encode(e),c),t,(m,_)=>{if(m)return(m.code==="LEVEL_NOT_FOUND"||m.notFound||/NotFound/i.test(m))&&(m.code||(m.code="LEVEL_NOT_FOUND"),m.notFound||(m.notFound=!0),m.status||(m.status=404)),n(m);try{_=a.decode(_)}catch(S){return n(new Lr("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:S}))}n(null,_)}),n[Ue]}_get(e,t,n){this.nextTick(n,new Error("NotFound"))}getMany(e,t,n){if(n=eo(t,n),n=ei(n,Ue),t=ti(t,this[ro].entry),this[Ge]==="opening")return this.defer(()=>this.getMany(e,t,n)),n[Ue];if(us(this,n))return n[Ue];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[Ue];if(e.length===0)return this.nextTick(n,null,[]),n[Ue];let i=this.keyEncoding(t.keyEncoding),o=this.valueEncoding(t.valueEncoding),a=i.format,c=o.format;(t.keyEncoding!==a||t.valueEncoding!==c)&&(t=Object.assign({},t,{keyEncoding:a,valueEncoding:c}));let y=new Array(e.length);for(let m=0;m<e.length;m++){let _=e[m],S=this._checkKey(_);if(S)return this.nextTick(n,S),n[Ue];y[m]=this.prefixKey(i.encode(_),a)}return this._getMany(y,t,(m,_)=>{if(m)return n(m);try{for(let S=0;S<_.length;S++)_[S]!==void 0&&(_[S]=o.decode(_[S]))}catch(S){return n(new Lr(`Could not decode one or more of ${_.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:S}))}n(null,_)}),n[Ue]}_getMany(e,t,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,t,n,i){if(i=eo(n,i),i=ei(i,Ue),n=ti(n,this[ro].entry),this[Ge]==="opening")return this.defer(()=>this.put(e,t,n,i)),i[Ue];if(us(this,i))return i[Ue];let o=this._checkKey(e)||this._checkValue(t);if(o)return this.nextTick(i,o),i[Ue];let a=this.keyEncoding(n.keyEncoding),c=this.valueEncoding(n.valueEncoding),y=a.format,m=c.format;(n.keyEncoding!==y||n.valueEncoding!==m)&&(n=Object.assign({},n,{keyEncoding:y,valueEncoding:m}));let _=this.prefixKey(a.encode(e),y),S=c.encode(t);return this._put(_,S,n,I=>{if(I)return i(I);this.emit("put",e,t),i()}),i[Ue]}_put(e,t,n,i){this.nextTick(i)}del(e,t,n){if(n=eo(t,n),n=ei(n,Ue),t=ti(t,this[ro].key),this[Ge]==="opening")return this.defer(()=>this.del(e,t,n)),n[Ue];if(us(this,n))return n[Ue];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[Ue];let o=this.keyEncoding(t.keyEncoding),a=o.format;return t.keyEncoding!==a&&(t=Object.assign({},t,{keyEncoding:a})),this._del(this.prefixKey(o.encode(e),a),t,c=>{if(c)return n(c);this.emit("del",e),n()}),n[Ue]}_del(e,t,n){this.nextTick(n)}batch(e,t,n){if(!arguments.length){if(this[Ge]==="opening")return new Mw(this);if(this[Ge]!=="open")throw new Lr("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=eo(t,n),n=ei(n,Ue),t=ti(t,this[ro].empty),this[Ge]==="opening")return this.defer(()=>this.batch(e,t,n)),n[Ue];if(us(this,n))return n[Ue];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[Ue];if(e.length===0)return this.nextTick(n),n[Ue];let i=new Array(e.length),{keyEncoding:o,valueEncoding:a,...c}=t;for(let y=0;y<e.length;y++){if(typeof e[y]!="object"||e[y]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[Ue];let m=Object.assign({},e[y]);if(m.type!=="put"&&m.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[Ue];let _=this._checkKey(m.key);if(_)return this.nextTick(n,_),n[Ue];let S=m.sublevel!=null?m.sublevel:this,I=S.keyEncoding(m.keyEncoding||o),E=I.format;if(m.key=S.prefixKey(I.encode(m.key),E),m.keyEncoding=E,m.type==="put"){let C=this._checkValue(m.value);if(C)return this.nextTick(n,C),n[Ue];let N=S.valueEncoding(m.valueEncoding||a);m.value=N.encode(m.value),m.valueEncoding=N.format}S!==this&&(m.sublevel=null),i[y]=m}return this._batch(i,c,y=>{if(y)return n(y);this.emit("batch",e),n()}),n[Ue]}_batch(e,t,n){this.nextTick(n)}sublevel(e,t){return this._sublevel(e,Bd.defaults(t))}_sublevel(e,t){return new Bd(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=eo(e,t),t=ei(t,Ue),e=ti(e,this[ro].empty),this[Ge]==="opening")return this.defer(()=>this.clear(e,t)),t[Ue];if(us(this,t))return t[Ue];let n=e,i=this.keyEncoding(e.keyEncoding);return e=su(e,i),e.keyEncoding=i.format,e.limit===0?this.nextTick(t):this._clear(e,o=>{if(o)return t(o);this.emit("clear",n),t()}),t[Ue]}_clear(e,t){this.nextTick(t)}iterator(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=su(e,t),e.keys=e.keys!==!1,e.values=e.values!==!1,e[Zi.keyEncoding]=t,e[Zi.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[Ge]==="opening")return new sT(this,e);if(this[Ge]!=="open")throw new Lr("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new Zi(this,e)}keys(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=su(e,t),e[Zi.keyEncoding]=t,e[Zi.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[Ge]==="opening")return new aT(this,e);if(this[Ge]!=="open")throw new Lr("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new iT(this,e)}values(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=su(e,t),e[Zi.keyEncoding]=t,e[Zi.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[Ge]==="opening")return new fT(this,e);if(this[Ge]!=="open")throw new Lr("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new oT(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[Za].push(e)}[ef](){if(this[Za].length===0)return;let e=this[Za];this[Za]=[];for(let t of e)t()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[to].add(e)}detachResource(e){this[to].delete(e)}_chainedBatch(){return new Mw(this)}_checkKey(e){if(e==null)return new Lr("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new Lr("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};tf.prototype.nextTick=_w();var{AbstractSublevel:Bd}=Tw()({AbstractLevel:tf});Rd.AbstractLevel=tf;Rd.AbstractSublevel=Bd;var us=function(r,e){return r[Ge]!=="open"?(r.nextTick(e,new Lr("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},uT=function(r){return Object.keys(r.supports.encodings).filter(e=>!!r.supports.encodings[e])}});var cu=P(no=>{"use strict";no.AbstractLevel=Pd().AbstractLevel;no.AbstractSublevel=Pd().AbstractSublevel;no.AbstractIterator=Qn().AbstractIterator;no.AbstractKeyIterator=Qn().AbstractKeyIterator;no.AbstractValueIterator=Qn().AbstractValueIterator;no.AbstractChainedBatch=_d().AbstractChainedBatch});var Cw=P((vj,Ow)=>{Ow.exports=hT;var lT=Ed();function hT(r,e,t){if(typeof e!="number")throw new Error("second argument must be a Number");let n,i,o,a,c,y=!0,m;Array.isArray(r)?(n=[],o=i=r.length):(a=Object.keys(r),n={},o=i=a.length);function _(I){function E(){t&&t(I,n),t=null}y?lT(E):E()}function S(I,E,C){if(n[I]=C,E&&(c=!0),--o===0||E)_(E);else if(!c&&m<i){let N;a?(N=a[m],m+=1,r[N](function(j,q){S(N,j,q)})):(N=m,m+=1,r[N](function(j,q){S(N,j,q)}))}}m=e,o?a?a.some(function(I,E){return r[I](function(C,N){S(I,C,N)}),E===e-1}):r.some(function(I,E){return I(function(C,N){S(E,C,N)}),E===e-1}):_(null),y=!1}});var Nd=P((wj,Bw)=>{"use strict";Bw.exports=function(e){let t=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,i=e.gte===void 0,o=e.lte===void 0;return t!==void 0&&n!==void 0?IDBKeyRange.bound(t,n,i,o):t!==void 0?IDBKeyRange.lowerBound(t,i):n!==void 0?IDBKeyRange.upperBound(n,o):null}});var Ld=P((xj,Rw)=>{"use strict";var dT=new TextEncoder;Rw.exports=function(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):dT.encode(r)}});var qw=P(kw=>{"use strict";var{AbstractIterator:pT}=cu(),Pw=Nd(),uu=Ld(),Zr=Symbol("cache"),Mn=Symbol("finished"),or=Symbol("options"),In=Symbol("currentOptions"),io=Symbol("position"),kd=Symbol("location"),ls=Symbol("first"),Nw={},qd=class extends pT{constructor(e,t,n){super(e,n),this[Zr]=[],this[Mn]=this.limit===0,this[or]=n,this[In]={...n},this[io]=void 0,this[kd]=t,this[ls]=!0}_nextv(e,t,n){if(this[ls]=!1,this[Mn])return this.nextTick(n,null,[]);if(this[Zr].length>0)return e=Math.min(e,this[Zr].length),this.nextTick(n,null,this[Zr].splice(0,e));this[io]!==void 0&&(this[or].reverse?(this[In].lt=this[io],this[In].lte=void 0):(this[In].gt=this[io],this[In].gte=void 0));let i;try{i=Pw(this[In])}catch{return this[Mn]=!0,this.nextTick(n,null,[])}let o=this.db.db.transaction([this[kd]],"readonly"),a=o.objectStore(this[kd]),c=[];if(this[or].reverse){let y=!this[or].values&&a.openKeyCursor?"openKeyCursor":"openCursor";a[y](i,"prev").onsuccess=m=>{let _=m.target.result;if(_){let{key:S,value:I}=_;this[io]=S,c.push([this[or].keys&&S!==void 0?uu(S):void 0,this[or].values&&I!==void 0?uu(I):void 0]),c.length<e?_.continue():Lw(o)}else this[Mn]=!0}}else{let y,m,_=()=>{if(y===void 0||m===void 0)return;let S=Math.max(y.length,m.length);S===0||e===1/0?this[Mn]=!0:this[io]=y[S-1],c.length=S;for(let I=0;I<S;I++){let E=y[I],C=m[I];c[I]=[this[or].keys&&E!==void 0?uu(E):void 0,this[or].values&&C!==void 0?uu(C):void 0]}Lw(o)};this[or].keys||e<1/0?a.getAllKeys(i,e<1/0?e:void 0).onsuccess=S=>{y=S.target.result,_()}:(y=[],this.nextTick(_)),this[or].values?a.getAll(i,e<1/0?e:void 0).onsuccess=S=>{m=S.target.result,_()}:(m=[],this.nextTick(_))}o.onabort=()=>{n(o.error||new Error("aborted by user")),n=null},o.oncomplete=()=>{n(null,c),n=null}}_next(e){if(this[Zr].length>0){let[t,n]=this[Zr].shift();this.nextTick(e,null,t,n)}else if(this[Mn])this.nextTick(e);else{let t=Math.min(100,this.limit-this.count);this[ls]&&(this[ls]=!1,t=1),this._nextv(t,Nw,(n,i)=>{if(n)return e(n);this[Zr]=i,this._next(e)})}}_all(e,t){this[ls]=!1;let n=this[Zr].splice(0,this[Zr].length),i=this.limit-this.count-n.length;if(i<=0)return this.nextTick(t,null,n);this._nextv(i,Nw,(o,a)=>{if(o)return t(o);n.length>0&&(a=n.concat(a)),t(null,a)})}_seek(e,t){this[ls]=!0,this[Zr]=[],this[Mn]=!1,this[io]=void 0,this[In]={...this[or]};let n;try{n=Pw(this[or])}catch{this[Mn]=!0;return}n!==null&&!n.includes(e)?this[Mn]=!0:this[or].reverse?this[In].lte=e:this[In].gte=e}};kw.Iterator=qd;function Lw(r){typeof r.commit=="function"&&r.commit()}});var Uw=P((Sj,Dw)=>{"use strict";Dw.exports=function(e,t,n,i,o){if(i.limit===0)return e.nextTick(o);let a=e.db.transaction([t],"readwrite"),c=a.objectStore(t),y=0;a.oncomplete=function(){o()},a.onabort=function(){o(a.error||new Error("aborted by user"))};let m=c.openKeyCursor?"openKeyCursor":"openCursor",_=i.reverse?"prev":"next";c[m](n,_).onsuccess=function(S){let I=S.target.result;I&&(c.delete(I.key).onsuccess=function(){(i.limit<=0||++y<i.limit)&&I.continue()})}}});var zw=P(Gw=>{"use strict";var{AbstractLevel:gT}=cu(),jw=wr(),yT=Cw(),{fromCallback:mT}=$a(),{Iterator:bT}=qw(),$w=Ld(),vT=Uw(),wT=Nd(),Hw="level-js-",rf=Symbol("idb"),Dd=Symbol("namePrefix"),On=Symbol("location"),Ud=Symbol("version"),oo=Symbol("store"),nf=Symbol("onComplete"),Ww=Symbol("promise"),lu=class extends gT{constructor(e,t,n){if(typeof t=="function"||typeof n=="function")throw new jw("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:i,version:o,...a}=t||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},a),typeof e!="string")throw new Error("constructor requires a location string argument");this[On]=e,this[Dd]=i??Hw,this[Ud]=parseInt(o||1,10),this[rf]=null}get location(){return this[On]}get namePrefix(){return this[Dd]}get version(){return this[Ud]}get db(){return this[rf]}get type(){return"browser-level"}_open(e,t){let n=indexedDB.open(this[Dd]+this[On],this[Ud]);n.onerror=function(){t(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[rf]=n.result,t()},n.onupgradeneeded=i=>{let o=i.target.result;o.objectStoreNames.contains(this[On])||o.createObjectStore(this[On])}}[oo](e){return this[rf].transaction([this[On]],e).objectStore(this[On])}[nf](e,t){let n=e.transaction;n.onabort=function(){t(n.error||new Error("aborted by user"))},n.oncomplete=function(){t(null,e.result)}}_get(e,t,n){let i=this[oo]("readonly"),o;try{o=i.get(e)}catch(a){return this.nextTick(n,a)}this[nf](o,function(a,c){if(a)return n(a);if(c===void 0)return n(new jw("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,$w(c))})}_getMany(e,t,n){let i=this[oo]("readonly"),o=e.map(a=>c=>{let y;try{y=i.get(a)}catch(m){return c(m)}y.onsuccess=()=>{let m=y.result;c(null,m===void 0?m:$w(m))},y.onerror=m=>{m.stopPropagation(),c(y.error)}});yT(o,16,n)}_del(e,t,n){let i=this[oo]("readwrite"),o;try{o=i.delete(e)}catch(a){return this.nextTick(n,a)}this[nf](o,n)}_put(e,t,n,i){let o=this[oo]("readwrite"),a;try{a=o.put(t,e)}catch(c){return this.nextTick(i,c)}this[nf](a,i)}_iterator(e){return new bT(this,this[On],e)}_batch(e,t,n){let i=this[oo]("readwrite"),o=i.transaction,a=0,c;o.onabort=function(){n(c||o.error||new Error("aborted by user"))},o.oncomplete=function(){n()};function y(){let m=e[a++],_=m.key,S;try{S=m.type==="del"?i.delete(_):i.put(m.value,_)}catch(I){c=I,o.abort();return}a<e.length?S.onsuccess=y:typeof o.commit=="function"&&o.commit()}y()}_clear(e,t){let n,i;try{n=wT(e)}catch{return this.nextTick(t)}if(e.limit>=0)return vT(this,this[On],n,e,t);try{let o=this[oo]("readwrite");i=n?o.delete(n):o.clear()}catch(o){return this.nextTick(t,o)}this[nf](i,t)}_close(e){this[rf].close(),this.nextTick(e)}};lu.destroy=function(r,e,t){typeof e=="function"&&(t=e,e=Hw),t=mT(t,Ww);let n=indexedDB.deleteDatabase(e+r);return n.onsuccess=function(){t()},n.onerror=function(i){t(i)},t[Ww]};Gw.BrowserLevel=lu});var Vw=P(Kw=>{Kw.Level=zw().BrowserLevel});var Yw=P((Fj,Xw)=>{"use strict";Xw.exports=ST;var nt=0,Je=1;function sr(r,e,t,n,i,o){this._color=r,this.key=e,this.value=t,this.left=n,this.right=i,this._count=o}function en(r){return new sr(r._color,r.key,r.value,r.left,r.right,r._count)}function ri(r,e){return new sr(r,e.key,e.value,e.left,e.right,e._count)}function lt(r){r._count=1+(r.left?r.left._count:0)+(r.right?r.right._count:0)}function ni(r,e){this._compare=r,this.root=e}var Ut=ni.prototype;Object.defineProperty(Ut,"keys",{get:function(){var r=[];return this.forEach(function(e,t){r.push(e)}),r}});Object.defineProperty(Ut,"values",{get:function(){var r=[];return this.forEach(function(e,t){r.push(t)}),r}});Object.defineProperty(Ut,"length",{get:function(){return this.root?this.root._count:0}});Ut.insert=function(r,e){for(var t=this._compare,n=this.root,i=[],o=[];n;){var a=t(r,n.key);i.push(n),o.push(a),a<=0?n=n.left:n=n.right}i.push(new sr(nt,r,e,null,null,1));for(var c=i.length-2;c>=0;--c){var n=i[c];o[c]<=0?i[c]=new sr(n._color,n.key,n.value,i[c+1],n.right,n._count+1):i[c]=new sr(n._color,n.key,n.value,n.left,i[c+1],n._count+1)}for(var c=i.length-1;c>1;--c){var y=i[c-1],n=i[c];if(y._color===Je||n._color===Je)break;var m=i[c-2];if(m.left===y)if(y.left===n){var _=m.right;if(_&&_._color===nt)y._color=Je,m.right=ri(Je,_),m._color=nt,c-=1;else{if(m._color=nt,m.left=y.right,y._color=Je,y.right=m,i[c-2]=y,i[c-1]=n,lt(m),lt(y),c>=3){var S=i[c-3];S.left===m?S.left=y:S.right=y}break}}else{var _=m.right;if(_&&_._color===nt)y._color=Je,m.right=ri(Je,_),m._color=nt,c-=1;else{if(y.right=n.left,m._color=nt,m.left=n.right,n._color=Je,n.left=y,n.right=m,i[c-2]=n,i[c-1]=y,lt(m),lt(y),lt(n),c>=3){var S=i[c-3];S.left===m?S.left=n:S.right=n}break}}else if(y.right===n){var _=m.left;if(_&&_._color===nt)y._color=Je,m.left=ri(Je,_),m._color=nt,c-=1;else{if(m._color=nt,m.right=y.left,y._color=Je,y.left=m,i[c-2]=y,i[c-1]=n,lt(m),lt(y),c>=3){var S=i[c-3];S.right===m?S.right=y:S.left=y}break}}else{var _=m.left;if(_&&_._color===nt)y._color=Je,m.left=ri(Je,_),m._color=nt,c-=1;else{if(y.left=n.right,m._color=nt,m.right=n.left,n._color=Je,n.right=y,n.left=m,i[c-2]=n,i[c-1]=y,lt(m),lt(y),lt(n),c>=3){var S=i[c-3];S.right===m?S.right=n:S.left=n}break}}}return i[0]._color=Je,new ni(t,i[0])};function jd(r,e){if(e.left){var t=jd(r,e.left);if(t)return t}var t=r(e.key,e.value);if(t)return t;if(e.right)return jd(r,e.right)}function $d(r,e,t,n){var i=e(r,n.key);if(i<=0){if(n.left){var o=$d(r,e,t,n.left);if(o)return o}var o=t(n.key,n.value);if(o)return o}if(n.right)return $d(r,e,t,n.right)}function Wd(r,e,t,n,i){var o=t(r,i.key),a=t(e,i.key),c;if(o<=0&&(i.left&&(c=Wd(r,e,t,n,i.left),c)||a>0&&(c=n(i.key,i.value),c)))return c;if(a>0&&i.right)return Wd(r,e,t,n,i.right)}Ut.forEach=function(e,t,n){if(!!this.root)switch(arguments.length){case 1:return jd(e,this.root);case 2:return $d(t,this._compare,e,this.root);case 3:return this._compare(t,n)>=0?void 0:Wd(t,n,this._compare,e,this.root)}};Object.defineProperty(Ut,"begin",{get:function(){for(var r=[],e=this.root;e;)r.push(e),e=e.left;return new ar(this,r)}});Object.defineProperty(Ut,"end",{get:function(){for(var r=[],e=this.root;e;)r.push(e),e=e.right;return new ar(this,r)}});Ut.at=function(r){if(r<0)return new ar(this,[]);for(var e=this.root,t=[];;){if(t.push(e),e.left){if(r<e.left._count){e=e.left;continue}r-=e.left._count}if(!r)return new ar(this,t);if(r-=1,e.right){if(r>=e.right._count)break;e=e.right}else break}return new ar(this,[])};Ut.ge=function(r){for(var e=this._compare,t=this.root,n=[],i=0;t;){var o=e(r,t.key);n.push(t),o<=0&&(i=n.length),o<=0?t=t.left:t=t.right}return n.length=i,new ar(this,n)};Ut.gt=function(r){for(var e=this._compare,t=this.root,n=[],i=0;t;){var o=e(r,t.key);n.push(t),o<0&&(i=n.length),o<0?t=t.left:t=t.right}return n.length=i,new ar(this,n)};Ut.lt=function(r){for(var e=this._compare,t=this.root,n=[],i=0;t;){var o=e(r,t.key);n.push(t),o>0&&(i=n.length),o<=0?t=t.left:t=t.right}return n.length=i,new ar(this,n)};Ut.le=function(r){for(var e=this._compare,t=this.root,n=[],i=0;t;){var o=e(r,t.key);n.push(t),o>=0&&(i=n.length),o<0?t=t.left:t=t.right}return n.length=i,new ar(this,n)};Ut.find=function(r){for(var e=this._compare,t=this.root,n=[];t;){var i=e(r,t.key);if(n.push(t),i===0)return new ar(this,n);i<=0?t=t.left:t=t.right}return new ar(this,[])};Ut.remove=function(r){var e=this.find(r);return e?e.remove():this};Ut.get=function(r){for(var e=this._compare,t=this.root;t;){var n=e(r,t.key);if(n===0)return t.value;n<=0?t=t.left:t=t.right}};function ar(r,e){this.tree=r,this._stack=e}var Sr=ar.prototype;Object.defineProperty(Sr,"valid",{get:function(){return this._stack.length>0}});Object.defineProperty(Sr,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0});Sr.clone=function(){return new ar(this.tree,this._stack.slice())};function Jw(r,e){r.key=e.key,r.value=e.value,r.left=e.left,r.right=e.right,r._color=e._color,r._count=e._count}function xT(r){for(var e,t,n,i,o=r.length-1;o>=0;--o){if(e=r[o],o===0){e._color=Je;return}if(t=r[o-1],t.left===e){if(n=t.right,n.right&&n.right._color===nt){if(n=t.right=en(n),i=n.right=en(n.right),t.right=n.left,n.left=t,n.right=i,n._color=t._color,e._color=Je,t._color=Je,i._color=Je,lt(t),lt(n),o>1){var a=r[o-2];a.left===t?a.left=n:a.right=n}r[o-1]=n;return}else if(n.left&&n.left._color===nt){if(n=t.right=en(n),i=n.left=en(n.left),t.right=i.left,n.left=i.right,i.left=t,i.right=n,i._color=t._color,t._color=Je,n._color=Je,e._color=Je,lt(t),lt(n),lt(i),o>1){var a=r[o-2];a.left===t?a.left=i:a.right=i}r[o-1]=i;return}if(n._color===Je)if(t._color===nt){t._color=Je,t.right=ri(nt,n);return}else{t.right=ri(nt,n);continue}else{if(n=en(n),t.right=n.left,n.left=t,n._color=t._color,t._color=nt,lt(t),lt(n),o>1){var a=r[o-2];a.left===t?a.left=n:a.right=n}r[o-1]=n,r[o]=t,o+1<r.length?r[o+1]=e:r.push(e),o=o+2}}else{if(n=t.left,n.left&&n.left._color===nt){if(n=t.left=en(n),i=n.left=en(n.left),t.left=n.right,n.right=t,n.left=i,n._color=t._color,e._color=Je,t._color=Je,i._color=Je,lt(t),lt(n),o>1){var a=r[o-2];a.right===t?a.right=n:a.left=n}r[o-1]=n;return}else if(n.right&&n.right._color===nt){if(n=t.left=en(n),i=n.right=en(n.right),t.left=i.right,n.right=i.left,i.right=t,i.left=n,i._color=t._color,t._color=Je,n._color=Je,e._color=Je,lt(t),lt(n),lt(i),o>1){var a=r[o-2];a.right===t?a.right=i:a.left=i}r[o-1]=i;return}if(n._color===Je)if(t._color===nt){t._color=Je,t.left=ri(nt,n);return}else{t.left=ri(nt,n);continue}else{if(n=en(n),t.left=n.right,n.right=t,n._color=t._color,t._color=nt,lt(t),lt(n),o>1){var a=r[o-2];a.right===t?a.right=n:a.left=n}r[o-1]=n,r[o]=t,o+1<r.length?r[o+1]=e:r.push(e),o=o+2}}}}Sr.remove=function(){var r=this._stack;if(r.length===0)return this.tree;var e=new Array(r.length),t=r[r.length-1];e[e.length-1]=new sr(t._color,t.key,t.value,t.left,t.right,t._count);for(var n=r.length-2;n>=0;--n){var t=r[n];t.left===r[n+1]?e[n]=new sr(t._color,t.key,t.value,e[n+1],t.right,t._count):e[n]=new sr(t._color,t.key,t.value,t.left,e[n+1],t._count)}if(t=e[e.length-1],t.left&&t.right){var i=e.length;for(t=t.left;t.right;)e.push(t),t=t.right;var o=e[i-1];e.push(new sr(t._color,o.key,o.value,t.left,t.right,t._count)),e[i-1].key=t.key,e[i-1].value=t.value;for(var n=e.length-2;n>=i;--n)t=e[n],e[n]=new sr(t._color,t.key,t.value,t.left,e[n+1],t._count);e[i-1].left=e[i]}if(t=e[e.length-1],t._color===nt){var a=e[e.length-2];a.left===t?a.left=null:a.right===t&&(a.right=null),e.pop();for(var n=0;n<e.length;++n)e[n]._count--;return new ni(this.tree._compare,e[0])}else if(t.left||t.right){t.left?Jw(t,t.left):t.right&&Jw(t,t.right),t._color=Je;for(var n=0;n<e.length-1;++n)e[n]._count--;return new ni(this.tree._compare,e[0])}else{if(e.length===1)return new ni(this.tree._compare,null);for(var n=0;n<e.length;++n)e[n]._count--;var c=e[e.length-2];xT(e),c.left===t?c.left=null:c.right=null}return new ni(this.tree._compare,e[0])};Object.defineProperty(Sr,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(Sr,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(Sr,"index",{get:function(){var r=0,e=this._stack;if(e.length===0){var t=this.tree.root;return t?t._count:0}else e[e.length-1].left&&(r=e[e.length-1].left._count);for(var n=e.length-2;n>=0;--n)e[n+1]===e[n].right&&(++r,e[n].left&&(r+=e[n].left._count));return r},enumerable:!0});Sr.next=function(){var r=this._stack;if(r.length!==0){var e=r[r.length-1];if(e.right)for(e=e.right;e;)r.push(e),e=e.left;else for(r.pop();r.length>0&&r[r.length-1].right===e;)e=r[r.length-1],r.pop()}};Object.defineProperty(Sr,"hasNext",{get:function(){var r=this._stack;if(r.length===0)return!1;if(r[r.length-1].right)return!0;for(var e=r.length-1;e>0;--e)if(r[e-1].left===r[e])return!0;return!1}});Sr.update=function(r){var e=this._stack;if(e.length===0)throw new Error("Can't update empty node!");var t=new Array(e.length),n=e[e.length-1];t[t.length-1]=new sr(n._color,n.key,r,n.left,n.right,n._count);for(var i=e.length-2;i>=0;--i)n=e[i],n.left===e[i+1]?t[i]=new sr(n._color,n.key,n.value,t[i+1],n.right,n._count):t[i]=new sr(n._color,n.key,n.value,n.left,t[i+1],n._count);return new ni(this.tree._compare,t[0])};Sr.prev=function(){var r=this._stack;if(r.length!==0){var e=r[r.length-1];if(e.left)for(e=e.left;e;)r.push(e),e=e.right;else for(r.pop();r.length>0&&r[r.length-1].left===e;)e=r[r.length-1],r.pop()}};Object.defineProperty(Sr,"hasPrev",{get:function(){var r=this._stack;if(r.length===0)return!1;if(r[r.length-1].left)return!0;for(var e=r.length-1;e>0;--e)if(r[e-1].right===r[e])return!0;return!1}});function _T(r,e){return r<e?-1:r>e?1:0}function ST(r){return new ni(r||_T,null)}});var r2=P(t2=>{"use strict";var{AbstractLevel:ET,AbstractIterator:AT,AbstractKeyIterator:FT,AbstractValueIterator:TT}=cu(),Qw=wr(),Zw=Yw(),MT=new Set(["gt","gte","lt","lte"]),Cn=Symbol("none"),Ot=Symbol("tree"),Ve=Symbol("iterator"),fr=Symbol("lowerBound"),ii=Symbol("upperBound"),e2=Symbol("outOfRange"),hu=Symbol("reverse"),Hd=Symbol("options"),zt=Symbol("test"),Er=Symbol("advance"),mu=Symbol("init");function tn(r,e){if(typeof r=="string")return r<e?-1:r>e?1:0;let t=Math.min(r.byteLength,e.byteLength);for(let n=0;n<t;n++){let i=r[n]-e[n];if(i!==0)return i}return r.byteLength-e.byteLength}function IT(r){return tn(r,this[ii])>0}function OT(r){return tn(r,this[ii])>=0}function CT(r){return tn(r,this[ii])<0}function BT(r){return tn(r,this[ii])<=0}var du=class extends AT{constructor(e,t){super(e,t),this[mu](e[Ot],t)}_next(e){if(!this[Ve].valid)return this.nextTick(e);let t=this[Ve].key,n=this[Ve].value;if(!this[zt](t))return this.nextTick(e);this[Ve][this[Er]](),this.nextTick(e,null,t,n)}_nextv(e,t,n){let i=this[Ve],o=[];for(;i.valid&&o.length<e&&this[zt](i.key);)o.push([i.key,i.value]),i[this[Er]]();this.nextTick(n,null,o)}_all(e,t){let n=this.limit-this.count,i=this[Ve],o=[];for(;i.valid&&o.length<n&&this[zt](i.key);)o.push([i.key,i.value]),i[this[Er]]();this.nextTick(t,null,o)}},pu=class extends FT{constructor(e,t){super(e,t),this[mu](e[Ot],t)}_next(e){if(!this[Ve].valid)return this.nextTick(e);let t=this[Ve].key;if(!this[zt](t))return this.nextTick(e);this[Ve][this[Er]](),this.nextTick(e,null,t)}_nextv(e,t,n){let i=this[Ve],o=[];for(;i.valid&&o.length<e&&this[zt](i.key);)o.push(i.key),i[this[Er]]();this.nextTick(n,null,o)}_all(e,t){let n=this.limit-this.count,i=this[Ve],o=[];for(;i.valid&&o.length<n&&this[zt](i.key);)o.push(i.key),i[this[Er]]();this.nextTick(t,null,o)}},gu=class extends TT{constructor(e,t){super(e,t),this[mu](e[Ot],t)}_next(e){if(!this[Ve].valid)return this.nextTick(e);let t=this[Ve].key,n=this[Ve].value;if(!this[zt](t))return this.nextTick(e);this[Ve][this[Er]](),this.nextTick(e,null,n)}_nextv(e,t,n){let i=this[Ve],o=[];for(;i.valid&&o.length<e&&this[zt](i.key);)o.push(i.value),i[this[Er]]();this.nextTick(n,null,o)}_all(e,t){let n=this.limit-this.count,i=this[Ve],o=[];for(;i.valid&&o.length<n&&this[zt](i.key);)o.push(i.value),i[this[Er]]();this.nextTick(t,null,o)}};for(let r of[du,pu,gu])r.prototype[mu]=function(e,t){this[hu]=t.reverse,this[Hd]=t,this[hu]?(this[Er]="prev",this[fr]="lte"in t?t.lte:"lt"in t?t.lt:Cn,this[ii]="gte"in t?t.gte:"gt"in t?t.gt:Cn,this[fr]===Cn?this[Ve]=e.end:"lte"in t?this[Ve]=e.le(this[fr]):this[Ve]=e.lt(this[fr]),this[ii]!==Cn&&(this[zt]="gte"in t?OT:IT)):(this[Er]="next",this[fr]="gte"in t?t.gte:"gt"in t?t.gt:Cn,this[ii]="lte"in t?t.lte:"lt"in t?t.lt:Cn,this[fr]===Cn?this[Ve]=e.begin:"gte"in t?this[Ve]=e.ge(this[fr]):this[Ve]=e.gt(this[fr]),this[ii]!==Cn&&(this[zt]="lte"in t?BT:CT))},r.prototype[zt]=function(){return!0},r.prototype[e2]=function(e){return this[zt](e)?this[fr]===Cn?!1:this[hu]?"lte"in this[Hd]?tn(e,this[fr])>0:tn(e,this[fr])>=0:"gte"in this[Hd]?tn(e,this[fr])<0:tn(e,this[fr])<=0:!0},r.prototype._seek=function(e,t){this[e2](e)?(this[Ve]=this[Ve].tree.end,this[Ve].next()):this[hu]?this[Ve]=this[Ve].tree.le(e):this[Ve]=this[Ve].tree.ge(e)};var yu=class extends ET{constructor(e,t,n){if(typeof e=="object"&&e!==null&&(t=e),typeof e=="function"||typeof t=="function"||typeof n=="function")throw new Qw("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{storeEncoding:i,...o}=t||{};if(i=i||"buffer",!["buffer","view","utf8"].includes(i))throw new Qw("The storeEncoding option must be 'buffer', 'view' or 'utf8'",{code:"LEVEL_ENCODING_NOT_SUPPORTED"});super({seek:!0,permanence:!1,createIfMissing:!1,errorIfExists:!1,encodings:{[i]:!0}},o),this[Ot]=Zw(tn)}_put(e,t,n,i){let o=this[Ot].find(e);o.valid?this[Ot]=o.update(t):this[Ot]=this[Ot].insert(e,t),this.nextTick(i)}_get(e,t,n){let i=this[Ot].get(e);if(typeof i>"u")return this.nextTick(n,new Error("NotFound"));this.nextTick(n,null,i)}_getMany(e,t,n){this.nextTick(n,null,e.map(i=>this[Ot].get(i)))}_del(e,t,n){this[Ot]=this[Ot].remove(e),this.nextTick(n)}_batch(e,t,n){let i=this[Ot];for(let o of e){let a=o.key,c=i.find(a);o.type==="put"?i=c.valid?c.update(o.value):i.insert(a,o.value):i=c.remove()}this[Ot]=i,this.nextTick(n)}_clear(e,t){if(e.limit===-1&&!Object.keys(e).some(RT))return this[Ot]=Zw(tn),this.nextTick(t);let n=this._keys({...e}),i=n.limit,o=0,a=()=>{for(let c=0;c<500;c++){if(++o>i||!n[Ve].valid||!n[zt](n[Ve].key))return t();this[Ot]=this[Ot].remove(n[Ve].key),n[Ve][n[Er]]()}this.nextTick(a)};this.nextTick(a)}_iterator(e){return new du(this,e)}_keys(e){return new pu(this,e)}_values(e){return new gu(this,e)}};t2.MemoryLevel=yu;if(typeof process<"u"&&!process.browser&&typeof global<"u"&&typeof global.setImmediate=="function"){let r=global.setImmediate;yu.prototype.nextTick=function(e,...t){t.length===0?r(e):r(()=>e(...t))}}function RT(r){return MT.has(r)}});var f2=P((qj,a2)=>{function kT(){this.__data__=[],this.size=0}a2.exports=kT});var Gd=P((Dj,c2)=>{function qT(r,e){return r===e||r!==r&&e!==e}c2.exports=qT});var of=P((Uj,u2)=>{var DT=Gd();function UT(r,e){for(var t=r.length;t--;)if(DT(r[t][0],e))return t;return-1}u2.exports=UT});var h2=P((jj,l2)=>{var jT=of(),$T=Array.prototype,WT=$T.splice;function HT(r){var e=this.__data__,t=jT(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():WT.call(e,t,1),--this.size,!0}l2.exports=HT});var p2=P(($j,d2)=>{var GT=of();function zT(r){var e=this.__data__,t=GT(e,r);return t<0?void 0:e[t][1]}d2.exports=zT});var y2=P((Wj,g2)=>{var KT=of();function VT(r){return KT(this.__data__,r)>-1}g2.exports=VT});var b2=P((Hj,m2)=>{var JT=of();function XT(r,e){var t=this.__data__,n=JT(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}m2.exports=XT});var sf=P((Gj,v2)=>{var YT=f2(),QT=h2(),ZT=p2(),eM=y2(),tM=b2();function ps(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}ps.prototype.clear=YT;ps.prototype.delete=QT;ps.prototype.get=ZT;ps.prototype.has=eM;ps.prototype.set=tM;v2.exports=ps});var x2=P((zj,w2)=>{var rM=sf();function nM(){this.__data__=new rM,this.size=0}w2.exports=nM});var S2=P((Kj,_2)=>{function iM(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}_2.exports=iM});var A2=P((Vj,E2)=>{function oM(r){return this.__data__.get(r)}E2.exports=oM});var T2=P((Jj,F2)=>{function sM(r){return this.__data__.has(r)}F2.exports=sM});var zd=P((Xj,M2)=>{var aM=typeof global=="object"&&global&&global.Object===Object&&global;M2.exports=aM});var kr=P((Yj,I2)=>{var fM=zd(),cM=typeof self=="object"&&self&&self.Object===Object&&self,uM=fM||cM||Function("return this")();I2.exports=uM});var xu=P((Qj,O2)=>{var lM=kr(),hM=lM.Symbol;O2.exports=hM});var P2=P((Zj,R2)=>{var C2=xu(),B2=Object.prototype,dM=B2.hasOwnProperty,pM=B2.toString,af=C2?C2.toStringTag:void 0;function gM(r){var e=dM.call(r,af),t=r[af];try{r[af]=void 0;var n=!0}catch{}var i=pM.call(r);return n&&(e?r[af]=t:delete r[af]),i}R2.exports=gM});var L2=P((e$,N2)=>{var yM=Object.prototype,mM=yM.toString;function bM(r){return mM.call(r)}N2.exports=bM});var ff=P((t$,D2)=>{var k2=xu(),vM=P2(),wM=L2(),xM="[object Null]",_M="[object Undefined]",q2=k2?k2.toStringTag:void 0;function SM(r){return r==null?r===void 0?_M:xM:q2&&q2 in Object(r)?vM(r):wM(r)}D2.exports=SM});var gs=P((r$,U2)=>{function EM(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}U2.exports=EM});var Kd=P((n$,j2)=>{var AM=ff(),FM=gs(),TM="[object AsyncFunction]",MM="[object Function]",IM="[object GeneratorFunction]",OM="[object Proxy]";function CM(r){if(!FM(r))return!1;var e=AM(r);return e==MM||e==IM||e==TM||e==OM}j2.exports=CM});var W2=P((i$,$2)=>{var BM=kr(),RM=BM["__core-js_shared__"];$2.exports=RM});var z2=P((o$,G2)=>{var Vd=W2(),H2=function(){var r=/[^.]+$/.exec(Vd&&Vd.keys&&Vd.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function PM(r){return!!H2&&H2 in r}G2.exports=PM});var Jd=P((s$,K2)=>{var NM=Function.prototype,LM=NM.toString;function kM(r){if(r!=null){try{return LM.call(r)}catch{}try{return r+""}catch{}}return""}K2.exports=kM});var J2=P((a$,V2)=>{var qM=Kd(),DM=z2(),UM=gs(),jM=Jd(),$M=/[\\^$.*+?()[\]{}|]/g,WM=/^\[object .+?Constructor\]$/,HM=Function.prototype,GM=Object.prototype,zM=HM.toString,KM=GM.hasOwnProperty,VM=RegExp("^"+zM.call(KM).replace($M,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function JM(r){if(!UM(r)||DM(r))return!1;var e=qM(r)?VM:WM;return e.test(jM(r))}V2.exports=JM});var Y2=P((f$,X2)=>{function XM(r,e){return r?.[e]}X2.exports=XM});var si=P((c$,Q2)=>{var YM=J2(),QM=Y2();function ZM(r,e){var t=QM(r,e);return YM(t)?t:void 0}Q2.exports=ZM});var _u=P((u$,Z2)=>{var eI=si(),tI=kr(),rI=eI(tI,"Map");Z2.exports=rI});var cf=P((l$,ex)=>{var nI=si(),iI=nI(Object,"create");ex.exports=iI});var nx=P((h$,rx)=>{var tx=cf();function oI(){this.__data__=tx?tx(null):{},this.size=0}rx.exports=oI});var ox=P((d$,ix)=>{function sI(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}ix.exports=sI});var ax=P((p$,sx)=>{var aI=cf(),fI="__lodash_hash_undefined__",cI=Object.prototype,uI=cI.hasOwnProperty;function lI(r){var e=this.__data__;if(aI){var t=e[r];return t===fI?void 0:t}return uI.call(e,r)?e[r]:void 0}sx.exports=lI});var cx=P((g$,fx)=>{var hI=cf(),dI=Object.prototype,pI=dI.hasOwnProperty;function gI(r){var e=this.__data__;return hI?e[r]!==void 0:pI.call(e,r)}fx.exports=gI});var lx=P((y$,ux)=>{var yI=cf(),mI="__lodash_hash_undefined__";function bI(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=yI&&e===void 0?mI:e,this}ux.exports=bI});var dx=P((m$,hx)=>{var vI=nx(),wI=ox(),xI=ax(),_I=cx(),SI=lx();function ys(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}ys.prototype.clear=vI;ys.prototype.delete=wI;ys.prototype.get=xI;ys.prototype.has=_I;ys.prototype.set=SI;hx.exports=ys});var yx=P((b$,gx)=>{var px=dx(),EI=sf(),AI=_u();function FI(){this.size=0,this.__data__={hash:new px,map:new(AI||EI),string:new px}}gx.exports=FI});var bx=P((v$,mx)=>{function TI(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}mx.exports=TI});var uf=P((w$,vx)=>{var MI=bx();function II(r,e){var t=r.__data__;return MI(e)?t[typeof e=="string"?"string":"hash"]:t.map}vx.exports=II});var xx=P((x$,wx)=>{var OI=uf();function CI(r){var e=OI(this,r).delete(r);return this.size-=e?1:0,e}wx.exports=CI});var Sx=P((_$,_x)=>{var BI=uf();function RI(r){return BI(this,r).get(r)}_x.exports=RI});var Ax=P((S$,Ex)=>{var PI=uf();function NI(r){return PI(this,r).has(r)}Ex.exports=NI});var Tx=P((E$,Fx)=>{var LI=uf();function kI(r,e){var t=LI(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}Fx.exports=kI});var Ix=P((A$,Mx)=>{var qI=yx(),DI=xx(),UI=Sx(),jI=Ax(),$I=Tx();function ms(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}ms.prototype.clear=qI;ms.prototype.delete=DI;ms.prototype.get=UI;ms.prototype.has=jI;ms.prototype.set=$I;Mx.exports=ms});var Cx=P((F$,Ox)=>{var WI=sf(),HI=_u(),GI=Ix(),zI=200;function KI(r,e){var t=this.__data__;if(t instanceof WI){var n=t.__data__;if(!HI||n.length<zI-1)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new GI(n)}return t.set(r,e),this.size=t.size,this}Ox.exports=KI});var Rx=P((T$,Bx)=>{var VI=sf(),JI=x2(),XI=S2(),YI=A2(),QI=T2(),ZI=Cx();function bs(r){var e=this.__data__=new VI(r);this.size=e.size}bs.prototype.clear=JI;bs.prototype.delete=XI;bs.prototype.get=YI;bs.prototype.has=QI;bs.prototype.set=ZI;Bx.exports=bs});var Nx=P((M$,Px)=>{function eO(r,e){for(var t=-1,n=r==null?0:r.length;++t<n&&e(r[t],t,r)!==!1;);return r}Px.exports=eO});var kx=P((I$,Lx)=>{var tO=si(),rO=function(){try{var r=tO(Object,"defineProperty");return r({},"",{}),r}catch{}}();Lx.exports=rO});var Xd=P((O$,Dx)=>{var qx=kx();function nO(r,e,t){e=="__proto__"&&qx?qx(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}Dx.exports=nO});var Yd=P((C$,Ux)=>{var iO=Xd(),oO=Gd(),sO=Object.prototype,aO=sO.hasOwnProperty;function fO(r,e,t){var n=r[e];(!(aO.call(r,e)&&oO(n,t))||t===void 0&&!(e in r))&&iO(r,e,t)}Ux.exports=fO});var lf=P((B$,jx)=>{var cO=Yd(),uO=Xd();function lO(r,e,t,n){var i=!t;t||(t={});for(var o=-1,a=e.length;++o<a;){var c=e[o],y=n?n(t[c],r[c],c,t,r):void 0;y===void 0&&(y=r[c]),i?uO(t,c,y):cO(t,c,y)}return t}jx.exports=lO});var Wx=P((R$,$x)=>{function hO(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}$x.exports=hO});var vs=P((P$,Hx)=>{function dO(r){return r!=null&&typeof r=="object"}Hx.exports=dO});var zx=P((N$,Gx)=>{var pO=ff(),gO=vs(),yO="[object Arguments]";function mO(r){return gO(r)&&pO(r)==yO}Gx.exports=mO});var Xx=P((L$,Jx)=>{var Kx=zx(),bO=vs(),Vx=Object.prototype,vO=Vx.hasOwnProperty,wO=Vx.propertyIsEnumerable,xO=Kx(function(){return arguments}())?Kx:function(r){return bO(r)&&vO.call(r,"callee")&&!wO.call(r,"callee")};Jx.exports=xO});var Su=P((k$,Yx)=>{var _O=Array.isArray;Yx.exports=_O});var Zx=P((q$,Qx)=>{function SO(){return!1}Qx.exports=SO});var Qd=P((hf,ws)=>{var EO=kr(),AO=Zx(),r6=typeof hf=="object"&&hf&&!hf.nodeType&&hf,e6=r6&&typeof ws=="object"&&ws&&!ws.nodeType&&ws,FO=e6&&e6.exports===r6,t6=FO?EO.Buffer:void 0,TO=t6?t6.isBuffer:void 0,MO=TO||AO;ws.exports=MO});var i6=P((D$,n6)=>{var IO=9007199254740991,OO=/^(?:0|[1-9]\d*)$/;function CO(r,e){var t=typeof r;return e=e??IO,!!e&&(t=="number"||t!="symbol"&&OO.test(r))&&r>-1&&r%1==0&&r<e}n6.exports=CO});var Zd=P((U$,o6)=>{var BO=9007199254740991;function RO(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=BO}o6.exports=RO});var a6=P((j$,s6)=>{var PO=ff(),NO=Zd(),LO=vs(),kO="[object Arguments]",qO="[object Array]",DO="[object Boolean]",UO="[object Date]",jO="[object Error]",$O="[object Function]",WO="[object Map]",HO="[object Number]",GO="[object Object]",zO="[object RegExp]",KO="[object Set]",VO="[object String]",JO="[object WeakMap]",XO="[object ArrayBuffer]",YO="[object DataView]",QO="[object Float32Array]",ZO="[object Float64Array]",eC="[object Int8Array]",tC="[object Int16Array]",rC="[object Int32Array]",nC="[object Uint8Array]",iC="[object Uint8ClampedArray]",oC="[object Uint16Array]",sC="[object Uint32Array]",at={};at[QO]=at[ZO]=at[eC]=at[tC]=at[rC]=at[nC]=at[iC]=at[oC]=at[sC]=!0;at[kO]=at[qO]=at[XO]=at[DO]=at[YO]=at[UO]=at[jO]=at[$O]=at[WO]=at[HO]=at[GO]=at[zO]=at[KO]=at[VO]=at[JO]=!1;function aC(r){return LO(r)&&NO(r.length)&&!!at[PO(r)]}s6.exports=aC});var Eu=P(($$,f6)=>{function fC(r){return function(e){return r(e)}}f6.exports=fC});var Au=P((df,xs)=>{var cC=zd(),c6=typeof df=="object"&&df&&!df.nodeType&&df,pf=c6&&typeof xs=="object"&&xs&&!xs.nodeType&&xs,uC=pf&&pf.exports===c6,ep=uC&&cC.process,lC=function(){try{var r=pf&&pf.require&&pf.require("util").types;return r||ep&&ep.binding&&ep.binding("util")}catch{}}();xs.exports=lC});var d6=P((W$,h6)=>{var hC=a6(),dC=Eu(),u6=Au(),l6=u6&&u6.isTypedArray,pC=l6?dC(l6):hC;h6.exports=pC});var tp=P((H$,p6)=>{var gC=Wx(),yC=Xx(),mC=Su(),bC=Qd(),vC=i6(),wC=d6(),xC=Object.prototype,_C=xC.hasOwnProperty;function SC(r,e){var t=mC(r),n=!t&&yC(r),i=!t&&!n&&bC(r),o=!t&&!n&&!i&&wC(r),a=t||n||i||o,c=a?gC(r.length,String):[],y=c.length;for(var m in r)(e||_C.call(r,m))&&!(a&&(m=="length"||i&&(m=="offset"||m=="parent")||o&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||vC(m,y)))&&c.push(m);return c}p6.exports=SC});var Fu=P((G$,g6)=>{var EC=Object.prototype;function AC(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||EC;return r===t}g6.exports=AC});var rp=P((z$,y6)=>{function FC(r,e){return function(t){return r(e(t))}}y6.exports=FC});var b6=P((K$,m6)=>{var TC=rp(),MC=TC(Object.keys,Object);m6.exports=MC});var w6=P((V$,v6)=>{var IC=Fu(),OC=b6(),CC=Object.prototype,BC=CC.hasOwnProperty;function RC(r){if(!IC(r))return OC(r);var e=[];for(var t in Object(r))BC.call(r,t)&&t!="constructor"&&e.push(t);return e}v6.exports=RC});var np=P((J$,x6)=>{var PC=Kd(),NC=Zd();function LC(r){return r!=null&&NC(r.length)&&!PC(r)}x6.exports=LC});var Tu=P((X$,_6)=>{var kC=tp(),qC=w6(),DC=np();function UC(r){return DC(r)?kC(r):qC(r)}_6.exports=UC});var E6=P((Y$,S6)=>{var jC=lf(),$C=Tu();function WC(r,e){return r&&jC(e,$C(e),r)}S6.exports=WC});var F6=P((Q$,A6)=>{function HC(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}A6.exports=HC});var M6=P((Z$,T6)=>{var GC=gs(),zC=Fu(),KC=F6(),VC=Object.prototype,JC=VC.hasOwnProperty;function XC(r){if(!GC(r))return KC(r);var e=zC(r),t=[];for(var n in r)n=="constructor"&&(e||!JC.call(r,n))||t.push(n);return t}T6.exports=XC});var Mu=P((eW,I6)=>{var YC=tp(),QC=M6(),ZC=np();function eB(r){return ZC(r)?YC(r,!0):QC(r)}I6.exports=eB});var C6=P((tW,O6)=>{var tB=lf(),rB=Mu();function nB(r,e){return r&&tB(e,rB(e),r)}O6.exports=nB});var L6=P((gf,_s)=>{var iB=kr(),N6=typeof gf=="object"&&gf&&!gf.nodeType&&gf,B6=N6&&typeof _s=="object"&&_s&&!_s.nodeType&&_s,oB=B6&&B6.exports===N6,R6=oB?iB.Buffer:void 0,P6=R6?R6.allocUnsafe:void 0;function sB(r,e){if(e)return r.slice();var t=r.length,n=P6?P6(t):new r.constructor(t);return r.copy(n),n}_s.exports=sB});var q6=P((rW,k6)=>{function aB(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e}k6.exports=aB});var U6=P((nW,D6)=>{function fB(r,e){for(var t=-1,n=r==null?0:r.length,i=0,o=[];++t<n;){var a=r[t];e(a,t,r)&&(o[i++]=a)}return o}D6.exports=fB});var ip=P((iW,j6)=>{function cB(){return[]}j6.exports=cB});var Iu=P((oW,W6)=>{var uB=U6(),lB=ip(),hB=Object.prototype,dB=hB.propertyIsEnumerable,$6=Object.getOwnPropertySymbols,pB=$6?function(r){return r==null?[]:(r=Object(r),uB($6(r),function(e){return dB.call(r,e)}))}:lB;W6.exports=pB});var G6=P((sW,H6)=>{var gB=lf(),yB=Iu();function mB(r,e){return gB(r,yB(r),e)}H6.exports=mB});var op=P((aW,z6)=>{function bB(r,e){for(var t=-1,n=e.length,i=r.length;++t<n;)r[i+t]=e[t];return r}z6.exports=bB});var sp=P((fW,K6)=>{var vB=rp(),wB=vB(Object.getPrototypeOf,Object);K6.exports=wB});var ap=P((cW,V6)=>{var xB=op(),_B=sp(),SB=Iu(),EB=ip(),AB=Object.getOwnPropertySymbols,FB=AB?function(r){for(var e=[];r;)xB(e,SB(r)),r=_B(r);return e}:EB;V6.exports=FB});var X6=P((uW,J6)=>{var TB=lf(),MB=ap();function IB(r,e){return TB(r,MB(r),e)}J6.exports=IB});var fp=P((lW,Y6)=>{var OB=op(),CB=Su();function BB(r,e,t){var n=e(r);return CB(r)?n:OB(n,t(r))}Y6.exports=BB});var Z6=P((hW,Q6)=>{var RB=fp(),PB=Iu(),NB=Tu();function LB(r){return RB(r,NB,PB)}Q6.exports=LB});var t3=P((dW,e3)=>{var kB=fp(),qB=ap(),DB=Mu();function UB(r){return kB(r,DB,qB)}e3.exports=UB});var n3=P((pW,r3)=>{var jB=si(),$B=kr(),WB=jB($B,"DataView");r3.exports=WB});var o3=P((gW,i3)=>{var HB=si(),GB=kr(),zB=HB(GB,"Promise");i3.exports=zB});var a3=P((yW,s3)=>{var KB=si(),VB=kr(),JB=KB(VB,"Set");s3.exports=JB});var c3=P((mW,f3)=>{var XB=si(),YB=kr(),QB=XB(YB,"WeakMap");f3.exports=QB});var Ou=P((bW,y3)=>{var cp=n3(),up=_u(),lp=o3(),hp=a3(),dp=c3(),g3=ff(),Ss=Jd(),u3="[object Map]",ZB="[object Object]",l3="[object Promise]",h3="[object Set]",d3="[object WeakMap]",p3="[object DataView]",eR=Ss(cp),tR=Ss(up),rR=Ss(lp),nR=Ss(hp),iR=Ss(dp),so=g3;(cp&&so(new cp(new ArrayBuffer(1)))!=p3||up&&so(new up)!=u3||lp&&so(lp.resolve())!=l3||hp&&so(new hp)!=h3||dp&&so(new dp)!=d3)&&(so=function(r){var e=g3(r),t=e==ZB?r.constructor:void 0,n=t?Ss(t):"";if(n)switch(n){case eR:return p3;case tR:return u3;case rR:return l3;case nR:return h3;case iR:return d3}return e});y3.exports=so});var b3=P((vW,m3)=>{var oR=Object.prototype,sR=oR.hasOwnProperty;function aR(r){var e=r.length,t=new r.constructor(e);return e&&typeof r[0]=="string"&&sR.call(r,"index")&&(t.index=r.index,t.input=r.input),t}m3.exports=aR});var w3=P((wW,v3)=>{var fR=kr(),cR=fR.Uint8Array;v3.exports=cR});var Cu=P((xW,_3)=>{var x3=w3();function uR(r){var e=new r.constructor(r.byteLength);return new x3(e).set(new x3(r)),e}_3.exports=uR});var E3=P((_W,S3)=>{var lR=Cu();function hR(r,e){var t=e?lR(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}S3.exports=hR});var F3=P((SW,A3)=>{var dR=/\w*$/;function pR(r){var e=new r.constructor(r.source,dR.exec(r));return e.lastIndex=r.lastIndex,e}A3.exports=pR});var C3=P((EW,O3)=>{var T3=xu(),M3=T3?T3.prototype:void 0,I3=M3?M3.valueOf:void 0;function gR(r){return I3?Object(I3.call(r)):{}}O3.exports=gR});var R3=P((AW,B3)=>{var yR=Cu();function mR(r,e){var t=e?yR(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}B3.exports=mR});var N3=P((FW,P3)=>{var bR=Cu(),vR=E3(),wR=F3(),xR=C3(),_R=R3(),SR="[object Boolean]",ER="[object Date]",AR="[object Map]",FR="[object Number]",TR="[object RegExp]",MR="[object Set]",IR="[object String]",OR="[object Symbol]",CR="[object ArrayBuffer]",BR="[object DataView]",RR="[object Float32Array]",PR="[object Float64Array]",NR="[object Int8Array]",LR="[object Int16Array]",kR="[object Int32Array]",qR="[object Uint8Array]",DR="[object Uint8ClampedArray]",UR="[object Uint16Array]",jR="[object Uint32Array]";function $R(r,e,t){var n=r.constructor;switch(e){case CR:return bR(r);case SR:case ER:return new n(+r);case BR:return vR(r,t);case RR:case PR:case NR:case LR:case kR:case qR:case DR:case UR:case jR:return _R(r,t);case AR:return new n;case FR:case IR:return new n(r);case TR:return wR(r);case MR:return new n;case OR:return xR(r)}}P3.exports=$R});var q3=P((TW,k3)=>{var WR=gs(),L3=Object.create,HR=function(){function r(){}return function(e){if(!WR(e))return{};if(L3)return L3(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}();k3.exports=HR});var U3=P((MW,D3)=>{var GR=q3(),zR=sp(),KR=Fu();function VR(r){return typeof r.constructor=="function"&&!KR(r)?GR(zR(r)):{}}D3.exports=VR});var $3=P((IW,j3)=>{var JR=Ou(),XR=vs(),YR="[object Map]";function QR(r){return XR(r)&&JR(r)==YR}j3.exports=QR});var z3=P((OW,G3)=>{var ZR=$3(),eP=Eu(),W3=Au(),H3=W3&&W3.isMap,tP=H3?eP(H3):ZR;G3.exports=tP});var V3=P((CW,K3)=>{var rP=Ou(),nP=vs(),iP="[object Set]";function oP(r){return nP(r)&&rP(r)==iP}K3.exports=oP});var Q3=P((BW,Y3)=>{var sP=V3(),aP=Eu(),J3=Au(),X3=J3&&J3.isSet,fP=X3?aP(X3):sP;Y3.exports=fP});var n_=P((RW,r_)=>{var cP=Rx(),uP=Nx(),lP=Yd(),hP=E6(),dP=C6(),pP=L6(),gP=q6(),yP=G6(),mP=X6(),bP=Z6(),vP=t3(),wP=Ou(),xP=b3(),_P=N3(),SP=U3(),EP=Su(),AP=Qd(),FP=z3(),TP=gs(),MP=Q3(),IP=Tu(),OP=Mu(),CP=1,BP=2,RP=4,Z3="[object Arguments]",PP="[object Array]",NP="[object Boolean]",LP="[object Date]",kP="[object Error]",e_="[object Function]",qP="[object GeneratorFunction]",DP="[object Map]",UP="[object Number]",t_="[object Object]",jP="[object RegExp]",$P="[object Set]",WP="[object String]",HP="[object Symbol]",GP="[object WeakMap]",zP="[object ArrayBuffer]",KP="[object DataView]",VP="[object Float32Array]",JP="[object Float64Array]",XP="[object Int8Array]",YP="[object Int16Array]",QP="[object Int32Array]",ZP="[object Uint8Array]",eN="[object Uint8ClampedArray]",tN="[object Uint16Array]",rN="[object Uint32Array]",it={};it[Z3]=it[PP]=it[zP]=it[KP]=it[NP]=it[LP]=it[VP]=it[JP]=it[XP]=it[YP]=it[QP]=it[DP]=it[UP]=it[t_]=it[jP]=it[$P]=it[WP]=it[HP]=it[ZP]=it[eN]=it[tN]=it[rN]=!0;it[kP]=it[e_]=it[GP]=!1;function Bu(r,e,t,n,i,o){var a,c=e&CP,y=e&BP,m=e&RP;if(t&&(a=i?t(r,n,i,o):t(r)),a!==void 0)return a;if(!TP(r))return r;var _=EP(r);if(_){if(a=xP(r),!c)return gP(r,a)}else{var S=wP(r),I=S==e_||S==qP;if(AP(r))return pP(r,c);if(S==t_||S==Z3||I&&!i){if(a=y||I?{}:SP(r),!c)return y?mP(r,dP(a,r)):yP(r,hP(a,r))}else{if(!it[S])return i?r:{};a=_P(r,S,c)}}o||(o=new cP);var E=o.get(r);if(E)return E;o.set(r,a),MP(r)?r.forEach(function(j){a.add(Bu(j,e,t,j,r,o))}):FP(r)&&r.forEach(function(j,q){a.set(q,Bu(j,e,t,q,r,o))});var C=m?y?vP:bP:y?OP:IP,N=_?void 0:C(r);return uP(N||r,function(j,q){N&&(q=j,j=r[q]),lP(a,q,Bu(j,e,t,q,r,o))}),a}r_.exports=Bu});var o_=P((PW,i_)=>{var nN=n_(),iN=1,oN=4;function sN(r){return nN(r,iN|oN)}i_.exports=sN});var s_=P((pp,gp)=>{(function(r,e){typeof pp=="object"&&typeof gp<"u"?gp.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis<"u"?globalThis:r||self,r["fast-copy"]=e())})(pp,function(){"use strict";var r=Function.prototype.toString,e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,o=Object.getOwnPropertySymbols,a=Object.getPrototypeOf,c=Object.prototype,y=c.hasOwnProperty,m=c.propertyIsEnumerable,_=typeof o=="function",S=typeof WeakMap=="function",I=function(){if(S)return function(){return new WeakMap};var k=function(){function L(){this._keys=[],this._values=[]}return L.prototype.has=function(W){return!!~this._keys.indexOf(W)},L.prototype.get=function(W){return this._values[this._keys.indexOf(W)]},L.prototype.set=function(W,A){this._keys.push(W),this._values.push(A)},L}();return function(){return new k}}(),E=function(k,L){var W=k.__proto__||a(k);if(!W)return e(null);var A=W.constructor;if(A===L.Object)return W===L.Object.prototype?{}:e(W);if(~r.call(A).indexOf("[native code]"))try{return new A}catch{}return e(W)},C=function(k,L,W,A){var M=E(k,L);A.set(k,M);for(var x in k)y.call(k,x)&&(M[x]=W(k[x],A));if(_)for(var u=o(k),p=0,h=u.length,s=void 0;p<h;++p)s=u[p],m.call(k,s)&&(M[s]=W(k[s],A));return M},N=function(k,L,W,A){var M=E(k,L);A.set(k,M);for(var x=_?i(k).concat(o(k)):i(k),u=0,p=x.length,h=void 0,s=void 0;u<p;++u)if(h=x[u],h!=="callee"&&h!=="caller")if(s=n(k,h),s){!s.get&&!s.set&&(s.value=W(k[h],A));try{t(M,h,s)}catch{M[h]=s.value}}else M[h]=W(k[h],A);return M},j=function(k){var L="";return k.global&&(L+="g"),k.ignoreCase&&(L+="i"),k.multiline&&(L+="m"),k.unicode&&(L+="u"),k.sticky&&(L+="y"),L},q=Array.isArray,D=Object.getPrototypeOf,Q=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:(console&&console.error&&console.error('Unable to locate global object, returning "this".'),this)}();function oe(k,L){var W=!!(L&&L.isStrict),A=L&&L.realm||Q,M=W?N:C,x=function(u,p){if(!u||typeof u!="object")return u;if(p.has(u))return p.get(u);var h=u.__proto__||D(u),s=h&&h.constructor;if(!s||s===A.Object)return M(u,A,x,p);var f;if(q(u)){if(W)return N(u,A,x,p);f=new s,p.set(u,f);for(var g=0,v=u.length;g<v;++g)f[g]=x(u[g],p);return f}if(u instanceof A.Date)return new s(u.getTime());if(u instanceof A.RegExp)return f=new s(u.source,u.flags||j(u)),f.lastIndex=u.lastIndex,f;if(A.Map&&u instanceof A.Map)return f=new s,p.set(u,f),u.forEach(function(d,l){f.set(l,x(d,p))}),f;if(A.Set&&u instanceof A.Set)return f=new s,p.set(u,f),u.forEach(function(d){f.add(x(d,p))}),f;if(A.Blob&&u instanceof A.Blob)return u.slice(0,u.size,u.type);if(A.Buffer&&A.Buffer.isBuffer(u))return f=A.Buffer.allocUnsafe?A.Buffer.allocUnsafe(u.length):new s(u.length),p.set(u,f),u.copy(f),f;if(A.ArrayBuffer){if(A.ArrayBuffer.isView(u))return f=new s(u.buffer.slice(0)),p.set(u,f),f;if(u instanceof A.ArrayBuffer)return f=u.slice(0),p.set(u,f),f}return typeof u.then=="function"||u instanceof Error||A.WeakMap&&u instanceof A.WeakMap||A.WeakSet&&u instanceof A.WeakSet?u:M(u,A,x,p)};return x(k,I())}return oe.default=oe,oe.strict=function(L,W){return oe(L,{isStrict:!0,realm:W?W.realm:void 0})},oe})});var l_=P((jW,aN)=>{aN.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}});var yp=P(p_=>{"use strict";var Nu=p_;function fN(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r!="string"){for(var n=0;n<r.length;n++)t[n]=r[n]|0;return t}if(e==="hex"){r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r);for(var n=0;n<r.length;n+=2)t.push(parseInt(r[n]+r[n+1],16))}else for(var n=0;n<r.length;n++){var i=r.charCodeAt(n),o=i>>8,a=i&255;o?t.push(o,a):t.push(a)}return t}Nu.toArray=fN;function h_(r){return r.length===1?"0"+r:r}Nu.zero2=h_;function d_(r){for(var e="",t=0;t<r.length;t++)e+=h_(r[t].toString(16));return e}Nu.toHex=d_;Nu.encode=function(e,t){return t==="hex"?d_(e):e}});var cr=P(g_=>{"use strict";var Dr=g_,cN=Wt(),uN=mn(),Lu=yp();Dr.assert=uN;Dr.toArray=Lu.toArray;Dr.zero2=Lu.zero2;Dr.toHex=Lu.toHex;Dr.encode=Lu.encode;function lN(r,e,t){var n=new Array(Math.max(r.bitLength(),t)+1);n.fill(0);for(var i=1<<e+1,o=r.clone(),a=0;a<n.length;a++){var c,y=o.andln(i-1);o.isOdd()?(y>(i>>1)-1?c=(i>>1)-y:c=y,o.isubn(c)):c=0,n[a]=c,o.iushrn(1)}return n}Dr.getNAF=lN;function hN(r,e){var t=[[],[]];r=r.clone(),e=e.clone();for(var n=0,i=0,o;r.cmpn(-n)>0||e.cmpn(-i)>0;){var a=r.andln(3)+n&3,c=e.andln(3)+i&3;a===3&&(a=-1),c===3&&(c=-1);var y;(a&1)===0?y=0:(o=r.andln(7)+n&7,(o===3||o===5)&&c===2?y=-a:y=a),t[0].push(y);var m;(c&1)===0?m=0:(o=e.andln(7)+i&7,(o===3||o===5)&&a===2?m=-c:m=c),t[1].push(m),2*n===y+1&&(n=1-n),2*i===m+1&&(i=1-i),r.iushrn(1),e.iushrn(1)}return t}Dr.getJSF=hN;function dN(r,e,t){var n="_"+e;r.prototype[e]=function(){return this[n]!==void 0?this[n]:this[n]=t.call(this)}}Dr.cachedProperty=dN;function pN(r){return typeof r=="string"?Dr.toArray(r,"hex"):r}Dr.parseBytes=pN;function gN(r){return new cN(r,"hex","le")}Dr.intFromLE=gN});var wp=P((HW,vp)=>{var mp;vp.exports=function(e){return mp||(mp=new ai(null)),mp.generate(e)};function ai(r){this.rand=r}vp.exports.Rand=ai;ai.prototype.generate=function(e){return this._rand(e)};ai.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?ai.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?ai.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:typeof window=="object"&&(ai.prototype._rand=function(){throw new Error("Not implemented yet")});else try{if(bp=Rc(),typeof bp.randomBytes!="function")throw new Error("Not supported");ai.prototype._rand=function(e){return bp.randomBytes(e)}}catch{}var bp});var bf=P((GW,y_)=>{"use strict";var ao=Wt(),mf=cr(),ku=mf.getNAF,yN=mf.getJSF,qu=mf.assert;function fi(r,e){this.type=r,this.p=new ao(e.p,16),this.red=e.prime?ao.red(e.prime):ao.mont(this.p),this.zero=new ao(0).toRed(this.red),this.one=new ao(1).toRed(this.red),this.two=new ao(2).toRed(this.red),this.n=e.n&&new ao(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}y_.exports=fi;fi.prototype.point=function(){throw new Error("Not implemented")};fi.prototype.validate=function(){throw new Error("Not implemented")};fi.prototype._fixedNafMul=function(e,t){qu(e.precomputed);var n=e._getDoubles(),i=ku(t,1,this._bitLength),o=(1<<n.step+1)-(n.step%2===0?2:1);o/=3;var a=[],c,y;for(c=0;c<i.length;c+=n.step){y=0;for(var m=c+n.step-1;m>=c;m--)y=(y<<1)+i[m];a.push(y)}for(var _=this.jpoint(null,null,null),S=this.jpoint(null,null,null),I=o;I>0;I--){for(c=0;c<a.length;c++)y=a[c],y===I?S=S.mixedAdd(n.points[c]):y===-I&&(S=S.mixedAdd(n.points[c].neg()));_=_.add(S)}return _.toP()};fi.prototype._wnafMul=function(e,t){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var o=i.points,a=ku(t,n,this._bitLength),c=this.jpoint(null,null,null),y=a.length-1;y>=0;y--){for(var m=0;y>=0&&a[y]===0;y--)m++;if(y>=0&&m++,c=c.dblp(m),y<0)break;var _=a[y];qu(_!==0),e.type==="affine"?_>0?c=c.mixedAdd(o[_-1>>1]):c=c.mixedAdd(o[-_-1>>1].neg()):_>0?c=c.add(o[_-1>>1]):c=c.add(o[-_-1>>1].neg())}return e.type==="affine"?c.toP():c};fi.prototype._wnafMulAdd=function(e,t,n,i,o){var a=this._wnafT1,c=this._wnafT2,y=this._wnafT3,m=0,_,S,I;for(_=0;_<i;_++){I=t[_];var E=I._getNAFPoints(e);a[_]=E.wnd,c[_]=E.points}for(_=i-1;_>=1;_-=2){var C=_-1,N=_;if(a[C]!==1||a[N]!==1){y[C]=ku(n[C],a[C],this._bitLength),y[N]=ku(n[N],a[N],this._bitLength),m=Math.max(y[C].length,m),m=Math.max(y[N].length,m);continue}var j=[t[C],null,null,t[N]];t[C].y.cmp(t[N].y)===0?(j[1]=t[C].add(t[N]),j[2]=t[C].toJ().mixedAdd(t[N].neg())):t[C].y.cmp(t[N].y.redNeg())===0?(j[1]=t[C].toJ().mixedAdd(t[N]),j[2]=t[C].add(t[N].neg())):(j[1]=t[C].toJ().mixedAdd(t[N]),j[2]=t[C].toJ().mixedAdd(t[N].neg()));var q=[-3,-1,-5,-7,0,7,5,1,3],D=yN(n[C],n[N]);for(m=Math.max(D[0].length,m),y[C]=new Array(m),y[N]=new Array(m),S=0;S<m;S++){var Q=D[0][S]|0,oe=D[1][S]|0;y[C][S]=q[(Q+1)*3+(oe+1)],y[N][S]=0,c[C]=j}}var k=this.jpoint(null,null,null),L=this._wnafT4;for(_=m;_>=0;_--){for(var W=0;_>=0;){var A=!0;for(S=0;S<i;S++)L[S]=y[S][_]|0,L[S]!==0&&(A=!1);if(!A)break;W++,_--}if(_>=0&&W++,k=k.dblp(W),_<0)break;for(S=0;S<i;S++){var M=L[S];M!==0&&(M>0?I=c[S][M-1>>1]:M<0&&(I=c[S][-M-1>>1].neg()),I.type==="affine"?k=k.mixedAdd(I):k=k.add(I))}}for(_=0;_<i;_++)c[_]=null;return o?k:k.toP()};function Ar(r,e){this.curve=r,this.type=e,this.precomputed=null}fi.BasePoint=Ar;Ar.prototype.eq=function(){throw new Error("Not implemented")};Ar.prototype.validate=function(){return this.curve.validate(this)};fi.prototype.decodePoint=function(e,t){e=mf.toArray(e,t);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?qu(e[e.length-1]%2===0):e[0]===7&&qu(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};Ar.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Ar.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))};Ar.prototype.encode=function(e,t){return mf.encode(this._encode(t),e)};Ar.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};Ar.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};Ar.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,o=0;o<t;o+=e){for(var a=0;a<e;a++)i=i.dbl();n.push(i)}return{step:e,points:n}};Ar.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),o=1;o<n;o++)t[o]=t[o-1].add(i);return{wnd:e,points:t}};Ar.prototype._getBeta=function(){return null};Ar.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t}});var b_=P((zW,m_)=>{"use strict";var mN=cr(),pt=Wt(),xp=Qt(),Es=bf(),bN=mN.assert;function Fr(r){Es.call(this,"short",r),this.a=new pt(r.a,16).toRed(this.red),this.b=new pt(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}xp(Fr,Es);m_.exports=Fr;Fr.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,n;if(e.beta)t=new pt(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)n=new pt(e.lambda,16);else{var o=this._getEndoRoots(this.n);this.g.mul(o[0]).x.cmp(this.g.x.redMul(t))===0?n=o[0]:(n=o[1],bN(this.g.mul(n).x.cmp(this.g.x.redMul(t))===0))}var a;return e.basis?a=e.basis.map(function(c){return{a:new pt(c.a,16),b:new pt(c.b,16)}}):a=this._getEndoBasis(n),{beta:t,lambda:n,basis:a}}};Fr.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:pt.mont(e),n=new pt(2).toRed(t).redInvm(),i=n.redNeg(),o=new pt(3).toRed(t).redNeg().redSqrt().redMul(n),a=i.redAdd(o).fromRed(),c=i.redSub(o).fromRed();return[a,c]};Fr.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),o=new pt(1),a=new pt(0),c=new pt(0),y=new pt(1),m,_,S,I,E,C,N,j=0,q,D;n.cmpn(0)!==0;){var Q=i.div(n);q=i.sub(Q.mul(n)),D=c.sub(Q.mul(o));var oe=y.sub(Q.mul(a));if(!S&&q.cmp(t)<0)m=N.neg(),_=o,S=q.neg(),I=D;else if(S&&++j===2)break;N=q,i=n,n=q,c=o,o=D,y=a,a=oe}E=q.neg(),C=D;var k=S.sqr().add(I.sqr()),L=E.sqr().add(C.sqr());return L.cmp(k)>=0&&(E=m,C=_),S.negative&&(S=S.neg(),I=I.neg()),E.negative&&(E=E.neg(),C=C.neg()),[{a:S,b:I},{a:E,b:C}]};Fr.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],i=t[1],o=i.b.mul(e).divRound(this.n),a=n.b.neg().mul(e).divRound(this.n),c=o.mul(n.a),y=a.mul(i.a),m=o.mul(n.b),_=a.mul(i.b),S=e.sub(c).sub(y),I=m.add(_).neg();return{k1:S,k2:I}};Fr.prototype.pointFromX=function(e,t){e=new pt(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var o=i.fromRed().isOdd();return(t&&!o||!t&&o)&&(i=i.redNeg()),this.point(e,i)};Fr.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,i=this.a.redMul(t),o=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(o).cmpn(0)===0};Fr.prototype._endoWnafMulAdd=function(e,t,n){for(var i=this._endoWnafT1,o=this._endoWnafT2,a=0;a<e.length;a++){var c=this._endoSplit(t[a]),y=e[a],m=y._getBeta();c.k1.negative&&(c.k1.ineg(),y=y.neg(!0)),c.k2.negative&&(c.k2.ineg(),m=m.neg(!0)),i[a*2]=y,i[a*2+1]=m,o[a*2]=c.k1,o[a*2+1]=c.k2}for(var _=this._wnafMulAdd(1,i,o,a*2,n),S=0;S<a*2;S++)i[S]=null,o[S]=null;return _};function Ft(r,e,t,n){Es.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new pt(e,16),this.y=new pt(t,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}xp(Ft,Es.BasePoint);Fr.prototype.point=function(e,t,n){return new Ft(this,e,t,n)};Fr.prototype.pointFromJSON=function(e,t){return Ft.fromJSON(this,e,t)};Ft.prototype._getBeta=function(){if(!!this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(o){return n.point(o.x.redMul(n.endo.beta),o.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}};Ft.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Ft.fromJSON=function(e,t,n){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],n);if(!t[2])return i;function o(c){return e.point(c[0],c[1],n)}var a=t[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(o))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(o))}},i};Ft.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Ft.prototype.isInfinity=function(){return this.inf};Ft.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};Ft.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),o=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(i),a=o.redSqr().redISub(this.x.redAdd(this.x)),c=o.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,c)};Ft.prototype.getX=function(){return this.x.fromRed()};Ft.prototype.getY=function(){return this.y.fromRed()};Ft.prototype.mul=function(e){return e=new pt(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Ft.prototype.mulAdd=function(e,t,n){var i=[this,t],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o):this.curve._wnafMulAdd(1,i,o,2)};Ft.prototype.jmulAdd=function(e,t,n){var i=[this,t],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o,!0):this.curve._wnafMulAdd(1,i,o,2,!0)};Ft.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Ft.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(o){return o.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return t};Ft.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Ct(r,e,t,n){Es.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new pt(0)):(this.x=new pt(e,16),this.y=new pt(t,16),this.z=new pt(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}xp(Ct,Es.BasePoint);Fr.prototype.jpoint=function(e,t,n){return new Ct(this,e,t,n)};Ct.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(n,i)};Ct.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Ct.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(t),o=e.x.redMul(n),a=this.y.redMul(t.redMul(e.z)),c=e.y.redMul(n.redMul(this.z)),y=i.redSub(o),m=a.redSub(c);if(y.cmpn(0)===0)return m.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var _=y.redSqr(),S=_.redMul(y),I=i.redMul(_),E=m.redSqr().redIAdd(S).redISub(I).redISub(I),C=m.redMul(I.redISub(E)).redISub(a.redMul(S)),N=this.z.redMul(e.z).redMul(y);return this.curve.jpoint(E,C,N)};Ct.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,i=e.x.redMul(t),o=this.y,a=e.y.redMul(t).redMul(this.z),c=n.redSub(i),y=o.redSub(a);if(c.cmpn(0)===0)return y.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var m=c.redSqr(),_=m.redMul(c),S=n.redMul(m),I=y.redSqr().redIAdd(_).redISub(S).redISub(S),E=y.redMul(S.redISub(I)).redISub(o.redMul(_)),C=this.z.redMul(c);return this.curve.jpoint(I,E,C)};Ct.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var i=this.curve.a,o=this.curve.tinv,a=this.x,c=this.y,y=this.z,m=y.redSqr().redSqr(),_=c.redAdd(c);for(t=0;t<e;t++){var S=a.redSqr(),I=_.redSqr(),E=I.redSqr(),C=S.redAdd(S).redIAdd(S).redIAdd(i.redMul(m)),N=a.redMul(I),j=C.redSqr().redISub(N.redAdd(N)),q=N.redISub(j),D=C.redMul(q);D=D.redIAdd(D).redISub(E);var Q=_.redMul(y);t+1<e&&(m=m.redMul(E)),a=j,y=Q,_=D}return this.curve.jpoint(a,_.redMul(o),y)};Ct.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Ct.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),a=o.redSqr(),c=this.x.redAdd(o).redSqr().redISub(i).redISub(a);c=c.redIAdd(c);var y=i.redAdd(i).redIAdd(i),m=y.redSqr().redISub(c).redISub(c),_=a.redIAdd(a);_=_.redIAdd(_),_=_.redIAdd(_),e=m,t=y.redMul(c.redISub(m)).redISub(_),n=this.y.redAdd(this.y)}else{var S=this.x.redSqr(),I=this.y.redSqr(),E=I.redSqr(),C=this.x.redAdd(I).redSqr().redISub(S).redISub(E);C=C.redIAdd(C);var N=S.redAdd(S).redIAdd(S),j=N.redSqr(),q=E.redIAdd(E);q=q.redIAdd(q),q=q.redIAdd(q),e=j.redISub(C).redISub(C),t=N.redMul(C.redISub(e)).redISub(q),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,t,n)};Ct.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),a=o.redSqr(),c=this.x.redAdd(o).redSqr().redISub(i).redISub(a);c=c.redIAdd(c);var y=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),m=y.redSqr().redISub(c).redISub(c);e=m;var _=a.redIAdd(a);_=_.redIAdd(_),_=_.redIAdd(_),t=y.redMul(c.redISub(m)).redISub(_),n=this.y.redAdd(this.y)}else{var S=this.z.redSqr(),I=this.y.redSqr(),E=this.x.redMul(I),C=this.x.redSub(S).redMul(this.x.redAdd(S));C=C.redAdd(C).redIAdd(C);var N=E.redIAdd(E);N=N.redIAdd(N);var j=N.redAdd(N);e=C.redSqr().redISub(j),n=this.y.redAdd(this.z).redSqr().redISub(I).redISub(S);var q=I.redSqr();q=q.redIAdd(q),q=q.redIAdd(q),q=q.redIAdd(q),t=C.redMul(N.redISub(e)).redISub(q)}return this.curve.jpoint(e,t,n)};Ct.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,i=this.z,o=i.redSqr().redSqr(),a=t.redSqr(),c=n.redSqr(),y=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(o)),m=t.redAdd(t);m=m.redIAdd(m);var _=m.redMul(c),S=y.redSqr().redISub(_.redAdd(_)),I=_.redISub(S),E=c.redSqr();E=E.redIAdd(E),E=E.redIAdd(E),E=E.redIAdd(E);var C=y.redMul(I).redISub(E),N=n.redAdd(n).redMul(i);return this.curve.jpoint(S,C,N)};Ct.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),i=t.redSqr(),o=e.redAdd(e).redIAdd(e),a=o.redSqr(),c=this.x.redAdd(t).redSqr().redISub(e).redISub(i);c=c.redIAdd(c),c=c.redAdd(c).redIAdd(c),c=c.redISub(a);var y=c.redSqr(),m=i.redIAdd(i);m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);var _=o.redIAdd(c).redSqr().redISub(a).redISub(y).redISub(m),S=t.redMul(_);S=S.redIAdd(S),S=S.redIAdd(S);var I=this.x.redMul(y).redISub(S);I=I.redIAdd(I),I=I.redIAdd(I);var E=this.y.redMul(_.redMul(m.redISub(_)).redISub(c.redMul(y)));E=E.redIAdd(E),E=E.redIAdd(E),E=E.redIAdd(E);var C=this.z.redAdd(c).redSqr().redISub(n).redISub(y);return this.curve.jpoint(I,E,C)};Ct.prototype.mul=function(e,t){return e=new pt(e,t),this.curve._wnafMul(this,e)};Ct.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),o=n.redMul(e.z);return this.y.redMul(o).redISub(e.y.redMul(i)).cmpn(0)===0};Ct.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),o=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(o),this.x.cmp(n)===0)return!0}};Ct.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Ct.prototype.isInfinity=function(){return this.z.cmpn(0)===0}});var x_=P((KW,w_)=>{"use strict";var As=Wt(),v_=Qt(),Du=bf(),vN=cr();function Fs(r){Du.call(this,"mont",r),this.a=new As(r.a,16).toRed(this.red),this.b=new As(r.b,16).toRed(this.red),this.i4=new As(4).toRed(this.red).redInvm(),this.two=new As(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}v_(Fs,Du);w_.exports=Fs;Fs.prototype.validate=function(e){var t=e.normalize().x,n=t.redSqr(),i=n.redMul(t).redAdd(n.redMul(this.a)).redAdd(t),o=i.redSqrt();return o.redSqr().cmp(i)===0};function Tt(r,e,t){Du.BasePoint.call(this,r,"projective"),e===null&&t===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new As(e,16),this.z=new As(t,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}v_(Tt,Du.BasePoint);Fs.prototype.decodePoint=function(e,t){return this.point(vN.toArray(e,t),1)};Fs.prototype.point=function(e,t){return new Tt(this,e,t)};Fs.prototype.pointFromJSON=function(e){return Tt.fromJSON(this,e)};Tt.prototype.precompute=function(){};Tt.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Tt.fromJSON=function(e,t){return new Tt(e,t[0],t[1]||e.one)};Tt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Tt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Tt.prototype.dbl=function(){var e=this.x.redAdd(this.z),t=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),o=t.redSub(i),a=t.redMul(i),c=o.redMul(i.redAdd(this.curve.a24.redMul(o)));return this.curve.point(a,c)};Tt.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Tt.prototype.diffAdd=function(e,t){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),o=e.x.redAdd(e.z),a=e.x.redSub(e.z),c=a.redMul(n),y=o.redMul(i),m=t.z.redMul(c.redAdd(y).redSqr()),_=t.x.redMul(c.redISub(y).redSqr());return this.curve.point(m,_)};Tt.prototype.mul=function(e){for(var t=e.clone(),n=this,i=this.curve.point(null,null),o=this,a=[];t.cmpn(0)!==0;t.iushrn(1))a.push(t.andln(1));for(var c=a.length-1;c>=0;c--)a[c]===0?(n=n.diffAdd(i,o),i=i.dbl()):(i=n.diffAdd(i,o),n=n.dbl());return i};Tt.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Tt.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Tt.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};Tt.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Tt.prototype.getX=function(){return this.normalize(),this.x.fromRed()}});var E_=P((VW,S_)=>{"use strict";var wN=cr(),Rn=Wt(),__=Qt(),Uu=bf(),xN=wN.assert;function rn(r){this.twisted=(r.a|0)!==1,this.mOneA=this.twisted&&(r.a|0)===-1,this.extended=this.mOneA,Uu.call(this,"edwards",r),this.a=new Rn(r.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Rn(r.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Rn(r.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),xN(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(r.c|0)===1}__(rn,Uu);S_.exports=rn;rn.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};rn.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};rn.prototype.jpoint=function(e,t,n,i){return this.point(e,t,n,i)};rn.prototype.pointFromX=function(e,t){e=new Rn(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),o=this.one.redSub(this.c2.redMul(this.d).redMul(n)),a=i.redMul(o.redInvm()),c=a.redSqrt();if(c.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var y=c.fromRed().isOdd();return(t&&!y||!t&&y)&&(c=c.redNeg()),this.point(e,c)};rn.prototype.pointFromY=function(e,t){e=new Rn(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),o=n.redMul(this.d).redMul(this.c2).redSub(this.a),a=i.redMul(o.redInvm());if(a.cmp(this.zero)===0){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var c=a.redSqrt();if(c.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");return c.fromRed().isOdd()!==t&&(c=c.redNeg()),this.point(c,e)};rn.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),n=e.y.redSqr(),i=t.redMul(this.a).redAdd(n),o=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(n)));return i.cmp(o)===0};function ot(r,e,t,n,i){Uu.BasePoint.call(this,r,"projective"),e===null&&t===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Rn(e,16),this.y=new Rn(t,16),this.z=n?new Rn(n,16):this.curve.one,this.t=i&&new Rn(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}__(ot,Uu.BasePoint);rn.prototype.pointFromJSON=function(e){return ot.fromJSON(this,e)};rn.prototype.point=function(e,t,n,i){return new ot(this,e,t,n,i)};ot.fromJSON=function(e,t){return new ot(e,t[0],t[1],t[2])};ot.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};ot.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};ot.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),o=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),a=i.redAdd(t),c=a.redSub(n),y=i.redSub(t),m=o.redMul(c),_=a.redMul(y),S=o.redMul(y),I=c.redMul(a);return this.curve.point(m,_,I,S)};ot.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),t=this.x.redSqr(),n=this.y.redSqr(),i,o,a,c,y,m;if(this.curve.twisted){c=this.curve._mulA(t);var _=c.redAdd(n);this.zOne?(i=e.redSub(t).redSub(n).redMul(_.redSub(this.curve.two)),o=_.redMul(c.redSub(n)),a=_.redSqr().redSub(_).redSub(_)):(y=this.z.redSqr(),m=_.redSub(y).redISub(y),i=e.redSub(t).redISub(n).redMul(m),o=_.redMul(c.redSub(n)),a=_.redMul(m))}else c=t.redAdd(n),y=this.curve._mulC(this.z).redSqr(),m=c.redSub(y).redSub(y),i=this.curve._mulC(e.redISub(c)).redMul(m),o=this.curve._mulC(c).redMul(t.redISub(n)),a=c.redMul(m);return this.curve.point(i,o,a)};ot.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};ot.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),o=this.z.redMul(e.z.redAdd(e.z)),a=n.redSub(t),c=o.redSub(i),y=o.redAdd(i),m=n.redAdd(t),_=a.redMul(c),S=y.redMul(m),I=a.redMul(m),E=c.redMul(y);return this.curve.point(_,S,E,I)};ot.prototype._projAdd=function(e){var t=this.z.redMul(e.z),n=t.redSqr(),i=this.x.redMul(e.x),o=this.y.redMul(e.y),a=this.curve.d.redMul(i).redMul(o),c=n.redSub(a),y=n.redAdd(a),m=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(o),_=t.redMul(c).redMul(m),S,I;return this.curve.twisted?(S=t.redMul(y).redMul(o.redSub(this.curve._mulA(i))),I=c.redMul(y)):(S=t.redMul(y).redMul(o.redSub(i)),I=this.curve._mulC(c).redMul(y)),this.curve.point(_,S,I)};ot.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};ot.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};ot.prototype.mulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!1)};ot.prototype.jmulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!0)};ot.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};ot.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};ot.prototype.getX=function(){return this.normalize(),this.x.fromRed()};ot.prototype.getY=function(){return this.normalize(),this.y.fromRed()};ot.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};ot.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(t)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),this.x.cmp(t)===0)return!0}};ot.prototype.toP=ot.prototype.normalize;ot.prototype.mixedAdd=ot.prototype.add});var _p=P(A_=>{"use strict";var ju=A_;ju.base=bf();ju.short=b_();ju.mont=x_();ju.edwards=E_()});var Ur=P(et=>{"use strict";var _N=mn(),SN=Qt();et.inherits=SN;function EN(r,e){return(r.charCodeAt(e)&64512)!==55296||e<0||e+1>=r.length?!1:(r.charCodeAt(e+1)&64512)===56320}function AN(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r=="string")if(e){if(e==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),i=0;i<r.length;i+=2)t.push(parseInt(r[i]+r[i+1],16))}else for(var n=0,i=0;i<r.length;i++){var o=r.charCodeAt(i);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):EN(r,i)?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}else for(i=0;i<r.length;i++)t[i]=r[i]|0;return t}et.toArray=AN;function FN(r){for(var e="",t=0;t<r.length;t++)e+=T_(r[t].toString(16));return e}et.toHex=FN;function F_(r){var e=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return e>>>0}et.htonl=F_;function TN(r,e){for(var t="",n=0;n<r.length;n++){var i=r[n];e==="little"&&(i=F_(i)),t+=M_(i.toString(16))}return t}et.toHex32=TN;function T_(r){return r.length===1?"0"+r:r}et.zero2=T_;function M_(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}et.zero8=M_;function MN(r,e,t,n){var i=t-e;_N(i%4===0);for(var o=new Array(i/4),a=0,c=e;a<o.length;a++,c+=4){var y;n==="big"?y=r[c]<<24|r[c+1]<<16|r[c+2]<<8|r[c+3]:y=r[c+3]<<24|r[c+2]<<16|r[c+1]<<8|r[c],o[a]=y>>>0}return o}et.join32=MN;function IN(r,e){for(var t=new Array(r.length*4),n=0,i=0;n<r.length;n++,i+=4){var o=r[n];e==="big"?(t[i]=o>>>24,t[i+1]=o>>>16&255,t[i+2]=o>>>8&255,t[i+3]=o&255):(t[i+3]=o>>>24,t[i+2]=o>>>16&255,t[i+1]=o>>>8&255,t[i]=o&255)}return t}et.split32=IN;function ON(r,e){return r>>>e|r<<32-e}et.rotr32=ON;function CN(r,e){return r<<e|r>>>32-e}et.rotl32=CN;function BN(r,e){return r+e>>>0}et.sum32=BN;function RN(r,e,t){return r+e+t>>>0}et.sum32_3=RN;function PN(r,e,t,n){return r+e+t+n>>>0}et.sum32_4=PN;function NN(r,e,t,n,i){return r+e+t+n+i>>>0}et.sum32_5=NN;function LN(r,e,t,n){var i=r[e],o=r[e+1],a=n+o>>>0,c=(a<n?1:0)+t+i;r[e]=c>>>0,r[e+1]=a}et.sum64=LN;function kN(r,e,t,n){var i=e+n>>>0,o=(i<e?1:0)+r+t;return o>>>0}et.sum64_hi=kN;function qN(r,e,t,n){var i=e+n;return i>>>0}et.sum64_lo=qN;function DN(r,e,t,n,i,o,a,c){var y=0,m=e;m=m+n>>>0,y+=m<e?1:0,m=m+o>>>0,y+=m<o?1:0,m=m+c>>>0,y+=m<c?1:0;var _=r+t+i+a+y;return _>>>0}et.sum64_4_hi=DN;function UN(r,e,t,n,i,o,a,c){var y=e+n+o+c;return y>>>0}et.sum64_4_lo=UN;function jN(r,e,t,n,i,o,a,c,y,m){var _=0,S=e;S=S+n>>>0,_+=S<e?1:0,S=S+o>>>0,_+=S<o?1:0,S=S+c>>>0,_+=S<c?1:0,S=S+m>>>0,_+=S<m?1:0;var I=r+t+i+a+y+_;return I>>>0}et.sum64_5_hi=jN;function $N(r,e,t,n,i,o,a,c,y,m){var _=e+n+o+c+m;return _>>>0}et.sum64_5_lo=$N;function WN(r,e,t){var n=e<<32-t|r>>>t;return n>>>0}et.rotr64_hi=WN;function HN(r,e,t){var n=r<<32-t|e>>>t;return n>>>0}et.rotr64_lo=HN;function GN(r,e,t){return r>>>t}et.shr64_hi=GN;function zN(r,e,t){var n=r<<32-t|e>>>t;return n>>>0}et.shr64_lo=zN});var Ts=P(O_=>{"use strict";var I_=Ur(),KN=mn();function $u(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}O_.BlockHash=$u;$u.prototype.update=function(e,t){if(e=I_.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=I_.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};$u.prototype.digest=function(e){return this.update(this._pad()),KN(this.pending===null),this._digest(e)};$u.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,i=new Array(n+this.padLength);i[0]=128;for(var o=1;o<n;o++)i[o]=0;if(e<<=3,this.endian==="big"){for(var a=8;a<this.padLength;a++)i[o++]=0;i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=e>>>24&255,i[o++]=e>>>16&255,i[o++]=e>>>8&255,i[o++]=e&255}else for(i[o++]=e&255,i[o++]=e>>>8&255,i[o++]=e>>>16&255,i[o++]=e>>>24&255,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=0,a=8;a<this.padLength;a++)i[o++]=0;return i}});var Sp=P(Pn=>{"use strict";var VN=Ur(),nn=VN.rotr32;function JN(r,e,t,n){if(r===0)return C_(e,t,n);if(r===1||r===3)return R_(e,t,n);if(r===2)return B_(e,t,n)}Pn.ft_1=JN;function C_(r,e,t){return r&e^~r&t}Pn.ch32=C_;function B_(r,e,t){return r&e^r&t^e&t}Pn.maj32=B_;function R_(r,e,t){return r^e^t}Pn.p32=R_;function XN(r){return nn(r,2)^nn(r,13)^nn(r,22)}Pn.s0_256=XN;function YN(r){return nn(r,6)^nn(r,11)^nn(r,25)}Pn.s1_256=YN;function QN(r){return nn(r,7)^nn(r,18)^r>>>3}Pn.g0_256=QN;function ZN(r){return nn(r,17)^nn(r,19)^r>>>10}Pn.g1_256=ZN});var L_=P((ZW,N_)=>{"use strict";var Ms=Ur(),eL=Ts(),tL=Sp(),Ep=Ms.rotl32,vf=Ms.sum32,rL=Ms.sum32_5,nL=tL.ft_1,P_=eL.BlockHash,iL=[1518500249,1859775393,2400959708,3395469782];function on(){if(!(this instanceof on))return new on;P_.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Ms.inherits(on,P_);N_.exports=on;on.blockSize=512;on.outSize=160;on.hmacStrength=80;on.padLength=64;on.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=Ep(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var o=this.h[0],a=this.h[1],c=this.h[2],y=this.h[3],m=this.h[4];for(i=0;i<n.length;i++){var _=~~(i/20),S=rL(Ep(o,5),nL(_,a,c,y),m,n[i],iL[_]);m=y,y=c,c=Ep(a,30),a=o,o=S}this.h[0]=vf(this.h[0],o),this.h[1]=vf(this.h[1],a),this.h[2]=vf(this.h[2],c),this.h[3]=vf(this.h[3],y),this.h[4]=vf(this.h[4],m)};on.prototype._digest=function(e){return e==="hex"?Ms.toHex32(this.h,"big"):Ms.split32(this.h,"big")}});var Ap=P((eH,q_)=>{"use strict";var Is=Ur(),oL=Ts(),Os=Sp(),sL=mn(),jr=Is.sum32,aL=Is.sum32_4,fL=Is.sum32_5,cL=Os.ch32,uL=Os.maj32,lL=Os.s0_256,hL=Os.s1_256,dL=Os.g0_256,pL=Os.g1_256,k_=oL.BlockHash,gL=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function sn(){if(!(this instanceof sn))return new sn;k_.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=gL,this.W=new Array(64)}Is.inherits(sn,k_);q_.exports=sn;sn.blockSize=512;sn.outSize=256;sn.hmacStrength=192;sn.padLength=64;sn.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=aL(pL(n[i-2]),n[i-7],dL(n[i-15]),n[i-16]);var o=this.h[0],a=this.h[1],c=this.h[2],y=this.h[3],m=this.h[4],_=this.h[5],S=this.h[6],I=this.h[7];for(sL(this.k.length===n.length),i=0;i<n.length;i++){var E=fL(I,hL(m),cL(m,_,S),this.k[i],n[i]),C=jr(lL(o),uL(o,a,c));I=S,S=_,_=m,m=jr(y,E),y=c,c=a,a=o,o=jr(E,C)}this.h[0]=jr(this.h[0],o),this.h[1]=jr(this.h[1],a),this.h[2]=jr(this.h[2],c),this.h[3]=jr(this.h[3],y),this.h[4]=jr(this.h[4],m),this.h[5]=jr(this.h[5],_),this.h[6]=jr(this.h[6],S),this.h[7]=jr(this.h[7],I)};sn.prototype._digest=function(e){return e==="hex"?Is.toHex32(this.h,"big"):Is.split32(this.h,"big")}});var j_=P((tH,U_)=>{"use strict";var Fp=Ur(),D_=Ap();function Nn(){if(!(this instanceof Nn))return new Nn;D_.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Fp.inherits(Nn,D_);U_.exports=Nn;Nn.blockSize=512;Nn.outSize=224;Nn.hmacStrength=192;Nn.padLength=64;Nn.prototype._digest=function(e){return e==="hex"?Fp.toHex32(this.h.slice(0,7),"big"):Fp.split32(this.h.slice(0,7),"big")}});var Ip=P((rH,G_)=>{"use strict";var Kt=Ur(),yL=Ts(),mL=mn(),an=Kt.rotr64_hi,fn=Kt.rotr64_lo,$_=Kt.shr64_hi,W_=Kt.shr64_lo,ci=Kt.sum64,Tp=Kt.sum64_hi,Mp=Kt.sum64_lo,bL=Kt.sum64_4_hi,vL=Kt.sum64_4_lo,wL=Kt.sum64_5_hi,xL=Kt.sum64_5_lo,H_=yL.BlockHash,_L=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function $r(){if(!(this instanceof $r))return new $r;H_.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=_L,this.W=new Array(160)}Kt.inherits($r,H_);G_.exports=$r;$r.blockSize=1024;$r.outSize=512;$r.hmacStrength=192;$r.padLength=128;$r.prototype._prepareBlock=function(e,t){for(var n=this.W,i=0;i<32;i++)n[i]=e[t+i];for(;i<n.length;i+=2){var o=RL(n[i-4],n[i-3]),a=PL(n[i-4],n[i-3]),c=n[i-14],y=n[i-13],m=CL(n[i-30],n[i-29]),_=BL(n[i-30],n[i-29]),S=n[i-32],I=n[i-31];n[i]=bL(o,a,c,y,m,_,S,I),n[i+1]=vL(o,a,c,y,m,_,S,I)}};$r.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,i=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],y=this.h[4],m=this.h[5],_=this.h[6],S=this.h[7],I=this.h[8],E=this.h[9],C=this.h[10],N=this.h[11],j=this.h[12],q=this.h[13],D=this.h[14],Q=this.h[15];mL(this.k.length===n.length);for(var oe=0;oe<n.length;oe+=2){var k=D,L=Q,W=IL(I,E),A=OL(I,E),M=SL(I,E,C,N,j,q),x=EL(I,E,C,N,j,q),u=this.k[oe],p=this.k[oe+1],h=n[oe],s=n[oe+1],f=wL(k,L,W,A,M,x,u,p,h,s),g=xL(k,L,W,A,M,x,u,p,h,s);k=TL(i,o),L=ML(i,o),W=AL(i,o,a,c,y,m),A=FL(i,o,a,c,y,m);var v=Tp(k,L,W,A),d=Mp(k,L,W,A);D=j,Q=q,j=C,q=N,C=I,N=E,I=Tp(_,S,f,g),E=Mp(S,S,f,g),_=y,S=m,y=a,m=c,a=i,c=o,i=Tp(f,g,v,d),o=Mp(f,g,v,d)}ci(this.h,0,i,o),ci(this.h,2,a,c),ci(this.h,4,y,m),ci(this.h,6,_,S),ci(this.h,8,I,E),ci(this.h,10,C,N),ci(this.h,12,j,q),ci(this.h,14,D,Q)};$r.prototype._digest=function(e){return e==="hex"?Kt.toHex32(this.h,"big"):Kt.split32(this.h,"big")};function SL(r,e,t,n,i){var o=r&t^~r&i;return o<0&&(o+=4294967296),o}function EL(r,e,t,n,i,o){var a=e&n^~e&o;return a<0&&(a+=4294967296),a}function AL(r,e,t,n,i){var o=r&t^r&i^t&i;return o<0&&(o+=4294967296),o}function FL(r,e,t,n,i,o){var a=e&n^e&o^n&o;return a<0&&(a+=4294967296),a}function TL(r,e){var t=an(r,e,28),n=an(e,r,2),i=an(e,r,7),o=t^n^i;return o<0&&(o+=4294967296),o}function ML(r,e){var t=fn(r,e,28),n=fn(e,r,2),i=fn(e,r,7),o=t^n^i;return o<0&&(o+=4294967296),o}function IL(r,e){var t=an(r,e,14),n=an(r,e,18),i=an(e,r,9),o=t^n^i;return o<0&&(o+=4294967296),o}function OL(r,e){var t=fn(r,e,14),n=fn(r,e,18),i=fn(e,r,9),o=t^n^i;return o<0&&(o+=4294967296),o}function CL(r,e){var t=an(r,e,1),n=an(r,e,8),i=$_(r,e,7),o=t^n^i;return o<0&&(o+=4294967296),o}function BL(r,e){var t=fn(r,e,1),n=fn(r,e,8),i=W_(r,e,7),o=t^n^i;return o<0&&(o+=4294967296),o}function RL(r,e){var t=an(r,e,19),n=an(e,r,29),i=$_(r,e,6),o=t^n^i;return o<0&&(o+=4294967296),o}function PL(r,e){var t=fn(r,e,19),n=fn(e,r,29),i=W_(r,e,6),o=t^n^i;return o<0&&(o+=4294967296),o}});var V_=P((nH,K_)=>{"use strict";var Op=Ur(),z_=Ip();function Ln(){if(!(this instanceof Ln))return new Ln;z_.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Op.inherits(Ln,z_);K_.exports=Ln;Ln.blockSize=1024;Ln.outSize=384;Ln.hmacStrength=192;Ln.padLength=128;Ln.prototype._digest=function(e){return e==="hex"?Op.toHex32(this.h.slice(0,12),"big"):Op.split32(this.h.slice(0,12),"big")}});var J_=P(Cs=>{"use strict";Cs.sha1=L_();Cs.sha224=j_();Cs.sha256=Ap();Cs.sha384=V_();Cs.sha512=Ip()});var t4=P(e4=>{"use strict";var fo=Ur(),NL=Ts(),Wu=fo.rotl32,X_=fo.sum32,wf=fo.sum32_3,Y_=fo.sum32_4,Z_=NL.BlockHash;function cn(){if(!(this instanceof cn))return new cn;Z_.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}fo.inherits(cn,Z_);e4.ripemd160=cn;cn.blockSize=512;cn.outSize=160;cn.hmacStrength=192;cn.padLength=64;cn.prototype._update=function(e,t){for(var n=this.h[0],i=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],y=n,m=i,_=o,S=a,I=c,E=0;E<80;E++){var C=X_(Wu(Y_(n,Q_(E,i,o,a),e[qL[E]+t],LL(E)),UL[E]),c);n=c,c=a,a=Wu(o,10),o=i,i=C,C=X_(Wu(Y_(y,Q_(79-E,m,_,S),e[DL[E]+t],kL(E)),jL[E]),I),y=I,I=S,S=Wu(_,10),_=m,m=C}C=wf(this.h[1],o,S),this.h[1]=wf(this.h[2],a,I),this.h[2]=wf(this.h[3],c,y),this.h[3]=wf(this.h[4],n,m),this.h[4]=wf(this.h[0],i,_),this.h[0]=C};cn.prototype._digest=function(e){return e==="hex"?fo.toHex32(this.h,"little"):fo.split32(this.h,"little")};function Q_(r,e,t,n){return r<=15?e^t^n:r<=31?e&t|~e&n:r<=47?(e|~t)^n:r<=63?e&n|t&~n:e^(t|~n)}function LL(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function kL(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var qL=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],DL=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],UL=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],jL=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]});var n4=P((sH,r4)=>{"use strict";var $L=Ur(),WL=mn();function Bs(r,e,t){if(!(this instanceof Bs))return new Bs(r,e,t);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init($L.toArray(e,t))}r4.exports=Bs;Bs.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),WL(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};Bs.prototype.update=function(e,t){return this.inner.update(e,t),this};Bs.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}});var Hu=P(i4=>{var Bt=i4;Bt.utils=Ur();Bt.common=Ts();Bt.sha=J_();Bt.ripemd=t4();Bt.hmac=n4();Bt.sha1=Bt.sha.sha1;Bt.sha256=Bt.sha.sha256;Bt.sha224=Bt.sha.sha224;Bt.sha384=Bt.sha.sha384;Bt.sha512=Bt.sha.sha512;Bt.ripemd160=Bt.ripemd.ripemd160});var s4=P((fH,o4)=>{o4.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}});var Gu=P(c4=>{"use strict";var Bp=c4,ui=Hu(),Cp=_p(),HL=cr(),a4=HL.assert;function f4(r){r.type==="short"?this.curve=new Cp.short(r):r.type==="edwards"?this.curve=new Cp.edwards(r):this.curve=new Cp.mont(r),this.g=this.curve.g,this.n=this.curve.n,this.hash=r.hash,a4(this.g.validate(),"Invalid curve"),a4(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}Bp.PresetCurve=f4;function li(r,e){Object.defineProperty(Bp,r,{configurable:!0,enumerable:!0,get:function(){var t=new f4(e);return Object.defineProperty(Bp,r,{configurable:!0,enumerable:!0,value:t}),t}})}li("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:ui.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});li("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:ui.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});li("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:ui.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});li("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:ui.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});li("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:ui.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});li("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ui.sha256,gRed:!1,g:["9"]});li("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ui.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var Rp;try{Rp=s4()}catch{Rp=void 0}li("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:ui.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",Rp]})});var h4=P((uH,l4)=>{"use strict";var GL=Hu(),co=yp(),u4=mn();function hi(r){if(!(this instanceof hi))return new hi(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=co.toArray(r.entropy,r.entropyEnc||"hex"),t=co.toArray(r.nonce,r.nonceEnc||"hex"),n=co.toArray(r.pers,r.persEnc||"hex");u4(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,n)}l4.exports=hi;hi.prototype._init=function(e,t,n){var i=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var o=0;o<this.V.length;o++)this.K[o]=0,this.V[o]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};hi.prototype._hmac=function(){return new GL.hmac(this.hash,this.K)};hi.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};hi.prototype.reseed=function(e,t,n,i){typeof t!="string"&&(i=n,n=t,t=null),e=co.toArray(e,t),n=co.toArray(n,i),u4(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};hi.prototype.generate=function(e,t,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=n,n=t,t=null),n&&(n=co.toArray(n,i||"hex"),this._update(n));for(var o=[];o.length<e;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var a=o.slice(0,e);return this._update(n),this._reseed++,co.encode(a,t)}});var p4=P((lH,d4)=>{"use strict";var zL=Wt(),KL=cr(),Pp=KL.assert;function Lt(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}d4.exports=Lt;Lt.fromPublic=function(e,t,n){return t instanceof Lt?t:new Lt(e,{pub:t,pubEnc:n})};Lt.fromPrivate=function(e,t,n){return t instanceof Lt?t:new Lt(e,{priv:t,privEnc:n})};Lt.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Lt.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};Lt.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Lt.prototype._importPrivate=function(e,t){this.priv=new zL(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};Lt.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?Pp(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Pp(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};Lt.prototype.derive=function(e){return e.validate()||Pp(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Lt.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)};Lt.prototype.verify=function(e,t){return this.ec.verify(e,t,this)};Lt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}});var m4=P((hH,y4)=>{"use strict";var zu=Wt(),kp=cr(),VL=kp.assert;function Ku(r,e){if(r instanceof Ku)return r;this._importDER(r,e)||(VL(r.r&&r.s,"Signature without r or s"),this.r=new zu(r.r,16),this.s=new zu(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}y4.exports=Ku;function JL(){this.place=0}function Np(r,e){var t=r[e.place++];if(!(t&128))return t;var n=t&15;if(n===0||n>4)return!1;for(var i=0,o=0,a=e.place;o<n;o++,a++)i<<=8,i|=r[a],i>>>=0;return i<=127?!1:(e.place=a,i)}function g4(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}Ku.prototype._importDER=function(e,t){e=kp.toArray(e,t);var n=new JL;if(e[n.place++]!==48)return!1;var i=Np(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var o=Np(e,n);if(o===!1)return!1;var a=e.slice(n.place,o+n.place);if(n.place+=o,e[n.place++]!==2)return!1;var c=Np(e,n);if(c===!1||e.length!==c+n.place)return!1;var y=e.slice(n.place,c+n.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(y[0]===0)if(y[1]&128)y=y.slice(1);else return!1;return this.r=new zu(a),this.s=new zu(y),this.recoveryParam=null,!0};function Lp(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}Ku.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),n[0]&128&&(n=[0].concat(n)),t=g4(t),n=g4(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Lp(i,t.length),i=i.concat(t),i.push(2),Lp(i,n.length);var o=i.concat(n),a=[48];return Lp(a,o.length),a=a.concat(o),kp.encode(a,e)}});var x4=P((dH,w4)=>{"use strict";var uo=Wt(),b4=h4(),XL=cr(),qp=Gu(),YL=wp(),v4=XL.assert,Dp=p4(),Vu=m4();function Tr(r){if(!(this instanceof Tr))return new Tr(r);typeof r=="string"&&(v4(Object.prototype.hasOwnProperty.call(qp,r),"Unknown curve "+r),r=qp[r]),r instanceof qp.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}w4.exports=Tr;Tr.prototype.keyPair=function(e){return new Dp(this,e)};Tr.prototype.keyFromPrivate=function(e,t){return Dp.fromPrivate(this,e,t)};Tr.prototype.keyFromPublic=function(e,t){return Dp.fromPublic(this,e,t)};Tr.prototype.genKeyPair=function(e){e||(e={});for(var t=new b4({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||YL(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new uo(2));;){var o=new uo(t.generate(n));if(!(o.cmp(i)>0))return o.iaddn(1),this.keyFromPrivate(o)}};Tr.prototype._truncateToN=function(e,t){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};Tr.prototype.sign=function(e,t,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new uo(e,16));for(var o=this.n.byteLength(),a=t.getPrivate().toArray("be",o),c=e.toArray("be",o),y=new b4({hash:this.hash,entropy:a,nonce:c,pers:i.pers,persEnc:i.persEnc||"utf8"}),m=this.n.sub(new uo(1)),_=0;;_++){var S=i.k?i.k(_):new uo(y.generate(this.n.byteLength()));if(S=this._truncateToN(S,!0),!(S.cmpn(1)<=0||S.cmp(m)>=0)){var I=this.g.mul(S);if(!I.isInfinity()){var E=I.getX(),C=E.umod(this.n);if(C.cmpn(0)!==0){var N=S.invm(this.n).mul(C.mul(t.getPrivate()).iadd(e));if(N=N.umod(this.n),N.cmpn(0)!==0){var j=(I.getY().isOdd()?1:0)|(E.cmp(C)!==0?2:0);return i.canonical&&N.cmp(this.nh)>0&&(N=this.n.sub(N),j^=1),new Vu({r:C,s:N,recoveryParam:j})}}}}}};Tr.prototype.verify=function(e,t,n,i){e=this._truncateToN(new uo(e,16)),n=this.keyFromPublic(n,i),t=new Vu(t,"hex");var o=t.r,a=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var c=a.invm(this.n),y=c.mul(e).umod(this.n),m=c.mul(o).umod(this.n),_;return this.curve._maxwellTrick?(_=this.g.jmulAdd(y,n.getPublic(),m),_.isInfinity()?!1:_.eqXToP(o)):(_=this.g.mulAdd(y,n.getPublic(),m),_.isInfinity()?!1:_.getX().umod(this.n).cmp(o)===0)};Tr.prototype.recoverPubKey=function(r,e,t,n){v4((3&t)===t,"The recovery param is more than two bits"),e=new Vu(e,n);var i=this.n,o=new uo(r),a=e.r,c=e.s,y=t&1,m=t>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&m)throw new Error("Unable to find sencond key candinate");m?a=this.curve.pointFromX(a.add(this.curve.n),y):a=this.curve.pointFromX(a,y);var _=e.r.invm(i),S=i.sub(o).mul(_).umod(i),I=c.mul(_).umod(i);return this.g.mulAdd(S,a,I)};Tr.prototype.getKeyRecoveryParam=function(r,e,t,n){if(e=new Vu(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(r,e,i)}catch{continue}if(o.eq(t))return i}throw new Error("Unable to find valid recovery factor")}});var A4=P((pH,E4)=>{"use strict";var xf=cr(),S4=xf.assert,_4=xf.parseBytes,Rs=xf.cachedProperty;function Mt(r,e){this.eddsa=r,this._secret=_4(e.secret),r.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=_4(e.pub)}Mt.fromPublic=function(e,t){return t instanceof Mt?t:new Mt(e,{pub:t})};Mt.fromSecret=function(e,t){return t instanceof Mt?t:new Mt(e,{secret:t})};Mt.prototype.secret=function(){return this._secret};Rs(Mt,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Rs(Mt,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Rs(Mt,"privBytes",function(){var e=this.eddsa,t=this.hash(),n=e.encodingLength-1,i=t.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});Rs(Mt,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Rs(Mt,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Rs(Mt,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Mt.prototype.sign=function(e){return S4(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Mt.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)};Mt.prototype.getSecret=function(e){return S4(this._secret,"KeyPair is public only"),xf.encode(this.secret(),e)};Mt.prototype.getPublic=function(e){return xf.encode(this.pubBytes(),e)};E4.exports=Mt});var T4=P((gH,F4)=>{"use strict";var QL=Wt(),Ju=cr(),ZL=Ju.assert,Xu=Ju.cachedProperty,ek=Ju.parseBytes;function lo(r,e){this.eddsa=r,typeof e!="object"&&(e=ek(e)),Array.isArray(e)&&(e={R:e.slice(0,r.encodingLength),S:e.slice(r.encodingLength)}),ZL(e.R&&e.S,"Signature without R or S"),r.isPoint(e.R)&&(this._R=e.R),e.S instanceof QL&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}Xu(lo,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});Xu(lo,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});Xu(lo,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});Xu(lo,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});lo.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};lo.prototype.toHex=function(){return Ju.encode(this.toBytes(),"hex").toUpperCase()};F4.exports=lo});var B4=P((yH,C4)=>{"use strict";var tk=Hu(),rk=Gu(),Ps=cr(),nk=Ps.assert,I4=Ps.parseBytes,O4=A4(),M4=T4();function Vt(r){if(nk(r==="ed25519","only tested with ed25519 so far"),!(this instanceof Vt))return new Vt(r);r=rk[r].curve,this.curve=r,this.g=r.g,this.g.precompute(r.n.bitLength()+1),this.pointClass=r.point().constructor,this.encodingLength=Math.ceil(r.n.bitLength()/8),this.hash=tk.sha512}C4.exports=Vt;Vt.prototype.sign=function(e,t){e=I4(e);var n=this.keyFromSecret(t),i=this.hashInt(n.messagePrefix(),e),o=this.g.mul(i),a=this.encodePoint(o),c=this.hashInt(a,n.pubBytes(),e).mul(n.priv()),y=i.add(c).umod(this.curve.n);return this.makeSignature({R:o,S:y,Rencoded:a})};Vt.prototype.verify=function(e,t,n){e=I4(e),t=this.makeSignature(t);var i=this.keyFromPublic(n),o=this.hashInt(t.Rencoded(),i.pubBytes(),e),a=this.g.mul(t.S()),c=t.R().add(i.pub().mul(o));return c.eq(a)};Vt.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return Ps.intFromLE(e.digest()).umod(this.curve.n)};Vt.prototype.keyFromPublic=function(e){return O4.fromPublic(this,e)};Vt.prototype.keyFromSecret=function(e){return O4.fromSecret(this,e)};Vt.prototype.makeSignature=function(e){return e instanceof M4?e:new M4(this,e)};Vt.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t};Vt.prototype.decodePoint=function(e){e=Ps.parseBytes(e);var t=e.length-1,n=e.slice(0,t).concat(e[t]&-129),i=(e[t]&128)!==0,o=Ps.intFromLE(n);return this.curve.pointFromY(o,i)};Vt.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};Vt.prototype.decodeInt=function(e){return Ps.intFromLE(e)};Vt.prototype.isPoint=function(e){return e instanceof this.pointClass}});var Up=P(R4=>{"use strict";var ho=R4;ho.version=l_().version;ho.utils=cr();ho.rand=wp();ho.curve=_p();ho.curves=Gu();ho.ec=x4();ho.eddsa=B4()});var N4=P((P4,jp)=>{(function(r,e){"use strict";function t(h,s){if(!h)throw new Error(s||"Assertion failed")}function n(h,s){h.super_=s;var f=function(){};f.prototype=s.prototype,h.prototype=new f,h.prototype.constructor=h}function i(h,s,f){if(i.isBN(h))return h;this.negative=0,this.words=null,this.length=0,this.red=null,h!==null&&((s==="le"||s==="be")&&(f=s,s=10),this._init(h||0,s||10,f||"be"))}typeof r=="object"?r.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=f0().Buffer}catch{}i.isBN=function(s){return s instanceof i?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===i.wordSize&&Array.isArray(s.words)},i.max=function(s,f){return s.cmp(f)>0?s:f},i.min=function(s,f){return s.cmp(f)<0?s:f},i.prototype._init=function(s,f,g){if(typeof s=="number")return this._initNumber(s,f,g);if(typeof s=="object")return this._initArray(s,f,g);f==="hex"&&(f=16),t(f===(f|0)&&f>=2&&f<=36),s=s.toString().replace(/\s+/g,"");var v=0;s[0]==="-"&&(v++,this.negative=1),v<s.length&&(f===16?this._parseHex(s,v,g):(this._parseBase(s,f,v),g==="le"&&this._initArray(this.toArray(),f,g)))},i.prototype._initNumber=function(s,f,g){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(t(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),f,g)},i.prototype._initArray=function(s,f,g){if(t(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var d,l,w=0;if(g==="be")for(v=s.length-1,d=0;v>=0;v-=3)l=s[v]|s[v-1]<<8|s[v-2]<<16,this.words[d]|=l<<w&67108863,this.words[d+1]=l>>>26-w&67108863,w+=24,w>=26&&(w-=26,d++);else if(g==="le")for(v=0,d=0;v<s.length;v+=3)l=s[v]|s[v+1]<<8|s[v+2]<<16,this.words[d]|=l<<w&67108863,this.words[d+1]=l>>>26-w&67108863,w+=24,w>=26&&(w-=26,d++);return this._strip()};function a(h,s){var f=h.charCodeAt(s);if(f>=48&&f<=57)return f-48;if(f>=65&&f<=70)return f-55;if(f>=97&&f<=102)return f-87;t(!1,"Invalid character in "+h)}function c(h,s,f){var g=a(h,f);return f-1>=s&&(g|=a(h,f-1)<<4),g}i.prototype._parseHex=function(s,f,g){this.length=Math.ceil((s.length-f)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var d=0,l=0,w;if(g==="be")for(v=s.length-1;v>=f;v-=2)w=c(s,f,v)<<d,this.words[l]|=w&67108863,d>=18?(d-=18,l+=1,this.words[l]|=w>>>26):d+=8;else{var T=s.length-f;for(v=T%2===0?f+1:f;v<s.length;v+=2)w=c(s,f,v)<<d,this.words[l]|=w&67108863,d>=18?(d-=18,l+=1,this.words[l]|=w>>>26):d+=8}this._strip()};function y(h,s,f,g){for(var v=0,d=0,l=Math.min(h.length,f),w=s;w<l;w++){var T=h.charCodeAt(w)-48;v*=g,T>=49?d=T-49+10:T>=17?d=T-17+10:d=T,t(T>=0&&d<g,"Invalid character"),v+=d}return v}i.prototype._parseBase=function(s,f,g){this.words=[0],this.length=1;for(var v=0,d=1;d<=67108863;d*=f)v++;v--,d=d/f|0;for(var l=s.length-g,w=l%v,T=Math.min(l,l-w)+g,b=0,F=g;F<T;F+=v)b=y(s,F,F+v,f),this.imuln(d),this.words[0]+b<67108864?this.words[0]+=b:this._iaddn(b);if(w!==0){var X=1;for(b=y(s,F,s.length,f),F=0;F<w;F++)X*=f;this.imuln(X),this.words[0]+b<67108864?this.words[0]+=b:this._iaddn(b)}this._strip()},i.prototype.copy=function(s){s.words=new Array(this.length);for(var f=0;f<this.length;f++)s.words[f]=this.words[f];s.length=this.length,s.negative=this.negative,s.red=this.red};function m(h,s){h.words=s.words,h.length=s.length,h.negative=s.negative,h.red=s.red}if(i.prototype._move=function(s){m(s,this)},i.prototype.clone=function(){var s=new i(null);return this.copy(s),s},i.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=_}catch{i.prototype.inspect=_}else i.prototype.inspect=_;function _(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(s,f){s=s||10,f=f|0||1;var g;if(s===16||s==="hex"){g="";for(var v=0,d=0,l=0;l<this.length;l++){var w=this.words[l],T=((w<<v|d)&16777215).toString(16);d=w>>>24-v&16777215,v+=2,v>=26&&(v-=26,l--),d!==0||l!==this.length-1?g=S[6-T.length]+T+g:g=T+g}for(d!==0&&(g=d.toString(16)+g);g.length%f!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(s===(s|0)&&s>=2&&s<=36){var b=I[s],F=E[s];g="";var X=this.clone();for(X.negative=0;!X.isZero();){var Z=X.modrn(F).toString(s);X=X.idivn(F),X.isZero()?g=Z+g:g=S[b-Z.length]+Z+g}for(this.isZero()&&(g="0"+g);g.length%f!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}t(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(s,f){return this.toArrayLike(o,s,f)}),i.prototype.toArray=function(s,f){return this.toArrayLike(Array,s,f)};var C=function(s,f){return s.allocUnsafe?s.allocUnsafe(f):new s(f)};i.prototype.toArrayLike=function(s,f,g){this._strip();var v=this.byteLength(),d=g||Math.max(1,v);t(v<=d,"byte array longer than desired length"),t(d>0,"Requested array length <= 0");var l=C(s,d),w=f==="le"?"LE":"BE";return this["_toArrayLike"+w](l,v),l},i.prototype._toArrayLikeLE=function(s,f){for(var g=0,v=0,d=0,l=0;d<this.length;d++){var w=this.words[d]<<l|v;s[g++]=w&255,g<s.length&&(s[g++]=w>>8&255),g<s.length&&(s[g++]=w>>16&255),l===6?(g<s.length&&(s[g++]=w>>24&255),v=0,l=0):(v=w>>>24,l+=2)}if(g<s.length)for(s[g++]=v;g<s.length;)s[g++]=0},i.prototype._toArrayLikeBE=function(s,f){for(var g=s.length-1,v=0,d=0,l=0;d<this.length;d++){var w=this.words[d]<<l|v;s[g--]=w&255,g>=0&&(s[g--]=w>>8&255),g>=0&&(s[g--]=w>>16&255),l===6?(g>=0&&(s[g--]=w>>24&255),v=0,l=0):(v=w>>>24,l+=2)}if(g>=0)for(s[g--]=v;g>=0;)s[g--]=0},Math.clz32?i.prototype._countBits=function(s){return 32-Math.clz32(s)}:i.prototype._countBits=function(s){var f=s,g=0;return f>=4096&&(g+=13,f>>>=13),f>=64&&(g+=7,f>>>=7),f>=8&&(g+=4,f>>>=4),f>=2&&(g+=2,f>>>=2),g+f},i.prototype._zeroBits=function(s){if(s===0)return 26;var f=s,g=0;return(f&8191)===0&&(g+=13,f>>>=13),(f&127)===0&&(g+=7,f>>>=7),(f&15)===0&&(g+=4,f>>>=4),(f&3)===0&&(g+=2,f>>>=2),(f&1)===0&&g++,g},i.prototype.bitLength=function(){var s=this.words[this.length-1],f=this._countBits(s);return(this.length-1)*26+f};function N(h){for(var s=new Array(h.bitLength()),f=0;f<s.length;f++){var g=f/26|0,v=f%26;s[f]=h.words[g]>>>v&1}return s}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,f=0;f<this.length;f++){var g=this._zeroBits(this.words[f]);if(s+=g,g!==26)break}return s},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},i.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var f=0;f<s.length;f++)this.words[f]=this.words[f]|s.words[f];return this._strip()},i.prototype.ior=function(s){return t((this.negative|s.negative)===0),this.iuor(s)},i.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},i.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},i.prototype.iuand=function(s){var f;this.length>s.length?f=s:f=this;for(var g=0;g<f.length;g++)this.words[g]=this.words[g]&s.words[g];return this.length=f.length,this._strip()},i.prototype.iand=function(s){return t((this.negative|s.negative)===0),this.iuand(s)},i.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},i.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},i.prototype.iuxor=function(s){var f,g;this.length>s.length?(f=this,g=s):(f=s,g=this);for(var v=0;v<g.length;v++)this.words[v]=f.words[v]^g.words[v];if(this!==f)for(;v<f.length;v++)this.words[v]=f.words[v];return this.length=f.length,this._strip()},i.prototype.ixor=function(s){return t((this.negative|s.negative)===0),this.iuxor(s)},i.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},i.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},i.prototype.inotn=function(s){t(typeof s=="number"&&s>=0);var f=Math.ceil(s/26)|0,g=s%26;this._expand(f),g>0&&f--;for(var v=0;v<f;v++)this.words[v]=~this.words[v]&67108863;return g>0&&(this.words[v]=~this.words[v]&67108863>>26-g),this._strip()},i.prototype.notn=function(s){return this.clone().inotn(s)},i.prototype.setn=function(s,f){t(typeof s=="number"&&s>=0);var g=s/26|0,v=s%26;return this._expand(g+1),f?this.words[g]=this.words[g]|1<<v:this.words[g]=this.words[g]&~(1<<v),this._strip()},i.prototype.iadd=function(s){var f;if(this.negative!==0&&s.negative===0)return this.negative=0,f=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,f=this.isub(s),s.negative=1,f._normSign();var g,v;this.length>s.length?(g=this,v=s):(g=s,v=this);for(var d=0,l=0;l<v.length;l++)f=(g.words[l]|0)+(v.words[l]|0)+d,this.words[l]=f&67108863,d=f>>>26;for(;d!==0&&l<g.length;l++)f=(g.words[l]|0)+d,this.words[l]=f&67108863,d=f>>>26;if(this.length=g.length,d!==0)this.words[this.length]=d,this.length++;else if(g!==this)for(;l<g.length;l++)this.words[l]=g.words[l];return this},i.prototype.add=function(s){var f;return s.negative!==0&&this.negative===0?(s.negative=0,f=this.sub(s),s.negative^=1,f):s.negative===0&&this.negative!==0?(this.negative=0,f=s.sub(this),this.negative=1,f):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},i.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var f=this.iadd(s);return s.negative=1,f._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var g=this.cmp(s);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,d;g>0?(v=this,d=s):(v=s,d=this);for(var l=0,w=0;w<d.length;w++)f=(v.words[w]|0)-(d.words[w]|0)+l,l=f>>26,this.words[w]=f&67108863;for(;l!==0&&w<v.length;w++)f=(v.words[w]|0)+l,l=f>>26,this.words[w]=f&67108863;if(l===0&&w<v.length&&v!==this)for(;w<v.length;w++)this.words[w]=v.words[w];return this.length=Math.max(this.length,w),v!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(s){return this.clone().isub(s)};function j(h,s,f){f.negative=s.negative^h.negative;var g=h.length+s.length|0;f.length=g,g=g-1|0;var v=h.words[0]|0,d=s.words[0]|0,l=v*d,w=l&67108863,T=l/67108864|0;f.words[0]=w;for(var b=1;b<g;b++){for(var F=T>>>26,X=T&67108863,Z=Math.min(b,s.length-1),re=Math.max(0,b-h.length+1);re<=Z;re++){var fe=b-re|0;v=h.words[fe]|0,d=s.words[re]|0,l=v*d+X,F+=l/67108864|0,X=l&67108863}f.words[b]=X|0,T=F|0}return T!==0?f.words[b]=T|0:f.length--,f._strip()}var q=function(s,f,g){var v=s.words,d=f.words,l=g.words,w=0,T,b,F,X=v[0]|0,Z=X&8191,re=X>>>13,fe=v[1]|0,te=fe&8191,O=fe>>>13,B=v[2]|0,R=B&8191,G=B>>>13,z=v[3]|0,U=z&8191,H=z>>>13,V=v[4]|0,$=V&8191,J=V>>>13,Y=v[5]|0,ee=Y&8191,se=Y>>>13,ae=v[6]|0,ie=ae&8191,ce=ae>>>13,_e=v[7]|0,ue=_e&8191,le=_e>>>13,je=v[8]|0,ye=je&8191,me=je>>>13,tt=v[9]|0,pe=tt&8191,ge=tt>>>13,ze=d[0]|0,de=ze&8191,he=ze>>>13,gt=d[1]|0,be=gt&8191,ve=gt>>>13,yt=d[2]|0,we=yt&8191,xe=yt>>>13,mt=d[3]|0,Fe=mt&8191,Te=mt>>>13,Ys=d[4]|0,Me=Ys&8191,Ie=Ys>>>13,Qs=d[5]|0,Oe=Qs&8191,Ce=Qs>>>13,Zs=d[6]|0,Be=Zs&8191,Re=Zs>>>13,ea=d[7]|0,Pe=ea&8191,Ne=ea>>>13,ta=d[8]|0,Le=ta&8191,ke=ta>>>13,So=d[9]|0,ct=So&8191,ut=So>>>13;g.negative=s.negative^f.negative,g.length=19,T=Math.imul(Z,de),b=Math.imul(Z,he),b=b+Math.imul(re,de)|0,F=Math.imul(re,he);var yi=(w+T|0)+((b&8191)<<13)|0;w=(F+(b>>>13)|0)+(yi>>>26)|0,yi&=67108863,T=Math.imul(te,de),b=Math.imul(te,he),b=b+Math.imul(O,de)|0,F=Math.imul(O,he),T=T+Math.imul(Z,be)|0,b=b+Math.imul(Z,ve)|0,b=b+Math.imul(re,be)|0,F=F+Math.imul(re,ve)|0;var mi=(w+T|0)+((b&8191)<<13)|0;w=(F+(b>>>13)|0)+(mi>>>26)|0,mi&=67108863,T=Math.imul(R,de),b=Math.imul(R,he),b=b+Math.imul(G,de)|0,F=Math.imul(G,he),T=T+Math.imul(te,be)|0,b=b+Math.imul(te,ve)|0,b=b+Math.imul(O,be)|0,F=F+Math.imul(O,ve)|0,T=T+Math.imul(Z,we)|0,b=b+Math.imul(Z,xe)|0,b=b+Math.imul(re,we)|0,F=F+Math.imul(re,xe)|0;var bi=(w+T|0)+((b&8191)<<13)|0;w=(F+(b>>>13)|0)+(bi>>>26)|0,bi&=67108863,T=Math.imul(U,de),b=Math.imul(U,he),b=b+Math.imul(H,de)|0,F=Math.imul(H,he),T=T+Math.imul(R,be)|0,b=b+Math.imul(R,ve)|0,b=b+Math.imul(G,be)|0,F=F+Math.imul(G,ve)|0,T=T+Math.imul(te,we)|0,b=b+Math.imul(te,xe)|0,b=b+Math.imul(O,we)|0,F=F+Math.imul(O,xe)|0,T=T+Math.imul(Z,Fe)|0,b=b+Math.imul(Z,Te)|0,b=b+Math.imul(re,Fe)|0,F=F+Math.imul(re,Te)|0;var vi=(w+T|0)+((b&8191)<<13)|0;w=(F+(b>>>13)|0)+(vi>>>26)|0,vi&=67108863,T=Math.imul($,de),b=Math.imul($,he),b=b+Math.imul(J,de)|0,F=Math.imul(J,he),T=T+Math.imul(U,be)|0,b=b+Math.imul(U,ve)|0,b=b+Math.imul(H,be)|0,F=F+Math.imul(H,ve)|0,T=T+Math.imul(R,we)|0,b=b+Math.imul(R,xe)|0,b=b+Math.imul(G,we)|0,F=F+Math.imul(G,xe)|0,T=T+Math.imul(te,Fe)|0,b=b+Math.imul(te,Te)|0,b=b+Math.imul(O,Fe)|0,F=F+Math.imul(O,Te)|0,T=T+Math.imul(Z,Me)|0,b=b+Math.imul(Z,Ie)|0,b=b+Math.imul(re,Me)|0,F=F+Math.imul(re,Ie)|0;var wi=(w+T|0)+((b&8191)<<13)|0;w=(F+(b>>>13)|0)+(wi>>>26)|0,wi&=67108863,T=Math.imul(ee,de),b=Math.imul(ee,he),b=b+Math.imul(se,de)|0,F=Math.imul(se,he),T=T+Math.imul($,be)|0,b=b+Math.imul($,ve)|0,b=b+Math.imul(J,be)|0,F=F+Math.imul(J,ve)|0,T=T+Math.imul(U,we)|0,b=b+Math.imul(U,xe)|0,b=b+Math.imul(H,we)|0,F=F+Math.imul(H,xe)|0,T=T+Math.imul(R,Fe)|0,b=b+Math.imul(R,Te)|0,b=b+Math.imul(G,Fe)|0,F=F+Math.imul(G,Te)|0,T=T+Math.imul(te,Me)|0,b=b+Math.imul(te,Ie)|0,b=b+Math.imul(O,Me)|0,F=F+Math.imul(O,Ie)|0,T=T+Math.imul(Z,Oe)|0,b=b+Math.imul(Z,Ce)|0,b=b+Math.imul(re,Oe)|0,F=F+Math.imul(re,Ce)|0;var xi=(w+T|0)+((b&8191)<<13)|0;w=(F+(b>>>13)|0)+(xi>>>26)|0,xi&=67108863,T=Math.imul(ie,de),b=Math.imul(ie,he),b=b+Math.imul(ce,de)|0,F=Math.imul(ce,he),T=T+Math.imul(ee,be)|0,b=b+Math.imul(ee,ve)|0,b=b+Math.imul(se,be)|0,F=F+Math.imul(se,ve)|0,T=T+Math.imul($,we)|0,b=b+Math.imul($,xe)|0,b=b+Math.imul(J,we)|0,F=F+Math.imul(J,xe)|0,T=T+Math.imul(U,Fe)|0,b=b+Math.imul(U,Te)|0,b=b+Math.imul(H,Fe)|0,F=F+Math.imul(H,Te)|0,T=T+Math.imul(R,Me)|0,b=b+Math.imul(R,Ie)|0,b=b+Math.imul(G,Me)|0,F=F+Math.imul(G,Ie)|0,T=T+Math.imul(te,Oe)|0,b=b+Math.imul(te,Ce)|0,b=b+Math.imul(O,Oe)|0,F=F+Math.imul(O,Ce)|0,T=T+Math.imul(Z,Be)|0,b=b+Math.imul(Z,Re)|0,b=b+Math.imul(re,Be)|0,F=F+Math.imul(re,Re)|0;var _i=(w+T|0)+((b&8191)<<13)|0;w=(F+(b>>>13)|0)+(_i>>>26)|0,_i&=67108863,T=Math.imul(ue,de),b=Math.imul(ue,he),b=b+Math.imul(le,de)|0,F=Math.imul(le,he),T=T+Math.imul(ie,be)|0,b=b+Math.imul(ie,ve)|0,b=b+Math.imul(ce,be)|0,F=F+Math.imul(ce,ve)|0,T=T+Math.imul(ee,we)|0,b=b+Math.imul(ee,xe)|0,b=b+Math.imul(se,we)|0,F=F+Math.imul(se,xe)|0,T=T+Math.imul($,Fe)|0,b=b+Math.imul($,Te)|0,b=b+Math.imul(J,Fe)|0,F=F+Math.imul(J,Te)|0,T=T+Math.imul(U,Me)|0,b=b+Math.imul(U,Ie)|0,b=b+Math.imul(H,Me)|0,F=F+Math.imul(H,Ie)|0,T=T+Math.imul(R,Oe)|0,b=b+Math.imul(R,Ce)|0,b=b+Math.imul(G,Oe)|0,F=F+Math.imul(G,Ce)|0,T=T+Math.imul(te,Be)|0,b=b+Math.imul(te,Re)|0,b=b+Math.imul(O,Be)|0,F=F+Math.imul(O,Re)|0,T=T+Math.imul(Z,Pe)|0,b=b+Math.imul(Z,Ne)|0,b=b+Math.imul(re,Pe)|0,F=F+Math.imul(re,Ne)|0;var Si=(w+T|0)+((b&8191)<<13)|0;w=(F+(b>>>13)|0)+(Si>>>26)|0,Si&=67108863,T=Math.imul(ye,de),b=Math.imul(ye,he),b=b+Math.imul(me,de)|0,F=Math.imul(me,he),T=T+Math.imul(ue,be)|0,b=b+Math.imul(ue,ve)|0,b=b+Math.imul(le,be)|0,F=F+Math.imul(le,ve)|0,T=T+Math.imul(ie,we)|0,b=b+Math.imul(ie,xe)|0,b=b+Math.imul(ce,we)|0,F=F+Math.imul(ce,xe)|0,T=T+Math.imul(ee,Fe)|0,b=b+Math.imul(ee,Te)|0,b=b+Math.imul(se,Fe)|0,F=F+Math.imul(se,Te)|0,T=T+Math.imul($,Me)|0,b=b+Math.imul($,Ie)|0,b=b+Math.imul(J,Me)|0,F=F+Math.imul(J,Ie)|0,T=T+Math.imul(U,Oe)|0,b=b+Math.imul(U,Ce)|0,b=b+Math.imul(H,Oe)|0,F=F+Math.imul(H,Ce)|0,T=T+Math.imul(R,Be)|0,b=b+Math.imul(R,Re)|0,b=b+Math.imul(G,Be)|0,F=F+Math.imul(G,Re)|0,T=T+Math.imul(te,Pe)|0,b=b+Math.imul(te,Ne)|0,b=b+Math.imul(O,Pe)|0,F=F+Math.imul(O,Ne)|0,T=T+Math.imul(Z,Le)|0,b=b+Math.imul(Z,ke)|0,b=b+Math.imul(re,Le)|0,F=F+Math.imul(re,ke)|0;var Ei=(w+T|0)+((b&8191)<<13)|0;w=(F+(b>>>13)|0)+(Ei>>>26)|0,Ei&=67108863,T=Math.imul(pe,de),b=Math.imul(pe,he),b=b+Math.imul(ge,de)|0,F=Math.imul(ge,he),T=T+Math.imul(ye,be)|0,b=b+Math.imul(ye,ve)|0,b=b+Math.imul(me,be)|0,F=F+Math.imul(me,ve)|0,T=T+Math.imul(ue,we)|0,b=b+Math.imul(ue,xe)|0,b=b+Math.imul(le,we)|0,F=F+Math.imul(le,xe)|0,T=T+Math.imul(ie,Fe)|0,b=b+Math.imul(ie,Te)|0,b=b+Math.imul(ce,Fe)|0,F=F+Math.imul(ce,Te)|0,T=T+Math.imul(ee,Me)|0,b=b+Math.imul(ee,Ie)|0,b=b+Math.imul(se,Me)|0,F=F+Math.imul(se,Ie)|0,T=T+Math.imul($,Oe)|0,b=b+Math.imul($,Ce)|0,b=b+Math.imul(J,Oe)|0,F=F+Math.imul(J,Ce)|0,T=T+Math.imul(U,Be)|0,b=b+Math.imul(U,Re)|0,b=b+Math.imul(H,Be)|0,F=F+Math.imul(H,Re)|0,T=T+Math.imul(R,Pe)|0,b=b+Math.imul(R,Ne)|0,b=b+Math.imul(G,Pe)|0,F=F+Math.imul(G,Ne)|0,T=T+Math.imul(te,Le)|0,b=b+Math.imul(te,ke)|0,b=b+Math.imul(O,Le)|0,F=F+Math.imul(O,ke)|0,T=T+Math.imul(Z,ct)|0,b=b+Math.imul(Z,ut)|0,b=b+Math.imul(re,ct)|0,F=F+Math.imul(re,ut)|0;var Ai=(w+T|0)+((b&8191)<<13)|0;w=(F+(b>>>13)|0)+(Ai>>>26)|0,Ai&=67108863,T=Math.imul(pe,be),b=Math.imul(pe,ve),b=b+Math.imul(ge,be)|0,F=Math.imul(ge,ve),T=T+Math.imul(ye,we)|0,b=b+Math.imul(ye,xe)|0,b=b+Math.imul(me,we)|0,F=F+Math.imul(me,xe)|0,T=T+Math.imul(ue,Fe)|0,b=b+Math.imul(ue,Te)|0,b=b+Math.imul(le,Fe)|0,F=F+Math.imul(le,Te)|0,T=T+Math.imul(ie,Me)|0,b=b+Math.imul(ie,Ie)|0,b=b+Math.imul(ce,Me)|0,F=F+Math.imul(ce,Ie)|0,T=T+Math.imul(ee,Oe)|0,b=b+Math.imul(ee,Ce)|0,b=b+Math.imul(se,Oe)|0,F=F+Math.imul(se,Ce)|0,T=T+Math.imul($,Be)|0,b=b+Math.imul($,Re)|0,b=b+Math.imul(J,Be)|0,F=F+Math.imul(J,Re)|0,T=T+Math.imul(U,Pe)|0,b=b+Math.imul(U,Ne)|0,b=b+Math.imul(H,Pe)|0,F=F+Math.imul(H,Ne)|0,T=T+Math.imul(R,Le)|0,b=b+Math.imul(R,ke)|0,b=b+Math.imul(G,Le)|0,F=F+Math.imul(G,ke)|0,T=T+Math.imul(te,ct)|0,b=b+Math.imul(te,ut)|0,b=b+Math.imul(O,ct)|0,F=F+Math.imul(O,ut)|0;var Fi=(w+T|0)+((b&8191)<<13)|0;w=(F+(b>>>13)|0)+(Fi>>>26)|0,Fi&=67108863,T=Math.imul(pe,we),b=Math.imul(pe,xe),b=b+Math.imul(ge,we)|0,F=Math.imul(ge,xe),T=T+Math.imul(ye,Fe)|0,b=b+Math.imul(ye,Te)|0,b=b+Math.imul(me,Fe)|0,F=F+Math.imul(me,Te)|0,T=T+Math.imul(ue,Me)|0,b=b+Math.imul(ue,Ie)|0,b=b+Math.imul(le,Me)|0,F=F+Math.imul(le,Ie)|0,T=T+Math.imul(ie,Oe)|0,b=b+Math.imul(ie,Ce)|0,b=b+Math.imul(ce,Oe)|0,F=F+Math.imul(ce,Ce)|0,T=T+Math.imul(ee,Be)|0,b=b+Math.imul(ee,Re)|0,b=b+Math.imul(se,Be)|0,F=F+Math.imul(se,Re)|0,T=T+Math.imul($,Pe)|0,b=b+Math.imul($,Ne)|0,b=b+Math.imul(J,Pe)|0,F=F+Math.imul(J,Ne)|0,T=T+Math.imul(U,Le)|0,b=b+Math.imul(U,ke)|0,b=b+Math.imul(H,Le)|0,F=F+Math.imul(H,ke)|0,T=T+Math.imul(R,ct)|0,b=b+Math.imul(R,ut)|0,b=b+Math.imul(G,ct)|0,F=F+Math.imul(G,ut)|0;var Ti=(w+T|0)+((b&8191)<<13)|0;w=(F+(b>>>13)|0)+(Ti>>>26)|0,Ti&=67108863,T=Math.imul(pe,Fe),b=Math.imul(pe,Te),b=b+Math.imul(ge,Fe)|0,F=Math.imul(ge,Te),T=T+Math.imul(ye,Me)|0,b=b+Math.imul(ye,Ie)|0,b=b+Math.imul(me,Me)|0,F=F+Math.imul(me,Ie)|0,T=T+Math.imul(ue,Oe)|0,b=b+Math.imul(ue,Ce)|0,b=b+Math.imul(le,Oe)|0,F=F+Math.imul(le,Ce)|0,T=T+Math.imul(ie,Be)|0,b=b+Math.imul(ie,Re)|0,b=b+Math.imul(ce,Be)|0,F=F+Math.imul(ce,Re)|0,T=T+Math.imul(ee,Pe)|0,b=b+Math.imul(ee,Ne)|0,b=b+Math.imul(se,Pe)|0,F=F+Math.imul(se,Ne)|0,T=T+Math.imul($,Le)|0,b=b+Math.imul($,ke)|0,b=b+Math.imul(J,Le)|0,F=F+Math.imul(J,ke)|0,T=T+Math.imul(U,ct)|0,b=b+Math.imul(U,ut)|0,b=b+Math.imul(H,ct)|0,F=F+Math.imul(H,ut)|0;var Mi=(w+T|0)+((b&8191)<<13)|0;w=(F+(b>>>13)|0)+(Mi>>>26)|0,Mi&=67108863,T=Math.imul(pe,Me),b=Math.imul(pe,Ie),b=b+Math.imul(ge,Me)|0,F=Math.imul(ge,Ie),T=T+Math.imul(ye,Oe)|0,b=b+Math.imul(ye,Ce)|0,b=b+Math.imul(me,Oe)|0,F=F+Math.imul(me,Ce)|0,T=T+Math.imul(ue,Be)|0,b=b+Math.imul(ue,Re)|0,b=b+Math.imul(le,Be)|0,F=F+Math.imul(le,Re)|0,T=T+Math.imul(ie,Pe)|0,b=b+Math.imul(ie,Ne)|0,b=b+Math.imul(ce,Pe)|0,F=F+Math.imul(ce,Ne)|0,T=T+Math.imul(ee,Le)|0,b=b+Math.imul(ee,ke)|0,b=b+Math.imul(se,Le)|0,F=F+Math.imul(se,ke)|0,T=T+Math.imul($,ct)|0,b=b+Math.imul($,ut)|0,b=b+Math.imul(J,ct)|0,F=F+Math.imul(J,ut)|0;var Ii=(w+T|0)+((b&8191)<<13)|0;w=(F+(b>>>13)|0)+(Ii>>>26)|0,Ii&=67108863,T=Math.imul(pe,Oe),b=Math.imul(pe,Ce),b=b+Math.imul(ge,Oe)|0,F=Math.imul(ge,Ce),T=T+Math.imul(ye,Be)|0,b=b+Math.imul(ye,Re)|0,b=b+Math.imul(me,Be)|0,F=F+Math.imul(me,Re)|0,T=T+Math.imul(ue,Pe)|0,b=b+Math.imul(ue,Ne)|0,b=b+Math.imul(le,Pe)|0,F=F+Math.imul(le,Ne)|0,T=T+Math.imul(ie,Le)|0,b=b+Math.imul(ie,ke)|0,b=b+Math.imul(ce,Le)|0,F=F+Math.imul(ce,ke)|0,T=T+Math.imul(ee,ct)|0,b=b+Math.imul(ee,ut)|0,b=b+Math.imul(se,ct)|0,F=F+Math.imul(se,ut)|0;var Oi=(w+T|0)+((b&8191)<<13)|0;w=(F+(b>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,T=Math.imul(pe,Be),b=Math.imul(pe,Re),b=b+Math.imul(ge,Be)|0,F=Math.imul(ge,Re),T=T+Math.imul(ye,Pe)|0,b=b+Math.imul(ye,Ne)|0,b=b+Math.imul(me,Pe)|0,F=F+Math.imul(me,Ne)|0,T=T+Math.imul(ue,Le)|0,b=b+Math.imul(ue,ke)|0,b=b+Math.imul(le,Le)|0,F=F+Math.imul(le,ke)|0,T=T+Math.imul(ie,ct)|0,b=b+Math.imul(ie,ut)|0,b=b+Math.imul(ce,ct)|0,F=F+Math.imul(ce,ut)|0;var Ci=(w+T|0)+((b&8191)<<13)|0;w=(F+(b>>>13)|0)+(Ci>>>26)|0,Ci&=67108863,T=Math.imul(pe,Pe),b=Math.imul(pe,Ne),b=b+Math.imul(ge,Pe)|0,F=Math.imul(ge,Ne),T=T+Math.imul(ye,Le)|0,b=b+Math.imul(ye,ke)|0,b=b+Math.imul(me,Le)|0,F=F+Math.imul(me,ke)|0,T=T+Math.imul(ue,ct)|0,b=b+Math.imul(ue,ut)|0,b=b+Math.imul(le,ct)|0,F=F+Math.imul(le,ut)|0;var Tl=(w+T|0)+((b&8191)<<13)|0;w=(F+(b>>>13)|0)+(Tl>>>26)|0,Tl&=67108863,T=Math.imul(pe,Le),b=Math.imul(pe,ke),b=b+Math.imul(ge,Le)|0,F=Math.imul(ge,ke),T=T+Math.imul(ye,ct)|0,b=b+Math.imul(ye,ut)|0,b=b+Math.imul(me,ct)|0,F=F+Math.imul(me,ut)|0;var Ml=(w+T|0)+((b&8191)<<13)|0;w=(F+(b>>>13)|0)+(Ml>>>26)|0,Ml&=67108863,T=Math.imul(pe,ct),b=Math.imul(pe,ut),b=b+Math.imul(ge,ct)|0,F=Math.imul(ge,ut);var Il=(w+T|0)+((b&8191)<<13)|0;return w=(F+(b>>>13)|0)+(Il>>>26)|0,Il&=67108863,l[0]=yi,l[1]=mi,l[2]=bi,l[3]=vi,l[4]=wi,l[5]=xi,l[6]=_i,l[7]=Si,l[8]=Ei,l[9]=Ai,l[10]=Fi,l[11]=Ti,l[12]=Mi,l[13]=Ii,l[14]=Oi,l[15]=Ci,l[16]=Tl,l[17]=Ml,l[18]=Il,w!==0&&(l[19]=w,g.length++),g};Math.imul||(q=j);function D(h,s,f){f.negative=s.negative^h.negative,f.length=h.length+s.length;for(var g=0,v=0,d=0;d<f.length-1;d++){var l=v;v=0;for(var w=g&67108863,T=Math.min(d,s.length-1),b=Math.max(0,d-h.length+1);b<=T;b++){var F=d-b,X=h.words[F]|0,Z=s.words[b]|0,re=X*Z,fe=re&67108863;l=l+(re/67108864|0)|0,fe=fe+w|0,w=fe&67108863,l=l+(fe>>>26)|0,v+=l>>>26,l&=67108863}f.words[d]=w,g=l,l=v}return g!==0?f.words[d]=g:f.length--,f._strip()}function Q(h,s,f){return D(h,s,f)}i.prototype.mulTo=function(s,f){var g,v=this.length+s.length;return this.length===10&&s.length===10?g=q(this,s,f):v<63?g=j(this,s,f):v<1024?g=D(this,s,f):g=Q(this,s,f),g};function oe(h,s){this.x=h,this.y=s}oe.prototype.makeRBT=function(s){for(var f=new Array(s),g=i.prototype._countBits(s)-1,v=0;v<s;v++)f[v]=this.revBin(v,g,s);return f},oe.prototype.revBin=function(s,f,g){if(s===0||s===g-1)return s;for(var v=0,d=0;d<f;d++)v|=(s&1)<<f-d-1,s>>=1;return v},oe.prototype.permute=function(s,f,g,v,d,l){for(var w=0;w<l;w++)v[w]=f[s[w]],d[w]=g[s[w]]},oe.prototype.transform=function(s,f,g,v,d,l){this.permute(l,s,f,g,v,d);for(var w=1;w<d;w<<=1)for(var T=w<<1,b=Math.cos(2*Math.PI/T),F=Math.sin(2*Math.PI/T),X=0;X<d;X+=T)for(var Z=b,re=F,fe=0;fe<w;fe++){var te=g[X+fe],O=v[X+fe],B=g[X+fe+w],R=v[X+fe+w],G=Z*B-re*R;R=Z*R+re*B,B=G,g[X+fe]=te+B,v[X+fe]=O+R,g[X+fe+w]=te-B,v[X+fe+w]=O-R,fe!==T&&(G=b*Z-F*re,re=b*re+F*Z,Z=G)}},oe.prototype.guessLen13b=function(s,f){var g=Math.max(f,s)|1,v=g&1,d=0;for(g=g/2|0;g;g=g>>>1)d++;return 1<<d+1+v},oe.prototype.conjugate=function(s,f,g){if(!(g<=1))for(var v=0;v<g/2;v++){var d=s[v];s[v]=s[g-v-1],s[g-v-1]=d,d=f[v],f[v]=-f[g-v-1],f[g-v-1]=-d}},oe.prototype.normalize13b=function(s,f){for(var g=0,v=0;v<f/2;v++){var d=Math.round(s[2*v+1]/f)*8192+Math.round(s[2*v]/f)+g;s[v]=d&67108863,d<67108864?g=0:g=d/67108864|0}return s},oe.prototype.convert13b=function(s,f,g,v){for(var d=0,l=0;l<f;l++)d=d+(s[l]|0),g[2*l]=d&8191,d=d>>>13,g[2*l+1]=d&8191,d=d>>>13;for(l=2*f;l<v;++l)g[l]=0;t(d===0),t((d&-8192)===0)},oe.prototype.stub=function(s){for(var f=new Array(s),g=0;g<s;g++)f[g]=0;return f},oe.prototype.mulp=function(s,f,g){var v=2*this.guessLen13b(s.length,f.length),d=this.makeRBT(v),l=this.stub(v),w=new Array(v),T=new Array(v),b=new Array(v),F=new Array(v),X=new Array(v),Z=new Array(v),re=g.words;re.length=v,this.convert13b(s.words,s.length,w,v),this.convert13b(f.words,f.length,F,v),this.transform(w,l,T,b,v,d),this.transform(F,l,X,Z,v,d);for(var fe=0;fe<v;fe++){var te=T[fe]*X[fe]-b[fe]*Z[fe];b[fe]=T[fe]*Z[fe]+b[fe]*X[fe],T[fe]=te}return this.conjugate(T,b,v),this.transform(T,b,re,l,v,d),this.conjugate(re,l,v),this.normalize13b(re,v),g.negative=s.negative^f.negative,g.length=s.length+f.length,g._strip()},i.prototype.mul=function(s){var f=new i(null);return f.words=new Array(this.length+s.length),this.mulTo(s,f)},i.prototype.mulf=function(s){var f=new i(null);return f.words=new Array(this.length+s.length),Q(this,s,f)},i.prototype.imul=function(s){return this.clone().mulTo(s,this)},i.prototype.imuln=function(s){var f=s<0;f&&(s=-s),t(typeof s=="number"),t(s<67108864);for(var g=0,v=0;v<this.length;v++){var d=(this.words[v]|0)*s,l=(d&67108863)+(g&67108863);g>>=26,g+=d/67108864|0,g+=l>>>26,this.words[v]=l&67108863}return g!==0&&(this.words[v]=g,this.length++),f?this.ineg():this},i.prototype.muln=function(s){return this.clone().imuln(s)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(s){var f=N(s);if(f.length===0)return new i(1);for(var g=this,v=0;v<f.length&&f[v]===0;v++,g=g.sqr());if(++v<f.length)for(var d=g.sqr();v<f.length;v++,d=d.sqr())f[v]!==0&&(g=g.mul(d));return g},i.prototype.iushln=function(s){t(typeof s=="number"&&s>=0);var f=s%26,g=(s-f)/26,v=67108863>>>26-f<<26-f,d;if(f!==0){var l=0;for(d=0;d<this.length;d++){var w=this.words[d]&v,T=(this.words[d]|0)-w<<f;this.words[d]=T|l,l=w>>>26-f}l&&(this.words[d]=l,this.length++)}if(g!==0){for(d=this.length-1;d>=0;d--)this.words[d+g]=this.words[d];for(d=0;d<g;d++)this.words[d]=0;this.length+=g}return this._strip()},i.prototype.ishln=function(s){return t(this.negative===0),this.iushln(s)},i.prototype.iushrn=function(s,f,g){t(typeof s=="number"&&s>=0);var v;f?v=(f-f%26)/26:v=0;var d=s%26,l=Math.min((s-d)/26,this.length),w=67108863^67108863>>>d<<d,T=g;if(v-=l,v=Math.max(0,v),T){for(var b=0;b<l;b++)T.words[b]=this.words[b];T.length=l}if(l!==0)if(this.length>l)for(this.length-=l,b=0;b<this.length;b++)this.words[b]=this.words[b+l];else this.words[0]=0,this.length=1;var F=0;for(b=this.length-1;b>=0&&(F!==0||b>=v);b--){var X=this.words[b]|0;this.words[b]=F<<26-d|X>>>d,F=X&w}return T&&F!==0&&(T.words[T.length++]=F),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(s,f,g){return t(this.negative===0),this.iushrn(s,f,g)},i.prototype.shln=function(s){return this.clone().ishln(s)},i.prototype.ushln=function(s){return this.clone().iushln(s)},i.prototype.shrn=function(s){return this.clone().ishrn(s)},i.prototype.ushrn=function(s){return this.clone().iushrn(s)},i.prototype.testn=function(s){t(typeof s=="number"&&s>=0);var f=s%26,g=(s-f)/26,v=1<<f;if(this.length<=g)return!1;var d=this.words[g];return!!(d&v)},i.prototype.imaskn=function(s){t(typeof s=="number"&&s>=0);var f=s%26,g=(s-f)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(f!==0&&g++,this.length=Math.min(g,this.length),f!==0){var v=67108863^67108863>>>f<<f;this.words[this.length-1]&=v}return this._strip()},i.prototype.maskn=function(s){return this.clone().imaskn(s)},i.prototype.iaddn=function(s){return t(typeof s=="number"),t(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<=s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},i.prototype._iaddn=function(s){this.words[0]+=s;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},i.prototype.isubn=function(s){if(t(typeof s=="number"),t(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this._strip()},i.prototype.addn=function(s){return this.clone().iaddn(s)},i.prototype.subn=function(s){return this.clone().isubn(s)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(s,f,g){var v=s.length+g,d;this._expand(v);var l,w=0;for(d=0;d<s.length;d++){l=(this.words[d+g]|0)+w;var T=(s.words[d]|0)*f;l-=T&67108863,w=(l>>26)-(T/67108864|0),this.words[d+g]=l&67108863}for(;d<this.length-g;d++)l=(this.words[d+g]|0)+w,w=l>>26,this.words[d+g]=l&67108863;if(w===0)return this._strip();for(t(w===-1),w=0,d=0;d<this.length;d++)l=-(this.words[d]|0)+w,w=l>>26,this.words[d]=l&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(s,f){var g=this.length-s.length,v=this.clone(),d=s,l=d.words[d.length-1]|0,w=this._countBits(l);g=26-w,g!==0&&(d=d.ushln(g),v.iushln(g),l=d.words[d.length-1]|0);var T=v.length-d.length,b;if(f!=="mod"){b=new i(null),b.length=T+1,b.words=new Array(b.length);for(var F=0;F<b.length;F++)b.words[F]=0}var X=v.clone()._ishlnsubmul(d,1,T);X.negative===0&&(v=X,b&&(b.words[T]=1));for(var Z=T-1;Z>=0;Z--){var re=(v.words[d.length+Z]|0)*67108864+(v.words[d.length+Z-1]|0);for(re=Math.min(re/l|0,67108863),v._ishlnsubmul(d,re,Z);v.negative!==0;)re--,v.negative=0,v._ishlnsubmul(d,1,Z),v.isZero()||(v.negative^=1);b&&(b.words[Z]=re)}return b&&b._strip(),v._strip(),f!=="div"&&g!==0&&v.iushrn(g),{div:b||null,mod:v}},i.prototype.divmod=function(s,f,g){if(t(!s.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var v,d,l;return this.negative!==0&&s.negative===0?(l=this.neg().divmod(s,f),f!=="mod"&&(v=l.div.neg()),f!=="div"&&(d=l.mod.neg(),g&&d.negative!==0&&d.iadd(s)),{div:v,mod:d}):this.negative===0&&s.negative!==0?(l=this.divmod(s.neg(),f),f!=="mod"&&(v=l.div.neg()),{div:v,mod:l.mod}):(this.negative&s.negative)!==0?(l=this.neg().divmod(s.neg(),f),f!=="div"&&(d=l.mod.neg(),g&&d.negative!==0&&d.isub(s)),{div:l.div,mod:d}):s.length>this.length||this.cmp(s)<0?{div:new i(0),mod:this}:s.length===1?f==="div"?{div:this.divn(s.words[0]),mod:null}:f==="mod"?{div:null,mod:new i(this.modrn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new i(this.modrn(s.words[0]))}:this._wordDiv(s,f)},i.prototype.div=function(s){return this.divmod(s,"div",!1).div},i.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},i.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},i.prototype.divRound=function(s){var f=this.divmod(s);if(f.mod.isZero())return f.div;var g=f.div.negative!==0?f.mod.isub(s):f.mod,v=s.ushrn(1),d=s.andln(1),l=g.cmp(v);return l<0||d===1&&l===0?f.div:f.div.negative!==0?f.div.isubn(1):f.div.iaddn(1)},i.prototype.modrn=function(s){var f=s<0;f&&(s=-s),t(s<=67108863);for(var g=(1<<26)%s,v=0,d=this.length-1;d>=0;d--)v=(g*v+(this.words[d]|0))%s;return f?-v:v},i.prototype.modn=function(s){return this.modrn(s)},i.prototype.idivn=function(s){var f=s<0;f&&(s=-s),t(s<=67108863);for(var g=0,v=this.length-1;v>=0;v--){var d=(this.words[v]|0)+g*67108864;this.words[v]=d/s|0,g=d%s}return this._strip(),f?this.ineg():this},i.prototype.divn=function(s){return this.clone().idivn(s)},i.prototype.egcd=function(s){t(s.negative===0),t(!s.isZero());var f=this,g=s.clone();f.negative!==0?f=f.umod(s):f=f.clone();for(var v=new i(1),d=new i(0),l=new i(0),w=new i(1),T=0;f.isEven()&&g.isEven();)f.iushrn(1),g.iushrn(1),++T;for(var b=g.clone(),F=f.clone();!f.isZero();){for(var X=0,Z=1;(f.words[0]&Z)===0&&X<26;++X,Z<<=1);if(X>0)for(f.iushrn(X);X-- >0;)(v.isOdd()||d.isOdd())&&(v.iadd(b),d.isub(F)),v.iushrn(1),d.iushrn(1);for(var re=0,fe=1;(g.words[0]&fe)===0&&re<26;++re,fe<<=1);if(re>0)for(g.iushrn(re);re-- >0;)(l.isOdd()||w.isOdd())&&(l.iadd(b),w.isub(F)),l.iushrn(1),w.iushrn(1);f.cmp(g)>=0?(f.isub(g),v.isub(l),d.isub(w)):(g.isub(f),l.isub(v),w.isub(d))}return{a:l,b:w,gcd:g.iushln(T)}},i.prototype._invmp=function(s){t(s.negative===0),t(!s.isZero());var f=this,g=s.clone();f.negative!==0?f=f.umod(s):f=f.clone();for(var v=new i(1),d=new i(0),l=g.clone();f.cmpn(1)>0&&g.cmpn(1)>0;){for(var w=0,T=1;(f.words[0]&T)===0&&w<26;++w,T<<=1);if(w>0)for(f.iushrn(w);w-- >0;)v.isOdd()&&v.iadd(l),v.iushrn(1);for(var b=0,F=1;(g.words[0]&F)===0&&b<26;++b,F<<=1);if(b>0)for(g.iushrn(b);b-- >0;)d.isOdd()&&d.iadd(l),d.iushrn(1);f.cmp(g)>=0?(f.isub(g),v.isub(d)):(g.isub(f),d.isub(v))}var X;return f.cmpn(1)===0?X=v:X=d,X.cmpn(0)<0&&X.iadd(s),X},i.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var f=this.clone(),g=s.clone();f.negative=0,g.negative=0;for(var v=0;f.isEven()&&g.isEven();v++)f.iushrn(1),g.iushrn(1);do{for(;f.isEven();)f.iushrn(1);for(;g.isEven();)g.iushrn(1);var d=f.cmp(g);if(d<0){var l=f;f=g,g=l}else if(d===0||g.cmpn(1)===0)break;f.isub(g)}while(!0);return g.iushln(v)},i.prototype.invm=function(s){return this.egcd(s).a.umod(s)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(s){return this.words[0]&s},i.prototype.bincn=function(s){t(typeof s=="number");var f=s%26,g=(s-f)/26,v=1<<f;if(this.length<=g)return this._expand(g+1),this.words[g]|=v,this;for(var d=v,l=g;d!==0&&l<this.length;l++){var w=this.words[l]|0;w+=d,d=w>>>26,w&=67108863,this.words[l]=w}return d!==0&&(this.words[l]=d,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(s){var f=s<0;if(this.negative!==0&&!f)return-1;if(this.negative===0&&f)return 1;this._strip();var g;if(this.length>1)g=1;else{f&&(s=-s),t(s<=67108863,"Number is too big");var v=this.words[0]|0;g=v===s?0:v<s?-1:1}return this.negative!==0?-g|0:g},i.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var f=this.ucmp(s);return this.negative!==0?-f|0:f},i.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var f=0,g=this.length-1;g>=0;g--){var v=this.words[g]|0,d=s.words[g]|0;if(v!==d){v<d?f=-1:v>d&&(f=1);break}}return f},i.prototype.gtn=function(s){return this.cmpn(s)===1},i.prototype.gt=function(s){return this.cmp(s)===1},i.prototype.gten=function(s){return this.cmpn(s)>=0},i.prototype.gte=function(s){return this.cmp(s)>=0},i.prototype.ltn=function(s){return this.cmpn(s)===-1},i.prototype.lt=function(s){return this.cmp(s)===-1},i.prototype.lten=function(s){return this.cmpn(s)<=0},i.prototype.lte=function(s){return this.cmp(s)<=0},i.prototype.eqn=function(s){return this.cmpn(s)===0},i.prototype.eq=function(s){return this.cmp(s)===0},i.red=function(s){return new u(s)},i.prototype.toRed=function(s){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},i.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(s){return this.red=s,this},i.prototype.forceRed=function(s){return t(!this.red,"Already a number in reduction context"),this._forceRed(s)},i.prototype.redAdd=function(s){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},i.prototype.redIAdd=function(s){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},i.prototype.redSub=function(s){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},i.prototype.redISub=function(s){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},i.prototype.redShl=function(s){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},i.prototype.redMul=function(s){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},i.prototype.redIMul=function(s){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},i.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(s){return t(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var k={k256:null,p224:null,p192:null,p25519:null};function L(h,s){this.name=h,this.p=new i(s,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}L.prototype._tmp=function(){var s=new i(null);return s.words=new Array(Math.ceil(this.n/13)),s},L.prototype.ireduce=function(s){var f=s,g;do this.split(f,this.tmp),f=this.imulK(f),f=f.iadd(this.tmp),g=f.bitLength();while(g>this.n);var v=g<this.n?-1:f.ucmp(this.p);return v===0?(f.words[0]=0,f.length=1):v>0?f.isub(this.p):f.strip!==void 0?f.strip():f._strip(),f},L.prototype.split=function(s,f){s.iushrn(this.n,0,f)},L.prototype.imulK=function(s){return s.imul(this.k)};function W(){L.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(W,L),W.prototype.split=function(s,f){for(var g=4194303,v=Math.min(s.length,9),d=0;d<v;d++)f.words[d]=s.words[d];if(f.length=v,s.length<=9){s.words[0]=0,s.length=1;return}var l=s.words[9];for(f.words[f.length++]=l&g,d=10;d<s.length;d++){var w=s.words[d]|0;s.words[d-10]=(w&g)<<4|l>>>22,l=w}l>>>=22,s.words[d-10]=l,l===0&&s.length>10?s.length-=10:s.length-=9},W.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var f=0,g=0;g<s.length;g++){var v=s.words[g]|0;f+=v*977,s.words[g]=f&67108863,f=v*64+(f/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function A(){L.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(A,L);function M(){L.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(M,L);function x(){L.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(x,L),x.prototype.imulK=function(s){for(var f=0,g=0;g<s.length;g++){var v=(s.words[g]|0)*19+f,d=v&67108863;v>>>=26,s.words[g]=d,f=v}return f!==0&&(s.words[s.length++]=f),s},i._prime=function(s){if(k[s])return k[s];var f;if(s==="k256")f=new W;else if(s==="p224")f=new A;else if(s==="p192")f=new M;else if(s==="p25519")f=new x;else throw new Error("Unknown prime "+s);return k[s]=f,f};function u(h){if(typeof h=="string"){var s=i._prime(h);this.m=s.p,this.prime=s}else t(h.gtn(1),"modulus must be greater than 1"),this.m=h,this.prime=null}u.prototype._verify1=function(s){t(s.negative===0,"red works only with positives"),t(s.red,"red works only with red numbers")},u.prototype._verify2=function(s,f){t((s.negative|f.negative)===0,"red works only with positives"),t(s.red&&s.red===f.red,"red works only with red numbers")},u.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):(m(s,s.umod(this.m)._forceRed(this)),s)},u.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},u.prototype.add=function(s,f){this._verify2(s,f);var g=s.add(f);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},u.prototype.iadd=function(s,f){this._verify2(s,f);var g=s.iadd(f);return g.cmp(this.m)>=0&&g.isub(this.m),g},u.prototype.sub=function(s,f){this._verify2(s,f);var g=s.sub(f);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},u.prototype.isub=function(s,f){this._verify2(s,f);var g=s.isub(f);return g.cmpn(0)<0&&g.iadd(this.m),g},u.prototype.shl=function(s,f){return this._verify1(s),this.imod(s.ushln(f))},u.prototype.imul=function(s,f){return this._verify2(s,f),this.imod(s.imul(f))},u.prototype.mul=function(s,f){return this._verify2(s,f),this.imod(s.mul(f))},u.prototype.isqr=function(s){return this.imul(s,s.clone())},u.prototype.sqr=function(s){return this.mul(s,s)},u.prototype.sqrt=function(s){if(s.isZero())return s.clone();var f=this.m.andln(3);if(t(f%2===1),f===3){var g=this.m.add(new i(1)).iushrn(2);return this.pow(s,g)}for(var v=this.m.subn(1),d=0;!v.isZero()&&v.andln(1)===0;)d++,v.iushrn(1);t(!v.isZero());var l=new i(1).toRed(this),w=l.redNeg(),T=this.m.subn(1).iushrn(1),b=this.m.bitLength();for(b=new i(2*b*b).toRed(this);this.pow(b,T).cmp(w)!==0;)b.redIAdd(w);for(var F=this.pow(b,v),X=this.pow(s,v.addn(1).iushrn(1)),Z=this.pow(s,v),re=d;Z.cmp(l)!==0;){for(var fe=Z,te=0;fe.cmp(l)!==0;te++)fe=fe.redSqr();t(te<re);var O=this.pow(F,new i(1).iushln(re-te-1));X=X.redMul(O),F=O.redSqr(),Z=Z.redMul(F),re=te}return X},u.prototype.invm=function(s){var f=s._invmp(this.m);return f.negative!==0?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},u.prototype.pow=function(s,f){if(f.isZero())return new i(1).toRed(this);if(f.cmpn(1)===0)return s.clone();var g=4,v=new Array(1<<g);v[0]=new i(1).toRed(this),v[1]=s;for(var d=2;d<v.length;d++)v[d]=this.mul(v[d-1],s);var l=v[0],w=0,T=0,b=f.bitLength()%26;for(b===0&&(b=26),d=f.length-1;d>=0;d--){for(var F=f.words[d],X=b-1;X>=0;X--){var Z=F>>X&1;if(l!==v[0]&&(l=this.sqr(l)),Z===0&&w===0){T=0;continue}w<<=1,w|=Z,T++,!(T!==g&&(d!==0||X!==0))&&(l=this.mul(l,v[w]),T=0,w=0)}b=26}return l},u.prototype.convertTo=function(s){var f=s.umod(this.m);return f===s?f.clone():f},u.prototype.convertFrom=function(s){var f=s.clone();return f.red=null,f},i.mont=function(s){return new p(s)};function p(h){u.call(this,h),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(p,u),p.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},p.prototype.convertFrom=function(s){var f=this.imod(s.mul(this.rinv));return f.red=null,f},p.prototype.imul=function(s,f){if(s.isZero()||f.isZero())return s.words[0]=0,s.length=1,s;var g=s.imul(f),v=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=g.isub(v).iushrn(this.shift),l=d;return d.cmp(this.m)>=0?l=d.isub(this.m):d.cmpn(0)<0&&(l=d.iadd(this.m)),l._forceRed(this)},p.prototype.mul=function(s,f){if(s.isZero()||f.isZero())return new i(0)._forceRed(this);var g=s.mul(f),v=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=g.isub(v).iushrn(this.shift),l=d;return d.cmp(this.m)>=0?l=d.isub(this.m):d.cmpn(0)<0&&(l=d.iadd(this.m)),l._forceRed(this)},p.prototype.invm=function(s){var f=this.imod(s._invmp(this.m).mul(this.r2));return f._forceRed(this)}})(typeof jp>"u"||jp,P4)});var L4=P((exports,module)=>{(function(){"use strict";var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&typeof module=="object"&&module.exports,AMD=typeof define=="function"&&define.amd,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(r){return Object.prototype.toString.call(r)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(r){return typeof r=="object"&&r.buffer&&r.buffer.constructor===ArrayBuffer});var createOutputMethod=function(r,e){return function(t){return new Sha256(e,!0).update(t)[r]()}},createMethod=function(r){var e=createOutputMethod("hex",r);NODE_JS&&(e=nodeWrap(e,r)),e.create=function(){return new Sha256(r)},e.update=function(i){return e.create().update(i)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createOutputMethod(n,r)}return e},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(r){if(typeof r=="string")return crypto.createHash(algorithm).update(r,"utf8").digest("hex");if(r==null)throw new Error(ERROR);return r.constructor===ArrayBuffer&&(r=new Uint8Array(r)),Array.isArray(r)||ArrayBuffer.isView(r)||r.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(r)).digest("hex"):method(r)};return nodeMethod},createHmacOutputMethod=function(r,e){return function(t,n){return new HmacSha256(t,e,!0).update(n)[r]()}},createHmacMethod=function(r){var e=createHmacOutputMethod("hex",r);e.create=function(i){return new HmacSha256(i,r)},e.update=function(i,o){return e.create(i).update(o)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createHmacOutputMethod(n,r)}return e};function Sha256(r,e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=r}Sha256.prototype.update=function(r){if(!this.finalized){var e,t=typeof r;if(t!=="string"){if(t==="object"){if(r===null)throw new Error(ERROR);if(ARRAY_BUFFER&&r.constructor===ArrayBuffer)r=new Uint8Array(r);else if(!Array.isArray(r)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(r)))throw new Error(ERROR)}else throw new Error(ERROR);e=!0}for(var n,i=0,o,a=r.length,c=this.blocks;i<a;){if(this.hashed&&(this.hashed=!1,c[0]=this.block,c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),e)for(o=this.start;i<a&&o<64;++i)c[o>>2]|=r[i]<<SHIFT[o++&3];else for(o=this.start;i<a&&o<64;++i)n=r.charCodeAt(i),n<128?c[o>>2]|=n<<SHIFT[o++&3]:n<2048?(c[o>>2]|=(192|n>>6)<<SHIFT[o++&3],c[o>>2]|=(128|n&63)<<SHIFT[o++&3]):n<55296||n>=57344?(c[o>>2]|=(224|n>>12)<<SHIFT[o++&3],c[o>>2]|=(128|n>>6&63)<<SHIFT[o++&3],c[o>>2]|=(128|n&63)<<SHIFT[o++&3]):(n=65536+((n&1023)<<10|r.charCodeAt(++i)&1023),c[o>>2]|=(240|n>>18)<<SHIFT[o++&3],c[o>>2]|=(128|n>>12&63)<<SHIFT[o++&3],c[o>>2]|=(128|n>>6&63)<<SHIFT[o++&3],c[o>>2]|=(128|n&63)<<SHIFT[o++&3]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=c[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var r=this.blocks,e=this.lastByteIndex;r[16]=this.block,r[e>>2]|=EXTRA[e&3],this.block=r[16],e>=56&&(this.hashed||this.hash(),r[0]=this.block,r[16]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=r[11]=r[12]=r[13]=r[14]=r[15]=0),r[14]=this.hBytes<<3|this.bytes>>>29,r[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var r=this.h0,e=this.h1,t=this.h2,n=this.h3,i=this.h4,o=this.h5,a=this.h6,c=this.h7,y=this.blocks,m,_,S,I,E,C,N,j,q,D,Q;for(m=16;m<64;++m)E=y[m-15],_=(E>>>7|E<<25)^(E>>>18|E<<14)^E>>>3,E=y[m-2],S=(E>>>17|E<<15)^(E>>>19|E<<13)^E>>>10,y[m]=y[m-16]+_+y[m-7]+S<<0;for(Q=e&t,m=0;m<64;m+=4)this.first?(this.is224?(j=300032,E=y[0]-1413257819,c=E-150054599<<0,n=E+24177077<<0):(j=704751109,E=y[0]-210244248,c=E-1521486534<<0,n=E+143694565<<0),this.first=!1):(_=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),S=(i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7),j=r&e,I=j^r&t^Q,N=i&o^~i&a,E=c+S+N+K[m]+y[m],C=_+I,c=n+E<<0,n=E+C<<0),_=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),S=(c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7),q=n&r,I=q^n&e^j,N=c&i^~c&o,E=a+S+N+K[m+1]+y[m+1],C=_+I,a=t+E<<0,t=E+C<<0,_=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),S=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),D=t&n,I=D^t&r^q,N=a&c^~a&i,E=o+S+N+K[m+2]+y[m+2],C=_+I,o=e+E<<0,e=E+C<<0,_=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),S=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),Q=e&t,I=Q^e&n^D,N=o&a^~o&c,E=i+S+N+K[m+3]+y[m+3],C=_+I,i=r+E<<0,r=E+C<<0;this.h0=this.h0+r<<0,this.h1=this.h1+e<<0,this.h2=this.h2+t<<0,this.h3=this.h3+n<<0,this.h4=this.h4+i<<0,this.h5=this.h5+o<<0,this.h6=this.h6+a<<0,this.h7=this.h7+c<<0},Sha256.prototype.hex=function(){this.finalize();var r=this.h0,e=this.h1,t=this.h2,n=this.h3,i=this.h4,o=this.h5,a=this.h6,c=this.h7,y=HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[i&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[o&15]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15];return this.is224||(y+=HEX_CHARS[c>>28&15]+HEX_CHARS[c>>24&15]+HEX_CHARS[c>>20&15]+HEX_CHARS[c>>16&15]+HEX_CHARS[c>>12&15]+HEX_CHARS[c>>8&15]+HEX_CHARS[c>>4&15]+HEX_CHARS[c&15]),y},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var r=this.h0,e=this.h1,t=this.h2,n=this.h3,i=this.h4,o=this.h5,a=this.h6,c=this.h7,y=[r>>24&255,r>>16&255,r>>8&255,r&255,e>>24&255,e>>16&255,e>>8&255,e&255,t>>24&255,t>>16&255,t>>8&255,t&255,n>>24&255,n>>16&255,n>>8&255,n&255,i>>24&255,i>>16&255,i>>8&255,i&255,o>>24&255,o>>16&255,o>>8&255,o&255,a>>24&255,a>>16&255,a>>8&255,a&255];return this.is224||y.push(c>>24&255,c>>16&255,c>>8&255,c&255),y},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var r=new ArrayBuffer(this.is224?28:32),e=new DataView(r);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),r};function HmacSha256(r,e,t){var n,i=typeof r;if(i==="string"){var o=[],a=r.length,c=0,y;for(n=0;n<a;++n)y=r.charCodeAt(n),y<128?o[c++]=y:y<2048?(o[c++]=192|y>>6,o[c++]=128|y&63):y<55296||y>=57344?(o[c++]=224|y>>12,o[c++]=128|y>>6&63,o[c++]=128|y&63):(y=65536+((y&1023)<<10|r.charCodeAt(++n)&1023),o[c++]=240|y>>18,o[c++]=128|y>>12&63,o[c++]=128|y>>6&63,o[c++]=128|y&63);r=o}else if(i==="object"){if(r===null)throw new Error(ERROR);if(ARRAY_BUFFER&&r.constructor===ArrayBuffer)r=new Uint8Array(r);else if(!Array.isArray(r)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(r)))throw new Error(ERROR)}else throw new Error(ERROR);r.length>64&&(r=new Sha256(e,!0).update(r).array());var m=[],_=[];for(n=0;n<64;++n){var S=r[n]||0;m[n]=92^S,_[n]=54^S}Sha256.call(this,e,t),this.update(_),this.oKeyPad=m,this.inner=!0,this.sharedMemory=t}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var r=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(r),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&define(function(){return exports}))})()});var k4=P((bH,Yu)=>{(function(){"use strict";var r="input is invalid type",e="finalize already called",t=typeof window=="object",n=t?window:{};n.JS_SHA512_NO_WINDOW&&(t=!1);var i=!t&&typeof self=="object",o=!n.JS_SHA512_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?n=global:i&&(n=self);var a=!n.JS_SHA512_NO_COMMON_JS&&typeof Yu=="object"&&Yu.exports,c=typeof define=="function"&&define.amd,y=!n.JS_SHA512_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",m="0123456789abcdef".split(""),_=[-2147483648,8388608,32768,128],S=[24,16,8,0],I=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],E=["hex","array","digest","arrayBuffer"],C=[];(n.JS_SHA512_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(L){return Object.prototype.toString.call(L)==="[object Array]"}),y&&(n.JS_SHA512_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(L){return typeof L=="object"&&L.buffer&&L.buffer.constructor===ArrayBuffer});var N=function(L,W){return function(A){return new Q(W,!0).update(A)[L]()}},j=function(L){var W=N("hex",L);W.create=function(){return new Q(L)},W.update=function(x){return W.create().update(x)};for(var A=0;A<E.length;++A){var M=E[A];W[M]=N(M,L)}return W},q=function(L,W){return function(A,M){return new oe(A,W,!0).update(M)[L]()}},D=function(L){var W=q("hex",L);W.create=function(x){return new oe(x,L)},W.update=function(x,u){return W.create(x).update(u)};for(var A=0;A<E.length;++A){var M=E[A];W[M]=q(M,L)}return W};function Q(L,W){W?(C[0]=C[1]=C[2]=C[3]=C[4]=C[5]=C[6]=C[7]=C[8]=C[9]=C[10]=C[11]=C[12]=C[13]=C[14]=C[15]=C[16]=C[17]=C[18]=C[19]=C[20]=C[21]=C[22]=C[23]=C[24]=C[25]=C[26]=C[27]=C[28]=C[29]=C[30]=C[31]=C[32]=0,this.blocks=C):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],L==384?(this.h0h=3418070365,this.h0l=3238371032,this.h1h=1654270250,this.h1l=914150663,this.h2h=2438529370,this.h2l=812702999,this.h3h=355462360,this.h3l=4144912697,this.h4h=1731405415,this.h4l=4290775857,this.h5h=2394180231,this.h5l=1750603025,this.h6h=3675008525,this.h6l=1694076839,this.h7h=1203062813,this.h7l=3204075428):L==256?(this.h0h=573645204,this.h0l=4230739756,this.h1h=2673172387,this.h1l=3360449730,this.h2h=596883563,this.h2l=1867755857,this.h3h=2520282905,this.h3l=1497426621,this.h4h=2519219938,this.h4l=2827943907,this.h5h=3193839141,this.h5l=1401305490,this.h6h=721525244,this.h6l=746961066,this.h7h=246885852,this.h7l=2177182882):L==224?(this.h0h=2352822216,this.h0l=424955298,this.h1h=1944164710,this.h1l=2312950998,this.h2h=502970286,this.h2l=855612546,this.h3h=1738396948,this.h3l=1479516111,this.h4h=258812777,this.h4l=2077511080,this.h5h=2011393907,this.h5l=79989058,this.h6h=1067287976,this.h6l=1780299464,this.h7h=286451373,this.h7l=2446758561):(this.h0h=1779033703,this.h0l=4089235720,this.h1h=3144134277,this.h1l=2227873595,this.h2h=1013904242,this.h2l=4271175723,this.h3h=2773480762,this.h3l=1595750129,this.h4h=1359893119,this.h4l=2917565137,this.h5h=2600822924,this.h5l=725511199,this.h6h=528734635,this.h6l=4215389547,this.h7h=1541459225,this.h7l=327033209),this.bits=L,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1}Q.prototype.update=function(L){if(this.finalized)throw new Error(e);var W,A=typeof L;if(A!=="string"){if(A==="object"){if(L===null)throw new Error(r);if(y&&L.constructor===ArrayBuffer)L=new Uint8Array(L);else if(!Array.isArray(L)&&(!y||!ArrayBuffer.isView(L)))throw new Error(r)}else throw new Error(r);W=!0}for(var M,x=0,u,p=L.length,h=this.blocks;x<p;){if(this.hashed&&(this.hashed=!1,h[0]=this.block,h[1]=h[2]=h[3]=h[4]=h[5]=h[6]=h[7]=h[8]=h[9]=h[10]=h[11]=h[12]=h[13]=h[14]=h[15]=h[16]=h[17]=h[18]=h[19]=h[20]=h[21]=h[22]=h[23]=h[24]=h[25]=h[26]=h[27]=h[28]=h[29]=h[30]=h[31]=h[32]=0),W)for(u=this.start;x<p&&u<128;++x)h[u>>2]|=L[x]<<S[u++&3];else for(u=this.start;x<p&&u<128;++x)M=L.charCodeAt(x),M<128?h[u>>2]|=M<<S[u++&3]:M<2048?(h[u>>2]|=(192|M>>6)<<S[u++&3],h[u>>2]|=(128|M&63)<<S[u++&3]):M<55296||M>=57344?(h[u>>2]|=(224|M>>12)<<S[u++&3],h[u>>2]|=(128|M>>6&63)<<S[u++&3],h[u>>2]|=(128|M&63)<<S[u++&3]):(M=65536+((M&1023)<<10|L.charCodeAt(++x)&1023),h[u>>2]|=(240|M>>18)<<S[u++&3],h[u>>2]|=(128|M>>12&63)<<S[u++&3],h[u>>2]|=(128|M>>6&63)<<S[u++&3],h[u>>2]|=(128|M&63)<<S[u++&3]);this.lastByteIndex=u,this.bytes+=u-this.start,u>=128?(this.block=h[32],this.start=u-128,this.hash(),this.hashed=!0):this.start=u}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this},Q.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var L=this.blocks,W=this.lastByteIndex;L[32]=this.block,L[W>>2]|=_[W&3],this.block=L[32],W>=112&&(this.hashed||this.hash(),L[0]=this.block,L[1]=L[2]=L[3]=L[4]=L[5]=L[6]=L[7]=L[8]=L[9]=L[10]=L[11]=L[12]=L[13]=L[14]=L[15]=L[16]=L[17]=L[18]=L[19]=L[20]=L[21]=L[22]=L[23]=L[24]=L[25]=L[26]=L[27]=L[28]=L[29]=L[30]=L[31]=L[32]=0),L[30]=this.hBytes<<3|this.bytes>>>29,L[31]=this.bytes<<3,this.hash()}},Q.prototype.hash=function(){var L=this.h0h,W=this.h0l,A=this.h1h,M=this.h1l,x=this.h2h,u=this.h2l,p=this.h3h,h=this.h3l,s=this.h4h,f=this.h4l,g=this.h5h,v=this.h5l,d=this.h6h,l=this.h6l,w=this.h7h,T=this.h7l,b=this.blocks,F,X,Z,re,fe,te,O,B,R,G,z,U,H,V,$,J,Y,ee,se,ae,ie,ce,_e,ue,le;for(F=32;F<160;F+=2)ae=b[F-30],ie=b[F-29],X=(ae>>>1|ie<<31)^(ae>>>8|ie<<24)^ae>>>7,Z=(ie>>>1|ae<<31)^(ie>>>8|ae<<24)^(ie>>>7|ae<<25),ae=b[F-4],ie=b[F-3],re=(ae>>>19|ie<<13)^(ie>>>29|ae<<3)^ae>>>6,fe=(ie>>>19|ae<<13)^(ae>>>29|ie<<3)^(ie>>>6|ae<<26),ae=b[F-32],ie=b[F-31],ce=b[F-14],_e=b[F-13],te=(_e&65535)+(ie&65535)+(Z&65535)+(fe&65535),O=(_e>>>16)+(ie>>>16)+(Z>>>16)+(fe>>>16)+(te>>>16),B=(ce&65535)+(ae&65535)+(X&65535)+(re&65535)+(O>>>16),R=(ce>>>16)+(ae>>>16)+(X>>>16)+(re>>>16)+(B>>>16),b[F]=R<<16|B&65535,b[F+1]=O<<16|te&65535;var je=L,ye=W,me=A,tt=M,pe=x,ge=u,ze=p,de=h,he=s,gt=f,be=g,ve=v,yt=d,we=l,xe=w,mt=T;for(J=me&pe,Y=tt&ge,F=0;F<160;F+=8)X=(je>>>28|ye<<4)^(ye>>>2|je<<30)^(ye>>>7|je<<25),Z=(ye>>>28|je<<4)^(je>>>2|ye<<30)^(je>>>7|ye<<25),re=(he>>>14|gt<<18)^(he>>>18|gt<<14)^(gt>>>9|he<<23),fe=(gt>>>14|he<<18)^(gt>>>18|he<<14)^(he>>>9|gt<<23),G=je&me,z=ye&tt,ee=G^je&pe^J,se=z^ye&ge^Y,ue=he&be^~he&yt,le=gt&ve^~gt&we,ae=b[F],ie=b[F+1],ce=I[F],_e=I[F+1],te=(_e&65535)+(ie&65535)+(le&65535)+(fe&65535)+(mt&65535),O=(_e>>>16)+(ie>>>16)+(le>>>16)+(fe>>>16)+(mt>>>16)+(te>>>16),B=(ce&65535)+(ae&65535)+(ue&65535)+(re&65535)+(xe&65535)+(O>>>16),R=(ce>>>16)+(ae>>>16)+(ue>>>16)+(re>>>16)+(xe>>>16)+(B>>>16),ae=R<<16|B&65535,ie=O<<16|te&65535,te=(se&65535)+(Z&65535),O=(se>>>16)+(Z>>>16)+(te>>>16),B=(ee&65535)+(X&65535)+(O>>>16),R=(ee>>>16)+(X>>>16)+(B>>>16),ce=R<<16|B&65535,_e=O<<16|te&65535,te=(de&65535)+(ie&65535),O=(de>>>16)+(ie>>>16)+(te>>>16),B=(ze&65535)+(ae&65535)+(O>>>16),R=(ze>>>16)+(ae>>>16)+(B>>>16),xe=R<<16|B&65535,mt=O<<16|te&65535,te=(_e&65535)+(ie&65535),O=(_e>>>16)+(ie>>>16)+(te>>>16),B=(ce&65535)+(ae&65535)+(O>>>16),R=(ce>>>16)+(ae>>>16)+(B>>>16),ze=R<<16|B&65535,de=O<<16|te&65535,X=(ze>>>28|de<<4)^(de>>>2|ze<<30)^(de>>>7|ze<<25),Z=(de>>>28|ze<<4)^(ze>>>2|de<<30)^(ze>>>7|de<<25),re=(xe>>>14|mt<<18)^(xe>>>18|mt<<14)^(mt>>>9|xe<<23),fe=(mt>>>14|xe<<18)^(mt>>>18|xe<<14)^(xe>>>9|mt<<23),U=ze&je,H=de&ye,ee=U^ze&me^G,se=H^de&tt^z,ue=xe&he^~xe&be,le=mt&gt^~mt&ve,ae=b[F+2],ie=b[F+3],ce=I[F+2],_e=I[F+3],te=(_e&65535)+(ie&65535)+(le&65535)+(fe&65535)+(we&65535),O=(_e>>>16)+(ie>>>16)+(le>>>16)+(fe>>>16)+(we>>>16)+(te>>>16),B=(ce&65535)+(ae&65535)+(ue&65535)+(re&65535)+(yt&65535)+(O>>>16),R=(ce>>>16)+(ae>>>16)+(ue>>>16)+(re>>>16)+(yt>>>16)+(B>>>16),ae=R<<16|B&65535,ie=O<<16|te&65535,te=(se&65535)+(Z&65535),O=(se>>>16)+(Z>>>16)+(te>>>16),B=(ee&65535)+(X&65535)+(O>>>16),R=(ee>>>16)+(X>>>16)+(B>>>16),ce=R<<16|B&65535,_e=O<<16|te&65535,te=(ge&65535)+(ie&65535),O=(ge>>>16)+(ie>>>16)+(te>>>16),B=(pe&65535)+(ae&65535)+(O>>>16),R=(pe>>>16)+(ae>>>16)+(B>>>16),yt=R<<16|B&65535,we=O<<16|te&65535,te=(_e&65535)+(ie&65535),O=(_e>>>16)+(ie>>>16)+(te>>>16),B=(ce&65535)+(ae&65535)+(O>>>16),R=(ce>>>16)+(ae>>>16)+(B>>>16),pe=R<<16|B&65535,ge=O<<16|te&65535,X=(pe>>>28|ge<<4)^(ge>>>2|pe<<30)^(ge>>>7|pe<<25),Z=(ge>>>28|pe<<4)^(pe>>>2|ge<<30)^(pe>>>7|ge<<25),re=(yt>>>14|we<<18)^(yt>>>18|we<<14)^(we>>>9|yt<<23),fe=(we>>>14|yt<<18)^(we>>>18|yt<<14)^(yt>>>9|we<<23),V=pe&ze,$=ge&de,ee=V^pe&je^U,se=$^ge&ye^H,ue=yt&xe^~yt&he,le=we&mt^~we&gt,ae=b[F+4],ie=b[F+5],ce=I[F+4],_e=I[F+5],te=(_e&65535)+(ie&65535)+(le&65535)+(fe&65535)+(ve&65535),O=(_e>>>16)+(ie>>>16)+(le>>>16)+(fe>>>16)+(ve>>>16)+(te>>>16),B=(ce&65535)+(ae&65535)+(ue&65535)+(re&65535)+(be&65535)+(O>>>16),R=(ce>>>16)+(ae>>>16)+(ue>>>16)+(re>>>16)+(be>>>16)+(B>>>16),ae=R<<16|B&65535,ie=O<<16|te&65535,te=(se&65535)+(Z&65535),O=(se>>>16)+(Z>>>16)+(te>>>16),B=(ee&65535)+(X&65535)+(O>>>16),R=(ee>>>16)+(X>>>16)+(B>>>16),ce=R<<16|B&65535,_e=O<<16|te&65535,te=(tt&65535)+(ie&65535),O=(tt>>>16)+(ie>>>16)+(te>>>16),B=(me&65535)+(ae&65535)+(O>>>16),R=(me>>>16)+(ae>>>16)+(B>>>16),be=R<<16|B&65535,ve=O<<16|te&65535,te=(_e&65535)+(ie&65535),O=(_e>>>16)+(ie>>>16)+(te>>>16),B=(ce&65535)+(ae&65535)+(O>>>16),R=(ce>>>16)+(ae>>>16)+(B>>>16),me=R<<16|B&65535,tt=O<<16|te&65535,X=(me>>>28|tt<<4)^(tt>>>2|me<<30)^(tt>>>7|me<<25),Z=(tt>>>28|me<<4)^(me>>>2|tt<<30)^(me>>>7|tt<<25),re=(be>>>14|ve<<18)^(be>>>18|ve<<14)^(ve>>>9|be<<23),fe=(ve>>>14|be<<18)^(ve>>>18|be<<14)^(be>>>9|ve<<23),J=me&pe,Y=tt&ge,ee=J^me&ze^V,se=Y^tt&de^$,ue=be&yt^~be&xe,le=ve&we^~ve&mt,ae=b[F+6],ie=b[F+7],ce=I[F+6],_e=I[F+7],te=(_e&65535)+(ie&65535)+(le&65535)+(fe&65535)+(gt&65535),O=(_e>>>16)+(ie>>>16)+(le>>>16)+(fe>>>16)+(gt>>>16)+(te>>>16),B=(ce&65535)+(ae&65535)+(ue&65535)+(re&65535)+(he&65535)+(O>>>16),R=(ce>>>16)+(ae>>>16)+(ue>>>16)+(re>>>16)+(he>>>16)+(B>>>16),ae=R<<16|B&65535,ie=O<<16|te&65535,te=(se&65535)+(Z&65535),O=(se>>>16)+(Z>>>16)+(te>>>16),B=(ee&65535)+(X&65535)+(O>>>16),R=(ee>>>16)+(X>>>16)+(B>>>16),ce=R<<16|B&65535,_e=O<<16|te&65535,te=(ye&65535)+(ie&65535),O=(ye>>>16)+(ie>>>16)+(te>>>16),B=(je&65535)+(ae&65535)+(O>>>16),R=(je>>>16)+(ae>>>16)+(B>>>16),he=R<<16|B&65535,gt=O<<16|te&65535,te=(_e&65535)+(ie&65535),O=(_e>>>16)+(ie>>>16)+(te>>>16),B=(ce&65535)+(ae&65535)+(O>>>16),R=(ce>>>16)+(ae>>>16)+(B>>>16),je=R<<16|B&65535,ye=O<<16|te&65535;te=(W&65535)+(ye&65535),O=(W>>>16)+(ye>>>16)+(te>>>16),B=(L&65535)+(je&65535)+(O>>>16),R=(L>>>16)+(je>>>16)+(B>>>16),this.h0h=R<<16|B&65535,this.h0l=O<<16|te&65535,te=(M&65535)+(tt&65535),O=(M>>>16)+(tt>>>16)+(te>>>16),B=(A&65535)+(me&65535)+(O>>>16),R=(A>>>16)+(me>>>16)+(B>>>16),this.h1h=R<<16|B&65535,this.h1l=O<<16|te&65535,te=(u&65535)+(ge&65535),O=(u>>>16)+(ge>>>16)+(te>>>16),B=(x&65535)+(pe&65535)+(O>>>16),R=(x>>>16)+(pe>>>16)+(B>>>16),this.h2h=R<<16|B&65535,this.h2l=O<<16|te&65535,te=(h&65535)+(de&65535),O=(h>>>16)+(de>>>16)+(te>>>16),B=(p&65535)+(ze&65535)+(O>>>16),R=(p>>>16)+(ze>>>16)+(B>>>16),this.h3h=R<<16|B&65535,this.h3l=O<<16|te&65535,te=(f&65535)+(gt&65535),O=(f>>>16)+(gt>>>16)+(te>>>16),B=(s&65535)+(he&65535)+(O>>>16),R=(s>>>16)+(he>>>16)+(B>>>16),this.h4h=R<<16|B&65535,this.h4l=O<<16|te&65535,te=(v&65535)+(ve&65535),O=(v>>>16)+(ve>>>16)+(te>>>16),B=(g&65535)+(be&65535)+(O>>>16),R=(g>>>16)+(be>>>16)+(B>>>16),this.h5h=R<<16|B&65535,this.h5l=O<<16|te&65535,te=(l&65535)+(we&65535),O=(l>>>16)+(we>>>16)+(te>>>16),B=(d&65535)+(yt&65535)+(O>>>16),R=(d>>>16)+(yt>>>16)+(B>>>16),this.h6h=R<<16|B&65535,this.h6l=O<<16|te&65535,te=(T&65535)+(mt&65535),O=(T>>>16)+(mt>>>16)+(te>>>16),B=(w&65535)+(xe&65535)+(O>>>16),R=(w>>>16)+(xe>>>16)+(B>>>16),this.h7h=R<<16|B&65535,this.h7l=O<<16|te&65535},Q.prototype.hex=function(){this.finalize();var L=this.h0h,W=this.h0l,A=this.h1h,M=this.h1l,x=this.h2h,u=this.h2l,p=this.h3h,h=this.h3l,s=this.h4h,f=this.h4l,g=this.h5h,v=this.h5l,d=this.h6h,l=this.h6l,w=this.h7h,T=this.h7l,b=this.bits,F=m[L>>28&15]+m[L>>24&15]+m[L>>20&15]+m[L>>16&15]+m[L>>12&15]+m[L>>8&15]+m[L>>4&15]+m[L&15]+m[W>>28&15]+m[W>>24&15]+m[W>>20&15]+m[W>>16&15]+m[W>>12&15]+m[W>>8&15]+m[W>>4&15]+m[W&15]+m[A>>28&15]+m[A>>24&15]+m[A>>20&15]+m[A>>16&15]+m[A>>12&15]+m[A>>8&15]+m[A>>4&15]+m[A&15]+m[M>>28&15]+m[M>>24&15]+m[M>>20&15]+m[M>>16&15]+m[M>>12&15]+m[M>>8&15]+m[M>>4&15]+m[M&15]+m[x>>28&15]+m[x>>24&15]+m[x>>20&15]+m[x>>16&15]+m[x>>12&15]+m[x>>8&15]+m[x>>4&15]+m[x&15]+m[u>>28&15]+m[u>>24&15]+m[u>>20&15]+m[u>>16&15]+m[u>>12&15]+m[u>>8&15]+m[u>>4&15]+m[u&15]+m[p>>28&15]+m[p>>24&15]+m[p>>20&15]+m[p>>16&15]+m[p>>12&15]+m[p>>8&15]+m[p>>4&15]+m[p&15];return b>=256&&(F+=m[h>>28&15]+m[h>>24&15]+m[h>>20&15]+m[h>>16&15]+m[h>>12&15]+m[h>>8&15]+m[h>>4&15]+m[h&15]),b>=384&&(F+=m[s>>28&15]+m[s>>24&15]+m[s>>20&15]+m[s>>16&15]+m[s>>12&15]+m[s>>8&15]+m[s>>4&15]+m[s&15]+m[f>>28&15]+m[f>>24&15]+m[f>>20&15]+m[f>>16&15]+m[f>>12&15]+m[f>>8&15]+m[f>>4&15]+m[f&15]+m[g>>28&15]+m[g>>24&15]+m[g>>20&15]+m[g>>16&15]+m[g>>12&15]+m[g>>8&15]+m[g>>4&15]+m[g&15]+m[v>>28&15]+m[v>>24&15]+m[v>>20&15]+m[v>>16&15]+m[v>>12&15]+m[v>>8&15]+m[v>>4&15]+m[v&15]),b==512&&(F+=m[d>>28&15]+m[d>>24&15]+m[d>>20&15]+m[d>>16&15]+m[d>>12&15]+m[d>>8&15]+m[d>>4&15]+m[d&15]+m[l>>28&15]+m[l>>24&15]+m[l>>20&15]+m[l>>16&15]+m[l>>12&15]+m[l>>8&15]+m[l>>4&15]+m[l&15]+m[w>>28&15]+m[w>>24&15]+m[w>>20&15]+m[w>>16&15]+m[w>>12&15]+m[w>>8&15]+m[w>>4&15]+m[w&15]+m[T>>28&15]+m[T>>24&15]+m[T>>20&15]+m[T>>16&15]+m[T>>12&15]+m[T>>8&15]+m[T>>4&15]+m[T&15]),F},Q.prototype.toString=Q.prototype.hex,Q.prototype.digest=function(){this.finalize();var L=this.h0h,W=this.h0l,A=this.h1h,M=this.h1l,x=this.h2h,u=this.h2l,p=this.h3h,h=this.h3l,s=this.h4h,f=this.h4l,g=this.h5h,v=this.h5l,d=this.h6h,l=this.h6l,w=this.h7h,T=this.h7l,b=this.bits,F=[L>>24&255,L>>16&255,L>>8&255,L&255,W>>24&255,W>>16&255,W>>8&255,W&255,A>>24&255,A>>16&255,A>>8&255,A&255,M>>24&255,M>>16&255,M>>8&255,M&255,x>>24&255,x>>16&255,x>>8&255,x&255,u>>24&255,u>>16&255,u>>8&255,u&255,p>>24&255,p>>16&255,p>>8&255,p&255];return b>=256&&F.push(h>>24&255,h>>16&255,h>>8&255,h&255),b>=384&&F.push(s>>24&255,s>>16&255,s>>8&255,s&255,f>>24&255,f>>16&255,f>>8&255,f&255,g>>24&255,g>>16&255,g>>8&255,g&255,v>>24&255,v>>16&255,v>>8&255,v&255),b==512&&F.push(d>>24&255,d>>16&255,d>>8&255,d&255,l>>24&255,l>>16&255,l>>8&255,l&255,w>>24&255,w>>16&255,w>>8&255,w&255,T>>24&255,T>>16&255,T>>8&255,T&255),F},Q.prototype.array=Q.prototype.digest,Q.prototype.arrayBuffer=function(){this.finalize();var L=this.bits,W=new ArrayBuffer(L/8),A=new DataView(W);return A.setUint32(0,this.h0h),A.setUint32(4,this.h0l),A.setUint32(8,this.h1h),A.setUint32(12,this.h1l),A.setUint32(16,this.h2h),A.setUint32(20,this.h2l),A.setUint32(24,this.h3h),L>=256&&A.setUint32(28,this.h3l),L>=384&&(A.setUint32(32,this.h4h),A.setUint32(36,this.h4l),A.setUint32(40,this.h5h),A.setUint32(44,this.h5l)),L==512&&(A.setUint32(48,this.h6h),A.setUint32(52,this.h6l),A.setUint32(56,this.h7h),A.setUint32(60,this.h7l)),W},Q.prototype.clone=function(){var L=new Q(this.bits,!1);return this.copyTo(L),L},Q.prototype.copyTo=function(L){var W=0,A=["h0h","h0l","h1h","h1l","h2h","h2l","h3h","h3l","h4h","h4l","h5h","h5l","h6h","h6l","h7h","h7l","start","bytes","hBytes","finalized","hashed","lastByteIndex"];for(W=0;W<A.length;++W)L[A[W]]=this[A[W]];for(W=0;W<this.blocks.length;++W)L.blocks[W]=this.blocks[W]};function oe(L,W,A){var M,x=typeof L;if(x!=="string"){if(x==="object"){if(L===null)throw new Error(r);if(y&&L.constructor===ArrayBuffer)L=new Uint8Array(L);else if(!Array.isArray(L)&&(!y||!ArrayBuffer.isView(L)))throw new Error(r)}else throw new Error(r);M=!0}var u=L.length;if(!M){for(var p=[],u=L.length,h=0,s,f=0;f<u;++f)s=L.charCodeAt(f),s<128?p[h++]=s:s<2048?(p[h++]=192|s>>6,p[h++]=128|s&63):s<55296||s>=57344?(p[h++]=224|s>>12,p[h++]=128|s>>6&63,p[h++]=128|s&63):(s=65536+((s&1023)<<10|L.charCodeAt(++f)&1023),p[h++]=240|s>>18,p[h++]=128|s>>12&63,p[h++]=128|s>>6&63,p[h++]=128|s&63);L=p}L.length>128&&(L=new Q(W,!0).update(L).array());for(var g=[],v=[],f=0;f<128;++f){var d=L[f]||0;g[f]=92^d,v[f]=54^d}Q.call(this,W,A),this.update(v),this.oKeyPad=g,this.inner=!0,this.sharedMemory=A}oe.prototype=new Q,oe.prototype.finalize=function(){if(Q.prototype.finalize.call(this),this.inner){this.inner=!1;var L=this.array();Q.call(this,this.bits,this.sharedMemory),this.update(this.oKeyPad),this.update(L),Q.prototype.finalize.call(this)}},oe.prototype.clone=function(){var L=new oe([],this.bits,!1);this.copyTo(L),L.inner=this.inner;for(var W=0;W<this.oKeyPad.length;++W)L.oKeyPad[W]=this.oKeyPad[W];return L};var k=j(512);k.sha512=k,k.sha384=j(384),k.sha512_256=j(256),k.sha512_224=j(224),k.sha512.hmac=D(512),k.sha384.hmac=D(384),k.sha512_256.hmac=D(256),k.sha512_224.hmac=D(224),a?Yu.exports=k:(n.sha512=k.sha512,n.sha384=k.sha384,n.sha512_256=k.sha512_256,n.sha512_224=k.sha512_224,c&&define(function(){return k}))})()});var G4=P((vH,H4)=>{var ik=Up(),$p=N4(),{sha256:D4}=L4(),{sha512:U4}=k4(),kt=new ik.ec("secp256k1");function j4(r){return new Uint8Array([(r&4278190080)>>24,(r&16711680)>>16,(r&65280)>>8,r&255])}var q4=new $p(1);function ok(r){let e=kt.n.bitLength()+7>>3;if(kt.g.mul(10),(r[0]&-2)!=2)return[null,null];if(r.length!=1+e)return[null,null];let t=new $p(r.slice(1,1+e));try{let n=kt.curve.pointFromX(t);return[n.x,n.y]}catch{return[null,null]}}function $4(r){let e=null,t=null,n=kt.n.bitLength()+7>>3,i=0;for(;e==null&&i<100;){let o=U4.array(new Uint8Array([...j4(i),...r])),a=[2,...o];[e,t]=ok(a.slice(0,n+1)),i++}return kt.curve.point(e,t)}function W4(r){let e=kt.n.bitLength()+7>>3,t=0;for(;;){let n=U4.array(new Uint8Array([...j4(t),...r])),i=new $p(n.slice(0,e));if(i.cmp(kt.curve.n.sub(q4))==-1)return i.add(q4);t++}}function sk(r,e){let t=kt.keyFromPrivate(r),i=kt.genKeyPair().getPrivate(),o=$4(e),c=o.mul(r).encode(),y=kt.curve.g.mul(i),m=o.mul(i),_=[...kt.curve.g.encode(),...o.encode(),...t.getPublic().encode(),...c,...y.encode(),...m.encode()],S=W4(_),I=i.sub(S.mul(t.getPrivate())).umod(kt.curve.n),E=D4.array(new Uint8Array(c)),C=[...new Array(32-S.byteLength()).fill(0),...S.toArray(),...new Array(32-I.byteLength()).fill(0),...I.toArray(),...c];return[E,C]}function ak(r,e,t){let n=kt.keyFromPublic(r);if(t.length!==64+65)throw new Error("invalid vrf");let i=t.slice(0,32),o=t.slice(32,64),a=t.slice(64,64+65),c=fk(a);if(!c)throw new Error("invalid vrf");let y=kt.curve.g.mul(o),m=n.getPublic().mul(i),_=y.add(m),S=$4(e),I=S.mul(o),E=c.mul(i),C=I.add(E),N=[...kt.curve.g.encode(),...S.encode(),...n.getPublic().encode(),...a,..._.encode(),...C.encode()],j=W4(N),q=[...new Array(32-j.byteLength()).fill(0),...j.toArray()],D=!0;for(let Q=0;Q<q.length;Q++)i[Q]!==q[Q]&&(D=!1);if(!D)throw new Error("invalid vrf");return D4.array(new Uint8Array(a))}function fk(r){try{return kt.curve.decodePoint(r)}catch{return null}}H4.exports={Evaluate:sk,ProofHoHash:ak}});var f8=P(()=>{});var h8=P((sg,l8)=>{"use strict";var yo=og();yo.configure=og;yo.stringify=yo;yo.default=yo;sg.stringify=yo;sg.configure=og;l8.exports=yo;var Ek=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/,Ak=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/g,ig=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000b","\\f","\\r","\\u000e","\\u000f","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001a","\\u001b","\\u001c","\\u001d","\\u001e","\\u001f","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\"];function Fk(r){if(r.length===2){let t=r.charCodeAt(1);return`${r[0]}\\u${t.toString(16)}`}let e=r.charCodeAt(0);return ig.length>e?ig[e]:`\\u${e.toString(16)}`}function gi(r){if(r.length<5e3&&!Ek.test(r))return r;if(r.length>100)return r.replace(Ak,Fk);let e="",t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);if(i===34||i===92||i<32)e+=`${r.slice(t,n)}${ig[i]}`,t=n+1;else if(i>=55296&&i<=57343){if(i<=56319&&n+1<r.length){let o=r.charCodeAt(n+1);if(o>=56320&&o<=57343){n++;continue}}e+=`${r.slice(t,n)}${`\\u${i.toString(16)}`}`,t=n+1}}return e+=r.slice(t),e}function tg(r){if(r.length>200)return r.sort();for(let e=1;e<r.length;e++){let t=r[e],n=e;for(;n!==0&&r[n-1]>t;)r[n]=r[n-1],n--;r[n]=t}return r}var Tk=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Uint8Array)),Symbol.toStringTag).get;function rg(r){return Tk.call(r)!==void 0&&r.length!==0}function ng(r,e,t){r.length<t&&(t=r.length);let n=e===","?"":" ",i=`"0":${n}${r[0]}`;for(let o=1;o<t;o++)i+=`${e}"${o}":${n}${r[o]}`;return i}function Mk(r){if(r&&Object.prototype.hasOwnProperty.call(r,"circularValue")){var e=r.circularValue;if(typeof e=="string")return`"${e}"`;if(e==null)return e;if(e===Error||e===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function c8(r,e){if(r&&Object.prototype.hasOwnProperty.call(r,e)){var t=r[e];if(typeof t!="boolean")throw new TypeError(`The "${e}" argument must be of type boolean`)}return t===void 0?!0:t}function u8(r,e){if(r&&Object.prototype.hasOwnProperty.call(r,e)){var t=r[e];if(typeof t!="number")throw new TypeError(`The "${e}" argument must be of type number`);if(!Number.isInteger(t))throw new TypeError(`The "${e}" argument must be an integer`);if(t<1)throw new RangeError(`The "${e}" argument must be >= 1`)}return t===void 0?1/0:t}function go(r){return r===1?"1 item":`${r} items`}function Ik(r){let e=new Set;for(let t of r)typeof t=="string"?e.add(t):typeof t=="number"&&e.add(String(t));return e}function og(r){let e=Mk(r),t=c8(r,"bigint"),n=c8(r,"deterministic"),i=u8(r,"maximumDepth"),o=u8(r,"maximumBreadth");function a(S,I,E,C,N,j){let q=I[S];switch(typeof q=="object"&&q!==null&&typeof q.toJSON=="function"&&(q=q.toJSON(S)),q=C.call(I,S,q),typeof q){case"string":return`"${gi(q)}"`;case"object":{if(q===null)return"null";if(E.indexOf(q)!==-1)return e;let D="",Q=",",oe=j;if(Array.isArray(q)){if(q.length===0)return"[]";if(i<E.length+1)return'"[Array]"';E.push(q),N!==""&&(j+=N,D+=`
${j}`,Q=`,
${j}`);let x=Math.min(q.length,o),u=0;for(;u<x-1;u++){let h=a(u,q,E,C,N,j);D+=h!==void 0?h:"null",D+=Q}let p=a(u,q,E,C,N,j);if(D+=p!==void 0?p:"null",q.length-1>o){let h=q.length-o-1;D+=`${Q}"... ${go(h)} not stringified"`}return N!==""&&(D+=`
${oe}`),E.pop(),`[${D}]`}let k=Object.keys(q),L=k.length;if(L===0)return"{}";if(i<E.length+1)return'"[Object]"';let W="",A="";N!==""&&(j+=N,Q=`,
${j}`,W=" ");let M=Math.min(L,o);rg(q)&&(D+=ng(q,Q,o),k=k.slice(q.length),M-=q.length,A=Q),n&&(k=tg(k)),E.push(q);for(let x=0;x<M;x++){let u=k[x],p=a(u,q,E,C,N,j);p!==void 0&&(D+=`${A}"${gi(u)}":${W}${p}`,A=Q)}if(L>o){let x=L-o;D+=`${A}"...":${W}"${go(x)} not stringified"`,A=Q}return N!==""&&A.length>1&&(D=`
${j}${D}
${oe}`),E.pop(),`{${D}}`}case"number":return isFinite(q)?String(q):"null";case"boolean":return q===!0?"true":"false";case"bigint":return t?String(q):void 0}}function c(S,I,E,C,N,j){switch(typeof I=="object"&&I!==null&&typeof I.toJSON=="function"&&(I=I.toJSON(S)),typeof I){case"string":return`"${gi(I)}"`;case"object":{if(I===null)return"null";if(E.indexOf(I)!==-1)return e;let q=j,D="",Q=",";if(Array.isArray(I)){if(I.length===0)return"[]";if(i<E.length+1)return'"[Array]"';E.push(I),N!==""&&(j+=N,D+=`
${j}`,Q=`,
${j}`);let L=Math.min(I.length,o),W=0;for(;W<L-1;W++){let M=c(W,I[W],E,C,N,j);D+=M!==void 0?M:"null",D+=Q}let A=c(W,I[W],E,C,N,j);if(D+=A!==void 0?A:"null",I.length-1>o){let M=I.length-o-1;D+=`${Q}"... ${go(M)} not stringified"`}return N!==""&&(D+=`
${q}`),E.pop(),`[${D}]`}if(C.size===0)return"{}";E.push(I);let oe="";N!==""&&(j+=N,Q=`,
${j}`,oe=" ");let k="";for(let L of C){let W=c(L,I[L],E,C,N,j);W!==void 0&&(D+=`${k}"${gi(L)}":${oe}${W}`,k=Q)}return N!==""&&k.length>1&&(D=`
${j}${D}
${q}`),E.pop(),`{${D}}`}case"number":return isFinite(I)?String(I):"null";case"boolean":return I===!0?"true":"false";case"bigint":return t?String(I):void 0}}function y(S,I,E,C,N){switch(typeof I){case"string":return`"${gi(I)}"`;case"object":{if(I===null)return"null";if(typeof I.toJSON=="function"){if(I=I.toJSON(S),typeof I!="object")return y(S,I,E,C,N);if(I===null)return"null"}if(E.indexOf(I)!==-1)return e;let j=N;if(Array.isArray(I)){if(I.length===0)return"[]";if(i<E.length+1)return'"[Array]"';E.push(I),N+=C;let W=`
${N}`,A=`,
${N}`,M=Math.min(I.length,o),x=0;for(;x<M-1;x++){let p=y(x,I[x],E,C,N);W+=p!==void 0?p:"null",W+=A}let u=y(x,I[x],E,C,N);if(W+=u!==void 0?u:"null",I.length-1>o){let p=I.length-o-1;W+=`${A}"... ${go(p)} not stringified"`}return W+=`
${j}`,E.pop(),`[${W}]`}let q=Object.keys(I),D=q.length;if(D===0)return"{}";if(i<E.length+1)return'"[Object]"';N+=C;let Q=`,
${N}`,oe="",k="",L=Math.min(D,o);rg(I)&&(oe+=ng(I,Q,o),q=q.slice(I.length),L-=I.length,k=Q),n&&(q=tg(q)),E.push(I);for(let W=0;W<L;W++){let A=q[W],M=y(A,I[A],E,C,N);M!==void 0&&(oe+=`${k}"${gi(A)}": ${M}`,k=Q)}if(D>o){let W=D-o;oe+=`${k}"...": "${go(W)} not stringified"`,k=Q}return k!==""&&(oe=`
${N}${oe}
${j}`),E.pop(),`{${oe}}`}case"number":return isFinite(I)?String(I):"null";case"boolean":return I===!0?"true":"false";case"bigint":return t?String(I):void 0}}function m(S,I,E){switch(typeof I){case"string":return`"${gi(I)}"`;case"object":{if(I===null)return"null";if(typeof I.toJSON=="function"){if(I=I.toJSON(S),typeof I!="object")return m(S,I,E);if(I===null)return"null"}if(E.indexOf(I)!==-1)return e;let C="";if(Array.isArray(I)){if(I.length===0)return"[]";if(i<E.length+1)return'"[Array]"';E.push(I);let Q=Math.min(I.length,o),oe=0;for(;oe<Q-1;oe++){let L=m(oe,I[oe],E);C+=L!==void 0?L:"null",C+=","}let k=m(oe,I[oe],E);if(C+=k!==void 0?k:"null",I.length-1>o){let L=I.length-o-1;C+=`,"... ${go(L)} not stringified"`}return E.pop(),`[${C}]`}let N=Object.keys(I),j=N.length;if(j===0)return"{}";if(i<E.length+1)return'"[Object]"';let q="",D=Math.min(j,o);rg(I)&&(C+=ng(I,",",o),N=N.slice(I.length),D-=I.length,q=","),n&&(N=tg(N)),E.push(I);for(let Q=0;Q<D;Q++){let oe=N[Q],k=m(oe,I[oe],E);k!==void 0&&(C+=`${q}"${gi(oe)}":${k}`,q=",")}if(j>o){let Q=j-o;C+=`${q}"...":"${go(Q)} not stringified"`}return E.pop(),`{${C}}`}case"number":return isFinite(I)?String(I):"null";case"boolean":return I===!0?"true":"false";case"bigint":return t?String(I):void 0}}function _(S,I,E){if(arguments.length>1){let C="";if(typeof E=="number"?C=" ".repeat(Math.min(E,10)):typeof E=="string"&&(C=E.slice(0,10)),I!=null){if(typeof I=="function")return a("",{"":S},[],I,C,"");if(Array.isArray(I))return c("",S,[],Ik(I),C,"")}if(C.length!==0)return y("",S,[],C,"")}return m("",S,[])}return _}});var cg=P((fg,y8)=>{var cl=Hn(),ln=cl.Buffer;function g8(r,e){for(var t in r)e[t]=r[t]}ln.from&&ln.alloc&&ln.allocUnsafe&&ln.allocUnsafeSlow?y8.exports=cl:(g8(cl,fg),fg.Buffer=bo);function bo(r,e,t){return ln(r,e,t)}bo.prototype=Object.create(ln.prototype);g8(ln,bo);bo.from=function(r,e,t){if(typeof r=="number")throw new TypeError("Argument must not be a number");return ln(r,e,t)};bo.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=ln(r);return e!==void 0?typeof t=="string"?n.fill(e,t):n.fill(e):n.fill(0),n};bo.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return ln(r)};bo.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return cl.SlowBuffer(r)}});var lg=P((PG,m8)=>{var ug=cg().Buffer;m8.exports=class{constructor(e=ug.from([])){this.buffer=e}read(e){let t=this.buffer.subarray(0,e);return this.buffer=this.buffer.subarray(e),t}write(e){e=ug.from(e),this.buffer=ug.concat([this.buffer,e])}}});var S8=P((NG,_8)=>{var hg=Wt(),b8=lg();_8.exports={encode:Ck,decode:Bk,read:v8,readBn:w8,write:x8};function v8(r){return w8(r).toString()}function w8(r){let e=new hg(0),t=0,n;for(;n=r.read(1)[0],e.ior(new hg(n&127).shln(t)),n>>7!==0;)t+=7;return e}function x8(r,e){let t=new hg(r);for(;;){let n=t.maskn(7).toNumber();if(t.ishrn(7),t.isZero()){e.write([n]);break}else e.write([n|128])}}function Ck(r){let e=new b8;return x8(r,e),e.buffer}function Bk(r){let e=new b8(r);return v8(e)}});var I8=P((LG,M8)=>{var dg=Wt(),E8=lg();M8.exports={encode:Rk,decode:Pk,write:T8,read:A8,readBn:F8};function A8(r){return F8(r).toString()}function F8(r){let e=new dg(0),t=0,n;for(;n=r.read(1)[0],e.ior(new dg(n&127).shln(t)),t+=7,n>>7!==0;);return n&64&&e.setn(t),e.fromTwos(t)}function T8(r,e){let t=new dg(r),n=t.isNeg();for(n&&(t=t.toTwos(t.bitLength()+8));;){let o=t.maskn(7).toNumber();if(t.ishrn(7),i(t)&&(o&64)!==0||t.isZero()&&(o&64)===0){e.write([o]);break}else e.write([o|128])}function i(o){return n&&o.toString(2).indexOf("0")<0}}function Rk(r){let e=new E8;return T8(r,e),e.buffer}function Pk(r){let e=new E8(r);return A8(e)}});var ul=P(pg=>{pg.unsigned=S8();pg.signed=I8()});var ll=P((DG,O8)=>{var gg=cg().Buffer;O8.exports=class{constructor(e=gg.from([])){this.buffer=e,this._bytesRead=0,this._bytesWrote=0}read(e){this._bytesRead+=e;let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}write(e){e=gg.from(e),this._bytesWrote+=e.length,this.buffer=gg.concat([this.buffer,e])}get end(){return!this.buffer.length}get bytesRead(){return this._bytesRead}get bytesWrote(){return this._bytesWrote}}});var hl=P((UG,Nk)=>{Nk.exports={block:"block_type",loop:"block_type",if:"block_type",br:"varuint32",br_if:"varuint32",br_table:"br_table",call:"varuint32",call_indirect:"call_indirect",get_local:"varuint32",set_local:"varuint32",tee_local:"varuint32",get_global:"varuint32",set_global:"varuint32",load:"memory_immediate",load8_s:"memory_immediate",load8_u:"memory_immediate",load16_s:"memory_immediate",load16_u:"memory_immediate",load32_s:"memory_immediate",load32_u:"memory_immediate",store:"memory_immediate",store8:"memory_immediate",store16:"memory_immediate",store32:"memory_immediate",current_memory:"varuint1",grow_memory:"varuint1",i32:"varint32",i64:"varint64",f32:"uint32",f64:"uint64"}});var yg=P((jG,R8)=>{var qe=ul(),B8=ll(),Lk=hl(),ft=R8.exports=(r,e)=>{let t=new B8(r);return ft.parse(t,e)},vo=ft.LANGUAGE_TYPES={127:"i32",126:"i64",125:"f32",124:"f64",112:"anyFunc",96:"func",64:"block_type"},C8=ft.EXTERNAL_KIND={0:"function",1:"table",2:"memory",3:"global"};ft.parsePreramble=r=>{let e={};return e.name="preramble",e.magic=[...r.read(4)],e.version=[...r.read(4)],e};ft.parseSectionHeader=r=>{let e=r.read(1)[0],t=qe.unsigned.readBn(r).toNumber();return{id:e,name:qk[e],size:t}};var kk=ft.OPCODES={0:"unreachable",1:"nop",2:"block",3:"loop",4:"if",5:"else",11:"end",12:"br",13:"br_if",14:"br_table",15:"return",16:"call",17:"call_indirect",26:"drop",27:"select",32:"get_local",33:"set_local",34:"tee_local",35:"get_global",36:"set_global",40:"i32.load",41:"i64.load",42:"f32.load",43:"f64.load",44:"i32.load8_s",45:"i32.load8_u",46:"i32.load16_s",47:"i32.load16_u",48:"i64.load8_s",49:"i64.load8_u",50:"i64.load16_s",51:"i64.load16_u",52:"i64.load32_s",53:"i64.load32_u",54:"i32.store",55:"i64.store",56:"f32.store",57:"f64.store",58:"i32.store8",59:"i32.store16",60:"i64.store8",61:"i64.store16",62:"i64.store32",63:"current_memory",64:"grow_memory",65:"i32.const",66:"i64.const",67:"f32.const",68:"f64.const",69:"i32.eqz",70:"i32.eq",71:"i32.ne",72:"i32.lt_s",73:"i32.lt_u",74:"i32.gt_s",75:"i32.gt_u",76:"i32.le_s",77:"i32.le_u",78:"i32.ge_s",79:"i32.ge_u",80:"i64.eqz",81:"i64.eq",82:"i64.ne",83:"i64.lt_s",84:"i64.lt_u",85:"i64.gt_s",86:"i64.gt_u",87:"i64.le_s",88:"i64.le_u",89:"i64.ge_s",90:"i64.ge_u",91:"f32.eq",92:"f32.ne",93:"f32.lt",94:"f32.gt",95:"f32.le",96:"f32.ge",97:"f64.eq",98:"f64.ne",99:"f64.lt",100:"f64.gt",101:"f64.le",102:"f64.ge",103:"i32.clz",104:"i32.ctz",105:"i32.popcnt",106:"i32.add",107:"i32.sub",108:"i32.mul",109:"i32.div_s",110:"i32.div_u",111:"i32.rem_s",112:"i32.rem_u",113:"i32.and",114:"i32.or",115:"i32.xor",116:"i32.shl",117:"i32.shr_s",118:"i32.shr_u",119:"i32.rotl",120:"i32.rotr",121:"i64.clz",122:"i64.ctz",123:"i64.popcnt",124:"i64.add",125:"i64.sub",126:"i64.mul",127:"i64.div_s",128:"i64.div_u",129:"i64.rem_s",130:"i64.rem_u",131:"i64.and",132:"i64.or",133:"i64.xor",134:"i64.shl",135:"i64.shr_s",136:"i64.shr_u",137:"i64.rotl",138:"i64.rotr",139:"f32.abs",140:"f32.neg",141:"f32.ceil",142:"f32.floor",143:"f32.trunc",144:"f32.nearest",145:"f32.sqrt",146:"f32.add",147:"f32.sub",148:"f32.mul",149:"f32.div",150:"f32.min",151:"f32.max",152:"f32.copysign",153:"f64.abs",154:"f64.neg",155:"f64.ceil",156:"f64.floor",157:"f64.trunc",158:"f64.nearest",159:"f64.sqrt",160:"f64.add",161:"f64.sub",162:"f64.mul",163:"f64.div",164:"f64.min",165:"f64.max",166:"f64.copysign",167:"i32.wrap/i64",168:"i32.trunc_s/f32",169:"i32.trunc_u/f32",170:"i32.trunc_s/f64",171:"i32.trunc_u/f64",172:"i64.extend_s/i32",173:"i64.extend_u/i32",174:"i64.trunc_s/f32",175:"i64.trunc_u/f32",176:"i64.trunc_s/f64",177:"i64.trunc_u/f64",178:"f32.convert_s/i32",179:"f32.convert_u/i32",180:"f32.convert_s/i64",181:"f32.convert_u/i64",182:"f32.demote/f64",183:"f64.convert_s/i32",184:"f64.convert_u/i32",185:"f64.convert_s/i64",186:"f64.convert_u/i64",187:"f64.promote/f32",188:"i32.reinterpret/f32",189:"i64.reinterpret/f64",190:"f32.reinterpret/i32",191:"f64.reinterpret/i64"},qk=ft.SECTION_IDS={0:"custom",1:"type",2:"import",3:"function",4:"table",5:"memory",6:"global",7:"export",8:"start",9:"element",10:"code",11:"data"};ft.immediataryParsers={varuint1:r=>r.read(1)[0],varuint32:r=>qe.unsigned.read(r),varint32:r=>qe.signed.read(r),varint64:r=>qe.signed.read(r),uint32:r=>[...r.read(4)],uint64:r=>[...r.read(8)],block_type:r=>{let e=r.read(1)[0];return vo[e]},br_table:r=>{let e={targets:[]},t=qe.unsigned.readBn(r).toNumber();for(let n=0;n<t;n++){let i=qe.unsigned.readBn(r).toNumber();e.targets.push(i)}return e.defaultTarget=qe.unsigned.readBn(r).toNumber(),e},call_indirect:r=>{let e={};return e.index=qe.unsigned.readBn(r).toNumber(),e.reserved=r.read(1)[0],e},memory_immediate:r=>{let e={};return e.flags=qe.unsigned.readBn(r).toNumber(),e.offset=qe.unsigned.readBn(r).toNumber(),e}};ft.typeParsers={function:r=>qe.unsigned.readBn(r).toNumber(),table:r=>{let e={},t=r.read(1)[0];return e.elementType=vo[t],e.limits=ft.typeParsers.memory(r),e},global:r=>{let e={},t=r.read(1)[0];return e.contentType=vo[t],e.mutability=r.read(1)[0],e},memory:r=>{let e={};return e.flags=qe.unsigned.readBn(r).toNumber(),e.intial=qe.unsigned.readBn(r).toNumber(),e.flags===1&&(e.maximum=qe.unsigned.readBn(r).toNumber()),e},initExpr:r=>{let e=ft.parseOp(r);return r.read(1),e}};var Dk=ft.sectionParsers={custom:(r,e)=>{let t={name:"custom"},n=new B8(r.read(e.size)),i=qe.unsigned.readBn(n).toNumber(),o=n.read(i);return t.sectionName=Buffer.from(o).toString(),t.payload=[...n.buffer],t},type:r=>{let e=qe.unsigned.readBn(r).toNumber(),t={name:"type",entries:[]};for(let n=0;n<e;n++){let i=r.read(1)[0],o={form:vo[i],params:[]},a=qe.unsigned.readBn(r).toNumber();for(let y=0;y<a;y++){let m=r.read(1)[0];o.params.push(vo[m])}qe.unsigned.readBn(r).toNumber()&&(i=r.read(1)[0],o.return_type=vo[i]),t.entries.push(o)}return t},import:r=>{let e=qe.unsigned.readBn(r).toNumber(),t={name:"import",entries:[]};for(let n=0;n<e;n++){let i={},o=qe.unsigned.readBn(r).toNumber();i.moduleStr=Buffer.from(r.read(o)).toString();let a=qe.unsigned.readBn(r).toNumber();i.fieldStr=Buffer.from(r.read(a)).toString();let c=r.read(1)[0];i.kind=C8[c],i.type=ft.typeParsers[i.kind](r),t.entries.push(i)}return t},function:r=>{let e=qe.unsigned.readBn(r).toNumber(),t={name:"function",entries:[]};for(let n=0;n<e;n++){let i=qe.unsigned.readBn(r).toNumber();t.entries.push(i)}return t},table:r=>{let e=qe.unsigned.readBn(r).toNumber(),t={name:"table",entries:[]};for(let n=0;n<e;n++){let i=ft.typeParsers.table(r);t.entries.push(i)}return t},memory:r=>{let e=qe.unsigned.readBn(r).toNumber(),t={name:"memory",entries:[]};for(let n=0;n<e;n++){let i=ft.typeParsers.memory(r);t.entries.push(i)}return t},global:r=>{let e=qe.unsigned.readBn(r).toNumber(),t={name:"global",entries:[]};for(let n=0;n<e;n++){let i={};i.type=ft.typeParsers.global(r),i.init=ft.typeParsers.initExpr(r),t.entries.push(i)}return t},export:r=>{let e=qe.unsigned.readBn(r).toNumber(),t={name:"export",entries:[]};for(let n=0;n<e;n++){let i=qe.unsigned.readBn(r).toNumber(),o={};o.field_str=Buffer.from(r.read(i)).toString();let a=r.read(1)[0];o.kind=C8[a],o.index=qe.unsigned.readBn(r).toNumber(),t.entries.push(o)}return t},start:r=>{let e={name:"start"};return e.index=qe.unsigned.readBn(r).toNumber(),e},element:r=>{let e=qe.unsigned.readBn(r).toNumber(),t={name:"element",entries:[]};for(let n=0;n<e;n++){let i={elements:[]};i.index=qe.unsigned.readBn(r).toNumber(),i.offset=ft.typeParsers.initExpr(r);let o=qe.unsigned.readBn(r).toNumber();for(let a=0;a<o;a++){let c=qe.unsigned.readBn(r).toNumber();i.elements.push(c)}t.entries.push(i)}return t},code:r=>{let e=qe.unsigned.readBn(r).toNumber(),t={name:"code",entries:[]};for(let n=0;n<e;n++){let i={locals:[],code:[]},o=qe.unsigned.readBn(r).toNumber(),a=r.bytesRead+o,c=qe.unsigned.readBn(r).toNumber();for(let y=0;y<c;y++){let m={};m.count=qe.unsigned.readBn(r).toNumber();let _=r.read(1)[0];m.type=vo[_],i.locals.push(m)}for(;r.bytesRead<a;){let y=ft.parseOp(r);i.code.push(y)}t.entries.push(i)}return t},data:r=>{let e=qe.unsigned.readBn(r).toNumber(),t={name:"data",entries:[]};for(let n=0;n<e;n++){let i={};i.index=qe.unsigned.readBn(r).toNumber(),i.offset=ft.typeParsers.initExpr(r);let o=qe.unsigned.readBn(r).toNumber();i.data=[...r.read(o)],t.entries.push(i)}return t}};ft.parseOp=r=>{let e={},t=r.read(1)[0],n=kk[t],[i,o]=n.split(".");o===void 0?o=i:e.return_type=i,e.name=o;let a=Lk[o==="const"?i:o];return a&&(e.immediates=ft.immediataryParsers[a](r)),e};ft.parse=(r,e)=>{let n=[ft.parsePreramble(r)];for(;!r.end;){let i=ft.parseSectionHeader(r);n.push(Dk[i.name](r,i))}return n}});var mg=P(($G,P8)=>{global.fetch=window.fetch;P8.exports.buffer=Hn().Buffer});var bg=P((WG,k8)=>{var Uk=mg().Buffer,Xe=ul(),Xt=ll(),jk=hl(),st=k8.exports=r=>st.generate(r).buffer,wo=st.LANGUAGE_TYPES={i32:127,i64:126,f32:125,f64:124,anyFunc:112,func:96,block_type:64},N8=st.EXTERNAL_KIND={function:0,table:1,memory:2,global:3},$k=st.SECTION_IDS={custom:0,type:1,import:2,function:3,table:4,memory:5,global:6,export:7,start:8,element:9,code:10,data:11},Wk=st.OPCODES={unreachable:0,nop:1,block:2,loop:3,if:4,else:5,end:11,br:12,br_if:13,br_table:14,return:15,call:16,call_indirect:17,drop:26,select:27,get_local:32,set_local:33,tee_local:34,get_global:35,set_global:36,"i32.load":40,"i64.load":41,"f32.load":42,"f64.load":43,"i32.load8_s":44,"i32.load8_u":45,"i32.load16_s":46,"i32.load16_u":47,"i64.load8_s":48,"i64.load8_u":49,"i64.load16_s":50,"i64.load16_u":51,"i64.load32_s":52,"i64.load32_u":53,"i32.store":54,"i64.store":55,"f32.store":56,"f64.store":57,"i32.store8":58,"i32.store16":59,"i64.store8":60,"i64.store16":61,"i64.store32":62,current_memory:63,grow_memory:64,"i32.const":65,"i64.const":66,"f32.const":67,"f64.const":68,"i32.eqz":69,"i32.eq":70,"i32.ne":71,"i32.lt_s":72,"i32.lt_u":73,"i32.gt_s":74,"i32.gt_u":75,"i32.le_s":76,"i32.le_u":77,"i32.ge_s":78,"i32.ge_u":79,"i64.eqz":80,"i64.eq":81,"i64.ne":82,"i64.lt_s":83,"i64.lt_u":84,"i64.gt_s":85,"i64.gt_u":86,"i64.le_s":87,"i64.le_u":88,"i64.ge_s":89,"i64.ge_u":90,"f32.eq":91,"f32.ne":92,"f32.lt":93,"f32.gt":94,"f32.le":95,"f32.ge":96,"f64.eq":97,"f64.ne":98,"f64.lt":99,"f64.gt":100,"f64.le":101,"f64.ge":102,"i32.clz":103,"i32.ctz":104,"i32.popcnt":105,"i32.add":106,"i32.sub":107,"i32.mul":108,"i32.div_s":109,"i32.div_u":110,"i32.rem_s":111,"i32.rem_u":112,"i32.and":113,"i32.or":114,"i32.xor":115,"i32.shl":116,"i32.shr_s":117,"i32.shr_u":118,"i32.rotl":119,"i32.rotr":120,"i64.clz":121,"i64.ctz":122,"i64.popcnt":123,"i64.add":124,"i64.sub":125,"i64.mul":126,"i64.div_s":127,"i64.div_u":128,"i64.rem_s":129,"i64.rem_u":130,"i64.and":131,"i64.or":132,"i64.xor":133,"i64.shl":134,"i64.shr_s":135,"i64.shr_u":136,"i64.rotl":137,"i64.rotr":138,"f32.abs":139,"f32.neg":140,"f32.ceil":141,"f32.floor":142,"f32.trunc":143,"f32.nearest":144,"f32.sqrt":145,"f32.add":146,"f32.sub":147,"f32.mul":148,"f32.div":149,"f32.min":150,"f32.max":151,"f32.copysign":152,"f64.abs":153,"f64.neg":154,"f64.ceil":155,"f64.floor":156,"f64.trunc":157,"f64.nearest":158,"f64.sqrt":159,"f64.add":160,"f64.sub":161,"f64.mul":162,"f64.div":163,"f64.min":164,"f64.max":165,"f64.copysign":166,"i32.wrap/i64":167,"i32.trunc_s/f32":168,"i32.trunc_u/f32":169,"i32.trunc_s/f64":170,"i32.trunc_u/f64":171,"i64.extend_s/i32":172,"i64.extend_u/i32":173,"i64.trunc_s/f32":174,"i64.trunc_u/f32":175,"i64.trunc_s/f64":176,"i64.trunc_u/f64":177,"f32.convert_s/i32":178,"f32.convert_u/i32":179,"f32.convert_s/i64":180,"f32.convert_u/i64":181,"f32.demote/f64":182,"f64.convert_s/i32":183,"f64.convert_u/i32":184,"f64.convert_s/i64":185,"f64.convert_u/i64":186,"f64.promote/f32":187,"i32.reinterpret/f32":188,"i64.reinterpret/f64":189,"f32.reinterpret/i32":190,"f64.reinterpret/i64":191};st.typeGenerators={function:(r,e)=>{Xe.unsigned.write(r,e)},table:(r,e)=>{e.write([wo[r.elementType]]),st.typeGenerators.memory(r.limits,e)},global:(r,e)=>{e.write([wo[r.contentType]]),e.write([r.mutability])},memory:(r,e)=>{Xe.unsigned.write(Number(r.maximum!==void 0),e),Xe.unsigned.write(r.intial,e),r.maximum!==void 0&&Xe.unsigned.write(r.maximum,e)},initExpr:(r,e)=>{st.generateOp(r,e),st.generateOp({name:"end",type:"void"},e)}};st.immediataryGenerators={varuint1:(r,e)=>(e.write([r]),e),varuint32:(r,e)=>(Xe.unsigned.write(r,e),e),varint32:(r,e)=>(Xe.signed.write(r,e),e),varint64:(r,e)=>(Xe.signed.write(r,e),e),uint32:(r,e)=>(e.write(r),e),uint64:(r,e)=>(e.write(r),e),block_type:(r,e)=>(e.write([wo[r]]),e),br_table:(r,e)=>{Xe.unsigned.write(r.targets.length,e);for(let t of r.targets)Xe.unsigned.write(t,e);return Xe.unsigned.write(r.defaultTarget,e),e},call_indirect:(r,e)=>(Xe.unsigned.write(r.index,e),e.write([r.reserved]),e),memory_immediate:(r,e)=>(Xe.unsigned.write(r.flags,e),Xe.unsigned.write(r.offset,e),e)};var L8={type:(r,e=new Xt)=>{e.write([wo[r.form]]);let t=r.params.length;return Xe.unsigned.write(t,e),t!==0&&e.write(r.params.map(n=>wo[n])),e.write([r.return_type?1:0]),r.return_type&&e.write([wo[r.return_type]]),e.buffer},import:(r,e=new Xt)=>{Xe.unsigned.write(r.moduleStr.length,e),e.write(r.moduleStr),Xe.unsigned.write(r.fieldStr.length,e),e.write(r.fieldStr),e.write([N8[r.kind]]),st.typeGenerators[r.kind](r.type,e)},function:(r,e=new Xt)=>(Xe.unsigned.write(r,e),e.buffer),table:st.typeGenerators.table,global:(r,e=new Xt)=>(st.typeGenerators.global(r.type,e),st.typeGenerators.initExpr(r.init,e),e),memory:st.typeGenerators.memory,export:(r,e=new Xt)=>{let t=Uk.from(r.field_str),n=t.length;return Xe.unsigned.write(n,e),e.write(t),e.write([N8[r.kind]]),Xe.unsigned.write(r.index,e),e},element:(r,e=new Xt)=>{Xe.unsigned.write(r.index,e),st.typeGenerators.initExpr(r.offset,e),Xe.unsigned.write(r.elements.length,e);for(let t of r.elements)Xe.unsigned.write(t,e);return e},code:(r,e=new Xt)=>{let t=new Xt;Xe.unsigned.write(r.locals.length,t);for(let n of r.locals)Xe.unsigned.write(n.count,t),t.write([wo[n.type]]);for(let n of r.code)st.generateOp(n,t);return Xe.unsigned.write(t.bytesWrote,e),e.write(t.buffer),e},data:(r,e=new Xt)=>(Xe.unsigned.write(r.index,e),st.typeGenerators.initExpr(r.offset,e),Xe.unsigned.write(r.data.length,e),e.write(r.data),e)};st.entryGenerators=L8;st.generateSection=function(r,e=new Xt){let t=r.name,n=new Xt;if(e.write([$k[t]]),t==="custom")Xe.unsigned.write(r.sectionName.length,n),n.write(r.sectionName),n.write(r.payload);else if(t==="start")Xe.unsigned.write(r.index,n);else{Xe.unsigned.write(r.entries.length,n);for(let i of r.entries)L8[t](i,n)}return Xe.unsigned.write(n.bytesWrote,e),e.write(n.buffer),e};st.generate=(r,e=new Xt)=>{let[t,...n]=r;st.generatePreramble(t,e);for(let i of n)st.generateSection(i,e);return e};st.generatePreramble=(r,e=new Xt)=>(e.write(r.magic),e.write(r.version),e);st.generateOp=(r,e=new Xt)=>{let t=r.name;r.return_type!==void 0&&(t=r.return_type+"."+t),e.write([Wk[t]]);let n=jk[r.name==="const"?r.return_type:r.name];return n&&st.immediataryGenerators[n](r.immediates,e),e}});var D8=P((HG,q8)=>{var Hk=hl();q8.exports=r=>{let e=[],t=r.split(/\s|\n/);for(;t.length;){let n=t.shift(),i={},[o,a]=n.split(".");a===void 0?a=o:i.return_type=o,i.name=a;let c=Hk[i.name==="const"?i.return_type:i.name];c&&(i.immediates=Gk(c,t)),e.push(i)}return e};function Gk(r,e){let t={};switch(r){case"br_table":let n=[];for(;;){let i=e[0];if(isNaN(i))break;e.shift(),n.push(i)}return n;case"call_indirect":return t.index=e.shift(),t.reserved=0,t;case"memory_immediate":return t.flags=e.shift(),t.offset=e.shift(),t;default:return e.shift()}}});var j8=P((zG,U8)=>{var Af=mg().Buffer,dl=ul().unsigned,zk=yg(),vg=ll(),Kk=["custom","type","import","function","table","memory","global","export","start","element","code","data"];U8.exports=class{constructor(e){this._wasm=e,this._sections=[],this._modified=!1}get wasm(){return this._modified&&(this._wasm=Af.concat(this._sections.concat(this._pipe.buffer)),this._modified=!1),this._wasm}*[Symbol.iterator](){for(this._pipe=new vg(this._wasm),this._sections=[this._pipe.read(8)];!this._pipe.end;){let e=this._pipe.bytesRead,t=this._pipe.read(1)[0],n=Number(dl.read(this._pipe)),i=this._pipe.read(n),o=this._pipe.bytesRead,a=this._wasm.slice(e,o),c=this._sections.push(a)-1;yield new wg(t,i,this,c)}}_update(e,t){this._modified=!0,this._sections[e]=t}};var wg=class{constructor(e,t,n,i){this._it=n,this._index=i,this.type=Kk[e],this._type=e,this._section=t;let o=new vg(t);this.type!=="custom"&&(this.count=Number(dl.read(o))),this._body=o.buffer}toJSON(){return zk.sectionParsers[this.type](new vg(this._section))}appendEntries(e){this.count+=e.length,this._body=Af.concat([this._body].concat(e));let t=Af.concat([dl.encode(this.count),this._body]);this._it._update(this._index,Af.concat([Af.from([this._type]),dl.encode(t.length),t]))}}});var $8=P(Ff=>{Ff.wasm2json=yg();Ff.json2wasm=bg();Ff.text2json=D8();Ff.Iterator=j8()});var W8=P((VG,Vk)=>{Vk.exports={start:0,type:{params:{DEFAULT:0},return_type:{DEFAULT:0}},import:0,code:{locals:{DEFAULT:1},code:{get_local:120,set_local:120,tee_local:120,get_global:120,set_global:120,load8_s:120,load8_u:120,load16_s:120,load16_u:120,load32_s:120,load32_u:120,load:120,store8:120,store16:120,store32:120,store:120,grow_memory:1e4,current_memory:100,nop:1,block:1,loop:1,if:1,then:90,else:90,br:90,br_if:90,br_table:120,return:90,call:90,call_indirect:1e4,const:1,add:45,sub:45,mul:45,div_s:36e3,div_u:36e3,rem_s:36e3,rem_u:36e3,and:45,or:45,xor:45,shl:67,shr_u:67,shr_s:67,rotl:90,rotr:90,eq:45,eqz:45,ne:45,lt_s:45,lt_u:45,le_s:45,le_u:45,gt_s:45,gt_u:45,ge_s:45,ge_u:45,clz:45,ctz:45,popcnt:45,drop:120,select:120,unreachable:1}},data:0}});var G8=P(pl=>{var xg=$8(),Jk=xg.text2json,H8=bg().SECTION_IDS,Xk=W8();function Ds(r,e={},t=0){let n=0;if(t=e.DEFAULT!==void 0?e.DEFAULT:0,Array.isArray(r))r.forEach(i=>{n+=Ds(i,e)});else if(typeof r=="object")for(let i in r){let o=e[i];o&&(n+=Ds(r[i],o,t))}else e[r]===void 0?n=t:n=e[r];return n}function Yk(r,e,t,n,i){function o(I,E){return Jk(`${n}.const ${I} call ${E}`)}function a(I,E){I.name==="call"&&I.immediates>=E&&(I.immediates=(++I.immediates).toString())}function c(){return o(0,0).reduce((E,C)=>E+Ds(C.name,e.code),0)}let y=new Set(["grow_memory","end","br","br_table","br_if","if","else","return","loop"]),m=c(),_=r.code.slice(),S=[];for(i+=Ds(r.locals,e.local);_.length;){let I=0;for(;;){let E=_[I++];if(a(E,t),i+=Ds(E.name,e.code),y.has(E.name))break}i!==0&&(i+=m,S=S.concat(o(i,t))),S=S.concat(_.slice(0,I)),_=_.slice(I),i=0}return r.code=S,r}pl.meterJSON=(r,e)=>{function t(E,C){return E.find(N=>N.name===C)}function n(E,C){let N=H8[C];for(let j in E){let q=E[j],D=H8[q.name];if(D&&N<D){E.splice(j,0,{name:C,entries:[]});return}}}let i=0,o,a,{costTable:c,moduleStr:y,fieldStr:m,meterType:_}=e;c||(c=Xk),y||(y="metering"),m||(m="usegas"),_||(_="i32"),t(r,"type")||n(r,"type"),t(r,"import")||n(r,"import");let S={moduleStr:y,fieldStr:m,kind:"function"},I={form:"func",params:[_]};r=r.slice(0);for(let E of r)switch(E=Object.assign(E),E.name){case"type":S.type=E.entries.push(I)-1,a=E;break;case"function":o=E;break;case"import":for(let C of E.entries){if(C.moduleStr===y&&C.fieldStr===m)throw new Error("importing metering function is not allowed");C.kind==="function"&&i++}E.entries.push(S);break;case"export":for(let C of E.entries)C.kind==="function"&&C.index>=i&&C.index++;break;case"element":for(let C of E.entries)C.elements=C.elements.map(N=>N>=i?++N:N);break;case"start":E.index>=i&&E.index++;break;case"code":for(let C in E.entries){let N=E.entries[C],j=o.entries[C],q=a.entries[j],D=Ds(q,c.type);Yk(N,c.code,i,_,D)}break}return r};pl.meterWASM=(r,e={})=>{let t=xg.wasm2json(r);return t=pl.meterJSON(t,e),xg.json2wasm(t)}});var z8=P(()=>{});var V8=P(()=>{});var J8=P(()=>{});var r5=P(()=>{});var P5={silly:0,trace:1,debug:2,info:3,warn:4,error:5,fatal:6};function Cl(r){return P5[r]}var Nf=class{constructor(e,t){this.moduleName=e;this.settings=t}trace(e,...t){this.shouldLog("trace")&&console.debug(this.message("trace",e),t)}error(e,...t){this.shouldLog("error")&&console.error(this.message("error",e),t)}info(e,...t){this.shouldLog("info")&&console.info(this.message("info",e),t)}silly(e,...t){this.shouldLog("silly")&&console.debug(this.message("silly",e),t)}debug(e,...t){this.shouldLog("debug")&&console.debug(this.message("debug",e),t)}warn(e,...t){this.shouldLog("warn")&&console.warn(this.message("warn",e),t)}log(e,...t){this.shouldLog("info")&&console.info(this.message("info",e),t)}fatal(e,...t){this.shouldLog("fatal")&&console.error(this.message("fatal",e),t)}shouldLog(e){return Cl(e)>=Cl(this.settings.minLevel)}setSettings(e){this.settings=e}message(e,t){return`${new Date().toISOString()} ${e.toUpperCase()} [${this.moduleName}] ${t}`}};var Lf=class{registeredLoggers={};registeredOptions={};defOptions={minLevel:"info"};constructor(){this.setOptions=this.setOptions.bind(this),this.getOptions=this.getOptions.bind(this),this.create=this.create.bind(this),this.logLevel=this.logLevel.bind(this)}setOptions(e,t){t?this.registeredLoggers[t]?this.registeredLoggers[t].setSettings({...this.registeredLoggers[t].settings,...e}):this.registeredOptions[t]={...this.defOptions,...e}:(this.defOptions=e,Object.keys(this.registeredLoggers).forEach(n=>{this.registeredLoggers[n].setSettings({...this.registeredLoggers[n].settings,...e})}))}getOptions(e){return e?this.registeredLoggers[e]?this.registeredLoggers[e].settings:this.registeredOptions[e]?this.registeredOptions[e]:this.defOptions:this.defOptions}logLevel(e,t){this.setOptions({minLevel:e},t)}create(e="SWC"){return Object.prototype.hasOwnProperty.call(this.registeredLoggers,e)||(this.registeredLoggers[e]=new Nf(e,this.getOptions(e))),this.registeredLoggers[e]}};var Bi=class{constructor(){}setOptions(e,t){Bi.INST.setOptions(e,t)}getOptions(e){return Bi.INST.getOptions(e)}logLevel(e,t){Bi.INST.logLevel(e,t)}create(e){return Bi.INST.create(e)}static use(e){Bi.INST=e}},Ee=Bi;ra(Ee,"INST",new Lf);var rt=class{static measure(){return new rt}constructor(){}start=Date.now();end=null;reset(){this.start=Date.now(),this.end=null}stop(){this.end=Date.now()}elapsed(e=!1){this.end===null&&(this.end=Date.now());let t=this.end-this.start;return e?t:`${(this.end-this.start).toFixed(0)}ms`}};var Pt=class{constructor(e,t,n){this.state=e;this.validity=t;this.errorMessages=n}},kf=class{ignoreExceptions=!0;waitForConfirmation=!1;updateCacheForEachInteraction=!1;internalWrites=!1;maxCallDepth=7;maxInteractionEvaluationTimeSeconds=60;stackTrace={saveState:!1};bundlerUrl="https://d1o5nlqr4okus2.cloudfront.net/";gasLimit=Number.MAX_SAFE_INTEGER;useFastCopy=!0;useVM2=!1;allowUnsafeClient=!1;allowBigInt=!1;walletBalanceUrl="http://nyc-1.dev.arweave.net:1984/";mineArLocalBlocks=!0;throwOnInternalWriteError=!0};var N5=(N=>(N.APP_NAME="App-Name",N.APP_VERSION="App-Version",N.CONTRACT_TX_ID="Contract",N.INPUT="Input",N.CONTENT_TYPE="Content-Type",N.CONTRACT_SRC_TX_ID="Contract-Src",N.SDK="SDK",N.MIN_FEE="Min-Fee",N.INIT_STATE="Init-State",N.INIT_STATE_TX="Init-State-TX",N.INTERACT_WRITE="Interact-Write",N.WASM_LANG="Wasm-Lang",N.WASM_LANG_VERSION="Wasm-Lang-Version",N.WASM_META="Wasm-Meta",N.REQUEST_VRF="Request-Vrf",N))(N5||{});function ur(r,e){let t=r.get("tags");for(let n of t)try{if(n.get("name",{decode:!0,string:!0})===e)return n.get("value",{decode:!0,string:!0})}catch{}return!1}function Rg(r){let e="";for(let t of r)e+=("0"+t.toString(16)).slice(-2);return e}var E5=bt(i0()),A5=bt(Zo()),Bg=bt(ka());var Fl=bt(i0());var n2=bt(Vw()),i2=bt(r2());var bu=class{logger=Ee.INST.create("LevelDbCache");db;constructor(e){if(e.inMemory)this.db=new i2.MemoryLevel({valueEncoding:"json"});else{if(!e.dbLocation)throw new Error("LevelDb cache configuration error - no db location specified");let t=e.dbLocation;this.logger.info(`Using location ${t}`),this.db=new n2.Level(t,{valueEncoding:"json"})}}async get(e,t,n){let i=this.db.sublevel(e,{valueEncoding:"json"});try{let o=await i.get(t);return{sortKey:t,cachedValue:o}}catch(o){if(o.code=="LEVEL_NOT_FOUND")return null;throw o}}async getLast(e){let t=this.db.sublevel(e,{valueEncoding:"json"}),n=await t.keys({reverse:!0,limit:1}).all();return n.length?{sortKey:n[0],cachedValue:await t.get(n[0])}:null}async getLessOrEqual(e,t){let n=this.db.sublevel(e,{valueEncoding:"json"}),i=await n.keys({reverse:!0,lte:t,limit:1}).all();return i.length?{sortKey:i[0],cachedValue:await n.get(i[0])}:null}async put(e,t){let n=this.db.sublevel(e.contractTxId,{valueEncoding:"json"});await n.open(),await n.put(e.sortKey,t)}close(){return this.db.close()}async dump(){return await this.db.iterator().all()}async getLastSortKey(){let e="",t=await this.db.keys().all();for(let n of t){let i=n.substring(45);i.localeCompare(e)>0&&(e=i)}return e==""?null:e}async allContracts(){let e=await this.db.keys().all(),t=new Set;return e.forEach(n=>t.add(n.substring(1,44))),Array.from(t)}};var Bn=class{storage={};clearAll(){Object.keys(this.storage).forEach(e=>{delete this.storage[e]})}contains(e){return Object.prototype.hasOwnProperty.call(this.storage,e)}get(e){return this.storage[e]}put(e,t){this.storage[e]=t}remove(e){delete this.storage[e]}};var vu=class{constructor(e,t,n){this.arweave=e;this.baseImplementation=t;this.cache=n}logger=Ee.INST.create("CacheableExecutorFactory");async create(e,t){return await this.baseImplementation.create(e,t)}};var o2=(e=>(e.CONTRACT_NOT_FOUND="CONTRACT_NOT_FOUND",e))(o2||{}),wu=class extends Error{type;otherInfo;constructor(e,t={}){t.message?super(t.message):super(),this.type=e,this.otherInfo=t}getType(){return this.type}};function PT(r){if(!r)return!1;let e=s2(r);return r.evolve!==void 0||e.has("evolve")}var oi=class{logger=Ee.INST.create("Evolve");constructor(){this.modify=this.modify.bind(this)}async modify(e,t){let{definitionLoader:n,executorFactory:i}=t.warp,o=t.contractDefinition.txId,a=oi.evolvedSrcTxId(e),c=t.contractDefinition.srcTxId;if(a&&(this.logger.debug("Checking evolve:",{current:c,evolvedSrcTxId:a}),c!==a))try{this.logger.info("Evolving to: ",a);let y=await n.load(o,a),m=await i.create(y,t.evaluationOptions);return t.contractDefinition=y,t.handler=m,t.handler.initState(e),this.logger.debug("evolved to:",{evolve:a,newSrcTxId:t.contractDefinition.srcTxId,current:c,txId:t.contractDefinition.txId}),t}catch{throw new wu("CONTRACT_NOT_FOUND",{message:`Contract having txId: ${o} not found`,requestedTxId:o})}return t}static evolvedSrcTxId(e){if(!PT(e))return;let t=s2(e),n=e.evolve||t.get("evolve"),i=e.canEvolve||t.get("canEvolve");if(i==null&&(i=!0),n&&/[a-z0-9_-]{43}/i.test(n)&&i)return n}};function s2(r){let e=new Map;return r.settings&&(NT(r.settings)?e=new Map(r.settings):LT(r.settings)&&(e=new Map(Object.entries(r.settings)))),e}function NT(r){return r==null?!1:typeof r[Symbol.iterator]=="function"}function LT(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}var hs=class{constructor(e,t){this.contractTxId=e;this.sortKey=t}},ds=class{constructor(e,t){this.sortKey=e;this.cachedValue=t}};var a_=bt(o_()),f_=bt(s_()),Ru=r=>new Promise(e=>setTimeout(e,r)),yf=(r,e=!1)=>e?(0,f_.default)(r):(0,a_.default)(r),c_=(r,e)=>e instanceof Map?{dataType:"Map",value:Array.from(e.entries())}:e,NW=(r,e)=>typeof e=="object"&&e!==null&&e.dataType==="Map"?new Map(e.value):e,LW=(r,e)=>r-e,kW=(r,e)=>+r-+e,qW=(r,e)=>e-r,DW=(r,e)=>+e-+r;function u_(r){let e=null,t=new Promise((n,i)=>{e=setTimeout(()=>{clearTimeout(e),i("timeout")},r*1e3)});return{timeoutId:e,timeoutPromise:t}}function Pu(r){return r.endsWith("/")?r.slice(0,-1):r}function qr(r){return"".padEnd(r*2," ")}var z4=bt(G4()),K4=bt(Up());function Wp(r){return r.confirmationStatus===void 0?!0:r.confirmationStatus==="confirmed"}var Ns=class{logger=Ee.INST.create("TagsParser");getInputTag(e,t){if(Ns.hasMultipleInteractions(e)){this.logger.debug("Interaction transaction is using multiple input tx tag format.");let n=e.tags.findIndex(o=>o.name==="Contract"&&o.value===t);if(e.tags.length-1===n){this.logger.warn("Wrong tags format: 'Contract' is the last tag");return}let i=e.tags[n+1];if(i.name!=="Input"){this.logger.warn(`No 'Input' tag found after 'Contract' tag. Instead ${i.name} was found`);return}return i}else return e.tags.find(n=>n.name==="Input")}isInteractWrite(e,t){return e.tags.some(n=>n.name==="Interact-Write"&&n.value===t)}getInteractWritesContracts(e){return e.tags.filter(t=>t.name==="Interact-Write").map(t=>t.value)}getContractTag(e){return e.tags.find(t=>t.name==="Contract")?.value}getContractsWithInputs(e){let t=new Map;return e.tags.filter(i=>i.name==="Contract").forEach(i=>{t.set(i.value,this.getInputTag(e,i.value))}),t}static hasMultipleInteractions(e){return e.tags.filter(t=>t.name==="Contract").length>1}};var ck=new K4.default.ec("secp256k1"),Qu=class{constructor(e,t=[]){this.arweave=e;this.executionContextModifiers=t}logger=Ee.INST.create("DefaultStateEvaluator");tagsParser=new Ns;async eval(e,t){return this.doReadState(e.sortedInteractions,new Pt(e.contractDefinition.initState,{},{}),e,t)}async doReadState(e,t,n,i){let{ignoreExceptions:o,stackTrace:a,internalWrites:c}=n.evaluationOptions,{contract:y,contractDefinition:m,sortedInteractions:_}=n,S=t.state,I=null,E=t.validity,C=t.errorMessages;n?.handler.initState(S);let N=n.contract.callDepth();this.logger.info(`${qr(N)}Evaluating state for ${m.txId} [${e.length} non-cached of ${_.length} all]`);let j=null,q=null,D=e.length;n.handler.initState(S);for(let oe=0;oe<D;oe++){let k=e[oe],L=rt.measure();if(I=k.sortKey,k.vrf&&!this.verifyVrf(k.vrf,k.sortKey,this.arweave))throw new Error("Vrf verification failed.");if(this.logger.debug(`${qr(N)}[${m.txId}][${k.id}][${k.block.height}]: ${e.indexOf(k)+1}/${e.length} [of all:${_.length}]`),this.tagsParser.isInteractWrite(k,m.txId)&&c){let A=this.tagsParser.getContractTag(k);this.logger.debug(`${qr(N)}Internal Write - Loading writing contract`,A);let M=y.getCallStack().addInteractionData({interaction:null,interactionTx:k,currentTx:i}),x=n.warp.contract(A,n.contract,k);await this.onContractCall(k,n,new Pt(S,E,C)),this.logger.debug(`${qr(N)}Reading state of the calling contract at`,k.sortKey),await x.readState(k.sortKey,[...i||[],{contractTxId:m.txId,interactionTxId:k.id}]);let u=await this.internalWriteState(m.txId,k.sortKey);if(u!==null){S=u.cachedValue.state,n?.handler.initState(S),E[k.id]=u.cachedValue.validity[k.id],u.cachedValue.errorMessages?.[k.id]&&(C[k.id]=u.cachedValue.errorMessages[k.id]);let p=new Pt(S,E,C);await this.onStateUpdate(k,n,p),Wp(k)&&(q={tx:k,state:p})}else E[k.id]=!1;M.update({cacheHit:!1,outputState:a.saveState?S:void 0,executionTime:L.elapsed(!0),valid:E[k.id],errorMessage:j,gasUsed:0})}else{let A=this.tagsParser.getInputTag(k,n.contractDefinition.txId);if(!A){this.logger.error(`${qr(N)}Skipping tx - Input tag not found for ${k.id}`);continue}let M=this.parseInput(A);if(!M){this.logger.error(`${qr(N)}Skipping tx - invalid Input tag - ${k.id}`);continue}let x={input:M,caller:k.owner.address},u={interaction:x,interactionTx:k,currentTx:i};this.logger.debug(`${qr(N)}Interaction:`,x);let p=y.getCallStack().addInteractionData(u),h=await n.handler.handle(n,new Pt(S,E,C),u);if(j=h.errorMessage,h.type!=="ok"&&(C[k.id]=j),this.logResult(h,k,n),this.logger.debug(`${qr(N)}Interaction evaluation`,L.elapsed()),p.update({cacheHit:!1,outputState:a.saveState?S:void 0,executionTime:L.elapsed(!0),valid:E[k.id],errorMessage:j,gasUsed:h.gasUsed}),h.type==="exception"&&o!==!0)throw new Error(`Exception while processing ${JSON.stringify(x)}:
${h.errorMessage}`);E[k.id]=h.type==="ok",S=h.state;let s=new Pt(S,E,C);Wp(k)&&(q={tx:k,state:s}),await this.onStateUpdate(k,n,s)}for(let{modify:A}of this.executionContextModifiers)n=await A(S,n)}let Q=new Pt(S,E,C);return q!==null&&await this.onStateEvaluated(q.tx,n,q.state),new ds(I,Q)}verifyVrf(e,t,n){let i=ck.keyFromPublic(e.pubkey,"hex"),o;try{o=(0,z4.ProofHoHash)(i.getPublic(),n.utils.stringToBuffer(t),n.utils.b64UrlToBuffer(e.proof))}catch{return!1}return n.utils.bufferTob64Url(o)==e.index}logResult(e,t,n){e.type==="exception"&&this.logger.error(`Executing of interaction: [${n.contractDefinition.txId} -> ${t.id}] threw exception:`,`${e.errorMessage}`),e.type==="error"&&this.logger.warn(`Executing of interaction: [${n.contractDefinition.txId} -> ${t.id}] returned error:`,e.errorMessage)}parseInput(e){try{return JSON.parse(e.value)}catch(t){return this.logger.error(t),null}}};var PH=bt(ka());var uk=(t=>(t.ARWEAVE="arweave",t.WARP_SEQUENCER="redstone-sequencer",t))(uk||{}),Zu=class{constructor(e,t=null,n=null){this.baseUrl=e;this.confirmationStatus=t;this.source=n;this.baseUrl=Pu(e),Object.assign(this,t),this.source=n}logger=Ee.INST.create("WarpGatewayInteractionsLoader");async load(e,t,n,i){this.logger.debug("Loading interactions: for ",{contractId:e,fromSortKey:t,toSortKey:n});let o=[],a=0,c=0,y=0,m=rt.measure();do{let _=rt.measure(),S=`${this.baseUrl}/gateway/v2/interactions-sort-key`,I=await fetch(`${S}?${new URLSearchParams({contractId:e,...t?{from:t}:"",...n?{to:n}:"",page:(++a).toString(),fromSdk:"true",...this.confirmationStatus&&this.confirmationStatus.confirmed?{confirmationStatus:"confirmed"}:"",...this.confirmationStatus&&this.confirmationStatus.notCorrupted?{confirmationStatus:"not_corrupted"}:"",...this.source?{source:this.source}:""})}`).then(E=>E.ok?E.json():Promise.reject(E)).catch(E=>{throw E.body?.message&&this.logger.error(E.body.message),new Error(`Unable to retrieve transactions. Warp gateway responded with status ${E.status}.`)});this.logger.debug(`Loading interactions: page ${a} loaded in ${_.elapsed()}`),o.push(...I.interactions),c=I.paging.limit,y=I.paging.items,this.logger.debug(`Loaded interactions length: ${o.length}, from: ${t}, to: ${n}`)}while(y==c);return this.logger.debug("All loaded interactions:",{from:t,to:n,loaded:o.length,time:m.elapsed()}),o}type(){return"warp"}clearCache(){}};var lk="".padEnd(13,"0"),V4="".padEnd(13,"9"),hk="".padEnd(13,"0"),dk="".padEnd(64,"0"),pk="".padEnd(64,"z"),Hp=`${"".padStart(12,"0")},${lk},${dk}`,di=class{constructor(e){this.arweave=e}logger=Ee.INST.create("LexicographicalInteractionsSorter");async sort(e){let t=[...e],n=t.map(i=>this.addSortKey(i));return await Promise.all(n),t.sort((i,o)=>i.node.sortKey.localeCompare(o.node.sortKey))}async createSortKey(e,t,n,i=!1){let o=this.arweave.utils.b64UrlToBuffer(e),a=this.arweave.utils.b64UrlToBuffer(t),c=this.arweave.utils.concatBuffers([o,a]),y=Rg(await this.arweave.crypto.hash(c));return`${`${n}`.padStart(12,"0")},${i?V4:hk},${y}`}extractBlockHeight(e){return e?parseInt(e.split(",")[0]):null}async addSortKey(e){let{node:t}=e;e.node.sortKey!==void 0&&e.node.source=="redstone-sequencer"?this.logger.debug("Using sortKey from sequencer",e.node.sortKey):e.node.sortKey=await this.createSortKey(t.block.id,t.id,t.block.height)}generateLastSortKey(e){return`${`${e}`.padStart(12,"0")},${V4},${pk}`}};var el=class extends Qu{constructor(t,n,i=[]){super(t,i);this.cache=n}cLogger=Ee.INST.create("CacheableStateEvaluator");async eval(t,n){let i=t.cachedState;if(i&&i.sortKey==t.requestedSortKey)return this.cLogger.info(`Exact cache hit for sortKey ${t?.contractDefinition?.txId}:${i.sortKey}`),t.handler?.initState(i.cachedValue.state),i;let o=t.sortedInteractions,a=t.contractDefinition.txId;if(!a)throw new Error("Contract tx id not set in the execution context");for(let _ of n||[])if(_.contractTxId===t.contractDefinition.txId){let S=o.findIndex(I=>I.id===_.interactionTxId);S!==-1&&(this.cLogger.debug("Inf. Loop fix - removing interaction",{height:o[S].block.height,contractTxId:_.contractTxId,interactionTxId:_.interactionTxId,sortKey:o[S].sortKey}),o.splice(S))}if(o.length==0){if(this.cLogger.info(`No missing interactions ${a}`),i)return t.handler?.initState(i.cachedValue.state),i;{t.handler?.initState(t.contractDefinition.initState),this.cLogger.debug("Inserting initial state into cache");let _=new Pt(t.contractDefinition.initState,{},{});return await this.cache.put(new hs(a,Hp),_),new ds(Hp,_)}}let c=i==null?t.contractDefinition.initState:i.cachedValue.state,y=i==null?{}:i.cachedValue.validity,m=i==null?{}:i.cachedValue.errorMessages;return this.cLogger.debug("Base state",c),await this.doReadState(o,new Pt(c,y,m||{}),t,n)}async onStateEvaluated(t,n,i){let o=n.contractDefinition.txId;this.cLogger.debug(`${qr(n.contract.callDepth())}onStateEvaluated: cache update for contract ${o} [${t.sortKey}]`),await this.putInCache(o,t,i)}async onStateUpdate(t,n,i,o=!1){(n.evaluationOptions.updateCacheForEachInteraction||o)&&(this.cLogger.debug(`onStateUpdate: cache update for contract ${n.contractDefinition.txId} [${t.sortKey}]`,{contract:n.contractDefinition.txId,state:i.state,sortKey:t.sortKey}),await this.putInCache(n.contractDefinition.txId,t,i))}async latestAvailableState(t,n){if(this.cLogger.debug("Searching for",{contractTxId:t,sortKey:n}),n){let i=await this.cache.getLessOrEqual(t,n);return i&&this.cLogger.debug(`Latest available state at ${t}: ${i.sortKey}`),i}else return await this.cache.getLast(t)}async onInternalWriteStateUpdate(t,n,i){this.cLogger.debug("Internal write state update:",{sortKey:t.sortKey,dry:t.dry,contractTxId:n,state:i.state}),await this.putInCache(n,t,i)}async onContractCall(t,n,i){if(n.sortedInteractions?.length==0)return;let o=n.sortedInteractions.indexOf(t);o<1||await this.putInCache(n.contractDefinition.txId,n.sortedInteractions[o-1],i)}async putInCache(t,n,i){if(n.dry||n.confirmationStatus!==void 0&&n.confirmationStatus!=="confirmed")return;let o=new Pt(i.state,i.validity,i.errorMessages||{});this.cLogger.debug("Putting into cache",{contractTxId:t,transaction:n.id,sortKey:n.sortKey,dry:n.dry,state:o.state,validity:o.validity}),await this.cache.put(new hs(t,n.sortKey),o)}async syncState(t,n,i,o){let a=new Pt(i,o,{});await this.cache.put(new hs(t,n),a)}async dumpCache(){return await this.cache.dump()}async internalWriteState(t,n){return await this.cache.get(t,n)}async hasContractCached(t){return await this.cache.getLast(t)!=null}async lastCachedSortKey(){return await this.cache.getLastSortKey()}async allCachedContracts(){return await this.cache.allContracts()}};var gk="Operation requires compiling with --exportTable",yk="Operation requires compiling with --exportRuntime",_f=()=>{throw Error(yk)},mk=typeof BigUint64Array<"u",Sf=Symbol(),bk=192,J4=1024,vk=new TextDecoder("utf-16le",{fatal:!0});Object.hasOwn=Object.hasOwn||function(r,e){return Object.prototype.hasOwnProperty.call(r,e)};function X4(r,e){let t=new Uint32Array(r)[e+-4>>>2]>>>1,n=new Uint16Array(r,e,t);if(t<=bk)return String.fromCharCode(...n);try{return vk.decode(n)}catch{let i="",o=0;for(;t-o>J4;)i+=String.fromCharCode(...n.subarray(o,o+=J4));return i+String.fromCharCode(...n.subarray(o))}}function Gp(r){let e={};function t(i,o){return i?X4(i.buffer,o):"<yet unknown>"}let n=r.env=r.env||{};return n.abort=n.abort||function(o,a,c,y){let m=e.memory||n.memory;throw Error(`abort: ${t(m,o)} at ${t(m,a)}:${c}:${y}`)},n.trace=n.trace||function(o,a,...c){let y=e.memory||n.memory;console.log(`trace: ${t(y,o)}${a?" ":""}${c.slice(0,a).join(", ")}`)},n.seed=n.seed||Date.now,r.Math=r.Math||Math,r.Date=r.Date||Date,e}function zp(r,e){let t=e.exports,n=t.memory,i=t.table,o=t.__new||_f,a=t.__pin||_f,c=t.__unpin||_f,y=t.__collect||_f,m=t.__rtti_base,_=m?p=>p[m>>>2]:_f;r.__new=o,r.__pin=a,r.__unpin=c,r.__collect=y;function S(p){let h=new Uint32Array(n.buffer);if((p>>>=0)>=_(h))throw Error(`invalid id: ${p}`);return h[(m+4>>>2)+(p<<1)]}function I(p){let h=new Uint32Array(n.buffer);if((p>>>=0)>=_(h))throw Error(`invalid id: ${p}`);return h[(m+4>>>2)+(p<<1)+1]}function E(p){let h=S(p);if(!(h&7))throw Error(`not an array: ${p}, flags=${h}`);return h}function C(p){return 31-Math.clz32(p>>>6&31)}function N(p){if(p==null)return 0;let h=p.length,s=o(h<<1,1),f=new Uint16Array(n.buffer);for(var g=0,v=s>>>1;g<h;++g)f[v+g]=p.charCodeAt(g);return s}r.__newString=N;function j(p){if(p==null)return 0;let h=new Uint8Array(p),s=o(h.length,0);return new Uint8Array(n.buffer).set(h,s),s}r.__newArrayBuffer=j;function q(p){if(!p)return null;let h=n.buffer;if(new Uint32Array(h)[p+-8>>>2]!==1)throw Error(`not a string: ${p}`);return X4(h,p)}r.__getString=q;function D(p,h,s){let f=n.buffer;if(s)switch(p){case 2:return new Float32Array(f);case 3:return new Float64Array(f)}else switch(p){case 0:return new(h?Int8Array:Uint8Array)(f);case 1:return new(h?Int16Array:Uint16Array)(f);case 2:return new(h?Int32Array:Uint32Array)(f);case 3:return new(h?BigInt64Array:BigUint64Array)(f)}throw Error(`unsupported align: ${p}`)}function Q(p,h=0){let s=h,f=E(p),g=C(f),v=typeof s!="number",d=v?s.length:s,l=o(d<<g,f&4?p:0),w;if(f&4)w=l;else{a(l);let T=o(f&2?16:12,p);c(l);let b=new Uint32Array(n.buffer);b[T+0>>>2]=l,b[T+4>>>2]=l,b[T+8>>>2]=d<<g,f&2&&(b[T+12>>>2]=d),w=T}if(v){let T=D(g,f&2048,f&4096),b=l>>>g;if(f&16384)for(let F=0;F<d;++F)T[b+F]=s[F];else T.set(s,b)}return w}r.__newArray=Q;function oe(p){let h=new Uint32Array(n.buffer),s=h[p+-8>>>2],f=E(s),g=C(f),v=f&4?p:h[p+4>>>2],d=f&2?h[p+12>>>2]:h[v+-4>>>2]>>>g;return D(g,f&2048,f&4096).subarray(v>>>=g,v+d)}r.__getArrayView=oe;function k(p){let h=oe(p),s=h.length,f=new Array(s);for(let g=0;g<s;g++)f[g]=h[g];return f}r.__getArray=k;function L(p){let h=n.buffer,s=new Uint32Array(h)[p+-4>>>2];return h.slice(p,p+s)}r.__getArrayBuffer=L;function W(p){if(!i)throw Error(gk);let h=new Uint32Array(n.buffer)[p>>>2];return i.get(h)}r.__getFunction=W;function A(p,h,s){return new p(M(p,h,s))}function M(p,h,s){let f=n.buffer,g=new Uint32Array(f);return new p(f,g[s+4>>>2],g[s+8>>>2]>>>h)}function x(p,h,s){r[`__get${h}`]=A.bind(null,p,s),r[`__get${h}View`]=M.bind(null,p,s)}[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array].forEach(p=>{x(p,p.name,31-Math.clz32(p.BYTES_PER_ELEMENT))}),mk&&[BigUint64Array,BigInt64Array].forEach(p=>{x(p,p.name.slice(3),3)});function u(p,h){let s=new Uint32Array(n.buffer),f=s[p+-8>>>2];if(f<=_(s))do{if(f==h)return!0;f=I(f)}while(f);return!1}return r.__instanceof=u,r.memory=r.memory||n,r.table=r.table||i,t8(t,r)}function Y4(r){return typeof Response<"u"&&r instanceof Response}function Q4(r){return r instanceof WebAssembly.Module}async function Z4(r,e={}){if(Y4(r=await r))return e8(r,e);let t=Q4(r)?r:await WebAssembly.compile(r),n=Gp(e),i=await WebAssembly.instantiate(t,e),o=zp(n,i);return{module:t,instance:i,exports:o}}function wk(r,e={}){let t=Q4(r)?r:new WebAssembly.Module(r),n=Gp(e),i=new WebAssembly.Instance(t,e),o=zp(n,i);return{module:t,instance:i,exports:o}}async function e8(r,e={}){if(!WebAssembly.instantiateStreaming)return Z4(Y4(r=await r)?r.arrayBuffer():r,e);let t=Gp(e),n=await WebAssembly.instantiateStreaming(r,e),i=zp(t,n.instance);return{...n,exports:i}}function t8(r,e={}){let t=r.__argumentsLength?n=>{r.__argumentsLength.value=n}:r.__setArgumentsLength||r.__setargc||(()=>{});for(let n of Object.keys(r)){let i=r[n],o=n.split("."),a=e;for(;o.length>1;){let m=o.shift();Object.hasOwn(a,m)||(a[m]={}),a=a[m]}let c=o[0],y=c.indexOf("#");if(y>=0){let m=c.substring(0,y),_=a[m];if(typeof _>"u"||!_.prototype){let S=function(...I){return S.wrap(S.prototype.constructor(0,...I))};S.prototype={valueOf(){return this[Sf]}},S.wrap=function(I){return Object.create(S.prototype,{[Sf]:{value:I,writable:!1}})},_&&Object.getOwnPropertyNames(_).forEach(I=>Object.defineProperty(S,I,Object.getOwnPropertyDescriptor(_,I))),a[m]=S}if(c=c.substring(y+1),a=a[m].prototype,/^(get|set):/.test(c)){if(!Object.hasOwn(a,c=c.substring(4))){let S=r[n.replace("set:","get:")],I=r[n.replace("get:","set:")];Object.defineProperty(a,c,{get(){return S(this[Sf])},set(E){I(this[Sf],E)},enumerable:!0})}}else c==="constructor"?(a[c]=function(...S){return t(S.length),i(...S)}).original=i:(a[c]=function(...S){return t(S.length),i(this[Sf],...S)}).original=i}else/^(get|set):/.test(c)?Object.hasOwn(a,c=c.substring(4))||Object.defineProperty(a,c,{get:r[n.replace("set:","get:")],set:r[n.replace("get:","set:")],enumerable:!0}):typeof i=="function"&&i!==t?(a[c]=(...m)=>(t(m.length),i(...m))).original=i:a[c]=i}return e}var r8={instantiate:Z4,instantiateSync:wk,instantiateStreaming:e8,demangle:t8};var n8=(r,e)=>{let t=Ee.INST.create("WASM:AS");return{metering:{usegas:r.useGas},console:{"console.log":function(i){t.debug(`${r.contract.id}: ${e.exports.__getString(i)}`)},"console.logO":function(i,o){t.debug(`${r.contract.id}: ${e.exports.__getString(i)}`,JSON.parse(e.exports.__getString(o)))}},block:{"Block.height":function(){return r.block.height},"Block.indep_hash":function(){return e.exports.__newString(r.block.indep_hash)},"Block.timestamp":function(){return r.block.timestamp}},transaction:{"Transaction.id":function(){return e.exports.__newString(r.transaction.id)},"Transaction.owner":function(){return e.exports.__newString(r.transaction.owner)},"Transaction.target":function(){return e.exports.__newString(r.transaction.target)}},contract:{"Contract.id":function(){return e.exports.__newString(r.contract.id)},"Contract.owner":function(){return e.exports.__newString(r.contract.owner)}},api:{_readContractState:(i,o)=>{let a=e.exports.__getString(o),c=n(i);return console.log("Simulating read state of",a),setTimeout(()=>{console.log("calling callback"),c(e.exports.__newString(JSON.stringify({contractTxId:a})))},1e3)},clearTimeout},env:{abort(i,o,a,c){let y=e.exports.__getString(i);throw t.error(`--------------------- Error message from AssemblyScript ----------------------
`),t.error("  "+y),t.error('    In file "'+e.exports.__getString(o)+'"'),t.error(`    on line ${a}, column ${c}.`),t.error(`------------------------------------------------------------------------------
`),new Error(y)}}};function n(i){return e.exports.table.get(i)}};var i8=(r,e,t,n)=>{let i=Ee.INST.create("WASM:Rust"),o={metering:{usegas:r.useGas},console:{log:function(d){i.debug(`${r.contract.id}: ${d}`)}},Block:{height:function(){return r.block.height},indep_hash:function(){return r.block.indep_hash},timestamp:function(){return r.block.timestamp}},Transaction:{id:function(){return r.transaction.id},owner:function(){return r.transaction.owner},target:function(){return r.transaction.target}},Contract:{id:function(){return r.contract.id},owner:function(){return r.contract.owner}},SmartWeave:{caller:function(){return r.caller},readContractState:async function(d){return await r.contracts.readContractState(d)},write:async function(d,l){return await r.contracts.write(d,l)}},Vrf:{value:function(){return r.vrf.value},randomInt:function(d){return r.vrf.randomInt(d)}}},a={__wbg_log_:function(d,l){o.console.log(E(d,l))},__wbindgen_json_parse:function(d,l){var w=JSON.parse(E(d,l));return j(w)},__wbindgen_json_serialize:function(d,l){let w=q(l);var T=JSON.stringify(w===void 0?null:w),b=k(T,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),F=D;W()[d/4+1]=F,W()[d/4+0]=b},__wbindgen_object_drop_ref:function(d){M(d)},__wbindgen_cb_drop:function(d){let l=M(d).original;if(l.cnt--==1)return l.a=0,!0;var w=!1;return w},__wbg_readContractState:function(d,l){var w=o.SmartWeave.readContractState(E(d,l));return j(w)},__wbg_viewContractState:function(d,l){},__wbg_caller:function(d){var l=o.SmartWeave.caller(),w=k(l,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),T=D;W()[d/4+1]=T,W()[d/4+0]=w},__wbg_write:function(d,l,w){var T=o.SmartWeave.write(E(d,l),M(w));return j(T)},__wbg_refreshState:function(d,l){},__wbg_indephash:function(d){var l=o.Block.indep_hash(),w=k(l,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),T=D;W()[d/4+1]=T,W()[d/4+0]=w},__wbg_height:function(){var d=o.Block.height();return d},__wbg_timestamp:function(){var d=o.Block.timestamp();return d},__wbg_id:function(d){var l=o.Transaction.id(),w=k(l,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),T=D;W()[d/4+1]=T,W()[d/4+0]=w},__wbg_contractOwner:function(d){var l=o.Contract.owner(),w=k(l,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),T=D;W()[d/4+1]=T,W()[d/4+0]=w},__wbg_contractId:function(d){var l=o.Contract.id(),w=k(l,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),T=D;W()[d/4+1]=T,W()[d/4+0]=w},__wbg_owner:function(d){var l=o.Transaction.owner(),w=k(l,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),T=D;W()[d/4+1]=T,W()[d/4+0]=w},__wbg_target:function(d){var l=o.Transaction.target(),w=k(l,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),T=D;W()[d/4+1]=T,W()[d/4+0]=w},__wbg_call:function(){return f(function(d,l,w){var T=q(d).call(q(l),q(w));return j(T)},arguments)},__wbg_new:function(d,l){try{var w={a:d,b:l},T=(F,X)=>{let Z=w.a;w.a=0;try{return g(Z,w.b,F,X)}finally{w.a=Z}},b=new Promise(T);return j(b)}finally{w.a=w.b=0}},__wbg_resolve:function(d){var l=Promise.resolve(q(d));return j(l)},__wbg_then_a:function(d,l){var w=q(d).then(q(l));return j(w)},__wbg_then_5:function(d,l,w){var T=q(d).then(q(l),q(w));return j(T)},__wbindgen_debug_string:function(d,l){var w=x(q(l)),T=k(w,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),b=D;W()[d/4+1]=b,W()[d/4+0]=T},__wbindgen_throw:function(d,l){throw new Error(E(d,l))},__wbindgen_closure_wrapper:function(d,l,w){var T=u(d,l,n,p);return j(T)},__wbindgen_string_new:function(d,l){var w=E(d,l);return j(w)},__wbg_value:function(d){var l=o.Vrf.value(),w=k(l,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),T=D;W()[d/4+1]=T,W()[d/4+0]=w},__wbg_randomInt:function(d,l){var w=o.Vrf.randomInt(l);return w}},c=Object.keys(a),y=e.reduce((d,l)=>{let w=c.find(T=>l.startsWith(T));if(w===void 0)throw new Error(`Cannot find import mapping for ${l}`);return d[l]=a[w],d},{}),m={};m.__wbindgen_placeholder__=y;let _=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});_.decode();let S=null;function I(){return(S===null||S.buffer!==t.exports.memory.buffer)&&(S=new Uint8Array(t.exports.memory.buffer)),S}function E(d,l){return _.decode(I().subarray(d,d+l))}let C=new Array(32).fill(void 0);C.push(void 0,null,!0,!1);let N=C.length;function j(d){N===C.length&&C.push(C.length+1);let l=N;return N=C[l],C[l]=d,l}function q(d){return C[d]}let D=0,Q=new TextEncoder("utf-8"),oe=typeof Q.encodeInto=="function"?function(d,l){return Q.encodeInto(d,l)}:function(d,l){let w=Q.encode(d);return l.set(w),{read:d.length,written:w.length}};function k(d,l,w){if(w===void 0){let Z=Q.encode(d),re=l(Z.length);return I().subarray(re,re+Z.length).set(Z),D=Z.length,re}let T=d.length,b=l(T),F=I(),X=0;for(;X<T;X++){let Z=d.charCodeAt(X);if(Z>127)break;F[b+X]=Z}if(X!==T){X!==0&&(d=d.slice(X)),b=w(b,T,T=X+d.length*3);let Z=I().subarray(b+X,b+T);X+=oe(d,Z).written}return D=X,b}let L=null;function W(){return(L===null||L.buffer!==t.exports.memory.buffer)&&(L=new Int32Array(t.exports.memory.buffer)),L}function A(d){d<36||(C[d]=N,N=d)}function M(d){let l=q(d);return A(d),l}function x(d){let l=typeof d;if(l=="number"||l=="boolean"||d==null)return`${d}`;if(l=="string")return`"${d}"`;if(l=="symbol"){let b=d.description;return b==null?"Symbol":`Symbol(${b})`}if(l=="function"){let b=d.name;return typeof b=="string"&&b.length>0?`Function(${b})`:"Function"}if(Array.isArray(d)){let b=d.length,F="[";b>0&&(F+=x(d[0]));for(let X=1;X<b;X++)F+=", "+x(d[X]);return F+="]",F}let w=/\[object ([^\]]+)\]/.exec(toString.call(d)),T;if(w.length>1)T=w[1];else return toString.call(d);if(T=="Object")try{return"Object("+JSON.stringify(d)+")"}catch{return"Object"}return d instanceof Error?`${d.name}: ${d.message}
${d.stack}`:T}function u(d,l,w,T){let b={a:d,b:l,cnt:1,dtor:w},F=(...X)=>{b.cnt++;let Z=b.a;b.a=0;try{return T(Z,b.b,...X)}finally{--b.cnt===0?t.exports.__wbindgen_export_2.get(b.dtor)(Z,b.b):b.a=Z}};return F.original=b,F}function p(d,l,w){t.modifiedExports._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__(d,l,j(w))}y.handle=function(d){var l=t.exports.handle(j(d));return M(l)};let h=32;function s(d){if(h==1)throw new Error("out of js stack");return C[--h]=d,h}y.initState=function(d){try{t.exports.initState(s(d))}finally{C[h++]=void 0}},y.currentState=function(){var d=t.exports.currentState();return M(d)},y.lang=function(){try{let w=t.exports.__wbindgen_add_to_stack_pointer(-16);t.exports.lang(w);var d=W()[w/4+0],l=W()[w/4+1];return E(d,l)}finally{t.exports.__wbindgen_add_to_stack_pointer(16),t.exports.__wbindgen_free(d,l)}},y.type=function(){var d=t.exports.type();return d};function f(d,l){try{return d.apply(this,l)}catch(w){t.exports.__wbindgen_exn_store(j(w))}}function g(d,l,w,T){t.modifiedExports.wasm_bindgen__convert__closures__invoke2_mut__(d,l,j(w),j(T))}class v{__destroy_into_raw(){let l=this.ptr;return this.ptr=0,l}free(){let l=this.__destroy_into_raw();t.exports.__wbg_statewrapper_free(l)}}return y.StateWrapper=v,m.metering=o.metering,{imports:m,exports:y}};var xk=new TextEncoder,o8=new TextDecoder("utf-8"),Kp=[],po;(function(r){po=r,po.redstone={go:{}}}).call(void 0,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{});var Ls=class{_callbackTimeouts;_nextCallbackTimeoutID;_inst;_values;_ids;_idPool;_goRefCounts;importObject;exited;_resolveCallbackPromise;_pendingEvent;_id;exports;constructor(e){this._callbackTimeouts=new Map,this._nextCallbackTimeoutID=1;let t=Ee.INST.create("WASM:Go"),n=this;po.redstone.go={WasmModule:{registerWasmModule:function(E){n._id=E,n.exports=po[E],delete po[E],po.redstone.go[E]={},po.redstone.go[E].imports={console:{log:function(...C){t.debug(C[0],...C.slice(1))}},Transaction:{id:function(){return e.transaction.id},owner:function(){return e.transaction.owner},target:function(){return e.transaction.target}},Block:{indep_hash:function(){return e.block.indep_hash},height:function(){return e.block.height},timestamp:function(){return e.block.timestamp}},Contract:{id:function(){return e.contract.id},owner:function(){return e.contract.owner}},SmartWeave:{readContractState:async function(C){return await e.contracts.readContractState(C)}}}}}};let i=()=>new DataView(this._inst.exports.memory.buffer),o=(E,C)=>{i().setUint32(E+0,C,!0),i().setUint32(E+4,Math.floor(C/4294967296),!0)},a=E=>{let C=i().getUint32(E+0,!0),N=i().getInt32(E+4,!0);return C+N*4294967296},c=E=>{let C=i().getFloat64(E,!0);if(C===0)return;if(!isNaN(C))return C;let N=i().getUint32(E,!0);return this._values[N]},y=(E,C)=>{if(typeof C=="number"){if(isNaN(C)){i().setUint32(E+4,2146959360,!0),i().setUint32(E,0,!0);return}if(C===0){i().setUint32(E+4,2146959360,!0),i().setUint32(E,1,!0);return}i().setFloat64(E,C,!0);return}switch(C){case void 0:i().setFloat64(E,0,!0);return;case null:i().setUint32(E+4,2146959360,!0),i().setUint32(E,2,!0);return;case!0:i().setUint32(E+4,2146959360,!0),i().setUint32(E,3,!0);return;case!1:i().setUint32(E+4,2146959360,!0),i().setUint32(E,4,!0);return}let j=this._ids.get(C);j===void 0&&(j=this._idPool.pop(),j===void 0&&(j=this._values.length),this._values[j]=C,this._goRefCounts[j]=0,this._ids.set(C,j)),this._goRefCounts[j]++;let q=1;switch(typeof C){case"string":q=2;break;case"symbol":q=3;break;case"function":q=4;break}i().setUint32(E+4,2146959360|q,!0),i().setUint32(E,j,!0)},m=(E,C,N=null)=>new Uint8Array(this._inst.exports.memory.buffer,E,C),_=(E,C,N)=>{let j=new Array(C);for(let q=0;q<C;q++)j[q]=c(E+q*8);return j},S=(E,C)=>o8.decode(new DataView(this._inst.exports.memory.buffer,E,C)),I=Date.now()-performance.now();this.importObject={wasi_snapshot_preview1:{fd_write:function(E,C,N,j){let q=0;if(E==1)for(let D=0;D<N;D++){let Q=C+D*8,oe=i().getUint32(Q+0,!0),k=i().getUint32(Q+4,!0);q+=k;for(let L=0;L<k;L++){let W=i().getUint8(oe+L);if(W!=13)if(W==10){let A=o8.decode(new Uint8Array(Kp));Kp=[],console.log(A)}else Kp.push(W)}}else console.error("invalid file descriptor:",E);return i().setUint32(j,q,!0),0},fd_close:()=>0,fd_fdstat_get:()=>0,fd_seek:()=>0,proc_exit:E=>{if(global.process)process.exit(E);else throw"trying to exit with code "+E},random_get:(E,C)=>(crypto.getRandomValues(m(E,C,null)),0)},env:{"runtime.ticks":()=>I+performance.now(),"runtime.sleepTicks":E=>{setTimeout(this._inst.exports.go_scheduler,E)},"syscall/js.finalizeRef":E=>{let C=i().getUint32(E,!0);if(this._goRefCounts[C]--,this._goRefCounts[C]===0){let N=this._values[C];this._values[C]=null,this._ids.delete(N),this._idPool.push(C)}},"syscall/js.stringVal":(E,C,N)=>{let j=S(C,N);y(E,j)},"syscall/js.valueGet":(E,C,N,j)=>{let q=S(N,j),D=c(C),Q=Reflect.get(D,q);y(E,Q)},"syscall/js.valueSet":(E,C,N,j)=>{let q=c(E),D=S(C,N),Q=c(j);Reflect.set(q,D,Q)},"syscall/js.valueDelete":(E,C,N)=>{let j=c(E),q=S(C,N);Reflect.deleteProperty(j,q)},"syscall/js.valueIndex":(E,C,N)=>{y(E,Reflect.get(c(C),N))},"syscall/js.valueSetIndex":(E,C,N)=>{Reflect.set(c(E),C,c(N))},"syscall/js.valueCall":(E,C,N,j,q,D,Q)=>{let oe=c(C),k=S(N,j),L=_(q,D,Q);try{let W=Reflect.get(oe,k);y(E,Reflect.apply(W,oe,L)),i().setUint8(E+8,1)}catch(W){y(E,W),i().setUint8(E+8,0)}},"syscall/js.valueInvoke":(E,C,N,j,q)=>{try{let D=c(C),Q=_(N,j,q);y(E,Reflect.apply(D,void 0,Q)),i().setUint8(E+8,1)}catch(D){y(E,D),i().setUint8(E+8,0)}},"syscall/js.valueNew":(E,C,N,j,q)=>{let D=c(C),Q=_(N,j,q);try{y(E,Reflect.construct(D,Q)),i().setUint8(E+8,1)}catch(oe){y(E,oe),i().setUint8(E+8,0)}},"syscall/js.valueLength":E=>c(E).length,"syscall/js.valuePrepareString":(E,C)=>{let N=String(c(C)),j=xk.encode(N);y(E,j),o(E+8,j.length)},"syscall/js.valueLoadString":(E,C,N,j)=>{let q=c(E);m(C,N,j).set(q)},"syscall/js.valueInstanceOf":(E,C)=>c(E)instanceof c(C),"syscall/js.copyBytesToGo":(E,C,N,j,q)=>{let D=E,Q=E+4,oe=m(C,N),k=c(q);if(!(k instanceof Uint8Array)){i().setUint8(Q,0);return}let L=k.subarray(0,oe.length);oe.set(L),o(D,L.length),i().setUint8(Q,1)},"syscall/js.copyBytesToJS":(E,C,N,j,q)=>{let D=E,Q=E+4,oe=c(C),k=m(N,j);if(!(oe instanceof Uint8Array)){i().setUint8(Q,0);return}let L=k.subarray(0,oe.length);oe.set(L),o(D,L.length),i().setUint8(Q,1)}}}}async run(e){this._inst=e,this._values=[NaN,0,null,!0,!1,global,this],this._goRefCounts=[],this._ids=new Map,this._idPool=[],this.exited=!1;let t=new DataView(this._inst.exports.memory.buffer);for(;;){let n=new Promise(i=>{this._resolveCallbackPromise=()=>{if(this.exited)throw new Error("bad callback: Go program has already exited");setTimeout(i,0)}});if(this._inst.exports._start(),this.exited)break;await n}}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(e){let t=this;return function(){let n={id:e,this:this,args:arguments};return t._pendingEvent=n,t._resume(),n.result}}_resolveExitPromise(){}};var _k=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Vp=Math.ceil,un=Math.floor,Jt="[BigNumber Error] ",s8=Jt+"Number primitive has more than 15 significant digits: ",Wr=1e14,Ae=14,Jp=9007199254740991,Xp=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],pi=1e7,It=1e9;function a8(r){var e,t,n,i=D.prototype={constructor:D,toString:null,valueOf:null},o=new D(1),a=20,c=4,y=-7,m=21,_=-1e7,S=1e7,I=!1,E=1,C=0,N={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},j="0123456789abcdefghijklmnopqrstuvwxyz",q=!0;function D(A,M){var x,u,p,h,s,f,g,v,d=this;if(!(d instanceof D))return new D(A,M);if(M==null){if(A&&A._isBigNumber===!0){d.s=A.s,!A.c||A.e>S?d.c=d.e=null:A.e<_?d.c=[d.e=0]:(d.e=A.e,d.c=A.c.slice());return}if((f=typeof A=="number")&&A*0==0){if(d.s=1/A<0?(A=-A,-1):1,A===~~A){for(h=0,s=A;s>=10;s/=10,h++);h>S?d.c=d.e=null:(d.e=h,d.c=[A]);return}v=String(A)}else{if(!_k.test(v=String(A)))return n(d,v,f);d.s=v.charCodeAt(0)==45?(v=v.slice(1),-1):1}(h=v.indexOf("."))>-1&&(v=v.replace(".","")),(s=v.search(/e/i))>0?(h<0&&(h=s),h+=+v.slice(s+1),v=v.substring(0,s)):h<0&&(h=v.length)}else{if(ht(M,2,j.length,"Base"),M==10&&q)return d=new D(A),L(d,a+d.e+1,c);if(v=String(A),f=typeof A=="number"){if(A*0!=0)return n(d,v,f,M);if(d.s=1/A<0?(v=v.slice(1),-1):1,D.DEBUG&&v.replace(/^0\.0*|\./,"").length>15)throw Error(s8+A)}else d.s=v.charCodeAt(0)===45?(v=v.slice(1),-1):1;for(x=j.slice(0,M),h=s=0,g=v.length;s<g;s++)if(x.indexOf(u=v.charAt(s))<0){if(u=="."){if(s>h){h=g;continue}}else if(!p&&(v==v.toUpperCase()&&(v=v.toLowerCase())||v==v.toLowerCase()&&(v=v.toUpperCase()))){p=!0,s=-1,h=0;continue}return n(d,String(A),f,M)}f=!1,v=t(v,M,10,d.s),(h=v.indexOf("."))>-1?v=v.replace(".",""):h=v.length}for(s=0;v.charCodeAt(s)===48;s++);for(g=v.length;v.charCodeAt(--g)===48;);if(v=v.slice(s,++g)){if(g-=s,f&&D.DEBUG&&g>15&&(A>Jp||A!==un(A)))throw Error(s8+d.s*A);if((h=h-s-1)>S)d.c=d.e=null;else if(h<_)d.c=[d.e=0];else{if(d.e=h,d.c=[],s=(h+1)%Ae,h<0&&(s+=Ae),s<g){for(s&&d.c.push(+v.slice(0,s)),g-=Ae;s<g;)d.c.push(+v.slice(s,s+=Ae));s=Ae-(v=v.slice(s)).length}else s-=g;for(;s--;v+="0");d.c.push(+v)}}else d.c=[d.e=0]}D.clone=a8,D.ROUND_UP=0,D.ROUND_DOWN=1,D.ROUND_CEIL=2,D.ROUND_FLOOR=3,D.ROUND_HALF_UP=4,D.ROUND_HALF_DOWN=5,D.ROUND_HALF_EVEN=6,D.ROUND_HALF_CEIL=7,D.ROUND_HALF_FLOOR=8,D.EUCLID=9,D.config=D.set=function(A){var M,x;if(A!=null)if(typeof A=="object"){if(A.hasOwnProperty(M="DECIMAL_PLACES")&&(x=A[M],ht(x,0,It,M),a=x),A.hasOwnProperty(M="ROUNDING_MODE")&&(x=A[M],ht(x,0,8,M),c=x),A.hasOwnProperty(M="EXPONENTIAL_AT")&&(x=A[M],x&&x.pop?(ht(x[0],-It,0,M),ht(x[1],0,It,M),y=x[0],m=x[1]):(ht(x,-It,It,M),y=-(m=x<0?-x:x))),A.hasOwnProperty(M="RANGE"))if(x=A[M],x&&x.pop)ht(x[0],-It,-1,M),ht(x[1],1,It,M),_=x[0],S=x[1];else if(ht(x,-It,It,M),x)_=-(S=x<0?-x:x);else throw Error(Jt+M+" cannot be zero: "+x);if(A.hasOwnProperty(M="CRYPTO"))if(x=A[M],x===!!x)if(x)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))I=x;else throw I=!x,Error(Jt+"crypto unavailable");else I=x;else throw Error(Jt+M+" not true or false: "+x);if(A.hasOwnProperty(M="MODULO_MODE")&&(x=A[M],ht(x,0,9,M),E=x),A.hasOwnProperty(M="POW_PRECISION")&&(x=A[M],ht(x,0,It,M),C=x),A.hasOwnProperty(M="FORMAT"))if(x=A[M],typeof x=="object")N=x;else throw Error(Jt+M+" not an object: "+x);if(A.hasOwnProperty(M="ALPHABET"))if(x=A[M],typeof x=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(x))q=x.slice(0,10)=="0123456789",j=x;else throw Error(Jt+M+" invalid: "+x)}else throw Error(Jt+"Object expected: "+A);return{DECIMAL_PLACES:a,ROUNDING_MODE:c,EXPONENTIAL_AT:[y,m],RANGE:[_,S],CRYPTO:I,MODULO_MODE:E,POW_PRECISION:C,FORMAT:N,ALPHABET:j}},D.isBigNumber=function(A){if(!A||A._isBigNumber!==!0)return!1;if(!D.DEBUG)return!0;var M,x,u=A.c,p=A.e,h=A.s;e:if({}.toString.call(u)=="[object Array]"){if((h===1||h===-1)&&p>=-It&&p<=It&&p===un(p)){if(u[0]===0){if(p===0&&u.length===1)return!0;break e}if(M=(p+1)%Ae,M<1&&(M+=Ae),String(u[0]).length==M){for(M=0;M<u.length;M++)if(x=u[M],x<0||x>=Wr||x!==un(x))break e;if(x!==0)return!0}}}else if(u===null&&p===null&&(h===null||h===1||h===-1))return!0;throw Error(Jt+"Invalid BigNumber: "+A)},D.maximum=D.max=function(){return oe(arguments,i.lt)},D.minimum=D.min=function(){return oe(arguments,i.gt)},D.random=function(){var A=9007199254740992,M=Math.random()*A&2097151?function(){return un(Math.random()*A)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(x){var u,p,h,s,f,g=0,v=[],d=new D(o);if(x==null?x=a:ht(x,0,It),s=Vp(x/Ae),I)if(crypto.getRandomValues){for(u=crypto.getRandomValues(new Uint32Array(s*=2));g<s;)f=u[g]*131072+(u[g+1]>>>11),f>=9e15?(p=crypto.getRandomValues(new Uint32Array(2)),u[g]=p[0],u[g+1]=p[1]):(v.push(f%1e14),g+=2);g=s/2}else if(crypto.randomBytes){for(u=crypto.randomBytes(s*=7);g<s;)f=(u[g]&31)*281474976710656+u[g+1]*1099511627776+u[g+2]*4294967296+u[g+3]*16777216+(u[g+4]<<16)+(u[g+5]<<8)+u[g+6],f>=9e15?crypto.randomBytes(7).copy(u,g):(v.push(f%1e14),g+=7);g=s/7}else throw I=!1,Error(Jt+"crypto unavailable");if(!I)for(;g<s;)f=M(),f<9e15&&(v[g++]=f%1e14);for(s=v[--g],x%=Ae,s&&x&&(f=Xp[Ae-x],v[g]=un(s/f)*f);v[g]===0;v.pop(),g--);if(g<0)v=[h=0];else{for(h=-1;v[0]===0;v.splice(0,1),h-=Ae);for(g=1,f=v[0];f>=10;f/=10,g++);g<Ae&&(h-=Ae-g)}return d.e=h,d.c=v,d}}(),D.sum=function(){for(var A=1,M=arguments,x=new D(M[0]);A<M.length;)x=x.plus(M[A++]);return x},t=function(){var A="0123456789";function M(x,u,p,h){for(var s,f=[0],g,v=0,d=x.length;v<d;){for(g=f.length;g--;f[g]*=u);for(f[0]+=h.indexOf(x.charAt(v++)),s=0;s<f.length;s++)f[s]>p-1&&(f[s+1]==null&&(f[s+1]=0),f[s+1]+=f[s]/p|0,f[s]%=p)}return f.reverse()}return function(x,u,p,h,s){var f,g,v,d,l,w,T,b,F=x.indexOf("."),X=a,Z=c;for(F>=0&&(d=C,C=0,x=x.replace(".",""),b=new D(u),w=b.pow(x.length-F),C=d,b.c=M(kn(Mr(w.c),w.e,"0"),10,p,A),b.e=b.c.length),T=M(x,u,p,s?(f=j,A):(f=A,j)),v=d=T.length;T[--d]==0;T.pop());if(!T[0])return f.charAt(0);if(F<0?--v:(w.c=T,w.e=v,w.s=h,w=e(w,b,X,Z,p),T=w.c,l=w.r,v=w.e),g=v+X+1,F=T[g],d=p/2,l=l||g<0||T[g+1]!=null,l=Z<4?(F!=null||l)&&(Z==0||Z==(w.s<0?3:2)):F>d||F==d&&(Z==4||l||Z==6&&T[g-1]&1||Z==(w.s<0?8:7)),g<1||!T[0])x=l?kn(f.charAt(1),-X,f.charAt(0)):f.charAt(0);else{if(T.length=g,l)for(--p;++T[--g]>p;)T[g]=0,g||(++v,T=[1].concat(T));for(d=T.length;!T[--d];);for(F=0,x="";F<=d;x+=f.charAt(T[F++]));x=kn(x,v,f.charAt(0))}return x}}(),e=function(){function A(u,p,h){var s,f,g,v,d=0,l=u.length,w=p%pi,T=p/pi|0;for(u=u.slice();l--;)g=u[l]%pi,v=u[l]/pi|0,s=T*g+v*w,f=w*g+s%pi*pi+d,d=(f/h|0)+(s/pi|0)+T*v,u[l]=f%h;return d&&(u=[d].concat(u)),u}function M(u,p,h,s){var f,g;if(h!=s)g=h>s?1:-1;else for(f=g=0;f<h;f++)if(u[f]!=p[f]){g=u[f]>p[f]?1:-1;break}return g}function x(u,p,h,s){for(var f=0;h--;)u[h]-=f,f=u[h]<p[h]?1:0,u[h]=f*s+u[h]-p[h];for(;!u[0]&&u.length>1;u.splice(0,1));}return function(u,p,h,s,f){var g,v,d,l,w,T,b,F,X,Z,re,fe,te,O,B,R,G,z=u.s==p.s?1:-1,U=u.c,H=p.c;if(!U||!U[0]||!H||!H[0])return new D(!u.s||!p.s||(U?H&&U[0]==H[0]:!H)?NaN:U&&U[0]==0||!H?z*0:z/0);for(F=new D(z),X=F.c=[],v=u.e-p.e,z=h+v+1,f||(f=Wr,v=Ir(u.e/Ae)-Ir(p.e/Ae),z=z/Ae|0),d=0;H[d]==(U[d]||0);d++);if(H[d]>(U[d]||0)&&v--,z<0)X.push(1),l=!0;else{for(O=U.length,R=H.length,d=0,z+=2,w=un(f/(H[0]+1)),w>1&&(H=A(H,w,f),U=A(U,w,f),R=H.length,O=U.length),te=R,Z=U.slice(0,R),re=Z.length;re<R;Z[re++]=0);G=H.slice(),G=[0].concat(G),B=H[0],H[1]>=f/2&&B++;do{if(w=0,g=M(H,Z,R,re),g<0){if(fe=Z[0],R!=re&&(fe=fe*f+(Z[1]||0)),w=un(fe/B),w>1)for(w>=f&&(w=f-1),T=A(H,w,f),b=T.length,re=Z.length;M(T,Z,b,re)==1;)w--,x(T,R<b?G:H,b,f),b=T.length,g=1;else w==0&&(g=w=1),T=H.slice(),b=T.length;if(b<re&&(T=[0].concat(T)),x(Z,T,re,f),re=Z.length,g==-1)for(;M(H,Z,R,re)<1;)w++,x(Z,R<re?G:H,re,f),re=Z.length}else g===0&&(w++,Z=[0]);X[d++]=w,Z[0]?Z[re++]=U[te]||0:(Z=[U[te]],re=1)}while((te++<O||Z[0]!=null)&&z--);l=Z[0]!=null,X[0]||X.splice(0,1)}if(f==Wr){for(d=1,z=X[0];z>=10;z/=10,d++);L(F,h+(F.e=d+v*Ae-1)+1,s,l)}else F.e=v,F.r=+l;return F}}();function Q(A,M,x,u){var p,h,s,f,g;if(x==null?x=c:ht(x,0,8),!A.c)return A.toString();if(p=A.c[0],s=A.e,M==null)g=Mr(A.c),g=u==1||u==2&&(s<=y||s>=m)?rl(g,s):kn(g,s,"0");else if(A=L(new D(A),M,x),h=A.e,g=Mr(A.c),f=g.length,u==1||u==2&&(M<=h||h<=y)){for(;f<M;g+="0",f++);g=rl(g,h)}else if(M-=s,g=kn(g,h,"0"),h+1>f){if(--M>0)for(g+=".";M--;g+="0");}else if(M+=h-f,M>0)for(h+1==f&&(g+=".");M--;g+="0");return A.s<0&&p?"-"+g:g}function oe(A,M){for(var x,u=1,p=new D(A[0]);u<A.length;u++)if(x=new D(A[u]),x.s)M.call(p,x)&&(p=x);else{p=x;break}return p}function k(A,M,x){for(var u=1,p=M.length;!M[--p];M.pop());for(p=M[0];p>=10;p/=10,u++);return(x=u+x*Ae-1)>S?A.c=A.e=null:x<_?A.c=[A.e=0]:(A.e=x,A.c=M),A}n=function(){var A=/^(-?)0([xbo])(?=\w[\w.]*$)/i,M=/^([^.]+)\.$/,x=/^\.([^.]+)$/,u=/^-?(Infinity|NaN)$/,p=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(h,s,f,g){var v,d=f?s:s.replace(p,"");if(u.test(d))h.s=isNaN(d)?null:d<0?-1:1;else{if(!f&&(d=d.replace(A,function(l,w,T){return v=(T=T.toLowerCase())=="x"?16:T=="b"?2:8,!g||g==v?w:l}),g&&(v=g,d=d.replace(M,"$1").replace(x,"0.$1")),s!=d))return new D(d,v);if(D.DEBUG)throw Error(Jt+"Not a"+(g?" base "+g:"")+" number: "+s);h.s=null}h.c=h.e=null}}();function L(A,M,x,u){var p,h,s,f,g,v,d,l=A.c,w=Xp;if(l){e:{for(p=1,f=l[0];f>=10;f/=10,p++);if(h=M-p,h<0)h+=Ae,s=M,g=l[v=0],d=g/w[p-s-1]%10|0;else if(v=Vp((h+1)/Ae),v>=l.length)if(u){for(;l.length<=v;l.push(0));g=d=0,p=1,h%=Ae,s=h-Ae+1}else break e;else{for(g=f=l[v],p=1;f>=10;f/=10,p++);h%=Ae,s=h-Ae+p,d=s<0?0:g/w[p-s-1]%10|0}if(u=u||M<0||l[v+1]!=null||(s<0?g:g%w[p-s-1]),u=x<4?(d||u)&&(x==0||x==(A.s<0?3:2)):d>5||d==5&&(x==4||u||x==6&&(h>0?s>0?g/w[p-s]:0:l[v-1])%10&1||x==(A.s<0?8:7)),M<1||!l[0])return l.length=0,u?(M-=A.e+1,l[0]=w[(Ae-M%Ae)%Ae],A.e=-M||0):l[0]=A.e=0,A;if(h==0?(l.length=v,f=1,v--):(l.length=v+1,f=w[Ae-h],l[v]=s>0?un(g/w[p-s]%w[s])*f:0),u)for(;;)if(v==0){for(h=1,s=l[0];s>=10;s/=10,h++);for(s=l[0]+=f,f=1;s>=10;s/=10,f++);h!=f&&(A.e++,l[0]==Wr&&(l[0]=1));break}else{if(l[v]+=f,l[v]!=Wr)break;l[v--]=0,f=1}for(h=l.length;l[--h]===0;l.pop());}A.e>S?A.c=A.e=null:A.e<_&&(A.c=[A.e=0])}return A}function W(A){var M,x=A.e;return x===null?A.toString():(M=Mr(A.c),M=x<=y||x>=m?rl(M,x):kn(M,x,"0"),A.s<0?"-"+M:M)}return i.absoluteValue=i.abs=function(){var A=new D(this);return A.s<0&&(A.s=1),A},i.comparedTo=function(A,M){return ks(this,new D(A,M))},i.decimalPlaces=i.dp=function(A,M){var x,u,p,h=this;if(A!=null)return ht(A,0,It),M==null?M=c:ht(M,0,8),L(new D(h),A+h.e+1,M);if(!(x=h.c))return null;if(u=((p=x.length-1)-Ir(this.e/Ae))*Ae,p=x[p])for(;p%10==0;p/=10,u--);return u<0&&(u=0),u},i.dividedBy=i.div=function(A,M){return e(this,new D(A,M),a,c)},i.dividedToIntegerBy=i.idiv=function(A,M){return e(this,new D(A,M),0,1)},i.exponentiatedBy=i.pow=function(A,M){var x,u,p,h,s,f,g,v,d,l=this;if(A=new D(A),A.c&&!A.isInteger())throw Error(Jt+"Exponent not an integer: "+W(A));if(M!=null&&(M=new D(M)),f=A.e>14,!l.c||!l.c[0]||l.c[0]==1&&!l.e&&l.c.length==1||!A.c||!A.c[0])return d=new D(Math.pow(+W(l),f?2-tl(A):+W(A))),M?d.mod(M):d;if(g=A.s<0,M){if(M.c?!M.c[0]:!M.s)return new D(NaN);u=!g&&l.isInteger()&&M.isInteger(),u&&(l=l.mod(M))}else{if(A.e>9&&(l.e>0||l.e<-1||(l.e==0?l.c[0]>1||f&&l.c[1]>=24e7:l.c[0]<8e13||f&&l.c[0]<=9999975e7)))return h=l.s<0&&tl(A)?-0:0,l.e>-1&&(h=1/h),new D(g?1/h:h);C&&(h=Vp(C/Ae+2))}for(f?(x=new D(.5),g&&(A.s=1),v=tl(A)):(p=Math.abs(+W(A)),v=p%2),d=new D(o);;){if(v){if(d=d.times(l),!d.c)break;h?d.c.length>h&&(d.c.length=h):u&&(d=d.mod(M))}if(p){if(p=un(p/2),p===0)break;v=p%2}else if(A=A.times(x),L(A,A.e+1,1),A.e>14)v=tl(A);else{if(p=+W(A),p===0)break;v=p%2}l=l.times(l),h?l.c&&l.c.length>h&&(l.c.length=h):u&&(l=l.mod(M))}return u?d:(g&&(d=o.div(d)),M?d.mod(M):h?L(d,C,c,s):d)},i.integerValue=function(A){var M=new D(this);return A==null?A=c:ht(A,0,8),L(M,M.e+1,A)},i.isEqualTo=i.eq=function(A,M){return ks(this,new D(A,M))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(A,M){return ks(this,new D(A,M))>0},i.isGreaterThanOrEqualTo=i.gte=function(A,M){return(M=ks(this,new D(A,M)))===1||M===0},i.isInteger=function(){return!!this.c&&Ir(this.e/Ae)>this.c.length-2},i.isLessThan=i.lt=function(A,M){return ks(this,new D(A,M))<0},i.isLessThanOrEqualTo=i.lte=function(A,M){return(M=ks(this,new D(A,M)))===-1||M===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(A,M){var x,u,p,h,s=this,f=s.s;if(A=new D(A,M),M=A.s,!f||!M)return new D(NaN);if(f!=M)return A.s=-M,s.plus(A);var g=s.e/Ae,v=A.e/Ae,d=s.c,l=A.c;if(!g||!v){if(!d||!l)return d?(A.s=-M,A):new D(l?s:NaN);if(!d[0]||!l[0])return l[0]?(A.s=-M,A):new D(d[0]?s:c==3?-0:0)}if(g=Ir(g),v=Ir(v),d=d.slice(),f=g-v){for((h=f<0)?(f=-f,p=d):(v=g,p=l),p.reverse(),M=f;M--;p.push(0));p.reverse()}else for(u=(h=(f=d.length)<(M=l.length))?f:M,f=M=0;M<u;M++)if(d[M]!=l[M]){h=d[M]<l[M];break}if(h&&(p=d,d=l,l=p,A.s=-A.s),M=(u=l.length)-(x=d.length),M>0)for(;M--;d[x++]=0);for(M=Wr-1;u>f;){if(d[--u]<l[u]){for(x=u;x&&!d[--x];d[x]=M);--d[x],d[u]+=Wr}d[u]-=l[u]}for(;d[0]==0;d.splice(0,1),--v);return d[0]?k(A,d,v):(A.s=c==3?-1:1,A.c=[A.e=0],A)},i.modulo=i.mod=function(A,M){var x,u,p=this;return A=new D(A,M),!p.c||!A.s||A.c&&!A.c[0]?new D(NaN):!A.c||p.c&&!p.c[0]?new D(p):(E==9?(u=A.s,A.s=1,x=e(p,A,0,3),A.s=u,x.s*=u):x=e(p,A,0,E),A=p.minus(x.times(A)),!A.c[0]&&E==1&&(A.s=p.s),A)},i.multipliedBy=i.times=function(A,M){var x,u,p,h,s,f,g,v,d,l,w,T,b,F,X,Z=this,re=Z.c,fe=(A=new D(A,M)).c;if(!re||!fe||!re[0]||!fe[0])return!Z.s||!A.s||re&&!re[0]&&!fe||fe&&!fe[0]&&!re?A.c=A.e=A.s=null:(A.s*=Z.s,!re||!fe?A.c=A.e=null:(A.c=[0],A.e=0)),A;for(u=Ir(Z.e/Ae)+Ir(A.e/Ae),A.s*=Z.s,g=re.length,l=fe.length,g<l&&(b=re,re=fe,fe=b,p=g,g=l,l=p),p=g+l,b=[];p--;b.push(0));for(F=Wr,X=pi,p=l;--p>=0;){for(x=0,w=fe[p]%X,T=fe[p]/X|0,s=g,h=p+s;h>p;)v=re[--s]%X,d=re[s]/X|0,f=T*v+d*w,v=w*v+f%X*X+b[h]+x,x=(v/F|0)+(f/X|0)+T*d,b[h--]=v%F;b[h]=x}return x?++u:b.splice(0,1),k(A,b,u)},i.negated=function(){var A=new D(this);return A.s=-A.s||null,A},i.plus=function(A,M){var x,u=this,p=u.s;if(A=new D(A,M),M=A.s,!p||!M)return new D(NaN);if(p!=M)return A.s=-M,u.minus(A);var h=u.e/Ae,s=A.e/Ae,f=u.c,g=A.c;if(!h||!s){if(!f||!g)return new D(p/0);if(!f[0]||!g[0])return g[0]?A:new D(f[0]?u:p*0)}if(h=Ir(h),s=Ir(s),f=f.slice(),p=h-s){for(p>0?(s=h,x=g):(p=-p,x=f),x.reverse();p--;x.push(0));x.reverse()}for(p=f.length,M=g.length,p-M<0&&(x=g,g=f,f=x,M=p),p=0;M;)p=(f[--M]=f[M]+g[M]+p)/Wr|0,f[M]=Wr===f[M]?0:f[M]%Wr;return p&&(f=[p].concat(f),++s),k(A,f,s)},i.precision=i.sd=function(A,M){var x,u,p,h=this;if(A!=null&&A!==!!A)return ht(A,1,It),M==null?M=c:ht(M,0,8),L(new D(h),A,M);if(!(x=h.c))return null;if(p=x.length-1,u=p*Ae+1,p=x[p]){for(;p%10==0;p/=10,u--);for(p=x[0];p>=10;p/=10,u++);}return A&&h.e+1>u&&(u=h.e+1),u},i.shiftedBy=function(A){return ht(A,-Jp,Jp),this.times("1e"+A)},i.squareRoot=i.sqrt=function(){var A,M,x,u,p,h=this,s=h.c,f=h.s,g=h.e,v=a+4,d=new D("0.5");if(f!==1||!s||!s[0])return new D(!f||f<0&&(!s||s[0])?NaN:s?h:1/0);if(f=Math.sqrt(+W(h)),f==0||f==1/0?(M=Mr(s),(M.length+g)%2==0&&(M+="0"),f=Math.sqrt(+M),g=Ir((g+1)/2)-(g<0||g%2),f==1/0?M="5e"+g:(M=f.toExponential(),M=M.slice(0,M.indexOf("e")+1)+g),x=new D(M)):x=new D(f+""),x.c[0]){for(g=x.e,f=g+v,f<3&&(f=0);;)if(p=x,x=d.times(p.plus(e(h,p,v,1))),Mr(p.c).slice(0,f)===(M=Mr(x.c)).slice(0,f))if(x.e<g&&--f,M=M.slice(f-3,f+1),M=="9999"||!u&&M=="4999"){if(!u&&(L(p,p.e+a+2,0),p.times(p).eq(h))){x=p;break}v+=4,f+=4,u=1}else{(!+M||!+M.slice(1)&&M.charAt(0)=="5")&&(L(x,x.e+a+2,1),A=!x.times(x).eq(h));break}}return L(x,x.e+a+1,c,A)},i.toExponential=function(A,M){return A!=null&&(ht(A,0,It),A++),Q(this,A,M,1)},i.toFixed=function(A,M){return A!=null&&(ht(A,0,It),A=A+this.e+1),Q(this,A,M)},i.toFormat=function(A,M,x){var u,p=this;if(x==null)A!=null&&M&&typeof M=="object"?(x=M,M=null):A&&typeof A=="object"?(x=A,A=M=null):x=N;else if(typeof x!="object")throw Error(Jt+"Argument not an object: "+x);if(u=p.toFixed(A,M),p.c){var h,s=u.split("."),f=+x.groupSize,g=+x.secondaryGroupSize,v=x.groupSeparator||"",d=s[0],l=s[1],w=p.s<0,T=w?d.slice(1):d,b=T.length;if(g&&(h=f,f=g,g=h,b-=h),f>0&&b>0){for(h=b%f||f,d=T.substr(0,h);h<b;h+=f)d+=v+T.substr(h,f);g>0&&(d+=v+T.slice(h)),w&&(d="-"+d)}u=l?d+(x.decimalSeparator||"")+((g=+x.fractionGroupSize)?l.replace(new RegExp("\\d{"+g+"}\\B","g"),"$&"+(x.fractionGroupSeparator||"")):l):d}return(x.prefix||"")+u+(x.suffix||"")},i.toFraction=function(A){var M,x,u,p,h,s,f,g,v,d,l,w,T=this,b=T.c;if(A!=null&&(f=new D(A),!f.isInteger()&&(f.c||f.s!==1)||f.lt(o)))throw Error(Jt+"Argument "+(f.isInteger()?"out of range: ":"not an integer: ")+W(f));if(!b)return new D(T);for(M=new D(o),v=x=new D(o),u=g=new D(o),w=Mr(b),h=M.e=w.length-T.e-1,M.c[0]=Xp[(s=h%Ae)<0?Ae+s:s],A=!A||f.comparedTo(M)>0?h>0?M:v:f,s=S,S=1/0,f=new D(w),g.c[0]=0;d=e(f,M,0,1),p=x.plus(d.times(u)),p.comparedTo(A)!=1;)x=u,u=p,v=g.plus(d.times(p=v)),g=p,M=f.minus(d.times(p=M)),f=p;return p=e(A.minus(x),u,0,1),g=g.plus(p.times(v)),x=x.plus(p.times(u)),g.s=v.s=T.s,h=h*2,l=e(v,u,h,c).minus(T).abs().comparedTo(e(g,x,h,c).minus(T).abs())<1?[v,u]:[g,x],S=s,l},i.toNumber=function(){return+W(this)},i.toPrecision=function(A,M){return A!=null&&ht(A,1,It),Q(this,A,M,2)},i.toString=function(A){var M,x=this,u=x.s,p=x.e;return p===null?u?(M="Infinity",u<0&&(M="-"+M)):M="NaN":(A==null?M=p<=y||p>=m?rl(Mr(x.c),p):kn(Mr(x.c),p,"0"):A===10&&q?(x=L(new D(x),a+p+1,c),M=kn(Mr(x.c),x.e,"0")):(ht(A,2,j.length,"Base"),M=t(kn(Mr(x.c),p,"0"),10,A,u,!0)),u<0&&x.c[0]&&(M="-"+M)),M},i.valueOf=i.toJSON=function(){return W(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,r!=null&&D.set(r),D}function Ir(r){var e=r|0;return r>0||r===e?e:e-1}function Mr(r){for(var e,t,n=1,i=r.length,o=r[0]+"";n<i;){for(e=r[n++]+"",t=Ae-e.length;t--;e="0"+e);o+=e}for(i=o.length;o.charCodeAt(--i)===48;);return o.slice(0,i+1||1)}function ks(r,e){var t,n,i=r.c,o=e.c,a=r.s,c=e.s,y=r.e,m=e.e;if(!a||!c)return null;if(t=i&&!i[0],n=o&&!o[0],t||n)return t?n?0:-c:a;if(a!=c)return a;if(t=a<0,n=y==m,!i||!o)return n?0:!i^t?1:-1;if(!n)return y>m^t?1:-1;for(c=(y=i.length)<(m=o.length)?y:m,a=0;a<c;a++)if(i[a]!=o[a])return i[a]>o[a]^t?1:-1;return y==m?0:y>m^t?1:-1}function ht(r,e,t,n){if(r<e||r>t||r!==un(r))throw Error(Jt+(n||"Argument")+(typeof r=="number"?r<e||r>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(r))}function tl(r){var e=r.c.length-1;return Ir(r.e/Ae)==e&&r.c[e]%2!=0}function rl(r,e){return(r.length>1?r.charAt(0)+"."+r.slice(1):r)+(e<0?"e":"e+")+e}function kn(r,e,t){var n,i;if(e<0){for(i=t+".";++e;i+=t);r=i+r}else if(n=r.length,++e>n){for(i=t,e-=n;--e;i+=t);r+=i}else e<n&&(r=r.slice(0,e)+"."+r.slice(e));return r}var Sk=a8(),Yp=Sk;var fl=bt(f8());var nl=class{gasUsed;gasLimit;transaction;block;vrf;evaluationOptions;arweave;contract;unsafeClient;contracts;_activeTx;caller;constructor(e,t,n){this.gasUsed=0,this.gasLimit=Number.MAX_SAFE_INTEGER,this.unsafeClient=e,this.arweave={ar:e.ar,utils:e.utils,wallets:e.wallets,crypto:e.crypto},this.evaluationOptions=n,this.contract=t,this.transaction=new Qp(this),this.block=new Zp(this),this.contracts={readContractState:(i,o,a)=>{throw new Error("Not implemented - should be set by HandlerApi implementor")},viewContractState:(i,o)=>{throw new Error("Not implemented - should be set by HandlerApi implementor")},write:(i,o,a)=>{throw new Error("Not implemented - should be set by HandlerApi implementor")},refreshState:()=>{throw new Error("Not implemented - should be set by HandlerApi implementor")}},this.vrf=new eg(this),this.useGas=this.useGas.bind(this),this.getBalance=this.getBalance.bind(this)}useGas(e){if(e<0)throw new Error("[RE:GNE] Gas number exception - gas < 0.");if(this.gasUsed+=e,this.gasUsed>this.gasLimit)throw new Error(`[RE:OOG] Out of gas! Used: ${this.gasUsed}, limit: ${this.gasLimit}`)}async getBalance(e,t){if(!this._activeTx)throw new Error("Cannot read balance - active tx is not set.");if(!this.block.height)throw new Error("Cannot read balance - block height not set.");let n=t||this.block.height;return await fetch(`${this.evaluationOptions.walletBalanceUrl}block/height/${n}/wallet/${e}/balance`).then(i=>i.ok?i.text():Promise.reject(i)).catch(i=>{throw new Error(`Unable to read wallet balance. ${i.status}. ${i.body?.message}`)})}},Qp=class{constructor(e){this.smartWeaveGlobal=e}get id(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.id}get owner(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.owner.address}get target(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.recipient}get tags(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.tags}get quantity(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.quantity.winston}get reward(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.fee.winston}},Zp=class{constructor(e){this.smartWeaveGlobal=e}get height(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.block.height}get indep_hash(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.block.id}get timestamp(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current tx");return this.smartWeaveGlobal._activeTx.block.timestamp}},eg=class{constructor(e){this.smartWeaveGlobal=e}get data(){return this.smartWeaveGlobal._activeTx.vrf}get value(){return this.smartWeaveGlobal._activeTx.vrf.bigint}randomInt(e){if(!Number.isInteger(e))throw new Error("Integer max value required for random integer generation");let t=BigInt(this.smartWeaveGlobal._activeTx.vrf.bigint)%BigInt(e)+BigInt(1);if(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)throw new Error("Random int cannot be cast to number");return Number(t)}};var il=class extends Error{constructor(e){super(e),this.name="ContractError"}};var qs=class{constructor(e,t){this.swGlobal=e;this.contractDefinition=t;this.assignReadContractState=this.assignReadContractState.bind(this),this.assignViewContractState=this.assignViewContractState.bind(this),this.assignWrite=this.assignWrite.bind(this),this.assignRefreshState=this.assignRefreshState.bind(this)}logger=Ee.INST.create("ContractHandler");async dispose(){}assignWrite(e,t){this.swGlobal.contracts.write=async(n,i,o)=>{if(!e.evaluationOptions.internalWrites)throw new Error("Internal writes feature switched off. Change EvaluationOptions.internalWrites flag to 'true'");let a=o??e.evaluationOptions.throwOnInternalWriteError,c={from:this.contractDefinition.txId,to:n,input:i};this.logger.debug("swGlobal.write call:",c);let m=await e.warp.contract(n,e.contract,this.swGlobal._activeTx).dryWriteFromTx(i,this.swGlobal._activeTx,[...t||[],{contractTxId:this.contractDefinition.txId,interactionTxId:this.swGlobal.transaction.id}]);this.logger.debug("Cache result?:",!this.swGlobal._activeTx.dry);let _=m.type!=="ok"&&a&&(!this.swGlobal._activeTx.dry||this.swGlobal._activeTx.dry&&this.swGlobal._activeTx.strict),S=_?`Internal write auto error for call [${JSON.stringify(c)}]: ${m.errorMessage}`:m.errorMessage;if(await e.warp.stateEvaluator.onInternalWriteStateUpdate(this.swGlobal._activeTx,n,{state:m.state,validity:{...m.originalValidity,[this.swGlobal._activeTx.id]:m.type=="ok"},errorMessages:{...m.originalErrorMessages,[this.swGlobal._activeTx.id]:S}}),_)throw new il(S);return m}}assignViewContractState(e){this.swGlobal.contracts.viewContractState=async(t,n)=>(this.logger.debug("swGlobal.viewContractState call:",{from:this.contractDefinition.txId,to:t,input:n}),await e.warp.contract(t,e.contract,this.swGlobal._activeTx).viewStateForTx(n,this.swGlobal._activeTx))}assignReadContractState(e,t,n,i){this.swGlobal.contracts.readContractState=async(o,a)=>{this.logger.debug("swGlobal.readContractState call:",{from:this.contractDefinition.txId,to:o,sortKey:i.sortKey,transaction:this.swGlobal.transaction.id});let{stateEvaluator:c}=e.warp,y=e.warp.contract(o,e.contract,i);await c.onContractCall(i,e,n);let m=await y.readState(i.sortKey,[...t||[],{contractTxId:this.contractDefinition.txId,interactionTxId:this.swGlobal.transaction.id}]);return a?yf(m):yf(m.cachedValue.state)}}assignRefreshState(e){this.swGlobal.contracts.refreshState=async()=>(await e.warp.stateEvaluator.latestAvailableState(this.swGlobal.contract.id,this.swGlobal._activeTx.sortKey))?.cachedValue.state}};var Ef=class extends qs{constructor(t,n,i){super(t,n);this.contractFunction=i}async handle(t,n,i){let{timeoutId:o,timeoutPromise:a}=u_(t.evaluationOptions.maxInteractionEvaluationTimeSeconds);try{let{interaction:c,interactionTx:y,currentTx:m}=i,_=yf(n.state,t.evaluationOptions.useFastCopy);this.swGlobal._activeTx=y,this.swGlobal.caller=c.caller,this.assignReadContractState(t,m,n,y),this.assignViewContractState(t),this.assignWrite(t,m),this.assignRefreshState(t);let S=await Promise.race([a,this.contractFunction(_,c)]);if(S&&(S.state!==void 0||S.result!==void 0))return{type:"ok",result:S.result,state:S.state||n.state};throw new Error(`Unexpected result from contract: ${JSON.stringify(S)}`)}catch(c){switch(c.name){case"ContractError":return{type:"error",errorMessage:c.message,state:n.state,result:null};default:return{type:"exception",errorMessage:`${c&&c.stack||c&&c.message||c}`,state:n.state,result:null}}}finally{o!==null&&clearTimeout(o)}}initState(t){}};var ag=bt(h8(),1),pG=ag.default.configure;var mo=ag.default;var ol=class extends qs{constructor(t,n,i){super(t,n);this.wasmExports=i}async handle(t,n,i){try{let{interaction:o,interactionTx:a,currentTx:c}=i;this.swGlobal._activeTx=a,this.swGlobal.caller=o.caller,this.swGlobal.gasLimit=t.evaluationOptions.gasLimit,this.swGlobal.gasUsed=0,this.assignReadContractState(t,c,n,a),this.assignWrite(t,c);let y=await this.doHandle(o);return{type:"ok",result:y,state:this.doGetCurrentState(),gasUsed:this.swGlobal.gasUsed}}catch(o){let a={errorMessage:o.message,state:n.state,result:null};return o.message.startsWith("[RE:")?(this.logger.fatal(o),{...a,type:"exception"}):{...a,type:"error"}}}initState(t){switch(this.contractDefinition.srcWasmLang){case"assemblyscript":{let n=this.wasmExports.__newString(mo(t));this.wasmExports.initState(n);break}case"rust":{this.wasmExports.initState(t);break}case"go":{this.wasmExports.initState(mo(t));break}default:throw new Error(`Support for ${this.contractDefinition.srcWasmLang} not implemented yet.`)}}async doHandle(t){switch(this.contractDefinition.srcWasmLang){case"assemblyscript":{let n=this.wasmExports.__newString(mo(t.input)),i=this.wasmExports.handle(n),o=this.wasmExports.__getString(i);return JSON.parse(o)}case"rust":{let n=await this.wasmExports.handle(t.input);if(!n)return;if(Object.prototype.hasOwnProperty.call(n,"Ok"))return n.Ok;{this.logger.debug("Error from rust",n.Err);let i,o="";throw typeof n.Err=="string"||n.Err instanceof String?i=n.Err:(i=Object.keys(n.Err)[0],o=" "+n.Err[i]),i=="RuntimeError"?new Error(`[RE:RE]${o}`):new Error(`[CE:${i}${o}]`)}}case"go":{let n=await this.wasmExports.handle(mo(t.input));return JSON.parse(n)}default:throw new Error(`Support for ${this.contractDefinition.srcWasmLang} not implemented yet.`)}}doGetCurrentState(){switch(this.contractDefinition.srcWasmLang){case"assemblyscript":{let t=this.wasmExports.currentState();return JSON.parse(this.wasmExports.__getString(t))}case"rust":return this.wasmExports.currentState();case"go":{let t=this.wasmExports.currentState();return JSON.parse(t)}default:throw new Error(`Support for ${this.contractDefinition.srcWasmLang} not implemented yet.`)}}};function d8(r,e){let t=r.trim().split(`
`),n=t[0],i=t[t.length-1];return(/\(\s*\(\)\s*=>\s*{/g.test(n)||/\s*\(\s*function\s*\(\)\s*{/g.test(n))&&/}\s*\)\s*\(\)\s*;/g.test(i)&&(t.shift(),t.pop(),r=t.join(`
`)),r=r.replace(/export\s+async\s+function\s+handle/gmu,"async function handle").replace(/export\s+function\s+handle/gmu,"function handle"),e?`
    ${r}
    module.exports = handle;`:`
    const [SmartWeave, BigNumber, logger] = arguments;
    class ContractError extends Error { constructor(message) { super(message); this.name = 'ContractError' } };
    function ContractAssert(cond, message) { if (!cond) throw new ContractError(message) };
    ${r};
    return handle;
  `}var sl=class extends Error{constructor(e){super(e),this.name="ContractError"}},al=class{constructor(e){this.arweave=e}logger=Ee.INST.create("HandlerExecutorFactory");cache=new Bn;async create(e,t){let n=new nl(this.arweave,{id:e.txId,owner:e.owner},t);if(e.contractType=="wasm"){this.logger.info("Creating handler for wasm contract",e.txId);let i=rt.measure(),o,a=null,c=Ok(e.srcBinary);switch(e.srcWasmLang){case"assemblyscript":{let y={exports:null};o=await r8.instantiateStreaming(c,n8(n,y)),y.exports=o.exports;break}case"rust":{let y={exports:null,modifiedExports:{wasm_bindgen__convert__closures__invoke2_mut__:null,_dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__:null}},m=await p8(c,e.srcBinary),S=WebAssembly.Module.imports(m).filter(N=>N.module==="__wbindgen_placeholder__").map(N=>N.name),{imports:I,exports:E}=i8(n,S,y,e.metadata.dtor);a=E,o=await WebAssembly.instantiate(m,I),y.exports=o.exports,Object.keys(o.exports).forEach(N=>{N.startsWith("wasm_bindgen__convert__closures__invoke2_mut__")&&(y.modifiedExports.wasm_bindgen__convert__closures__invoke2_mut__=o.exports[N]),N.startsWith("_dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__")&&(y.modifiedExports._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__=o.exports[N])});break}case"go":{let y=new Ls(n);y.importObject.metering={usegas:function(_){n.useGas(_)}};let m=await p8(c,e.srcBinary);o=await WebAssembly.instantiate(m,y.importObject),y.run(o),a=y.exports;break}default:throw new Error(`Support for ${e.srcWasmLang} not implemented yet.`)}return this.logger.info(`WASM ${e.srcWasmLang} handler created in ${i.elapsed()}`),new ol(n,e,a||o.exports)}else{this.logger.info("Creating handler for js contract",e.txId);let i=d8(e.src,t.useVM2);if(!t.allowUnsafeClient&&i.includes("SmartWeave.unsafeClient"))throw new Error("Using unsafeClient is not allowed by default. Use EvaluationOptions.allowUnsafeClient flag.");if(!t.allowBigInt&&i.includes("BigInt"))throw new Error("Using BigInt is not allowed by default. Use EvaluationOptions.allowBigInt flag.");if(t.useVM2){let o=new fl.VMScript(i),a=new fl.NodeVM({console:"off",sandbox:{SmartWeave:n,BigNumber:Yp,logger:this.logger,ContractError:sl,ContractAssert:function(c,y){if(!c)throw new sl(y)}},compiler:"javascript",eval:!1,wasm:!1,allowAsync:!0,wrapper:"commonjs"});return new Ef(n,e,a.run(o))}else{let a=new Function(i)(n,Yp,Ee.INST.create(n.contract.id));return new Ef(n,e,a)}}}};function Ok(r){let e={status:200,statusText:"OK",headers:{"Content-Type":"application/wasm"}};return new Response(r,e)}async function p8(r,e){return WebAssembly.compileStreaming?await WebAssembly.compileStreaming(r):await WebAssembly.compile(e)}var Y8=bt(G8());var Q8=bt(z8());function K8(r){let e=/var ret = makeMutClosure\(arg0, arg1, (\d+?), __wbg_adapter/;return r.match(e)[1]}var X8=new Map([[1,"assemblyscript"],[2,"rust"],[3,"go"]]),Us=class{constructor(e){this.arweave=e}logger=Ee.INST.create("Source");async save(e,t,n=!1){this.logger.debug("Creating new contract source");let{src:i,wasmSrcCodeDir:o,wasmGlueCode:a}=e,c=i instanceof Buffer?"wasm":"js",y,m=null,_=null,S={},I=[];if(c=="wasm"){let j=Y8.default.meterWASM(i,{meterType:"i32"});I.push(j);let q=await WebAssembly.compile(i),D=WebAssembly.Module.imports(q),Q;if(this.isGoModule(D)){let k=new Ls(null),L=new WebAssembly.Instance(q,k.importObject);k.run(L),Q=k.exports.lang(),_=k.exports.version()}else{let k=await WebAssembly.instantiate(i,Qk(D));if(!k.instance.exports.lang)throw new Error('No info about source type in wasm binary. Did you forget to export "lang" function?');if(Q=k.instance.exports.lang(),_=k.instance.exports.version(),!X8.has(Q))throw new Error(`Unknown wasm source type ${Q}`)}if(m=X8.get(Q),o==null)throw new Error("No path to original wasm contract source code");let oe=await this.zipContents(o);if(I.push(oe),m=="rust"){if(!a)throw new Error("No path to generated wasm-bindgen js code");let k=Q8.default.readFileSync(a,"utf-8"),L=K8(k);S.dtor=parseInt(L),I.push(Buffer.from(k))}}let E=c=="wasm"?this.joinBuffers(I):i;typeof t=="function"?y=await this.arweave.createTransaction({data:E}):y=await this.arweave.createTransaction({data:E},t),y.addTag("App-Name","SmartWeaveContractSource"),y.addTag("App-Version","0.3.0"),y.addTag("SDK","Warp"),y.addTag("Content-Type",c=="js"?"application/javascript":"application/wasm"),c=="wasm"&&(y.addTag("Wasm-Lang",m),y.addTag("Wasm-Lang-Version",_),y.addTag("Wasm-Meta",JSON.stringify(S))),typeof t=="function"?await t(y):await this.arweave.transactions.sign(y,t),this.logger.debug("Posting transaction with source");let C=!0,N;if(n||(N=await this.arweave.transactions.post(y),C=N.status===200||N.status===208),C)return y;throw new Error(`Unable to write Contract Source. Arweave responded with status ${N.status}: ${N.statusText}`)}isGoModule(e){return e.some(t=>t.module=="env"&&t.name.startsWith("syscall/js"))}joinBuffers(e){let t=e.length,n=[];return n.push(Buffer.from(t.toString())),n.push(Buffer.from("|")),e.forEach(i=>{n.push(Buffer.from(i.length.toString())),n.push(Buffer.from("|"))}),n.push(...e),n.reduce((i,o)=>Buffer.concat([i,o]))}async zipContents(e){let t=V8(),n=J8(),i=new n.WritableStreamBuffer({initialSize:1e3*1024,incrementAmount:1e3*1024}),o=t("zip",{zlib:{level:9}});return o.on("error",function(a){throw a}),o.pipe(i),o.directory(e.toString(),e.toString()),await o.finalize(),i.end(),i.getContents()}};function Qk(r){let e={};return r.forEach(t=>{Object.prototype.hasOwnProperty.call(e,t.module)||(e[t.module]={}),e[t.module][t.name]=function(){}}),e}var gl=class{constructor(e,t){this.arweave=e;this.warp=t;this.deployFromSourceTx=this.deployFromSourceTx.bind(this)}logger=Ee.INST.create("DefaultCreateContract");async deploy(e,t){let{wallet:n,initState:i,tags:o,transfer:a,data:c}=e,y=t==null?this.warp.definitionLoader.type()=="warp":!t,_=await new Us(this.arweave).save(e,n,y);return this.logger.debug("Creating new contract"),await this.deployFromSourceTx({srcTxId:_.id,wallet:n,initState:i,tags:o,transfer:a,data:c},!y,_)}async deployFromSourceTx(e,t,n=null){this.logger.debug("Creating new contract from src tx");let{wallet:i,srcTxId:o,initState:a,tags:c,transfer:y,data:m}=e,_=t==null?this.warp.definitionLoader.type()=="warp":!t,S=await this.arweave.createTransaction({data:m?.body||a},i);if(+y?.winstonQty>0&&y.target.length&&(this.logger.debug("Creating additional transaction with AR transfer",y),S=await this.arweave.createTransaction({data:m?.body||a,target:y.target,quantity:y.winstonQty},i)),c?.length)for(let C of c)S.addTag(C.name.toString(),C.value.toString());S.addTag("App-Name","SmartWeaveContract"),S.addTag("App-Version","0.3.0"),S.addTag("Contract-Src",o),S.addTag("SDK","RedStone"),m?(S.addTag("Content-Type",m["Content-Type"]),S.addTag("Init-State",a)):S.addTag("Content-Type","application/json"),await this.arweave.transactions.sign(S,i);let I,E;if(_){let C=await this.post(S,n);this.logger.debug(C),I=!0}else E=await this.arweave.transactions.post(S),I=E.status===200||E.status===208;if(I)return{contractTxId:S.id,srcTxId:o};throw new Error(`Unable to write Contract. Arweave responded with status ${E.status}: ${E.statusText}`)}async post(e,t=null){let n={contractTx:e};t&&(n={...n,srcTx:t});let i=await fetch(`${js}/gateway/contracts/deploy`,{method:"POST",body:JSON.stringify(n),headers:{"Accept-Encoding":"gzip, deflate, br","Content-Type":"application/json",Accept:"application/json"}});if(i.ok)return i.json();throw new Error(`Error while posting contract. Sequencer responded with status ${i.status} ${i.statusText}`)}};var t5=bt(Rc());var $s=class{constructor(e,t,n=""){this.contractTxId=e;this.depth=t;this.label=n}interactions=new Map;addInteractionData(e){let{interaction:t,interactionTx:n}=e,i=Tf.create(new _g(n.id,n.sortKey,n.block.height,n.block.timestamp,t?.caller,t?.input.function,t?.input,n.dry,new Map));return this.interactions.set(n.id,i),i}getInteraction(e){return this.interactions.get(e)}print(){return JSON.stringify(this,c_)}},Tf=class{constructor(e){this.interactionInput=e}interactionOutput;static create(e){return new Tf(e)}update(e){this.interactionOutput=e}},_g=class{constructor(e,t,n,i,o,a,c,y,m=new Map){this.txId=e;this.sortKey=t;this.blockHeight=n;this.blockTimestamp=i;this.caller=o;this.functionName=a;this.functionArguments=c;this.dryWrite=y;this.foreignContractCalls=m}},Z8=class{constructor(e,t,n,i,o="",a){this.cacheHit=e;this.outputState=t;this.executionTime=n;this.valid=i;this.errorMessage=o;this.gasUsed=a}};async function Sg(r,e,t,n,i,o="",a="0",c=!1,y){let m={data:Math.random().toString().slice(-4)};o&&o.length&&(m.target=o.toString(),a&&+a>0&&(m.quantity=a.toString())),c&&(m.reward="72600854",m.last_tx="p7vc1iSP6bvH_fCeUFa9LqoV5qiyW-jdEKouAT0XMoSwrNraB9mgpi29Q10waEpO"),y&&y.length&&(m.reward=y);let _=await r.createTransaction(m);if(!n)throw new Error(`Input should be a truthy value: ${JSON.stringify(n)}`);if(i&&i.length)for(let S of i)_.addTag(S.name.toString(),S.value.toString());return _.addTag("App-Name","SmartWeaveAction"),_.addTag("App-Version","0.3.0"),_.addTag("SDK","Warp"),_.addTag("Contract",t),_.addTag("Input",JSON.stringify(n)),e&&await e(_),_}function e5(r,e,t){let n=Zk(r);return{id:r.id,owner:{address:e,key:""},recipient:r.target,tags:n,fee:{winston:r.reward,ar:""},quantity:{winston:r.quantity,ar:""},block:{id:t.indep_hash,height:t.height,timestamp:t.timestamp,previous:null},dry:!0,anchor:null,signature:null,data:null,parent:null,bundledIn:null}}function Zk(r){let e=r.get("tags"),t=[];for(let n of e)try{let i=n.get("name",{decode:!0,string:!0}),o=n.get("value",{decode:!0,string:!0});t.push({name:i,value:o})}catch{}return t}var xo={target:"",winstonQty:"0"};var yl=class{eval(e){let t=[];return e.interactions.forEach(n=>{this.evalForeignCalls(e.contractTxId,n,t)}),t}evalForeignCalls(e,t,n){t.interactionInput.foreignContractCalls.forEach(i=>{i.interactions.forEach(o=>{o.interactionInput.dryWrite&&!n.includes(i.contractTxId)&&e!==i.contractTxId&&n.push(i.contractTxId),this.evalForeignCalls(e,o,n)})})}};var Ws=class{constructor(e,t,n=null,i=null){this._contractTxId=e;this.warp=t;this._parentContract=n;this._callingInteraction=i;if(this.waitForConfirmation=this.waitForConfirmation.bind(this),this._arweaveWrapper=new hn(t.arweave),this._sorter=new di(t.arweave),n!=null){this._evaluationOptions=n.evaluationOptions(),this._callDepth=n.callDepth()+1;let o=n.getCallStack().getInteraction(i.id);if(this._callDepth>this._evaluationOptions.maxCallDepth)throw Error(`Max call depth of ${this._evaluationOptions.maxCallDepth} has been exceeded for interaction ${JSON.stringify(o.interactionInput)}`);this.logger.debug("Calling interaction",{id:i.id,sortKey:i.sortKey});let a=new $s(e,this._callDepth);o.interactionInput.foreignContractCalls.set(e,a),this._callStack=a,this._rootSortKey=n.rootSortKey}else this._callDepth=0,this._callStack=new $s(e,0),this._rootSortKey=null}logger=Ee.INST.create("HandlerBasedContract");_callStack;_evaluationOptions=new kf;_innerWritesEvaluator=new yl;_callDepth;_benchmarkStats=null;_arweaveWrapper;_sorter;_rootSortKey;signer;async readState(e,t,n){this.logger.info("Read state for",{contractTxId:this._contractTxId,currentTx:t,sortKeyOrBlockHeight:e});let i=rt.measure();if(this.maybeResetRootContract(),this._parentContract!=null&&e==null)throw new Error("SortKey MUST be always set for non-root contract calls");let{stateEvaluator:o}=this.warp,a=typeof e=="number"?this._sorter.generateLastSortKey(e):e,c=await this.createExecutionContext(this._contractTxId,a,!1,n);this.logger.info("Execution Context",{srcTxId:c.contractDefinition?.srcTxId,missingInteractions:c.sortedInteractions?.length,cachedSortKey:c.cachedState?.sortKey}),i.stop();let y=rt.measure(),m=await o.eval(c,t||[]);y.stop();let _=i.elapsed(!0)+y.elapsed(!0);return this._benchmarkStats={gatewayCommunication:i.elapsed(!0),stateEvaluation:y.elapsed(!0),total:_},this.logger.info("Benchmark",{"Gateway communication  ":i.elapsed(),"Contract evaluation    ":y.elapsed(),"Total:                 ":`${_.toFixed(0)}ms`}),m}async viewState(e,t=[],n=xo){return this.logger.info("View state for",this._contractTxId),await this.callContract(e,void 0,void 0,t,n)}async viewStateForTx(e,t){return this.logger.info(`View state for ${this._contractTxId}`,t),await this.callContractForTx(e,t)}async dryWrite(e,t,n,i){return this.logger.info("Dry-write for",this._contractTxId),await this.callContract(e,t,void 0,n,i)}async dryWriteFromTx(e,t,n){return this.logger.info(`Dry-write from transaction ${t.id} for ${this._contractTxId}`),await this.callContractForTx(e,t,n||[])}async writeInteraction(e,t){if(this.logger.info("Write interaction",{input:e,options:t}),!this.signer)throw new Error("Wallet not connected. Use 'connect' method first.");let{arweave:n,interactionsLoader:i}=this.warp,o=t?.tags||[],a=t?.transfer||xo,c=t?.strict===!0,y=t?.vrf===!0,m=t?.disableBundling===!0,_=t?.reward,S=i.type()=="warp"&&!m;if(S&&a.target!=xo.target&&a.winstonQty!=xo.winstonQty)throw new Error("Ar Transfers are not allowed for bundled interactions");if(y&&!S)throw new Error("Vrf generation is only available for bundle interaction");if(S)return await this.bundleInteraction(e,{tags:o,strict:c,vrf:y});{let I=await this.createInteraction(e,o,a,c,!1,!1,_),E=await n.transactions.post(I);if(E.status!==200)return this.logger.error("Error while posting transaction",E),null;if(this._evaluationOptions.waitForConfirmation){this.logger.info("Waiting for confirmation of",I.id);let C=rt.measure();await this.waitForConfirmation(I.id),this.logger.info("Transaction confirmed after",C.elapsed())}return this.warp.environment=="local"&&this._evaluationOptions.mineArLocalBlocks&&await this.warp.testing.mineBlock(),{originalTxId:I.id}}}async bundleInteraction(e,t){this.logger.info("Bundle interaction input",e);let n=await this.createInteraction(e,t.tags,xo,t.strict,!0,t.vrf);return{bundlrResponse:await fetch(`${this._evaluationOptions.bundlerUrl}gateway/sequencer/register`,{method:"POST",body:JSON.stringify(n),headers:{"Accept-Encoding":"gzip, deflate, br","Content-Type":"application/json",Accept:"application/json"}}).then(o=>(this.logger.debug(o),o.ok?o.json():Promise.reject(o))).catch(o=>{throw this.logger.error(o),o.body?.message&&this.logger.error(o.body.message),new Error(`Unable to bundle interaction: ${JSON.stringify(o)}`)}),originalTxId:n.id}}async createInteraction(e,t,n,i,o=!1,a=!1,c){if(this._evaluationOptions.internalWrites){let m=await this.callContract(e,void 0,void 0,t,n,i);if(i&&m.type!=="ok")throw Error(`Cannot create interaction: ${m.errorMessage}`);let _=this.getCallStack(),S=this._innerWritesEvaluator.eval(_);this.logger.debug("Input",e),this.logger.debug("Callstack",_.print()),S.forEach(I=>{t.push({name:"Interact-Write",value:I})}),this.logger.debug("Tags with inner calls",t)}else if(i){let m=await this.callContract(e,void 0,void 0,t,n,i);if(m.type!=="ok")throw Error(`Cannot create interaction: ${m.errorMessage}`)}return a&&t.push({name:"Request-Vrf",value:"true"}),await Sg(this.warp.arweave,this.signer,this._contractTxId,e,t,n.target,n.winstonQty,o,c)}txId(){return this._contractTxId}getCallStack(){return this._callStack}connect(e){return typeof e=="function"?this.signer=e:this.signer=async t=>{await this.warp.arweave.transactions.sign(t,e)},this}setEvaluationOptions(e){return this._evaluationOptions={...this._evaluationOptions,...e},this}async waitForConfirmation(e){let{arweave:t}=this.warp,n=await t.transactions.getStatus(e);if(n.confirmed===null)this.logger.info(`Transaction ${e} not yet confirmed. Waiting another 20 seconds before next check.`),await Ru(2e4),await this.waitForConfirmation(e);else return this.logger.info(`Transaction ${e} confirmed`,n),n}async createExecutionContext(e,t,n=!1,i){let{definitionLoader:o,interactionsLoader:a,executorFactory:c,stateEvaluator:y}=this.warp,m=rt.measure(),_=await y.latestAvailableState(e,t);this.logger.debug("cache lookup",m.elapsed()),m.reset();let S=oi.evolvedSrcTxId(_?.cachedValue?.state),I,E,C;return this.logger.debug("Cached state",_,t),_&&_.sortKey==t?(this.logger.debug("State fully cached, not loading interactions."),(n||S)&&(E=await o.load(e,S),I=await c.create(E,this._evaluationOptions))):([E,C]=await Promise.all([o.load(e,S),i?Promise.resolve(i):await a.load(e,_?.sortKey,this.getToSortKey(t),this._evaluationOptions)]),_?.sortKey&&(C=C.filter(N=>N.sortKey.localeCompare(_?.sortKey)>0)),t&&(C=C.filter(N=>N.sortKey.localeCompare(t)<=0)),this.logger.debug("contract and interactions load",m.elapsed()),this._parentContract==null&&C.length&&(this._rootSortKey=C[C.length-1].sortKey),I=await c.create(E,this._evaluationOptions)),{warp:this.warp,contract:this,contractDefinition:E,sortedInteractions:C,evaluationOptions:this._evaluationOptions,handler:I,cachedState:_,requestedSortKey:t}}getToSortKey(e){return this._parentContract?.rootSortKey?e?this._parentContract.rootSortKey.localeCompare(e)>0?this._parentContract.rootSortKey:e:this._parentContract.rootSortKey:e}async createExecutionContextFromTx(e,t){let n=t.owner.address,i=t.sortKey;return{...await this.createExecutionContext(e,i,!0),caller:n}}maybeResetRootContract(){this._parentContract==null&&(this.logger.debug("Clearing call stack for the root contract"),this._callStack=new $s(this.txId(),0),this._rootSortKey=null,this.warp.interactionsLoader.clearCache())}async callContract(e,t,n,i=[],o=xo,a=!1){this.logger.info("Call contract input",e),this.maybeResetRootContract(),this.signer||this.logger.warn("Wallet not set.");let{arweave:c,stateEvaluator:y}=this.warp,m=await this.createExecutionContext(this._contractTxId,n,!0),_=this.warp.environment=="mainnet"?await this._arweaveWrapper.warpGwBlock():await c.blocks.getCurrent(),S;if(t)S=t;else if(this.signer){let q=await c.createTransaction({data:Math.random().toString().slice(-4),reward:"72600854",last_tx:"p7vc1iSP6bvH_fCeUFa9LqoV5qiyW-jdEKouAT0XMoSwrNraB9mgpi29Q10waEpO"});await this.signer(q),S=await c.wallets.ownerToAddress(q.owner)}else S="";this.logger.info("effectiveCaller",S),m={...m,caller:S};let I=await y.eval(m,[]);this.logger.info("Current state",I.cachedValue.state);let E={input:e,caller:m.caller};this.logger.debug("interaction",E);let C=await Sg(c,this.signer,this._contractTxId,e,i,o.target,o.winstonQty,!0),N=e5(C,m.caller,_);this.logger.debug("Creating sortKey for",{blockId:N.block.id,id:N.id,height:N.block.height}),N.sortKey=await this._sorter.createSortKey(N.block.id,N.id,N.block.height,!0),N.strict=a;let j=await this.evalInteraction({interaction:E,interactionTx:N,currentTx:[]},m,I.cachedValue);return j.type!=="ok"&&this.logger.fatal("Error while interacting with contract",{type:j.type,error:j.errorMessage}),j}async callContractForTx(e,t,n){this.maybeResetRootContract();let i=await this.createExecutionContextFromTx(this._contractTxId,t),o=await this.warp.stateEvaluator.eval(i,n);this.logger.debug("callContractForTx - evalStateResult",{result:o.cachedValue.state,txId:this._contractTxId});let c={interaction:{input:e,caller:this._parentContract.txId()},interactionTx:t,currentTx:n},y=await this.evalInteraction(c,i,o.cachedValue);return y.originalValidity=o.cachedValue.validity,y.originalErrorMessages=o.cachedValue.errorMessages,y}async evalInteraction(e,t,n){let i=this.getCallStack().addInteractionData(e),o=rt.measure(),a=await t.handler.handle(t,n,e);return i.update({cacheHit:!1,outputState:this._evaluationOptions.stackTrace.saveState?a.state:void 0,executionTime:o.elapsed(!0),valid:a.type==="ok",errorMessage:a.errorMessage,gasUsed:a.gasUsed}),a}parent(){return this._parentContract}callDepth(){return this._callDepth}evaluationOptions(){return this._evaluationOptions}lastReadStateStats(){return this._benchmarkStats}stateHash(e){let t=mo(e),n=t5.createHash("sha256");return n.update(t),n.digest("hex")}async syncState(e,t){let{stateEvaluator:n}=this.warp,i=await fetch(`${e}?${new URLSearchParams({id:this._contractTxId,...t})}`).then(o=>o.ok?o.json():Promise.reject(o)).catch(o=>{throw o.body?.message&&this.logger.error(o.body.message),new Error(`Unable to retrieve state. ${o.status}: ${o.body?.message}`)});return await n.syncState(this._contractTxId,i.sortKey,i.state,i.validity),this}async evolve(e,t){return await this.writeInteraction({function:"evolve",value:e},t)}async save(e){if(!this.signer)throw new Error("Wallet not connected. Use 'connect' method first.");let{arweave:t}=this.warp;return(await new Us(t).save(e,this.signer)).id}get callingInteraction(){return this._callingInteraction}get rootSortKey(){return this._rootSortKey}};var ml=class extends Ws{async currentBalance(e){let t=await this.viewState({function:"balance",target:e});if(t.type!=="ok")throw Error(t.errorMessage);return t.result}async currentState(){return(await super.readState()).cachedValue.state}async transfer(e,t){return await this.writeInteraction({function:"transfer",...e},t)}};var n5=bt(r5());var bl=class{constructor(e,t){this.arweave=e;this.levelDb=t;this.sorter=new di(e)}logger=Ee.INST.create("MigrationTool");sorter;async migrateSqlite(e){this.logger.info(`Migrating from sqlite ${e} to leveldb.`);let n=await(0,n5.default)({client:"sqlite3",connection:{filename:e},useNullAsDefault:!0}).select(["contract_id","height","state"]).from("states").max("height").groupBy(["contract_id"]);this.logger.info(`Migrating ${n?.length} contracts' state`);let i=[];for(let o of n){let a=o.contract_id,c=o.height,y=JSON.parse(o.state),m=this.sorter.generateLastSortKey(parseInt(c));this.logger.debug(`Migrating ${a} at height ${c}: ${m}`),await this.levelDb.put({contractTxId:a,sortKey:m},new Pt(y.state,y.validity,{})),i.push({contractTxId:a,height:c,sortKey:m})}return this.logger.info("Migration done."),i}};var vl=class{constructor(e){this.arweave=e}async mineBlock(){this.validateEnv(),await this.arweave.api.get("mine")}async generateWallet(){this.validateEnv();let e=await this.arweave.wallets.generate();return await this.addFunds(e),{jwk:e,address:await this.arweave.wallets.jwkToAddress(e)}}async addFunds(e){let t=await this.arweave.wallets.getAddress(e);await this.arweave.api.get(`/mint/${t}/1000000000000000`)}validateEnv(){if(this.arweave.api.getConfig().host.includes("arweave"))throw new Error("Testing features are not available in a non testing environment")}};var wl=class{constructor(e,t){this.baseImplementation=e;this.sourceCode=t}async create(e,t){return Object.prototype.hasOwnProperty.call(this.sourceCode,e.txId)&&(e={...e,src:this.sourceCode[e.txId]}),await this.baseImplementation.create(e,t)}};var Eg=100;function i5(r){return!r.node.parent?.id&&!r.node.bundledIn?.id}var Gs=class{constructor(e){this.arweave=e;this.arweaveWrapper=new hn(e),this.sorter=new di(e)}logger=Ee.INST.create("ArweaveGatewayInteractionsLoader");arweaveWrapper;sorter;async load(e,t,n,i){this.logger.debug("Loading interactions for",{contractId:e,fromSortKey:t,toSortKey:n});let o=this.sorter.extractBlockHeight(t),a=this.sorter.extractBlockHeight(n),c={tags:[{name:"App-Name",values:["SmartWeaveAction"]},{name:"Contract",values:[e]}],blockFilter:{min:o,max:a},first:Eg},y=rt.measure(),m=await this.loadPages(c);if(y.stop(),i.internalWrites){let S={tags:[{name:"Interact-Write",values:[e]}],blockFilter:{min:o,max:a},first:Eg},I=await this.loadPages(S);this.logger.debug("Inner writes interactions length:",I.length),m=m.concat(I)}m=m.filter(S=>S.node.block&&S.node.block.id&&S.node.block.height);let _=await this.sorter.sort(m);return t&&n?_=_.filter(S=>S.node.sortKey.localeCompare(t)>0&&S.node.sortKey.localeCompare(n)<=0):t&&!n?_=_.filter(S=>S.node.sortKey.localeCompare(t)>0):!t&&n&&(_=_.filter(S=>S.node.sortKey.localeCompare(n)<=0)),this.logger.debug("All loaded interactions:",{from:t,to:n,loaded:_.length,time:y.elapsed()}),_.map(S=>S.node)}async loadPages(e){let t=await this.getNextPage(e),n=t.edges.filter(i=>i5(i));for(;t.pageInfo.hasNextPage;){let i=t.edges[Eg-1].cursor;e={...e,after:i},t=await this.getNextPage(e),n.push(...t.edges.filter(o=>i5(o)))}return n}async getNextPage(e){let t=rt.measure(),n=await this.arweaveWrapper.gql(Gs.query,e);for(this.logger.debug("GQL page load:",t.elapsed());n.status===403;)this.logger.warn(`GQL rate limiting, waiting ${Gs._30seconds}ms before next try.`),await Ru(Gs._30seconds),n=await this.arweaveWrapper.gql(Gs.query,e);if(n.status!==200)throw new Error(`Unable to retrieve transactions. Arweave gateway responded with status ${n.status}.`);if(n.data.errors)throw this.logger.error(n.data.errors),new Error("Error while loading interaction transactions");return n.data.data.transactions}type(){return"arweave"}clearCache(){}},Hs=Gs;ra(Hs,"query",`query Transactions($tags: [TagFilter!]!, $blockFilter: BlockFilter!, $first: Int!, $after: String) {
    transactions(tags: $tags, block: $blockFilter, first: $first, sort: HEIGHT_ASC, after: $after) {
      pageInfo {
        hasNextPage
      }
      edges {
        node {
          id
          owner { address }
          recipient
          tags {
            name
            value
          }
          block {
            height
            id
            timestamp
          }
          fee { winston }
          quantity { winston }
          parent { id }
          bundledIn { id }
        }
        cursor
      }
    }
  }`),ra(Hs,"_30seconds",30*1e3);var Mf=class{constructor(e){this.delegate=e}logger=Ee.INST.create("CacheableInteractionsLoader");interactionsCache=new Map;async load(e,t,n,i){if(this.logger.debug("Loading interactions for",{contractTxId:e,fromSortKey:t,toSortKey:n}),this.interactionsCache.has(e)){let o=this.interactionsCache.get(e);if(o?.length){let a=o[o.length-1].sortKey;if(a.localeCompare(n)<0){let c=await this.delegate.load(e,a,n,i),y=o.concat(c);return this.interactionsCache.set(e,y),y}}return o}else{let o=await this.delegate.load(e,t,n,i);return o.length&&this.interactionsCache.set(e,o),o}}type(){return this.delegate.type()}clearCache(){this.interactionsCache.clear()}};var aK=bt(ka()),x5=bt(Zo());function u5(r){return r.arrayBuffer?r.arrayBuffer():new Promise((e,t)=>{let n=new FileReader;n.addEventListener("loadend",()=>{e(n.result)}),n.addEventListener("error",t),n.readAsArrayBuffer(r)})}async function eq(r){let e=await u5(r);return new Uint8Array(e)}function l5(r){return typeof Blob<"u"&&r instanceof Blob}function Bf(r){return typeof SharedArrayBuffer<"u"&&r instanceof SharedArrayBuffer}var tq=typeof process<"u"&&process.versions&&typeof process.versions.node<"u"&&typeof process.versions.electron>"u";function rq(r){return r.byteOffset===0&&r.byteLength===r.buffer.byteLength}var _l=class{constructor(e){this.typedArray=e instanceof ArrayBuffer||Bf(e)?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}async getLength(){return this.typedArray.byteLength}async read(e,t){return new Uint8Array(this.typedArray.buffer,this.typedArray.byteOffset+e,t)}},Sl=class{constructor(e){this.blob=e}async getLength(){return this.blob.size}async read(e,t){let n=this.blob.slice(e,e+t),i=await u5(n);return new Uint8Array(i)}async sliceAsBlob(e,t,n=""){return this.blob.slice(e,e+t,n)}};function nq(r,e){var t=Uint8Array;if(r[0]==3&&r[1]==0)return e||new t(0);var n=oq,i=h5,o=iq,a=d5,c=e==null;c&&(e=new t(r.length>>>2<<3));for(var y=0,m=0,_=0,S=0,I=0,E=0,C=0,N=0,j=0,q,D;y==0;){if(y=n(r,j,1),m=n(r,j+1,2),j+=3,m==0){(j&7)!=0&&(j+=8-(j&7));var Q=(j>>>3)+4,oe=r[Q-4]|r[Q-3]<<8;c&&(e=Ag(e,N+oe)),e.set(new t(r.buffer,r.byteOffset+Q,oe),N),j=Q+oe<<3,N+=oe;continue}if(c&&(e=Ag(e,N+(1<<17))),m==1&&(q=Se.flmap,D=Se.fdmap,E=(1<<9)-1,C=(1<<5)-1),m==2){_=i(r,j,5)+257,S=i(r,j+5,5)+1,I=i(r,j+10,4)+4,j+=14;for(var k=0;k<38;k+=2)Se.itree[k]=0,Se.itree[k+1]=0;for(var L=1,k=0;k<I;k++){var W=i(r,j+k*3,3);Se.itree[(Se.ordr[k]<<1)+1]=W,W>L&&(L=W)}j+=3*I,If(Se.itree,L),Of(Se.itree,L,Se.imap),q=Se.lmap,D=Se.dmap,j=o(Se.imap,(1<<L)-1,_+S,r,j,Se.ttree);var A=o5(Se.ttree,0,_,Se.ltree);E=(1<<A)-1;var M=o5(Se.ttree,_,S,Se.dtree);C=(1<<M)-1,If(Se.ltree,A),Of(Se.ltree,A,q),If(Se.dtree,M),Of(Se.dtree,M,D)}for(;;){var x=q[a(r,j)&E];j+=x&15;var u=x>>>4;if(u>>>8==0)e[N++]=u;else{if(u==256)break;var p=N+u-254;if(u>264){var h=Se.ldef[u-257];p=N+(h>>>3)+i(r,j,h&7),j+=h&7}var s=D[a(r,j)&C];j+=s&15;var f=s>>>4,g=Se.ddef[f],v=(g>>>4)+n(r,j,g&15);for(j+=g&15,c&&(e=Ag(e,N+(1<<17)));N<p;)e[N]=e[N++-v],e[N]=e[N++-v],e[N]=e[N++-v],e[N]=e[N++-v];N=p}}}return e.length==N?e:e.slice(0,N)}function Ag(r,e){var t=r.length;if(e<=t)return r;var n=new Uint8Array(Math.max(t<<1,e));return n.set(r,0),n}function iq(r,e,t,n,i,o){for(var a=h5,c=d5,y=0;y<t;){var m=r[c(n,i)&e];i+=m&15;var _=m>>>4;if(_<=15)o[y]=_,y++;else{var S=0,I=0;_==16?(I=3+a(n,i,2),i+=2,S=o[y-1]):_==17?(I=3+a(n,i,3),i+=3):_==18&&(I=11+a(n,i,7),i+=7);for(var E=y+I;y<E;)o[y]=S,y++}}return i}function o5(r,e,t,n){for(var i=0,o=0,a=n.length>>>1;o<t;){var c=r[o+e];n[o<<1]=0,n[(o<<1)+1]=c,c>i&&(i=c),o++}for(;o<a;)n[o<<1]=0,n[(o<<1)+1]=0,o++;return i}function If(r,e){for(var t=r.length,n,i,o,a,c,y=Se.bl_count,a=0;a<=e;a++)y[a]=0;for(a=1;a<t;a+=2)y[r[a]]++;var m=Se.next_code;for(n=0,y[0]=0,i=1;i<=e;i++)n=n+y[i-1]<<1,m[i]=n;for(o=0;o<t;o+=2)c=r[o+1],c!=0&&(r[o]=m[c],m[c]++)}function Of(r,e,t){for(var n=r.length,i=Se.rev15,o=0;o<n;o+=2)if(r[o+1]!=0)for(var a=o>>1,c=r[o+1],y=a<<4|c,m=e-c,_=r[o]<<m,S=_+(1<<m);_!=S;){var I=i[_]>>>15-e;t[I]=y,_++}}function s5(r,e){for(var t=Se.rev15,n=15-e,i=0;i<r.length;i+=2){var o=r[i]<<e-r[i+1];r[i]=t[o]>>>n}}function h5(r,e,t){return(r[e>>>3]|r[(e>>>3)+1]<<8)>>>(e&7)&(1<<t)-1}function oq(r,e,t){return(r[e>>>3]|r[(e>>>3)+1]<<8|r[(e>>>3)+2]<<16)>>>(e&7)&(1<<t)-1}function d5(r,e){return(r[e>>>3]|r[(e>>>3)+1]<<8|r[(e>>>3)+2]<<16)>>>(e&7)}var Se=function(){var r=Uint16Array,e=Uint32Array;return{next_code:new r(16),bl_count:new r(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new r(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new e(32),flmap:new r(512),fltree:[],fdmap:new r(32),fdtree:[],lmap:new r(32768),ltree:[],ttree:[],dmap:new r(32768),dtree:[],imap:new r(512),itree:[],rev15:new r(1<<15),lhst:new e(286),dhst:new e(30),ihst:new e(19),lits:new e(15e3),strt:new r(1<<16),prev:new r(1<<15)}}();(function(){for(var r=32768,e=0;e<r;e++){var t=e;t=(t&2863311530)>>>1|(t&1431655765)<<1,t=(t&3435973836)>>>2|(t&858993459)<<2,t=(t&4042322160)>>>4|(t&252645135)<<4,t=(t&4278255360)>>>8|(t&16711935)<<8,Se.rev15[e]=(t>>>16|t<<16)>>>17}function n(i,o,a){for(;o--!=0;)i.push(0,a)}for(var e=0;e<32;e++)Se.ldef[e]=Se.of0[e]<<3|Se.exb[e],Se.ddef[e]=Se.df0[e]<<4|Se.dxb[e];n(Se.fltree,144,8),n(Se.fltree,255-143,9),n(Se.fltree,279-255,7),n(Se.fltree,287-279,8),If(Se.fltree,9),Of(Se.fltree,9,Se.flmap),s5(Se.fltree,9),n(Se.fdtree,32,5),If(Se.fdtree,5),Of(Se.fdtree,5,Se.fdmap),s5(Se.fdtree,5),n(Se.itree,19,0),n(Se.ltree,286,0),n(Se.dtree,30,0),n(Se.ttree,320,0)})();var a5={table:function(){for(var r=new Uint32Array(256),e=0;e<256;e++){for(var t=e,n=0;n<8;n++)t&1?t=3988292384^t>>>1:t=t>>>1;r[e]=t}return r}(),update:function(r,e,t,n){for(var i=0;i<n;i++)r=a5.table[(r^e[t+i])&255]^r>>>8;return r},crc:function(r,e,t){return a5.update(4294967295,r,e,t)^4294967295}};function sq(r,e){return nq(r,e)}var Rf={numWorkers:1,workerURL:"",useWorkers:!1},aq=0,f5=0,Mg=!0,fq=[],xl=[],zs=[],Ig=new Map;function cq(r){p5(r.target);let{id:e,error:t,data:n}=r.data,i=Ig.get(e);Ig.delete(e),t?i.reject(t):i.resolve(n)}function Fg(r){return new Promise((e,t)=>{let n=new Worker(r);n.onmessage=i=>{i.data==="start"?(n.onerror=void 0,n.onmessage=void 0,e(n)):t(new Error(`unexpected message: ${i.data}`))},n.onerror=t})}function uq(r,e){return r.require(e)}var c5=function(){if(tq){let{Worker:r}=uq(module,"worker_threads");return{async createWorker(e){return new r(e)},addEventListener(e,t){e.on("message",n=>{t({target:e,data:n})})},async terminate(e){await e.terminate()}}}else return{async createWorker(r){try{return await Fg(r)}catch{console.warn("could not load worker:",r)}let e;try{let t=await fetch(r,{mode:"cors"});if(!t.ok)throw new Error(`could not load: ${r}`);e=await t.text(),r=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));let n=await Fg(r);return Rf.workerURL=r,n}catch{console.warn("could not load worker via fetch:",r)}if(e!==void 0)try{r=`data:application/javascript;base64,${btoa(e)}`;let t=await Fg(r);return Rf.workerURL=r,t}catch{console.warn("could not load worker via dataURI")}throw console.warn("workers will not be used"),new Error("can not start workers")},addEventListener(r,e){r.addEventListener("message",e)},async terminate(r){r.terminate()}}}();function p5(r){xl.push(r),g5()}async function lq(){if(xl.length===0&&f5<Rf.numWorkers){++f5;try{let r=await c5.createWorker(Rf.workerURL);fq.push(r),xl.push(r),c5.addEventListener(r,cq)}catch{Mg=!1}}return xl.pop()}function hq(r,e,t,n){let i=new Uint8Array(e);sq(r,i),n(t?new Blob([i],{type:t}):i.buffer)}async function g5(){if(zs.length!==0){if(Rf.useWorkers&&Mg){let r=await lq();if(Mg){if(r){if(zs.length===0){p5(r);return}let{id:e,src:t,uncompressedSize:n,type:i,resolve:o,reject:a}=zs.shift();Ig.set(e,{id:e,resolve:o,reject:a});let c=[];r.postMessage({type:"inflate",data:{id:e,type:i,src:t,uncompressedSize:n}},c)}return}}for(;zs.length;){let{src:r,uncompressedSize:e,type:t,resolve:n}=zs.shift(),i=r;l5(r)&&(i=await eq(r)),hq(i,e,t,n)}}}function y5(r,e,t){return new Promise((n,i)=>{zs.push({src:r,uncompressedSize:e,type:t,resolve:n,reject:i,id:aq++}),g5()})}function dq(r,e){let t=r&31,n=(r>>5&15)-1,i=(r>>9&127)+1980,o=0,a=(e&31)*2,c=e>>5&63,y=e>>11&31;return new Date(i,n,t,y,c,a,o)}var Og=class{constructor(e,t){this._reader=e,this._rawEntry=t,this.name=t.name,this.nameBytes=t.nameBytes,this.size=t.uncompressedSize,this.compressedSize=t.compressedSize,this.comment=t.comment,this.commentBytes=t.commentBytes,this.compressionMethod=t.compressionMethod,this.lastModDate=dq(t.lastModFileDate,t.lastModFileTime),this.isDirectory=t.uncompressedSize===0&&t.name.endsWith("/"),this.encrypted=!!(t.generalPurposeBitFlag&1),this.externalFileAttributes=t.externalFileAttributes,this.versionMadeBy=t.versionMadeBy}async blob(e="application/octet-stream"){return await Eq(this._reader,this._rawEntry,e)}async arrayBuffer(){return await Sq(this._reader,this._rawEntry)}async text(){let e=await this.arrayBuffer();return Cf(new Uint8Array(e))}async json(){let e=await this.text();return JSON.parse(e)}},Tg=22,pq=65535,gq=101010256,yq=101075792;async function Ks(r,e,t){return await r.read(e,t)}async function Cg(r,e,t,n){return r.sliceAsBlob?await r.sliceAsBlob(e,t,n):await r.read(e,t)}var mq={unsigned(){return 0}};function Rt(r,e){return r[e]+r[e+1]*256}function jt(r,e){return r[e]+r[e+1]*256+r[e+2]*65536+r[e+3]*16777216}function _o(r,e){return jt(r,e)+jt(r,e+4)*4294967296}var bq=new TextDecoder;function Cf(r,e){return Bf(r.buffer)&&(r=new Uint8Array(r)),bq.decode(r)}async function vq(r,e){let t=Math.min(Tg+pq,e),n=e-t,i=await Ks(r,n,t);for(let o=t-Tg;o>=0;--o){if(jt(i,o)!==gq)continue;let a=new Uint8Array(i.buffer,i.byteOffset+o,i.byteLength-o),c=Rt(a,4);if(c!==0)throw new Error(`multi-volume zip files are not supported. This is volume: ${c}`);let y=Rt(a,10),m=jt(a,12),_=jt(a,16),S=Rt(a,20),I=a.length-Tg;if(S!==I)throw new Error(`invalid comment length. expected: ${I}, actual: ${S}`);let E=new Uint8Array(a.buffer,a.byteOffset+22,S),C=Cf(E);return y===65535||_===4294967295?await xq(r,n+o,C,E):await m5(r,_,m,y,C,E)}throw new Error("could not find end of central directory. maybe not zip file")}var wq=117853008;async function xq(r,e,t,n){let i=e-20,o=await Ks(r,i,20);if(jt(o,0)!==wq)throw new Error("invalid zip64 end of central directory locator signature");let a=_o(o,8),c=await Ks(r,a,56);if(jt(c,0)!==yq)throw new Error("invalid zip64 end of central directory record signature");let y=_o(c,32),m=_o(c,40),_=_o(c,48);return m5(r,_,m,y,t,n)}var _q=33639248;async function m5(r,e,t,n,i,o){let a=0,c=await Ks(r,e,t),y=[];for(let _=0;_<n;++_){let S=c.subarray(a,a+46),I=jt(S,0);if(I!==_q)throw new Error(`invalid central directory file header signature: 0x${I.toString(16)}`);let E={versionMadeBy:Rt(S,4),versionNeededToExtract:Rt(S,6),generalPurposeBitFlag:Rt(S,8),compressionMethod:Rt(S,10),lastModFileTime:Rt(S,12),lastModFileDate:Rt(S,14),crc32:jt(S,16),compressedSize:jt(S,20),uncompressedSize:jt(S,24),fileNameLength:Rt(S,28),extraFieldLength:Rt(S,30),fileCommentLength:Rt(S,32),internalFileAttributes:Rt(S,36),externalFileAttributes:jt(S,38),relativeOffsetOfLocalHeader:jt(S,42)};if(E.generalPurposeBitFlag&64)throw new Error("strong encryption is not supported");a+=46;let C=c.subarray(a,a+E.fileNameLength+E.extraFieldLength+E.fileCommentLength);E.nameBytes=C.slice(0,E.fileNameLength),E.name=Cf(E.nameBytes);let N=E.fileNameLength+E.extraFieldLength,j=C.slice(E.fileNameLength,N);E.extraFields=[];let q=0;for(;q<j.length-3;){let Q=Rt(j,q+0),oe=Rt(j,q+2),k=q+4,L=k+oe;if(L>j.length)throw new Error("extra field length exceeds extra field buffer size");E.extraFields.push({id:Q,data:j.slice(k,L)}),q=L}if(E.commentBytes=C.slice(N,N+E.fileCommentLength),E.comment=Cf(E.commentBytes),a+=C.length,E.uncompressedSize===4294967295||E.compressedSize===4294967295||E.relativeOffsetOfLocalHeader===4294967295){let Q=E.extraFields.find(L=>L.id===1);if(!Q)throw new Error("expected zip64 extended information extra field");let oe=Q.data,k=0;if(E.uncompressedSize===4294967295){if(k+8>oe.length)throw new Error("zip64 extended information extra field does not include uncompressed size");E.uncompressedSize=_o(oe,k),k+=8}if(E.compressedSize===4294967295){if(k+8>oe.length)throw new Error("zip64 extended information extra field does not include compressed size");E.compressedSize=_o(oe,k),k+=8}if(E.relativeOffsetOfLocalHeader===4294967295){if(k+8>oe.length)throw new Error("zip64 extended information extra field does not include relative header offset");E.relativeOffsetOfLocalHeader=_o(oe,k),k+=8}}let D=E.extraFields.find(Q=>Q.id===28789&&Q.data.length>=6&&Q.data[0]===1&&jt(Q.data,1),mq.unsigned(E.nameBytes));if(D&&(E.fileName=Cf(D.data.slice(5))),E.compressionMethod===0){let Q=E.uncompressedSize;if((E.generalPurposeBitFlag&1)!==0&&(Q+=12),E.compressedSize!==Q)throw new Error(`compressed size mismatch for stored file: ${E.compressedSize} != ${Q}`)}y.push(E)}return{zip:{comment:i,commentBytes:o},entries:y.map(_=>new Og(r,_))}}async function b5(r,e){if(e.generalPurposeBitFlag&1)throw new Error("encrypted entries not supported");let t=await Ks(r,e.relativeOffsetOfLocalHeader,30),n=await r.getLength(),i=jt(t,0);if(i!==67324752)throw new Error(`invalid local file header signature: 0x${i.toString(16)}`);let o=Rt(t,26),a=Rt(t,28),c=e.relativeOffsetOfLocalHeader+t.length+o+a,y;if(e.compressionMethod===0)y=!1;else if(e.compressionMethod===8)y=!0;else throw new Error(`unsupported compression method: ${e.compressionMethod}`);let m=c,_=m+e.compressedSize;if(e.compressedSize!==0&&_>n)throw new Error(`file data overflows file bounds: ${m} +  ${e.compressedSize}  > ${n}`);return{decompress:y,fileDataStart:m}}async function Sq(r,e){let{decompress:t,fileDataStart:n}=await b5(r,e);if(!t){let a=await Ks(r,n,e.compressedSize);return rq(a)?a.buffer:a.slice().buffer}let i=await Cg(r,n,e.compressedSize);return await y5(i,e.uncompressedSize)}async function Eq(r,e,t){let{decompress:n,fileDataStart:i}=await b5(r,e);if(!n){let c=await Cg(r,i,e.compressedSize,t);return l5(c)?c:new Blob([Bf(c.buffer)?new Uint8Array(c):c],{type:t})}let o=await Cg(r,i,e.compressedSize);return await y5(o,e.uncompressedSize,t)}async function Aq(r){let e;if(typeof Blob<"u"&&r instanceof Blob)e=new Sl(r);else if(r instanceof ArrayBuffer||r&&r.buffer&&r.buffer instanceof ArrayBuffer)e=new _l(r);else if(Bf(r)||Bf(r.buffer))e=new _l(r);else if(typeof r=="string"){let n=await fetch(r);if(!n.ok)throw new Error(`failed http request ${r}, status: ${n.status}: ${n.statusText}`);let i=await n.blob();e=new Sl(i)}else if(typeof r.getLength=="function"&&typeof r.read=="function")e=r;else throw new Error("unsupported source type");let t=await e.getLength();if(t>Number.MAX_SAFE_INTEGER)throw new Error(`file too large. size: ${t}. Only file sizes up 4503599627370496 bytes are supported`);return await vq(e,t)}async function v5(r){let{zip:e,entries:t}=await Aq(r);return{zip:e,entries:Object.fromEntries(t.map(n=>[n.name,n]))}}var w5=bt(ka());var Vs=class{constructor(e){this.src=e;this.splitted=this.splitBuffer(e),this.logger.debug(`Buffer splitted into ${this.splitted.length} parts`)}logger=Ee.INST.create("WasmSrc");splitted;wasmBinary(){return this.splitted[0]}async sourceCode(){let{entries:e}=await v5(this.splitted[1]),t=new Map;for(let[n,i]of Object.entries(e)){if(i.isDirectory)continue;let o=await i.text();t.set(n,o)}return t}additionalCode(){return this.splitted.length==2?null:this.splitted[2].toString()}splitBuffer(e){let t="",n=parseInt(e.toString("utf8",0,1));this.logger.debug(`Number of elements: ${n}`);let i=e.length,o=0,a=0;for(let m=2;m<i;m++){let _=e.toString("utf8",m,m+1);if(_=="|"&&o++,o==n){a=m+1;break}t+=_}this.logger.debug("Parsed:",{header:t,dataStart:a});let c=t.split("|").map(m=>parseInt(m));this.logger.debug("Lengths",c);let y=[];for(let m of c){let _=w5.Buffer.alloc(m),S=a+m;e.copy(_,0,a,S),a=S,y.push(_)}return y}};var El=class{constructor(e,t,n){this.baseUrl=e;this.cache=n;this.baseUrl=Pu(e),this.contractDefinitionLoader=new Js(t,n),this.arweaveWrapper=new hn(t)}rLogger=Ee.INST.create("WarpGatewayContractDefinitionLoader");contractDefinitionLoader;arweaveWrapper;async load(e,t){if(!t&&this.cache?.contains(e))return this.rLogger.debug("WarpGatewayContractDefinitionLoader: Hit from cache!"),Promise.resolve(this.cache?.get(e));let n=rt.measure(),i=await this.doLoad(e,t);return this.rLogger.info(`Contract definition loaded in: ${n.elapsed()}`),this.cache?.put(e,i),i}async doLoad(e,t){try{let n=await fetch(`${this.baseUrl}/gateway/contract?txId=${e}${t?`&srcTxId=${t}`:""}`).then(i=>i.ok?i.json():Promise.reject(i)).catch(i=>{throw i.body?.message&&this.rLogger.error(i.body.message),new Error(`Unable to retrieve contract data. Warp gateway responded with status ${i.status}:${i.body?.message}`)});if(n.srcBinary!=null&&!(n.srcBinary instanceof Buffer)&&(n.srcBinary=Buffer.from(n.srcBinary.data)),n.srcBinary){let i=new Vs(n.srcBinary);n.srcBinary=i.wasmBinary();let o;n.srcTx?o=new x5.default({...n.srcTx}):o=await this.arweaveWrapper.tx(n.srcTxId);let a=JSON.parse(ur(o,"Wasm-Meta"));n.metadata=a}return n.contractType=n.src?"js":"wasm",n}catch(n){return this.rLogger.warn("Falling back to default contracts loader",n),await this.contractDefinitionLoader.doLoad(e,t)}}async loadContractSource(e){return await this.contractDefinitionLoader.loadContractSource(e)}type(){return"warp"}};var Al=class{constructor(e,t,n="custom"){this._arweave=e;this._cache=t;this._environment=n}_definitionLoader;_interactionsLoader;_executorFactory;_stateEvaluator;setDefinitionLoader(e){return this._definitionLoader=e,this}setInteractionsLoader(e){return this._interactionsLoader=e,this}setExecutorFactory(e){return this._executorFactory=e,this}setStateEvaluator(e){return this._stateEvaluator=e,this}overwriteSource(e){if(this._executorFactory==null)throw new Error("Set base ExecutorFactory first");return this._executorFactory=new wl(this._executorFactory,e),this.build()}useWarpGateway(e){return this._interactionsLoader=new Mf(new Zu(e.address,e.confirmationStatus,e.source)),this._definitionLoader=new El(e.address,this._arweave,new Bn),this}useArweaveGateway(){return this._definitionLoader=new Js(this._arweave,new Bn),this._interactionsLoader=new Mf(new Hs(this._arweave)),this}build(){return new Xs(this._arweave,this._cache,this._definitionLoader,this._interactionsLoader,this._executorFactory,this._stateEvaluator,this._environment)}};var Xs=class{constructor(e,t,n,i,o,a,c="custom"){this.arweave=e;this.levelDb=t;this.definitionLoader=n;this.interactionsLoader=i;this.executorFactory=o;this.stateEvaluator=a;this.environment=c;this.createContract=new gl(e,this),this.migrationTool=new bl(e,t),this.testing=new vl(e)}createContract;migrationTool;testing;static builder(e,t,n){return new Al(e,t,n)}contract(e,t,n){return new Ws(e,this,t,n)}pst(e){return new ml(e,this)}};var js="https://d1o5nlqr4okus2.cloudfront.net",_5={confirmationStatus:{notCorrupted:!0},source:null,address:js},Fq="./cache/warp",Pf={inMemory:!1,dbLocation:Fq},S5=class{static forLocal(e=1984,t=Fl.default.init({host:"localhost",port:e,protocol:"http"}),n={...Pf,inMemory:!0}){return this.customArweaveGw(t,n,"local")}static forTestnet(e=Fl.default.init({host:"testnet.redstone.tools",port:443,protocol:"https"}),t=Pf){return this.customArweaveGw(e,t,"testnet")}static forMainnet(e=Pf,t=!1,n=Fl.default.init({host:"arweave.net",port:443,protocol:"https"})){return t?this.customArweaveGw(n,e,"mainnet"):this.customWarpGw(n,_5,e,"mainnet")}static custom(e,t,n){let i=new bu({...t,dbLocation:`${t.dbLocation}/state`}),o=new vu(e,new al(e),new Bn),a=new el(e,i,[new oi]);return Xs.builder(e,i,n).setExecutorFactory(o).setStateEvaluator(a)}static customArweaveGw(e,t=Pf,n){return this.custom(e,t,n).useArweaveGateway().build()}static customWarpGw(e,t=_5,n=Pf,i){return this.custom(e,n,i).useWarpGateway(t).build()}};var hn=class{constructor(e){this.arweave=e;this.baseUrl=`${e.api.config.protocol}://${e.api.config.host}:${e.api.config.port}`,this.logger.debug("baseurl",this.baseUrl)}logger=Ee.INST.create("ArweaveWrapper");baseUrl;async warpGwInfo(){return await this.doFetchInfo(`${js}/gateway/arweave/info`)}async warpGwBlock(){return this.logger.debug("Calling warp gw block info"),await this.doFetchInfo(`${js}/gateway/arweave/block`)}async info(){return await this.doFetchInfo(`${this.baseUrl}/info`)}async gql(e,t){try{let n=JSON.stringify({query:e,variables:t});return{data:await fetch(`${this.baseUrl}/graphql`,{method:"POST",body:n,headers:{"Accept-Encoding":"gzip, deflate, br","Content-Type":"application/json",Accept:"application/json"}}).then(o=>o.ok?o.json():Promise.reject(o)).catch(o=>{throw o.body?.message&&this.logger.error(o.body.message),new Error(`Unable to retrieve gql page. ${o.status}: ${o.body?.message}`)}),status:200}}catch(n){throw this.logger.error("Error while loading gql",n),n}}async tx(e){let t=await fetch(`${this.baseUrl}/tx/${e}`).then(n=>n.ok?n.json():Promise.reject(n)).catch(n=>{throw n.body?.message&&this.logger.error(n.body.message),new Error(`Unable to retrieve tx ${e}. ${n.status}. ${n.body?.message}`)});return new A5.default({...t})}async txData(e){let t=await fetch(`${this.baseUrl}/${e}`);if(t.ok){let n=await t.arrayBuffer();return Bg.Buffer.from(n)}else{this.logger.warn(`Unable to load data from arweave.net/${e} endpoint, falling back to arweave.js`);let n=await this.arweave.transactions.getData(e,{decode:!0});return Bg.Buffer.from(n)}}async txDataString(e){let t=await this.txData(e);return E5.default.utils.bufferToString(t)}async doFetchInfo(e){try{return await fetch(e).then(n=>n.ok?n.json():Promise.reject(n)).catch(n=>{throw n.body?.message&&this.logger.error(n.body.message),new Error(`Unable to retrieve info. ${n.status}: ${n.body?.message}`)})}catch(t){throw this.logger.error("Error while loading info",t),t}}};var Tq=["application/javascript","application/wasm"],Js=class{constructor(e,t){this.arweave=e;this.cache=t;this.arweaveWrapper=new hn(e)}logger=Ee.INST.create("ContractDefinitionLoader");arweaveWrapper;async load(e,t){if(!t&&this.cache?.contains(e))return this.logger.debug("ContractDefinitionLoader: Hit from cache!"),Promise.resolve(this.cache?.get(e));let n=rt.measure(),i=await this.doLoad(e,t);return this.logger.info(`Contract definition loaded in: ${n.elapsed()}`),this.cache?.put(e,i),i}async doLoad(e,t){let n=rt.measure(),i=await this.arweaveWrapper.tx(e),o=await this.arweave.wallets.ownerToAddress(i.owner);this.logger.debug("Contract tx and owner",n.elapsed()),n.reset();let a=t||ur(i,"Contract-Src"),c=ur(i,"Min-Fee");this.logger.debug("Tags decoding",n.elapsed()),n.reset();let y=await this.evalInitialState(i);this.logger.debug("init state",y);let m=JSON.parse(await this.evalInitialState(i));this.logger.debug("Parsing src and init state",n.elapsed());let{src:_,srcBinary:S,srcWasmLang:I,contractType:E,metadata:C,srcTx:N}=await this.loadContractSource(a);return{txId:e,srcTxId:a,src:_,srcBinary:S,srcWasmLang:I,initState:m,minFee:c,owner:o,contractType:E,metadata:C,contractTx:i.toJSON(),srcTx:N}}async loadContractSource(e){let t=rt.measure(),n=await this.arweaveWrapper.tx(e),i=ur(n,"Content-Type");if(!Tq.includes(i))throw new Error(`Contract source content type ${i} not supported`);let o=i=="application/javascript"?"js":"wasm",a=o=="js"?await this.arweaveWrapper.txDataString(e):await this.arweaveWrapper.txData(e),c,y,m;if(o=="wasm"){if(y=new Vs(a),c=ur(n,"Wasm-Lang"),!c)throw new Error(`Wasm lang not set for wasm contract src ${e}`);m=JSON.parse(ur(n,"Wasm-Meta"))}return this.logger.debug("Contract src tx load",t.elapsed()),t.reset(),{src:o=="js"?a:null,srcBinary:o=="wasm"?y.wasmBinary():null,srcWasmLang:c,contractType:o,metadata:m,srcTx:n.toJSON()}}async evalInitialState(e){if(ur(e,"Init-State"))return ur(e,"Init-State");if(ur(e,"Init-State-TX")){let t=ur(e,"Init-State-TX");return this.arweaveWrapper.txDataString(t)}else return this.arweaveWrapper.txDataString(e.id)}type(){return"arweave"}};var F5=class{dtor};export{qs as AbstractContractHandler,Hs as ArweaveGatewayInteractionsLoader,hn as ArweaveWrapper,rt as Benchmark,Mf as CacheableInteractionsLoader,el as CacheableStateEvaluator,Nf as ConsoleLogger,Lf as ConsoleLoggerFactory,$s as ContractCallStack,Js as ContractDefinitionLoader,il as ContractError,F5 as ContractMetadata,Fq as DEFAULT_LEVEL_DB_LOCATION,gl as DefaultCreateContract,kf as DefaultEvaluationOptions,Qu as DefaultStateEvaluator,Pt as EvalStateResult,Ws as HandlerBasedContract,al as HandlerExecutorFactory,yl as InnerWritesEvaluator,Tf as InteractionCall,_g as InteractionInput,Z8 as InteractionOutput,Ef as JsHandlerApi,di as LexicographicalInteractionsSorter,P5 as LogLevelOrder,Ee as LoggerFactory,ml as PstContractImpl,wu as SmartWeaveError,o2 as SmartWeaveErrorType,nl as SmartWeaveGlobal,N5 as SmartWeaveTags,Us as SourceImpl,uk as SourceType,Ns as TagsParser,js as WARP_GW_URL,Xs as Warp,Al as WarpBuilder,S5 as WarpFactory,El as WarpGatewayContractDefinitionLoader,Zu as WarpGatewayInteractionsLoader,ol as WasmHandlerApi,Vs as WasmSrc,Rg as arrayToHex,LW as asc,kW as ascS,i5 as bundledTxsFilter,Wp as canBeCached,e5 as createDummyTx,Sg as createInteractionTx,yf as deepCopy,Pf as defaultCacheOptions,_5 as defaultWarpGwOptions,qW as desc,DW as descS,xo as emptyTransfer,Hp as genesisSortKey,ur as getTag,qr as indent,Cl as lvlToOrder,c_ as mapReplacer,NW as mapReviver,d8 as normalizeContractSource,Ru as sleep,dk as sortingFirst,pk as sortingLast,Pu as stripTrailingSlash,u_ as timeout,Zk as unpackTags};
/*
 * [js-sha512]{@link https://github.com/emn178/js-sha512}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2018
 * @license MIT
 */
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */
